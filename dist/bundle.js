!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.cymine=t()}}(function(){var define,module,exports;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(r){!function(i){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof r?i=r:"undefined"!=typeof self&&(i=self),i.imjs=t()}}(function(){var e;return function n(e,r,i){function o(s,u){if(!r[s]){if(!e[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,n,e,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],2:[function(t,n,o){(function(r){(function(){var o,a,s;t("./shiv"),n.exports=a=t("./service"),s=a.utils.merge,o=function(t,n){return"function"==typeof e&&e.amd?e(t,[],n):r[t]=n},o("imjs",a),"undefined"==typeof i?o("intermine",a):o("intermine",s(i,a))}).call(this)}).call(this,"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":10,"./shiv":12}],3:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m,b,w;o=t("url"),r=t("JSONStream"),f=t("http"),e=t("./constants").ACCEPT_HEADER,u=t("./version").VERSION,w=b=t("./util"),h=w.error,c=w.defer,v=w.merge,p=w.invoke,s="node-http/imjs-"+u,i=/,\s*$/,a="application/x-www-form-urlencoded",n.supports=function(){return!0},m=function(t,e,n){return function(t){var i,o;return null==t.pipe?n(new Error("response is not a stream")):(t.on("error",n),null!=t.statusCode&&200!==t.statusCode?(i=r.parse("error"),i.pause(),t.pipe(i),n([t.statusCode,i])):(o=r.parse("results.*"),o.pause(),t.pipe(o),e(o)))}},d=function(t,e,n,r){var i,o;return i=t.type,o=t.url,"Could not parse response to "+i+" "+o+': "'+e+'" ('+r+": "+n+")"},l=function(t,e,n){return function(r){var i;return i="",r.on("data",function(t){return i+=t}),r.on("error",n),r.on("end",function(){var o,a,s,u,l,c,h;if(o=r.headers["content-type"],"application/json"!==o&&!/json/.test(t.dataType)&&!/json/.test(t.data.format))return(l=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(l[2])):(u=200<=(h=r.statusCode)&&400>h?e:n)(i);if(""===i&&200===r.statusCode)return e();try{return c=JSON.parse(i),(s=c.error)?n(new Error(s)):e(c)}catch(f){return a=f,n(r.statusCode>=400?new Error(r.statusCode):new Error(d(t,i,a,r.statusCode)))}})}},n.iterReq=function(t,e,n){return function(r,i,o,a,s){var u,l,c,d,f;return null==i&&(i={}),null==o&&(o=function(){}),null==a&&(a=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(f=[{},i,o,a],i=f[0],o=f[1],a=f[2],s=f[3]),d=v({format:n},i,{query:r.toXML()}),u=function(t){return t.on("data",o),t.on("error",a),t.on("end",s),setTimeout(function(){return null!=t.resume?t.resume():void 0},3),t},c=function(t){var e,n;return n=t[0],e=t[1],e.on("data",a),e.on("error",a),e.on("end",s),null!=e.resume&&e.resume(),h(n)},l=this.makeRequest(t,e,d,null,!0),l.then(u,c),l}},y=function(t,e,n){var r;return r=setTimeout(function(){return e("Request timed out.")},t),n.then(function(){return cancelTimeout(r)})},g=function(t){var n,r,i,u,l,c,h,d;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(c=t.type)||"DELETE"===c)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=b.querystring(t.data);if(r=o.parse(t.url,!0),r.withCredentials=!1,r.method=t.type||"GET",null!=t.port&&(r.port=t.port),r.headers={"User-Agent":s,Accept:e[t.dataType]},("GET"===(h=r.method)||"DELETE"===h)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(t.contentType||a)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=t.headers){d=t.headers;for(n in d)l=d[n],r.headers[n]=l}return null!=t.auth&&(r.auth=t.auth),[r,i]},n.doReq=function(t,e){var n,r,i,o,a,s,u,h,d,p,v;p=c(),o=p.promise,u=p.resolve,a=p.reject,o.then(null,t.error);try{v=g(t),d=v[0],i=v[1],r=(e?m:l)(t,u,a),s=f.request(d,r),s.on("error",function(e){return a(new Error("Error: "+d.method+" "+t.url+": "+e))}),null!=i&&s.write(i),s.end(),h=t.timeout,h>0&&y(h,a,o)}catch(b){n=b,a(n)}return o}}).call(this)},{"./constants":1,"./util":15,"./version":16,JSONStream:18,http:50,url:47}],4:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g={}.hasOwnProperty,y=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},m=function(t,e){return function(){return t.apply(e,arguments)}};c=t("./util"),f=n,p=c.uniqBy,u=c.difference,s=c.defer,v=c.withCB,d=c.id,h=c.get,l=c.fold,a=c.concatMap,o=6e4,e=function(){function t(t){var e,n;for(e in t)g.call(t,e)&&(n=t[e],this[e]=n)}var e;return t.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},e=a(h("matches")),t.prototype.getMatches=function(t){var n;return"MATCH"===t?this.matches[t]:null!=(n=e(this.matches[t]))?n:[]},t.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(h("id")):this.allMatchIds()},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){var t;return(t=l(function(t){return function(e,n){return e.concat(t.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},t}(),i=function(){function t(t){var e,n;for(e in t)g.call(t,e)&&(n=t[e],this[e]=n)}var e,n,r,i;return i=p(d),e=a(d),n=function(t){var n,r;return e(function(){var e,i;e=t.identifiers,i=[];for(n in e)r=e[n],i.push(r);return i}())},r=function(t,e){return null==e||y.call(n(t),e)>=0},t.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},t.prototype.getIdentifierStats=function(){var t,n,r,o,a,s;return s=function(t){var n,r;return i(e(function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)r=t[e],o.push(function(){var t;t=[];for(n in null!=r?r.identifiers:void 0)t.push(n);return t}());return o}()))},o=s(this.getMatches("MATCH")),n=s(this.getMatches()),a=o.length,t=n.length,r=u(n,o).length,{matches:a,all:t,issues:r}},t.prototype.getObjectStats=function(){var t,e,r,i;return i=this.goodMatchIds().length,t=this.allMatchIds().length,e=function(){var t;t=[];for(d in this)g.call(this,d)&&(r=this[d],y.call(n(r),"MATCH")<0&&t.push(d));return t}.call(this).length,{matches:i,all:t,issues:e}},t.prototype.getMatches=function(t){var e,n;n=[];for(d in this)g.call(this,d)&&(e=this[d],r(e,t)&&n.push(e));return n},t.prototype.getMatchIds=function(t){var e,n;n=[];for(d in this)g.call(this,d)&&(e=this[d],r(e,t)&&n.push(d));return n},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){return this.getMatchIds()},t}(),r=function(){function t(t,e){this.uid=t,this.service=e,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return t.prototype.fetchStatus=function(t){return v(t,this.service.get("ids/"+this.uid+"/status").then(h("status")))},t.prototype.fetchErrorMessage=function(t){return v(t,this.service.get("ids/"+this.uid+"/status").then(h("message")))},t.prototype.fetchResults=function(t){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(h("results")),r=this.service.fetchVersion(),r.then(function(t){return n.then(function(n){return t>=16?new e(n):new i(n)})})},t.prototype.del=function(t){return v(t,this.service.makeRequest("DELETE","ids/"+this.uid))},t.prototype.decay=50,t.prototype.poll=function(t,e,n){var r,i,a,u,l,c,h;return h=s(),a=h.promise,l=h.resolve,u=h.reject,a.then(t,e),i=null!=n?n:function(){},c=this.fetchStatus(),c.then(null,u),r=this.decay,this.decay=Math.min(o,1.25*r),c.then(function(t){return function(e){switch(i(e),e){case"SUCCESS":return t.fetchResults().then(l,u);case"ERROR":return t.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return t.poll(l,u,i)},r)}}}(this)),a},t}(),r.prototype.wait=r.prototype.poll,r.create=function(t){return function(e){return new r(e,t)}},f.IDResolutionJob=r,f.CategoryResults=e,f.IdResults=i}).call(this)},{"./util":15}],5:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};v=t("./util"),c=n,f=v.merge,g=v.withCB,u=v.get,h=v.invoke,i=v.REQUIRES_VERSION,p=v.set,s=v.dejoin,a="list/tags",o="lists/shares",e="lists/invitations",d=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},l=function(t){return t.substr(t.indexOf(":")+1)},r=function(){function t(t,e){var n,r;this.service=e,this._updateTags=y(this._updateTags,this),this.hasTag=y(this.hasTag,this);for(n in t)m.call(t,n)&&(r=t[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(d).map(l)}var n;return t.prototype.hasTag=function(t){return b.call(this.tags,t)>=0},t.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},t.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},n=function(t){var e;return e=t.tags},t.prototype._updateTags=function(t,e){return null==t?(this.tags=e.slice(),this.folders=this.tags.filter(d).map(l)):void 0},t.prototype.fetchTags=function(t){return g(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},t.prototype.addTags=function(t,e){var r;return r={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("POST","list/tags",r).then(n))},t.prototype.removeTags=function(t,e){var r;return r={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",r).then(n))},t.prototype.contents=function(t){return g(t,this.query().then(s).then(h("records")))},t.prototype.rename=function(t,e){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(u("listName")).then(function(t){return function(e){return t.name=e}}(this)).then(this.service.fetchList),g(e,n)},t.prototype.copy=function(t,e){var n,r,i,o,a,s,l;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&v.isFunction(t)&&(a=[{},t],t=a[0],e=a[1]),"string"==typeof t&&(t={name:t}),r=n=null!=(s=t.name)?s:""+this.name+"_copy",o=this.tags.concat(null!=(l=t.tags)?l:[]),i=this.query(["id"]),g(e,this.service.fetchLists().then(h("map",u("name"))).then(function(t){return function(e){var a;for(a=1;b.call(e,r)>=0;)r=""+n+"-"+a++;return i.then(h("saveAsList",{name:r,tags:o,description:t.description}))}}(this)))},t.prototype.enrichment=function(t,e){return this.service.enrichment(f({list:this.name},t),e)},t.prototype.shareWithUser=function(t,e){return g(e,this.service.post(o,{list:this.name,"with":t}))},t.prototype.inviteUserToShare=function(t,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),g(r,this.service.post(e,{list:this.name,to:t,notify:!!n}))},t}(),c.List=r}).call(this)},{"./util":15}],6:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d=function(t,e){return function(){return t.apply(e,arguments)}},f=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("./table").Table,i=t("./path").PathInfo,h=t("./util"),u=h.flatten,s=h.find,a=h.error,c=h.omap,l=n,e=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function t(t){var n,r;this.name=t.name,n=t.classes,this.findCommonType=d(this.findCommonType,this),this.findSharedAncestor=d(this.findSharedAncestor,this),this.getAncestorsOf=d(this.getAncestorsOf,this),this.getSubclassesOf=d(this.getSubclassesOf,this),this.getPathInfo=d(this.getPathInfo,this),r=c(function(t){return function(e,n){return[e,new o(n,t)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=e}return t.prototype.getPathInfo=function(t,e){return i.parse(this,t,e)},t.prototype.getSubclassesOf=function(t){var e,n,r,i,o,a;if(n=t&&t.name?t:this.classes[t],null==n)throw new Error(""+t+" is not a table");r=[n.name],o=this.classes;for(i in o)e=o[i],a=n.name,f.call(e.parents(),a)>=0&&(r=r.concat(this.getSubclassesOf(e)));return r},t.prototype.getAncestorsOf=function(t){var e,n;if(e=t&&t.name?t:this.classes[t],null==e)throw new Error(""+t+" is not a table");return n=e.parents(),n.filter(function(t){return function(e){return t.classes[e]}}(this)).reduce(function(t){return function(e,n){return e.concat(t.getAncestorsOf(n))}}(this),n)},t.prototype.findSharedAncestor=function(t,e){var n,r,i;return null===e||null===t?null:t===e?t:(n=this.getAncestorsOf(t),f.call(n,e)>=0?e:(r=this.getAncestorsOf(e),f.call(r,t)>=0?t:i=s(n,function(t){return f.call(r,t)>=0})))},t.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},t}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(t){var e;try{return new r(t)}catch(n){throw e=n,new Error("Error loading model: "+e)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],l.Model=r}).call(this)},{"./path":7,"./table":13,"./util":15}],7:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g=function(t,e){return function(){return t.apply(e,arguments)}},y=[].slice,m=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};c=n,p=t("./util"),v=p.withCB,a=p.concatMap,l=p.get,o=p.any,d=p.set,s=p.copy,f=p.success,u=p.error,e={},r={},h=function(t,e,n){var r,i,o;return""+(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(o=t.service)?o.root:void 0)+"|"+e+":"+function(){var t;t=[];for(r in n)i=n[r],t.push(""+r+"="+i);return t}()},i=function(){function t(t){var e,n;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?y.call(n,0,e=n.length-1):(e=0,[]),this.end=n[e++],null==this.ident&&(this.ident=h(this.model,this,this.subclasses))}return t.prototype.isRoot=function(){return 0===this.descriptors.length},t.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},t.prototype.isClass=function(){return this.isRoot()||this.isReference()},t.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},t.prototype.isReverseReference=function(){var t,e,n,r,i;return this.isReference()&&this.mid.length>0?(i=this.end,r=i.reverseReference,n=i.referencedType,e=this.getParent(),t=e.getParent(),null!=n&&t.isa(n)&&e.end.name===r):!1},t.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)?t:!1},t.prototype.containsCollection=function(){return o(this.descriptors,function(t){return t.isCollection})},t.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},t.prototype.getParent=function(){var e;if(this.isRoot())throw new Error("Root paths do not have parents");return e={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new t(e)},t.prototype.append=function(e){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof e?this.getType().fields[e]:e,null==r)throw new Error(""+e+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new t(n)},t.prototype.isa=function(t){var e,n;return null==t?!1:this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t,n=this.getType(),e===n.name||m.call(this.model.getAncestorsOf(n),e)>=0)},t.prototype.getDisplayName=function(t){var n,r,i,o;return(r=this.displayName)?f(r):(null==this.namePromise&&(this.namePromise=(n=e[this.ident])?f(n):this.isRoot()&&this.root.displayName?f(this.root.displayName):null==this.model.service?u("No service"):(o="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),i=d({format:"json"})(s(this.subclasses)),this.model.service.get(o,i).then(l("display")).then(function(t){return function(n){var r;return null!=e[r=t.ident]?e[r]:e[r]=n}}(this)))),v(t,this.namePromise))},t.prototype.getChildNodes=function(){var t,e,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(e in r)t=r[e],i.push(this.append(t));return i},t.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},t.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},t.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},t.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},t}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(t,e,n){var o,a,s,u,l,c,d,f,p;return null==n&&(n={}),l=h(t,e,n),(o=r[l])?o:(f=(e+"").split("."),p=a=t.classes[f.shift()],c=p.name,s=function(){var r,i,o,s;for(s=[],r=0,i=f.length;i>r;r++){if(d=f[r],u=(null!=a?a.fields[d]:void 0)||(null!=(o=a=t.classes[n[c]])?o.fields[d]:void 0),!u)throw new Error("Could not find "+d+" in "+a+" when parsing "+e);c+="."+d,a=t.classes[u.type||u.referencedType],s.push(u)}return s}(),r[l]=new i({root:p,model:t,descriptors:s,subclasses:n,ident:l}))},i.flushCache=function(){return r={},e={}},c.PathInfo=i}).call(this)},{"./util":15}],8:[function(t,e,n){(function(){var n;n=t("es6-promise").Promise,e.exports=n}).call(this)},{"es6-promise":22}],9:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m,b,w,x,_,E,S,T,k,C,P,D,O,N,M,I,L,R,B,A,j,q,z,F,V,U,X,Y,W,H,$,G,Z,K,J,Q=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},tt=function(t,e){return function(){return t.apply(e,arguments)}},et=[].slice,nt={}.hasOwnProperty;i=t("backbone-events-standalone"),C=n,C.xml=t("./xml"),X=t("./util"),s=X.REQUIRES_VERSION,Y=X.withCB,N=X.merge,w=X.filter,B=X.partition,x=X.fold,v=X.concatMap,T=X.id,_=X.get,O=X.invoke,F=X.querystring,E=function(t){var e;if(e=null!=(null!=t?t.toLowerCase:void 0)?a.OP_DICT[t.toLowerCase()]:null,!e)throw new Error("Illegal constraint operator: "+t);return e},e=["path","op","code"],l=e.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(t){return X.compose(t.fetchList,_("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},p=function(t){return null!=t?"<value>"+X.escape(t)+"</value>":"<nullValue/>"},h=function(t,e){var n,r;return function(){var i;i=[];for(n in t)r=t[n],Q.call(e,n)>=0&&i.push(""+n+'="'+X.escape(r)+'" ');return i}().join("")},R=function(t){return"<constraint "+h(t,e)+"/>"},V=function(t){return"<constraint "+h(t,["path","type"])+"/>"},j=function(t){return"<constraint "+h(t,l)+"/>"},I=function(t){return"<constraint "+h(t,e)+">"+v(p)(t.values)+"</constraint>"},k=function(t){return"<constraint "+h(t,e)+'ids="'+t.ids.join(",")+'"/>'},d=function(t){var e;return null!=t.values?I(t):null!=t.ids?k(t):null==t.op?V(t):(e=t.op,Q.call(a.NULL_OPS,e)>=0?R(t):j(t))},S=function(t){return t.replace(/^[^\.]+\./,"")},g=function(t){var e,n,r,i,o,a,s,u,l,c,h;return a=t.path,l=t.type,o=t.op,c=t.value,h=t.values,r=t.extraValue,i=t.ids,e=t.code,n=t.editable,u=t.switched,s=t.switchable,i=null!=i?i.slice():void 0,h=null!=h?h.slice():void 0,L({path:a,type:l,op:o,value:c,values:h,extraValue:r,ids:i,code:e,editable:n,switched:u,switchable:s})},f=function(t){var e;return e=g(t),e.path=S(e.path),e},L=function(t){var e,n;for(e in t)n=t[e],null==n&&delete t[e];return t},m=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},D=function(t,e){var n,r,i,o,s,u,l;if(n={path:t},null===e)n.op="IS NULL";else if(X.isArray(e))n.op="ONE OF",n.values=e;else if("string"==(u=typeof e)||"number"===u||"boolean"===u)l="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,l)>=0?n.op=e:(n.op="=",n.value=e);else if(i=function(){var t;t=[];for(r in e)s=e[r],t.push(r);return t}(),Q.call(i,"isa")>=0)X.isArray(e.isa)?(n.op=r,n.values=e.isa):n.type=e.isa;else{Q.call(i,"extraValue")>=0&&(n.extraValue=e.extraValue);for(r in e)o=e[r],"extraValue"!==r&&(n.op=r,X.isArray(o)?n.values=o:n.value=o)}return n},P=function(t){var e,n,r,i;return t=t.slice(),n={path:t.shift()},1===t.length?(e=t[0],i="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,i)>=0?n.op=e:n.type=e):t.length>=2&&(n.op=t[0],r=t[1],X.isArray(r)?n.values=r:n.value=r,3===t.length&&(n.extraValue=t[2])),n},z=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(""+e.path+" "+e.direction);return i}().join(" ")},q=function(t){var e,n,r,i,o,a,s;if(null==t)return[];for(n=t.split(/\s+/),r=function(){var t,e,r;for(r=[],i=t=0,e=n.length/2;e>=0?e>t:t>e;i=e>=0?++t:--t)r.push(2*i);return r}(),s=[],o=0,a=r.length;a>o;o++)e=r[o],s.push([n[e],n[e+1]]);return s},A=function(){var t,e;return e=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],this.isRelevant(t.path)&&i.push(t);return i}.call(this),e.length!==this.sortOrder.length?this.trigger("change:sortorder change:orderby",this.sortOrder.slice()):void 0},a=function(){function t(t,e,n){var r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m;for(u=null!=n?n:{},r=u.model,o=u.summaryFields,this.addConstraint=tt(this.addConstraint,this),this.expandStar=tt(this.expandStar,this),this.adjustPath=tt(this.adjustPath,this),this.select=tt(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=X.copy(null!=(l=null!=(h=t.displayNames)?h:t.aliases)?l:{}),d=["name","title","comment","description","type"],a=0,s=d.length;s>a;a++)i=d[a],null!=t[i]&&(this[i]=t[i]);this.service=null!=e?e:{},this.model=null!=(f=null!=r?r:t.model)?f:{},this.summaryFields=null!=(p=null!=o?o:t.summaryFields)?p:{},this.root=null!=(v=t.root)?v:t.from,this.maxRows=null!=(g=null!=(y=t.size)?y:t.limit)?g:t.maxRows,this.start=null!=(m=null!=(c=t.start)?c:t.offset)?m:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",A,this)}var e,n,i,a,u,l,c,p,b;return t.JOIN_STYLES=["INNER","OUTER"],t.BIO_FORMATS=["gff3","fasta","bed"],t.NULL_OPS=["IS NULL","IS NOT NULL"],t.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],t.MULTIVALUE_OPS=["ONE OF","NONE OF"],t.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],t.TERNARY_OPS=["LOOKUP"],t.LOOP_OPS=["=","!="],t.LIST_OPS=["IN","NOT IN"],t.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],c=function(t,e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],t.hasAttribute(n)&&o.push([n,t.getAttribute(n)]);return o},i=function(t,e){var n,r,i,o,a;for(o=t.getElementsByTagName(e),a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(n);return a},b=function(t){return function(e){return e.getAttribute(t)}},t.fromXML=function(t){var e,r,o,a,s,l,h;if(r=C.xml.parse(t),l=i(r,"query")[0]||i(r,"template")[0],!l)throw new Error("no query in xml");return a=b("path"),h=b("style"),s=X.pairsToObj(c(l,u)),s.view=s.view.split(/\s+/),s.sortOrder=q(s.sortOrder),s.joins=function(){var t,e,n,r;for(n=i(l,"join"),r=[],t=0,e=n.length;e>t;t++)o=n[t],"OUTER"===h(o)&&r.push(a(o));return r}(),s.constraints=function(){var t,r,o,a;for(o=i(l,"constraint"),a=[],t=0,r=o.length;r>t;t++)e=o[t],a.push(function(t){var e,r,o,a,s;return e=X.pairsToObj(c(t,n)),null!=e.ids&&(e.ids=function(){var t,n,r,i;for(r=e.ids.split(","),i=[],t=0,n=r.length;n>t;t++)s=r[t],i.push(parseInt(s,10));return i}()),a=i(t,"value"),a.length&&(e.values=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)o=a[t],n.push(function(){var t,e,n,i;for(n=o.childNodes,i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r.data);return i}().join(""));return n}()),e}(e));return a}(),s},t.prototype.constraints=[],t.prototype.views=[],t.prototype.joins={},t.prototype.constraintLogic="",t.prototype.sortOrder="",t.prototype.name=null,t.prototype.title=null,t.prototype.comment=null,t.prototype.description=null,t.prototype.removeFromSelect=function(t){var e,n,r,i;return null==t&&(t=[]),t=X.stringList(t),e=X.compose(this.expandStar,this.adjustPath),t=X.flatten(function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)r=t[n],o.push(e(r));return o}()),this.sortOrder=function(){var e,r,i,o,a;for(i=this.sortOrder,a=[],e=0,r=i.length;r>e;e++)n=i[e],o=n.path,Q.call(t,o)>=0||a.push(n);return a}.call(this),this.views=function(){var e,n,r,o;for(r=this.views,o=[],e=0,n=r.length;n>e;e++)i=r[e],Q.call(t,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",t),this.trigger("change:views",this.views),this.trigger("change",this.views)},t.prototype.removeConstraint=function(t,e){var n,r,i,o;if(null==e&&(e=!1),i=this.constraints,r="string"==typeof t?function(e){return e.code===t}:function(e){var n,r;return e.path===t.path&&e.op===t.op&&e.value===t.value&&e.extraValue===t.extraValue&&t.type===e.type&&(null!=(n=e.values)?n.join("%%"):void 0)===(null!=(r=t.values)?r.join("%%"):void 0)},o=function(){var t,e,o;for(o=[],t=0,e=i.length;e>t;t++)n=i[t],r(n)||o.push(n);return o}(),o.length!==i.length-1)throw new Error(m(i,o));return this.constraints=o,e?void 0:(this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",X.find(i,r)))},t.prototype.addToSelect=function(t,e){var n,r,i,o,a,s,u,l;if(null==t&&(t=[]),null==e&&(e={}),t=X.stringList(t),r=X.compose(this.expandStar,this.adjustPath),o=X.flatten(function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)a=t[e],i.push(r(a));return i}()),n=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)i=o[t],Q.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)i=o[t],function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)s=o[t],s===i&&n.push(s);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),e.silent?e.events=(null!=(l=e.events)?l:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},t.prototype.select=function(t,e){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(i){n=i,this.views=r,X.error(n)}return this},t.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},t.prototype.getPossiblePaths=function(t,e,n){var r,i,o,a,s;return null==t&&(t=3),null==e&&(e=!0),null==n&&(n=null),a="string"==typeof n?function(t){return t[n]()}:n,r=function(t){return function(n,i){var o,a,s,u,l,c;return l=t.getPathInfo(n),!e&&l.isReverseReference()?[]:l.isAttribute()?[l]:(o=l.getType(),c=v(function(t){return r(""+n+"."+t.name,i-1)}),u=o&&i>0?c(function(){var t,e;t=o.fields,e=[];for(s in t)a=t[s],e.push(a);return e}()):[],[l].concat(u))}}(this),i=""+t+"-"+e,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=r(this.root,t)).slice(),null!=a?o.filter(a):o},t.prototype.getPathInfo=function(t){var e,n,r;return e=this.adjustPath(t),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(e,this.getSubclasses()):void 0,n&&e in this.displayNames&&(n.displayName=this.displayNames[e]),n},t.prototype.makePath=t.prototype.getPathInfo,p=function(t){return[t.path,t.type]},l=X.compose(X.pairsToObj,X.map(p),w(_("type"))),t.prototype.getSubclasses=function(){return l(this.constraints)},t.prototype.getType=function(t){return this.getPathInfo(t).getType()},t.prototype.getViewNodes=function(){var t,e;return e=function(t){return function(e){return t.getPathInfo(e).getParent()}}(this),X.uniqBy(String,function(){var n,r,i,o;for(i=this.views,o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(e(t));return o}.call(this))},t.prototype.isInView=function(t){var e,n,r;if(e=this.getPathInfo(t),!e)throw new Error("Invalid path: "+t);return e.isAttribute()?(r=e.toString(),Q.call(this.views,r)>=0):(n=e.toString(),X.any(this.getViewNodes(),function(t){return t.toString()===n}))},t.prototype.isConstrained=function(t,e){var n,r;if(null==e&&(e=!1),n=this.getPathInfo(t),!n)throw new Error("Invalid path: "+t);return r=function(t){return null!=t.op&&t.path===n.toString()},!n.isAttribute()&&e&&(r=function(t){return function(e){return null!=e.op&&(e.path===n.toString()||n.equals(t.getPathInfo(e.path).getParent()));

}}(this)),X.any(this.constraints,r)},t.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},t.prototype.getQueryNodes=function(){var t,e,n,r;return r=this.getViewNodes(),e=function(){var e,r,i,o;for(i=this.constraints,o=[],e=0,r=i.length;r>e;e++)t=i[e],null==t.type&&(n=this.getPathInfo(t.path),o.push(n.isAttribute()?n.getParent():n));return o}.call(this),X.uniqBy(String,r.concat(e))},t.prototype.isInQuery=function(t){var e,n,r,i,o,a;if(n=this.getPathInfo(t)){for(r=n.toPathString(),a=this.views.concat(function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;n>t;t++)e=r[t],null==e.type&&i.push(e.path);return i}.call(this)),i=0,o=a.length;o>i;i++)if(t=a[i],0===t.indexOf(r))return!0;return!1}return!0},t.prototype.isRelevant=function(t){var e,n,r;return n=this.getPathInfo(t),n.isAttribute()&&(n=n.getParent()),r=n.toString(),e=this.getViewNodes(),X.any(e,function(t){return t.toPathString()===r})},t.prototype.expandStar=function(t){var e,n,r,i,o,a,s,u;if(/\*$/.test(t))if(s=t.substr(0,t.lastIndexOf(".")),r=function(t){return s+t},n=this.getType(s),/\.\*$/.test(t)){if(n&&this.summaryFields[n.name])return i=X.compose(r,y),function(){var t,e,r,a;for(r=this.summaryFields[n.name],a=[],t=0,e=r.length;e>t;t++)o=r[t],this.hasView(o)||a.push(i(o));return a}.call(this)}else if(/\.\*\*$/.test(t))return u=this.expandStar(s+".*"),e=function(){var t;t=[];for(a in n.attributes)t.push(r("."+a));return t}(),X.uniqBy(T,u.concat(e));return t},t.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},t.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),Q.call(this.views,e)>=0)},t.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},t.prototype.appendToList=function(t,e){var n,r,i,a,s;return(null!=t?t.name:void 0)?(n=t.name,s=function(e,n){return null==e?t.size=n.size:void 0}):(n=String(t),s=null),a=this.makeListQuery(),i={listName:n,query:a.toXML()},r=o(this.service),Y(s,e,this.service.post("query/append/tolist",i).then(r))},t.prototype.selectPreservingImpliedConstraints=function(t){var e,n,r,i,o;for(null==t&&(t=[]),n=this.clone(),n.select(t),o=this.getViewNodes(),r=0,i=o.length;i>r;r++)e=o[r],this.isOuterJoined(e)||n.isInView(e||n.isConstrained(e))||null==e.getEndClass().fields.id||n.addConstraint([e.append("id"),"IS NOT NULL"]);return n},t.prototype.makeListQuery=function(){var t,e;return t=this.views.slice(),1===t.length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},t.prototype.saveAsList=function(t,e){var n,r;return r=this.makeListQuery(),n=X.copy(t),n.listName=n.listName||n.name,n.query=r.toXML(),t.tags&&(n.tags=t.tags.join(";")),Y(e,this.service.post("query/tolist",n).then(o(this.service)))},t.prototype.summarise=function(t,e,n){return this.filterSummary(t,"",e,n)},t.prototype.summarize=function(){var t;return t=1<=arguments.length?et.call(arguments,0):[],this.summarise.apply(this,t)},a=function(t){var e,n,r,i,o,a,s;for(e=null!=(null!=(a=t.results[0])?a.max:void 0),s=t.results,i=0,o=s.length;o>i;i++)n=s[i],n.count=parseInt(n.count,10);return r={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(r=N(r,t.results[0])),t.stats=r,t},t.prototype.filterSummary=function(t,e,n,r){var i,o,s;return null==r&&(r=function(){}),X.isFunction(n)&&(s=[n,null],r=s[0],n=s[1]),t=this.adjustPath(t),o=this.clone(),Q.call(o.views,t)<0&&o.views.push(t),i={query:o.toXML(),summaryPath:t,format:"jsonrows"},n&&(i.size=n),e&&(i.filterTerm=e),Y(r,this.service.post("query/results",i).then(a))},t.prototype.clone=function(e){var n,r,i,o;if(n=new t(this,this.service),null==n._callbacks&&(n._callbacks={}),e){o=this._callbacks;for(r in o)nt.call(o,r)&&(i=o[r],n._callbacks[r]=i);n.off("change:views",A,this)}return n},t.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},t.prototype.previous=function(){var t;return t=this.clone(),t.start=this.maxRows?this.start-this.maxRows:0,t},t.prototype.getSortDirection=function(t){var e,n;if(e=this.adjustPath(t),!this.isInQuery(e)&&!this.isRelevant(e))throw new Error(""+t+" is not in the query");return n=X.find(this.sortOrder,function(t){var n;return n=t.path,e===n}),null!=n?n.direction:void 0},t.prototype.isOuterJoined=function(t){var e,n,r;t=this.adjustPath(t),r=this.joins;for(n in r)if(e=r[n],"OUTER"===e&&0===t.indexOf(n))return!0;return!1},t.prototype.getOuterJoin=function(t){var e,n;return t=this.adjustPath(t),e=function(){var t;t=[];for(n in this.joins)t.push(n);return t}.call(this).sort(function(t,e){return e.length-t.length}),X.find(e,function(e){return function(n){return"OUTER"===e.joins[n]&&0===t.indexOf(n)}}(this))},t.prototype._parse_sort_order=function(t){var e,n,r,i,o,a;if(null==t)throw new Error("No input");if("string"==typeof t)i={path:t,direction:"ASC"};else if(X.isArray(t))r=t[0],e=t[1],i={path:r,direction:e};else if(null==t.path){for(n in t)o=t[n],a=[n,o],r=a[0],e=a[1];i={path:r,direction:e}}else r=t.path,e=t.direction,i={path:r,direction:e};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},t.prototype.addOrSetSortOrder=function(t){var e,n;return t=this._parse_sort_order(t),e=this.getSortDirection(t.path),null==e?this.addSortOrder(t):e!==t.direction&&(n=X.find(this.sortOrder,function(e){var n;return n=e.path,n===t.path}),n.direction=t.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},t.prototype.addSortOrder=function(t,e){var n;return n=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),n?void 0:(this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change"))},t.prototype.orderBy=function(t,e){var n,r,i,o,a,s,u,l;for(null==e&&(e={}),o=this.sortOrder.slice(),this.sortOrder=[],s=0,u=t.length;u>s;s++)i=t[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var t,e,n,i,o;for(n=this.sortOrder,o=[],t=0,e=n.length;e>t;t++)i=n[t],a=i.path,r=i.direction,o.push({path:a,direction:r});return o}.call(this),this.trigger("set:sortorder",n),z(o)!==this.getSorting()&&(e.silent?e.events=(null!=(l=e.events)?l:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},t.prototype.addJoins=function(t){var e,n,r,i,o,a,s;if(X.isArray(t)){for(a=[],i=0,o=t.length;o>i;i++)e=t[i],a.push(this.addJoin(e));return a}s=[];for(n in t)r=t[n],s.push(this.addJoin({path:n,style:r}));return s},t.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},t.prototype.setJoinStyle=function(e,n){if(null==n&&(n="OUTER"),e=this.adjustPath(e),n=n.toUpperCase(),Q.call(t.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[e]!==n&&(this.joins[e]=n,this.trigger("change:joins",{path:e,style:n}),this.trigger("change")),this},t.prototype.addConstraints=function(t,e){var n,r,i,o,a,s,u;if(null==e&&(e="and"),this.__silent__=!0,i=this.constraintLogic,X.isArray(t))for(s=0,u=t.length;u>s;s++)n=t[s],this.addConstraint(n,e);else{a=function(t){return function(n,r){return t.addConstraint(D(n,r),e)}}(this);for(o in t)r=t[o],a(o,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},t.prototype.addConstraint=function(t,e){var n,i,o,a,s,u,l;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return t=X.isArray(t)?P(t):g(t),"OFF"===t.switched?this:(t.path=this.adjustPath(t.path),null==t.type&&(t.op=E(t.op)),this.constraints.push(t),o="or"===e||(null!=(l=this.constraintLogic)?l.length:void 0)>0,a=this.constraints.length,u=this.constraintLogic,o&&(s=2===a?""+r[0]+" "+e+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var t,e,i;for(i=[],n=t=0,e=a-2;e>=0?e>=t:t>=e;n=e>=0?++t:--t)i.push(r[n]);return i}().join(" and ")),"("+i+") "+e+" "+r[a-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},t.prototype.getSorting=function(){return z(this.sortOrder)},t.prototype.getConstraintXML=function(){var t,e;return e=function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;n>e;e++)t=r[e],(null==t.type||this.isInQuery(t.path))&&i.push(t);return i}.call(this),e.length?v(d)(v(T)(B(function(t){return null!=t.type})(e))):""},t.prototype.getJoinXML=function(){var t,e,n;return n=function(){var n,r;n=this.joins,r=[];for(t in n)e=n[t],this.isInQuery(t)&&"OUTER"===e&&r.push('<join path="'+t+'" style="OUTER"/>');return r}.call(this),n.join("")},t.prototype.toXML=function(){var t,e,n,r;return t={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(t.name=this.name),e=function(){var e;e=[];for(n in t)r=t[n],r&&e.push(n+'="'+r+'"');return e}().join(" "),"<query "+e+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},t.prototype.toJSON=function(){var t,e,n,r,i;return L({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,n,r;for(n=this.views,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(S(i));return r}.call(this),orderBy:function(){var t,r,i,o,a;for(i=this.sortOrder,a=[],t=0,r=i.length;r>t;t++)o=i[t],n=o.path,e=o.direction,a.push({path:S(n),direction:e});return a}.call(this),joins:function(){var t,e;t=this.joins,e=[];for(n in t)r=t[n],"OUTER"===r&&e.push(S(n));return e}.call(this),where:function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(f(t));return i}.call(this)})},t.prototype.fetchCode=function(t,e){var n;return n={query:this.toXML(),lang:t},Y(e,this.service.post("query/code",n).then(this.service.VERIFIER).then(_("code")))},t.prototype.setName=function(t){this.name=t},t.prototype.save=function(t,e){return s(this.service,16,function(n){return function(){var r,i;return X.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(e,n.service.authorise(r)).then(function(t){return n.service.doReq(t)}).then(function(t){return t.queries})}}(this))},t.prototype.store=function(t,e){return s(this.service,16,function(n){return function(){var r,i,o,a;return X.isFunction(t)&&(a=[null,t],t=a[0],e=a[1]),null!=t&&n.setName(t),o=function(t,e){return null==t?n.setName(e):void 0},r=X.compose(_(n.name),_("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(e,o,n.service.authorise(i)).then(function(t){return n.service.doReq(t)}).then(r)}}(this))},t.prototype.saveAsTemplate=function(t,e){return s(this.service,16,function(n){return function(){var r,i;if(X.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+h(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},Y(e,n.service.authorise(r).then(function(t){return n.service.doReq(t)}))}}(this))},t.prototype.getCodeURI=function(t){var e,n;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(e.token=this.service.token),""+this.service.root+"query/code?"+F(e)},t.prototype.getExportURI=function(e,n){var r,i;return null==e&&(e="tab"),null==n&&(n={}),Q.call(t.BIO_FORMATS,e)>=0?this["get"+e.toUpperCase()+"URI"](n):(r=N(n,{query:this.toXML(),format:e}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+F(r))},t.prototype.needsAuthentication=function(){return X.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},t.prototype.fetchQID=function(t){return Y(t,this.service.post("queries",{query:this.toXML()}).then(_("id")))},e=function(t){return t.append("primaryIdentifier").toString()},t.prototype.__bio_req=function(t,n){var r,i;return i=this.makeListQuery(),r=function(e){return X.any(t,function(t){return e.isa(t)})},i.views=X.take(n)(function(){var t,i,o,a;for(o=this.getViewNodes(),a=[],t=0,i=o.length;i>t;t++)n=o[t],r(n)&&a.push(e(n));return a}.call(this)),{query:i.toXML(),format:"text"}},t.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},t.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},t.prototype._bed_req=t.prototype._gff3_req,t}(),U=x(function(t,e){return t.concat(e)}),a.prototype.toString=a.prototype.toXML,a.ATTRIBUTE_OPS=U([a.ATTRIBUTE_VALUE_OPS,a.MULTIVALUE_OPS,a.NULL_OPS]),a.REFERENCE_OPS=U([a.TERNARY_OPS,a.LOOP_OPS,a.LIST_OPS]),c=function(t,e){return function(n,r){var i,o,a,s,u;return null==n&&(n={}),null==r&&(r=function(){}),X.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(t){return function(e){var n;return n=t.getPathInfo(e),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var t,e,r,i;for(r=n.view,i=[],t=0,e=r.length;e>t;t++)s=r[t],i.push(this.getPathInfo(s).toString());return i}.call(this)),o=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,a=N(o[t](),n),e.call(o,a,r)}},J=a.BIO_FORMATS,W=function(t){var e,n,r;return n="_"+t+"_req",e="get"+t.toUpperCase(),r=e+"URI",a.prototype[e]=c(n,function(e,n){return Y(n,this.service.post("query/results/"+t,e))}),a.prototype[r]=c(n,function(e,n){return null!=this.service.token&&(e.token=this.service.token),""+this.service.root+"query/results/"+t+"?"+F(e)})};for($=0,Z=J.length;Z>$;$++)b=J[$],W(b);for(H=function(t){return function(){var e,n,r,i;if(n=arguments[0],e=2<=arguments.length?et.call(arguments,1):[],this.service[t])return null==n?n={}:X.isFunction(n)&&(n={},e=function(){var t,e,n;for(n=[],t=0,e=arguments.length;e>t;t++)r=arguments[t],n.push(r);return n}.apply(this,arguments)),n=L(N({start:this.start,size:this.maxRows},n)),(i=this.service)[t].apply(i,[this,n].concat(et.call(e)));throw new Error("Service does not provide '"+t+"'.")}},G=0,K=u.length;K>G;G++)M=u[G],a.prototype[M]=H(M);i.mixin(a.prototype),a.prototype.emit=a.prototype.trigger,a.prototype.bind=a.prototype.on,C.Query=a}).call(this)},{"./util":15,"./xml":17,"backbone-events-standalone":21}],10:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m,b,w,x,_,E,S,T,k,C,P,D,O,N,M,I,L,R,B,A,j,q,z,F,V,U,X,Y,W,H,$,G,Z,K,J,Q,tt,et,nt,rt,it,ot,at,st,ut,lt,ct,ht,dt,ft,pt=function(t,e){return function(){return t.apply(e,arguments)}},vt={}.hasOwnProperty,gt=[].slice;for(E=t("./promise"),m=t("./model").Model,k=t("./query").Query,v=t("./lists").List,q=t("./user").User,c=t("./id-resolution-job").IDResolutionJob,ot=t("./version"),it=t("./util"),Z=t("./http"),rt=it.querystring,at=it.withCB,J=it.map,Q=it.merge,$=it.get,et=it.set,K=it.invoke,nt=it.success,H=it.error,D=it.REQUIRES_VERSION,W=it.dejoin,z={},r={},C={},g={},I={},U={},a="http://",F="version",B="templates",P="version/release",i="classkeys",d="lists",y="model",M="summaryfields",S="query/results",T="search",X="widgets",s="list/enrichment",Y="listswithobject",f={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},O="lists/subtract",V="user/whoami",R=S+"/tablerows",_="user/preferences",x="path/values",j="user/tokens",h="ids",w={},dt=[F,P,i,X,y,M,T,x],ut=0,ct=dt.length;ct>ut;ut++)tt=dt[ut],w[tt]=!0;for(e={},ft=[V,_,f,O,Y,s,B,j],lt=0,ht=ft.length;ht>lt;lt++)tt=ft[lt],e[tt]=!0;b=function(t,n){return w[t]?!1:e[t]?!0:(null!=n?n.needsAuthentication:void 0)?n.needsAuthentication():!0},u=/^https?:\/\//i,l=/service\/?$/i,N="/service/",o=function(t){var e,n;return(e=null!=(n=console.error)?n:console.log)(t)},st=function(t,e,n,r,i){var o,a,s,u,l;return s=this.root,u=this.useCache,a=null!=this[t]?this[t]:this[t]=u&&(l=e[s])?nt(l):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(Q(o,{url:this.root+n})).then(function(t){return e[s]=t[r]})),at(i,a)},G=function(t){return function(e){return new E(function(n,r){var i;return(i=it.find(e,function(e){return e.name===t}))?n(i):r('List "'+t+'" not found among: '+e.map($("name")))})}},p=function(t,e){return null==e&&(e="listName"),it.compose(t.fetchList,$(e))},A=function(t){var e,n,r,i,o,a;for(null==t&&(t=[]),i=it.isArray(t)?t:[t],a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(null!=(o=e.name)?o:e);return a},L=function(){function t(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.connectAs=pt(this.connectAs,this),this.createList=pt(this.createList,this),this.resolveIds=pt(this.resolveIds,this),this.templateQuery=pt(this.templateQuery,this),this.savedQuery=pt(this.savedQuery,this),this.query=pt(this.query,this),this.fetchRelease=pt(this.fetchRelease,this),this.fetchClassKeys=pt(this.fetchClassKeys,this),this.fetchVersion=pt(this.fetchVersion,this),this.fetchSummaryFields=pt(this.fetchSummaryFields,this),this.fetchModel=pt(this.fetchModel,this),this.fetchWidgetMap=pt(this.fetchWidgetMap,this),this.fetchWidgets=pt(this.fetchWidgets,this),this.complement=pt(this.complement,this),this.fetchListsContaining=pt(this.fetchListsContaining,this),this.fetchList=pt(this.fetchList,this),this.findLists=pt(this.findLists,this),this.fetchLists=pt(this.fetchLists,this),this.fetchTemplates=pt(this.fetchTemplates,this),this.tableRows=pt(this.tableRows,this),this.values=pt(this.values,this),this.rows=pt(this.rows,this),this.records=pt(this.records,this),this.table=pt(this.table,this),this.pathValues=pt(this.pathValues,this),this.fetchUser=pt(this.fetchUser,this),this.whoami=pt(this.whoami,this),this.findById=pt(this.findById,this),this.count=pt(this.count,this),this.enrichment=pt(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=a+this.root),l.test(this.root)||(this.root=this.root+N),this.root=this.root.replace(/ice$/,"ice/"),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return function(t){return null==t&&(t="json"),t}}(this)}var e,n,w,E,L,j;return t.prototype.doReq=Z.doReq,t.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},t.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},t.prototype.makeRequest=function(t,e,n,r,i){var o,a,s,u,l,c,h;return null==t&&(t="GET"),null==e&&(e=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),it.isArray(r)&&(l=r,r=l[0],a=l[1]),it.isArray(n)&&(n=it.pairsToObj(n)),null==a&&(a=this.errorHandler),n=it.copy(n),o=this.getFormat(n.format),Z.supports(t)||(c=[t,Z.getMethod(t)],n.method=c[0],t=c[1]),s={data:n,dataType:o,success:r,error:a,path:e,type:t},null!=n.auth&&(s.auth=n.auth,delete s.data.auth),null!=n.headers&&(s.headers=it.copy(n.headers),delete s.data.headers),(u=null!=(h=n.timeout)?h:this.timeout)&&(s.timeout=u,delete n.timeout),this.authorise(s).then(function(t){return function(e){return t.doReq(e,i)}}(this))},t.prototype.authorise=function(t){return this.fetchVersion().then(function(e){return function(n){var r,i,o;return r=it.copy(t),null==r.headers&&(r.headers={}),r.url=e.root+r.path,i=[],14>n&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=e.token&&b(t.path,null!=(o=r.data)?o.query:void 0)&&(n>=14?r.headers.Authorization="Token "+e.token:"string"==typeof r.data?i.push(["token",e.token]):r.data.token=e.token),i.length&&(r.url+="?"+rt(i)),r}}(this))},t.prototype.enrichment=function(t,e){return D(this,8,function(n){return function(){var r;return r=Q({maxp:.05,correction:"Holm-Bonferroni"},t),at(e,n.get(s,r).then($("results")))}}(this))},t.prototype.search=function(t,e){return null==t&&(t={}),null==e&&(e=function(){}),D(this,9,function(n){return function(){var r,i,o,a;if(it.isFunction(t)&&(a=[t,{}],e=a[0],t=a[1]),"string"==typeof t)i={q:t};else{i={q:t.q};for(r in t)vt.call(t,r)&&(o=t[r],"q"!==r&&(i["facet_"+r]=o))}return at(e,n.post(T,i))}}(this))},t.prototype.makePath=function(t,e,n){return null==e&&(e={}),null==n&&(n=function(){}),at(n,this.fetchModel().then(function(n){return n.makePath(t,e)}))},t.prototype.count=function(t,e){var n,r;return null==e&&(e=function(){}),n=t?null!=t.toPathString?(tt=t.isClass()?t.append("id"):t,this.pathValues(tt,"count")):null!=t.toXML?(r={query:t,format:"jsoncount"},this.post(S,r).then($("count"))):"string"==typeof t?this.fetchModel().then(function(e){return function(n){var r;try{return e.count(n.makePath(t))}catch(i){return r=i,e.query({select:[t]}).then(e.count)}}}(this)):this.query(t).then(this.count):H("Not enough arguments"),at(e,n)},t.prototype.findById=function(t,e,n,r){var i,o;return null==n&&(n=["**"]),null==r&&(r=function(){}),it.isFunction(n)&&(o=[["**"],n],n=o[0],r=o[1]),i=this.query({from:t,select:n,where:{id:e}}).then(W).then(K("records")).then($(0)),at(r,i)},t.prototype.lookup=function(t,e,n,r){var i,o;return it.isFunction(n)&&(o=[null,n],n=o[0],r=o[1]),i=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,n]]}).then(W).then(K("records")),at(r,i)},t.prototype.find=function(t,e,n,r){var i;return it.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),at(r,this.lookup(t,e,n).then(function(t){return null==t||0===t.length?H("Nothing found"):t.length>1?H("Multiple items found: "+t.slice(0,3)+"..."):nt(t[0])}))},t.prototype.whoami=function(t){return D(this,9,function(e){return function(){return at(t,e.get(V).then($("user")).then(function(t){return new q(e,t)}))}}(this))},t.prototype.fetchUser=function(){var t;return t=1<=arguments.length?gt.call(arguments,0):[],this.whoami.apply(this,t)},L=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},t.prototype.pathValues=function(t,e,n){return null==e&&(e={}),D(this,6,function(r){return function(){var i,o,a,s,u;return"string"==typeof e&&(s=e,e={}),it.isFunction(e)&&(u=[n,e],e=u[0],n=u[1]),"count"!==s&&(s="results"),o="count"===s?"jsoncount":"json",a=function(){var n;try{return this.fetchModel().then(K("makePath",t,null!=(n=t.subclasses)?n:e)).then(function(t){return L(o,t)}).then(function(t){return function(e){return t.post(x,e)}}(this)).then($(s))}catch(r){return i=r,H(i)}}.call(r),at(n,a)}}(this))},t.prototype.doPagedRequest=function(t,e,n,r,i){var o,a;return null==n&&(n={}),null==i&&(i=function(){}),null!=t.toXML?(it.isFunction(n)&&(a=[n,{}],i=a[0],n=a[1]),o=Q(n,{query:t,format:r}),at(i,this.post(e,o).then($("results")))):this.query(t).then(function(t){return function(o){return t.doPagedRequest(o,e,n,r,i)}}(this))},t.prototype.table=function(t,e,n){return this.doPagedRequest(t,S,e,"jsontable",n)},t.prototype.records=function(t,e,n){return this.doPagedRequest(t,S,e,"jsonobjects",n)},t.prototype.rows=function(t,e,n){return this.doPagedRequest(t,S,e,"json",n)},t.prototype.values=function(t,e,n){var r,i;return it.isFunction(e)&&(i=[e,n],n=i[0],e=i[1]),r=null==t?H("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(J($("value"))):null!=t.toXML?1!==t.views.length?H("Expected one column, got "+t.views.length):this.rows(t,e).then(J($(0))):this.query(t).then(function(t){return function(n){return t.values(n,e)}}(this)),at(n,r)},t.prototype.tableRows=function(t,e,n){return this.doPagedRequest(t,R,e,"json",n)},t.prototype.fetchTemplates=function(t){return at(t,this.get(B).then($("templates")))},t.prototype.fetchLists=function(t){return this.findLists("",t)},t.prototype.findLists=function(t,e){return null==t&&(t=""),null==e&&(e=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return at(e,t&&13>r?H("Finding lists by name on the server requires version 13. This is only "+r):(i=function(t){var e,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)e=t[r],o.push(new v(e,n));return o},n.get(d,{name:t}).then($("lists")).then(i)))}}(this))},t.prototype.fetchList=function(t,e){return this.fetchVersion().then(function(n){return function(r){return at(e,13>r?n.findLists().then(G(t)):n.findLists(t).then($(0)))}}(this))},t.prototype.fetchListsContaining=function(t,e){var n;return n=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(new v(n,t));return o}}(this),at(e,this.get(Y,t).then($("lists")).then(n))},t.prototype.combineLists=function(t,e,n){var r,i,o,a,s,u;return u=Q({lists:[],tags:[]},e),o=u.name,i=u.lists,s=u.tags,r=u.description,a={name:o,description:r},null==a.description&&(a.description=""+t+" of "+i.join(", ")),a.tags=s.join(";"),a.lists=i.join(";"),at(n,this.get(f[t],a).then(p(this)))},t.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(gt.call(arguments)))},t.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(gt.call(arguments)))},t.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(gt.call(arguments)))},t.prototype.complement=function(t,e){var n,r,i,o,a,s,u,l,c;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,i=t.exclude,s=t.name,r=t.description,c=t.tags,n=function(){return"Relative complement of "+a.join(" and ")+" in "+u.join(" and ")},u=A(o),a=A(i),null==s&&(s=n()),null==r&&(r=n()),null==c&&(c=[]),l={name:s,description:r,tags:c,lists:a,references:u},at(e,this.post(O,l).then(p(this)))},t.prototype.fetchWidgets=function(t){return D(this,8,function(e){return function(){return st.call(e,"widgets",U,X,"widgets",t)}}(this))},j=it.omap(function(t){return[t.name,t]}),t.prototype.fetchWidgetMap=function(t){return D(this,8,function(e){return function(){return at(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(j))}}(this))},t.prototype.fetchModel=function(t){var e;return e=st.call(this,"model",g,y,"model").then(m.load).then(et({service:this})),at(t,e)},t.prototype.fetchSummaryFields=function(t){return st.call(this,"summaryFields",I,M,"classes",t)},t.prototype.fetchVersion=function(t){return st.call(this,"version",z,F,"version",t)},t.prototype.fetchClassKeys=function(t){return st.call(this,"classkeys",r,i,"classes",t)},t.prototype.fetchRelease=function(t){return st.call(this,"release",C,P,"version",t)},t.prototype.query=function(t,e){var n;return n=function(e){return function(n){var r,i;return r=n[0],i=n[1],new k(t,e,{model:r,summaryFields:i})}}(this),at(e,it.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},E=function(t,e){return function(n){return n?t.query(n):H("No query found called "+e)}},n=function(t){return t?"string"==typeof t?nt():H("Name must be a string"):H("Name not provided")},t.prototype.savedQuery=function(t,e){return D(this,16,function(r){return function(){return n(t).then(function(){return at(e,r.get("user/queries",{filter:t}).then(function(e){return e.queries[t]}).then(E(r,t)))})}}(this))},t.prototype.templateQuery=function(t,e){return n(t).then(function(n){return function(){return at(e,n.fetchTemplates().then($(t)).then(et("type","TEMPLATE")).then(E(n,t)))}}(this))},t.prototype.manageUserPreferences=function(t,e,n){return D(this,11,function(r){return function(){return at(n,r.makeRequest(t,_,e).then($("preferences")))}}(this))},t.prototype.resolveIds=function(t,e){return D(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+h,contentType:"application/json",data:JSON.stringify(t),dataType:"json"},at(e,n.doReq(r).then($("uid")).then(c.create(n)))}}(this))},t.prototype.resolutionJob=function(t){return c.create(this)(t)},t.prototype.createList=function(t,e,n){var r,i;return null==t&&(t={}),null==e&&(e=""),null==n&&(n=function(){}),r=function(e){return function(n){return Q(n,{token:e.token,tags:t.tags||[]})}}(this),i={data:it.isArray(e)?e.map(function(t){return'"'+t+'"'}).join("\n"):e,dataType:"json",url:""+this.root+"lists?"+rt(r(t)),type:"POST",contentType:"text/plain"},at(n,this.doReq(i).then(p(this)))},w=function(t){return t.user.temporaryToken},t.prototype.connectAs=function(e){return t.connect(Q(this,{token:e,noCache:!this.useCache}))},t.prototype.register=function(t,e,n){return D(this,9,function(r){return function(){return at(n,r.post("users",{name:t,password:e}).then(w).then(r.connectAs))}}(this))},e=300,t.prototype.getDeregistrationToken=function(t,n){return null==t&&(t=e),D(this,16,function(e){return function(){var r;return r=null!=e.token?e.post("user/deregistration",{validity:t}).then($("token")):H("Not registered"),at(n,r)}}(this))},t.prototype.deregister=function(t,e){return D(this,16,function(n){return function(){return at(e,n.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}}(this))},t.prototype.login=function(t,e,n){return D(this,9,function(r){return function(){var i;return i=""+t+":"+e,at(n,r.logout().then(function(t){return t.get("user/token",{auth:i})})).then($("token")).then(r.connectAs)}}(this))},t.prototype.logout=function(t){return at(t,nt(this.connectAs()))},t}(),L.prototype.rowByRow=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Z.iterReq("POST",S,"json"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.rowByRow.apply(e,[n].concat(gt.call(t)))}}(this))},L.prototype.eachRow=L.prototype.rowByRow,L.prototype.recordByRecord=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Z.iterReq("POST",S,"jsonobjects"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.recordByRecord.apply(e,[n].concat(gt.call(t)))}}(this))},L.prototype.eachRecord=L.prototype.recordByRecord,L.prototype.union=L.prototype.merge,L.prototype.difference=L.prototype.diff,L.prototype.symmetricDifference=L.prototype.diff,L.prototype.relativeComplement=L.prototype.complement,L.prototype.subtract=L.prototype.complement,L.flushCaches=function(){return g={},z={},C={},r={},I={},U={}},L.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new L(t)},n.Service=L,n.Model=m,n.Query=k,n.utils=it,n.VERSION=ot.VERSION,n.imjs=ot}).call(this)},{"./http":3,"./id-resolution-job":4,"./lists":5,"./model":6,"./promise":8,"./query":9,"./user":14,"./util":15,"./version":16}],11:[function(t,e,n){(function(t){(function(){var e;n.DOMParser=null!=t.DOMParser?t.DOMParser:e=function(){function t(){throw new Error("DOMParser is not available")}return t}()}).call(this)}).call(this,"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,n){(function(){var t,e,n,r,i,o,a,s,u,l,c,h;if(t="undefined"!=typeof console,e="undefined"!=typeof JSON,n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e||(s=document.createElement("script"),s.src="http://cdn.intermine.org/js/json3/3.2.2/json3.min.js",s.type="text/javascript",o=document.getElementsByTagName("head")[0],o.appendChild(s)),null==Object.keys&&(i=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),Object.keys=function(t){var e,o,a,s,u;if("object"!=typeof t&&""!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");if(e=function(){var e;e=[];for(o in t)i.call(t,o)&&e.push(o);return e}(),r)for(s=0,u=n.length;u>s;s++)a=n[s],i.call(t,a)&&e.push(a);return e}),null==Array.prototype.map&&(Array.prototype.map=function(t){var e,n,r,i;for(i=[],n=0,r=this.length;r>n;n++)e=this[n],i.push(t(e));return i}),null==Array.prototype.filter&&(Array.prototype.filter=function(t){var e,n,r,i;for(i=[],n=0,r=this.length;r>n;n++)e=this[n],t(e)&&i.push(e);return i}),null==Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,r,i,o,a;for(i=this.slice(),n=arguments.length<2?i.pop():e,o=0,
a=i.length;a>o;o++)r=i[o],n=t(n,r);return n}),null==Array.prototype.forEach&&(Array.prototype.forEach=function(t,e){var n,r,i,o,a;if(!t)throw new Error("No function provided");for(a=[],n=i=0,o=this.length;o>i;n=++i)r=this[n],a.push(t.call(null!=e?e:this,r,n,this));return a}),t||(this.console={log:function(){},error:function(){},debug:function(){}},"undefined"!=typeof window&&null!==window&&(window.console=this.console)),null==console.log&&(console.log=function(){}),null==console.error&&(console.error=function(){}),null==console.debug&&(console.debug=function(){}),null==console.log.apply)for(console.log("Your console needs patching."),h=["log","error","debug"],u=function(t){var e;return e=console[t],console[t]=function(t){return e(t)}},l=0,c=h.length;c>l;l++)a=h[l],u(a)}).call(this)},{}],13:[function(t,e,n){(function(){var e,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}};r=function(t,e){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},e=t("./promise"),i=["attributes","references","collections"],n.Table=function(){function t(t,e){var n,a,s,u,l,c,h;for(this.model=e,this.getDisplayName=o(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(c=t["extends"])?c:[],u=0,l=i.length;l>u;u++){if(a=i[u],null==this[a])throw new Error("Bad model data: missing "+a);r(this[a],this.fields)}h=this.collections;for(s in h)n=h[s],n.isCollection=!0}return t.prototype.toString=function(){var t,e;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(t in n)e=n[t],r.push(t);return r}.call(this)+"]]"},t.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},t.prototype.getDisplayName=function(){return new e(function(t){return function(e,n){return null!=t.model?e(t.model.makePath(t.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},t}()}).call(this)},{"./promise":8}],14:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l=function(t,e){return function(){return t.apply(e,arguments)}};u=t("./util"),s=u.withCB,o=u.get,a=u.isFunction,e=u.any,i=u.error,r=function(t,e,n,r){return t.service.manageUserPreferences(n,e,r).then(function(e){return t.preferences=e})},n.User=function(){function t(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=l(this.refresh,this),this.clearPreferences=l(this.clearPreferences,this),this.clearPreference=l(this.clearPreference,this),this.setPreferences=l(this.setPreferences,this),this.setPreference=l(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return t.prototype.setPreference=function(t,e,n){var r,o;if(a(e)&&(o=[null,e],e=o[0],n=o[1]),"string"==typeof t)r={},r[t]=e;else{if(null!=e)return s(n,i("Incorrect arguments to setPreference"));r=t}return this.setPreferences(r,n)},t.prototype.setPreferences=function(t,e){return r(this,t,"POST",e)},t.prototype.clearPreference=function(t,e){return r(this,{key:t},"DELETE",e)},t.prototype.clearPreferences=function(t){return r(this,{},"DELETE",t)},t.prototype.refresh=function(t){return r(this,{},"GET",t)},t.prototype.createToken=function(t,n,r){var i,u;return null==t&&(t="day"),null==r&&e([t,n],a)&&(a(t)?(i=[null,null,t],t=i[0],n=i[1],r=i[2]):a(n)&&(u=[null,n],n=u[0],r=u[1])),s(r,this.service.post("user/tokens",{type:t,message:n}).then(o("token")))},t.prototype.fetchCurrentTokens=function(t){return s(t,this.service.get("user/tokens").then(o("tokens")))},t.prototype.revokeAllTokens=function(t){return s(t,this.service.makeRequest("DELETE","user/tokens"))},t.prototype.revokeToken=function(t,e){return s(e,this.service.makeRequest("DELETE","user/tokens/"+t))},t}()}).call(this)},{"./util":15}],15:[function(t,e,n){(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g,y,m,b,w,x,_=[].slice,E=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},S={}.hasOwnProperty;e=t("./promise"),m=n,m.defer=function(){var t;return t={},t.promise=new e(function(e,n){return t.resolve=e,t.reject=n}),t},a=function(t){return encodeURIComponent(String(t))},y=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(e.map(a).join("="));return i}().join("&")},m.querystring=function(t){var e,n,r,i,o,a;if(!t)return"";if(p(t))r=t.slice();else{r=[];for(e in t)a=t[e],p(a)?(i=function(){var t,n,r;for(r=[],t=0,n=a.length;n>t;t++)o=a[t],r.push([e,o]);return r}(),r=r.concat(i)):r.push([e,a])}return y(function(){var t,e,i;for(i=[],t=0,e=r.length;e>t;t++)n=r[t],null!=n[1]&&i.push(n);return i}())},m.curry=o=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],e.apply(null,t.concat(n))}},m.error=u=function(t){return new e(function(e,n){return n(new Error(t))})},m.success=b=function(t){return new e(function(e,n){return e(t)})},m.parallel=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],e.all(1===t.length&&!t[0].then&&t[0].length?t[0]:t)},m.withCB=function(){var t,e,n,r,i,a,s,u;for(e=2<=arguments.length?_.call(arguments,0,a=arguments.length-1):(a=0,[]),i=arguments[a++],s=0,u=e.length;u>s;s++)t=e[s],null!=t&&(r=o(t,null),n=t,i.then(r,n));return i},m.fold=c=function(t){return function(e,n){var r,i,o;if(1===arguments.length&&(n=(null!=e?e.slice():void 0)||e,e=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(t,e);i=e;for(r in n)o=n[r],i=null!=i?t(i,r,o):{k:o};return i}},m.take=function(t){return function(e){return null!=t?e.slice(0,+(t-1)+1||9e9):e.slice()}},m.filter=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],t(n)&&o.push(n);return o}},m.uniqBy=function(t,e){var n,r,i,a,s,u;if(1===arguments.length)return o(m.uniqBy,t);if(r=[],i=[],null==e)return i;for(s=0,u=e.length;u>s;s++)a=e[s],n=t(a),E.call(r,n)<0&&(r.push(n),i.push(a));return i},m.find=function(t,e){var n,r,i;if(1===arguments.length)return e=t,function(t){return m.find(t,e)};for(r=0,i=t.length;i>r;r++)if(n=t[r],e(n))return n;return null},p=null!=(x=Array.isArray)?x:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},m.isArray=p,m.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(t){var e,n,r,i,o,a;if(null==t)return"";for(i=String(t).replace(/[&<>"']/g,function(t){return s[t]}),r=[],n=o=0,a=i.length;a>=0?a>=o:o>=a;n=a>=0?++o:--o)e=i.charCodeAt(n),r.push(e>256?"&#"+e+";":i.charAt(n));return r.join("")},m.omap=function(t){var e;return e=c(function(e,n,r){var i,o,a;return a=t(n,r),i=a[0],o=a[1],p(o)&&(o=o.slice()),e[i]=o,e}),function(t){return e({},t)}},m.copy=m.omap(function(t,e){return[t,e]}),m.partition=function(t){return function(e){var n;return(n=c(function(e,n){var r,i;return i=e[0],r=e[1],t(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],e)}},m.id=h=function(t){return t},m.concatMap=function(t){return function(e){var n,r,i,o,a;for(r=void 0,o=0,a=e.length;a>o;o++)i=e[o],n=t(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):v(r,n);return r}},m.map=function(t){return d("map",t)},i=c(function(t,e){return function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],t(e.apply(null,n))}}),m.compose=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],i(t)},m.flatMap=m.concatMap,m.difference=function(t,e){var n,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],E.call(e,n)<0&&o.push(n);return o},m.stringList=function(t){return"string"==typeof t?[t]:t},m.flatten=l=function(){var t,e,n,r,i,o,a,s,u;for(n=1<=arguments.length?_.call(arguments,0):[],t=[],i=0,a=n.length;a>i;i++)if(e=n[i],p(e))for(u=l.apply(null,e),o=0,s=u.length;s>o;o++)r=u[o],t.push(r);else t.push(e);return t},m.sum=m.concatMap(h),m.merge=v=function(){var t,e,n,r,i,o,a;for(r=1<=arguments.length?_.call(arguments,0):[],e={},o=0,a=r.length;a>o;o++){n=r[o];for(t in n)S.call(n,t)&&(i=n[t],e[t]=i)}return e},m.any=function(t,e){var n,r,i;for(null==e&&(e=h),r=0,i=t.length;i>r;r++)if(n=t[r],e(n))return!0;return!1},m.invoke=d=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],f(e,t)},m.invokeWith=f=function(t,e,n){return null==e&&(e=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+t+'" of null');if(r[t])return r[t].apply(n||r,e);throw new Error('Cannot call undefined method "'+t+" of "+r)}},m.get=function(t){return function(e){return e[t]}},m.set=function(t,e){return function(n){var r,i;if(2===arguments.length)n[t]=e;else for(r in t)S.call(t,r)&&(i=t[r],n[r]=i);return n}},r=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},m.REQUIRES_VERSION=function(t,e,n){return t.fetchVersion().then(function(t){return t>=e?n():u(r(e,t))})},m.dejoin=function(t){var e,n,r,i,o;for(o=t.views,r=0,i=o.length;i>r;r++)n=o[r],e=n.split("."),e.length>2&&t.addJoin(e.slice(1,-1).join("."));return t},w=c(function(t,e){return t.then(e)}),m.sequence=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],w(b(),t)},g=c(function(t,e){var n,r;if(n=e[0],r=e[1],null!=t[n])throw new Error("Duplicate key: "+n);return t[n]=r,t}),m.pairsToObj=function(t){return g({},t)}}).call(this)},{"./promise":8}],16:[function(t,e,n){(function(){n.VERSION="3.13.0"}).call(this)},{}],17:[function(t,e,n){(function(){var e,r;e=t("xmldom").DOMParser,r=function(t){return t=t.replace(/^\s*/g,""),t=t.replace(/\s$/g,""),0===t.length?t:">"!==t[t.length-1]?t+">":t},n.parse=function(t){var n,i;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(t=r(t),!t)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new e,i.parseFromString(t,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}}).call(this)},{xmldom:11}],18:[function(t,e,n){(function(r,i){function o(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t?t(e):!1}var a=t("jsonparse"),s=t("through");n.parse=function(t,e){var n=new a,r=s(function(t){"string"==typeof t&&(t=new i(t)),n.write(t)},function(t){t&&r.write(t),r.queue(null)});"string"==typeof t&&(t=t.split(".").map(function(t){return"*"===t?!0:""===t?{recurse:!0}:t}));var u=0;return t&&t.length||(t=null),n.onValue=function(n){if(this.root||(r.root=n),t){for(var i=0,a=0;i<t.length;){var s,l=t[i];if(a++,l&&!l.recurse){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(!o(l,s.key))return;i++}else{i++;var c=t[i];if(!c)return;for(;;){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(o(c,s.key)){i++;break}a++}}}if(a===this.stack.length){u++;var h=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),d=this.value[this.key];null!=d&&null!=(d=e?e(d,h):d)&&r.queue(d),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(e,i){n._onToken(e,i),0===this.stack.length&&r.root&&(t||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(t){r.emit("error",t)},r},n.stringify=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="[\n",e="\n,\n",n="\n]\n");var i,o=!0,a=!1;return i=s(function(n){a=!0;var s=JSON.stringify(n,null,r);o?(o=!1,i.queue(t+s)):i.queue(e+s)},function(e){a||i.queue(t),i.queue(n),i.queue(null)})},n.stringifyObject=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="{\n",e="\n,\n",n="\n}\n");var i=!0,o=!1;return stream=s(function(n){o=!0;var a=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(t+a)):this.queue(e+a)},function(e){o||this.queue(t),this.queue(n),this.queue(null)}),stream},e.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),t("buffer").Buffer)},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,jsonparse:19,through:56}],19:[function(t,e,n){(function(t){function n(t){for(var e=Object.keys(i),n=0,r=e.length;r>n;n++){var o=e[n];if(i[o]===t)return o}return t&&"0x"+t.toString(16)}function r(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=F,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)}}var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,l=i.COLON=5,c=i.COMMA=6,h=i.TRUE=7,d=i.FALSE=8,f=i.NULL=9,p=i.STRING=10,v=i.NUMBER=11,g=i.START=17,y=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,x=i.FALSE2=50,_=i.FALSE3=51,E=i.FALSE4=52,S=i.NULL1=65,T=i.NULL3=66,k=i.NULL2=67,C=i.NUMBER1=81,P=i.NUMBER2=82,D=i.NUMBER3=83,O=i.NUMBER4=84,N=i.NUMBER5=85,M=i.NUMBER6=86,I=i.NUMBER7=87,L=i.NUMBER8=88,R=i.STRING1=97,B=i.STRING2=98,A=i.STRING3=99,j=i.STRING4=100,q=i.STRING5=101,z=i.STRING6=102,F=i.VALUE=113,V=i.KEY=114,U=i.OBJECT=129,X=i.ARRAY=130,Y=r.prototype;Y.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+n(this.tState)))},Y.onError=function(t){throw t},Y.write=function(e){"string"==typeof e&&(e=new t(e));for(var n,r=0,i=e.length;i>r;r++)if(this.tState===g)n=e[r],123===n?this.onToken(o,"{"):125===n?this.onToken(a,"}"):91===n?this.onToken(s,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(l,":"):44===n?this.onToken(c,","):116===n?this.tState=y:102===n?this.tState=w:110===n?this.tState=S:34===n?(this.string="",this.tState=R):45===n?(this.negative=!0,this.tState=C):48===n?(this.magnatude=0,this.tState=P):n>48&&64>n?(this.magnatude=n-48,this.tState=D):32===n||9===n||10===n||13===n||this.charError(e,r);else if(this.tState===R)if(n=e[r],this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=e[F];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+F-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&223>=n&&(this.bytes_in_sequence=2),n>=224&&239>=n&&(this.bytes_in_sequence=3),n>=240&&244>=n&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>e.length){for(var V=0;V<=e.length-1-r;V++)this.temp_buffs[this.bytes_in_sequence][V]=e[r+V];this.bytes_remaining=r+this.bytes_in_sequence-e.length,r=e.length-1}else this.string+=e.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=g,this.onToken(p,this.string),this.string=void 0):92===n?this.tState=B:n>=32?this.string+=String.fromCharCode(n):this.charError(e,r);else this.tState===B?(n=e[r],34===n?(this.string+='"',this.tState=R):92===n?(this.string+="\\",this.tState=R):47===n?(this.string+="/",this.tState=R):98===n?(this.string+="\b",this.tState=R):102===n?(this.string+="\f",this.tState=R):110===n?(this.string+="\n",this.tState=R):114===n?(this.string+="\r",this.tState=R):116===n?(this.string+="	",this.tState=R):117===n?(this.unicode="",this.tState=A):this.charError(e,r)):this.tState===A||this.tState===j||this.tState===q||this.tState===z?(n=e[r],n>=48&&64>n||n>64&&70>=n||n>96&&102>=n?(this.unicode+=String.fromCharCode(n),this.tState++===z&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=R)):this.charError(e,r)):this.tState===C?(n=e[r],48===n?(this.magnatude=0,this.tState=P):n>48&&64>n?(this.magnatude=n-48,this.tState=D):this.charError(e,r)):this.tState===P?(n=e[r],46===n?(this.position=.1,this.tState=O):101===n||69===n?(this.exponent=0,this.tState=M):(this.tState=g,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===D?(n=e[r],46===n?(this.position=.1,this.tState=O):101===n||69===n?(this.exponent=0,this.tState=M):n>=48&&64>n?this.magnatude=10*this.magnatude+n-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===O?(n=e[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=N):this.charError(e,r)):this.tState===N?(n=e[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=M):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===M?(n=e[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=I):n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=L):this.charError(e,r)):this.tState===I?(n=e[r],n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=L):this.charError(e,r)):this.tState===L?(n=e[r],n>=48&&64>n?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===y?114===e[r]?this.tState=m:this.charError(e,r):this.tState===m?117===e[r]?this.tState=b:this.charError(e,r):this.tState===b?101===e[r]?(this.tState=g,this.onToken(h,!0)):this.charError(e,r):this.tState===w?97===e[r]?this.tState=x:this.charError(e,r):this.tState===x?108===e[r]?this.tState=_:this.charError(e,r):this.tState===_?115===e[r]?this.tState=E:this.charError(e,r):this.tState===E?101===e[r]?(this.tState=g,this.onToken(d,!1)):this.charError(e,r):this.tState===S?117===e[r]?this.tState=T:this.charError(e,r):this.tState===T?108===e[r]?this.tState=k:this.charError(e,r):this.tState===k&&(108===e[r]?(this.tState=g,this.onToken(f,null)):this.charError(e,r))},Y.onToken=function(t,e){},Y.parseError=function(t,e){this.onError(new Error("Unexpected "+n(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+n(this.state)))},Y.onError=function(t){throw t},Y.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Y.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=F)},Y.emit=function(t){this.mode&&(this.state=c),this.onValue(t)},Y.onValue=function(t){},Y.onToken=function(t,e){this.state===F?t===p||t===v||t===h||t===d||t===f?(this.value&&(this.value[this.key]=e),this.emit(e)):t===o?(this.push(),this.value=this.value?this.value[this.key]={}:{},this.key=void 0,this.state=V,this.mode=U):t===s?(this.push(),this.value=this.value?this.value[this.key]=[]:[],this.key=0,this.mode=X,this.state=F):t===a?this.mode===U?this.pop():this.parseError(t,e):t===u&&this.mode===X?this.pop():this.parseError(t,e):this.state===V?t===p?(this.key=e,this.state=l):t===a?this.pop():this.parseError(t,e):this.state===l?t===l?this.state=F:this.parseError(t,e):this.state===c?t===c?this.mode===X?(this.key++,this.state=F):this.mode===U&&(this.state=V):t===u&&this.mode===X||t===a&&this.mode===U?this.pop():this.parseError(t,e):this.parseError(t,e)},e.exports=r}).call(this,t("buffer").Buffer)},{buffer:23}],20:[function(t,n,r){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return u.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===a)return}else for(var o in t)if(this.has(t,o)&&e.call(n,t[o],o,t)===a)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,o=this,a={},s=Array.prototype.forEach,u=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=0,h=t();i={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,i=h.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,a,s,u,l,c;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:h.keys(this._events),s=0,u=a.length;u>s;s++)if(t=a[s],o=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,c=o.length;c>l;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=l.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var d=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(d.test(n)){for(var o=n.split(d),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},v={listenTo:"on",listenToOnce:"once"};h.each(v,function(t,e){i[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=h.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return h.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof e?e(function(){return i}):"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.BackboneEvents=i):o.BackboneEvents=i}(this)},{}],21:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":20}],22:[function(t,n,i){(function(t,r){(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(){}function u(){return function(){t.nextTick(d)}}function l(){var t=0,e=new F(d),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=d,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(d,1)}}function d(){for(var t=0;j>t;t+=2){var e=U[t],n=U[t+1];e(n),U[t]=void 0,U[t+1]=void 0}j=0}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(e){return H.error=e,H}}function y(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function m(t,e,n){q(function(t){var r=!1,i=y(n,e,function(n){r||(r=!0,e!==n?x(t,n):E(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,S(t,i))},t)}function b(t,e){e._state===Y?E(t,e._result):t._state===W?S(t,e._result):T(e,void 0,function(e){x(t,e)},function(e){S(t,e)})}function w(t,e){if(e.constructor===t.constructor)b(t,e);else{var n=g(e);n===H?S(t,H.error):void 0===n?E(t,e):o(n)?m(t,e,n):E(t,e)}}function x(t,e){t===e?S(t,p()):i(e)?w(t,e):E(t,e)}function _(t){t._onerror&&t._onerror(t._result),k(t)}function E(t,e){t._state===X&&(t._result=e,t._state=Y,0===t._subscribers.length||q(k,t))}function S(t,e){t._state===X&&(t._state=W,t._result=e,q(_,t))}function T(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+Y]=n,i[o+W]=r,0===o&&t._state&&q(k,t)}function k(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?D(n,r,i,o):i(o);t._subscribers.length=0}}function C(){this.error=null}function P(t,e){try{return t(e)}catch(n){return $.error=n,$}}function D(t,e,n,r){var i,a,s,u,l=o(n);if(l){if(i=P(n,r),i===$?(u=!0,a=i.error,i=null):s=!0,e===i)return void S(e,v())}else i=r,s=!0;e._state!==X||(l&&s?x(e,i):u?S(e,a):t===Y?E(e,i):t===W&&S(e,i))}function O(t,e){try{e(function(e){x(t,e)},function(e){S(t,e)})}catch(n){S(t,n)}}function N(t,e,n,r){this._instanceConstructor=t,this.promise=new t(f,r),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):S(this.promise,this._validationError())}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this._id=tt++,this._state=void 0,this._result=void 0,this._subscribers=[],f!==t&&(o(t)||M(),this instanceof L||I(),O(this,t))}var R;R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B,A=R,j=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return s.prototype=t,new s},0),q=function(t,e){U[j]=t,U[j+1]=e,j+=2,2===j&&B()},z="undefined"!=typeof window?window:{},F=z.MutationObserver||z.WebKitMutationObserver,V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,U=new Array(1e3);B="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?u():F?l():V?c():h();var X=void 0,Y=1,W=2,H=new C,$=new C;N.prototype._validateInput=function(t){return A(t)},N.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},N.prototype._init=function(){this._result=new Array(this.length)};var G=N;N.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===X&&t>r;r++)this._eachEntry(n[r],r)},N.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;a(t)?t.constructor===n&&t._state!==X?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(Y,e,t))},N.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===X&&(this._remaining--,this._abortOnReject&&t===W?S(r,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&E(r,this._result)},N.prototype._makeResult=function(t,e,n){return n},N.prototype._willSettleAt=function(t,e){var n=this;T(t,void 0,function(t){n._settledAt(Y,e,t)},function(t){n._settledAt(W,e,t)})};var Z=function(t,e){return new G(this,t,!0,e).promise},K=function(t,e){function n(t){x(o,t)}function r(t){S(o,t)}var i=this,o=new i(f,e);if(!A(t))return S(o,new TypeError("You must pass an array to race.")),o;for(var a=t.length,s=0;o._state===X&&a>s;s++)T(i.resolve(t[s]),void 0,n,r);return o},J=function(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var r=new n(f,e);return x(r,t),r},Q=function(t,e){var n=this,r=new n(f,e);return S(r,t),r},tt=0,et=L;L.all=Z,L.race=K,L.resolve=J,L.reject=Q,L.prototype={constructor:L,then:function(t,e){var n=this,r=n._state;if(r===Y&&!t||r===W&&!e)return this;var i=new this.constructor(f),o=n._result;if(r){var a=arguments[r-1];q(function(){D(r,i,a,o)})}else T(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var nt=function(){var t;t="undefined"!=typeof r?r:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),o(e)}();e||(t.Promise=et)},rt={Promise:et,polyfill:nt};"function"==typeof e&&e.amd?e(function(){return rt}):"undefined"!=typeof n&&n.exports?n.exports=rt:"undefined"!=typeof this&&(this.ES6Promise=rt)}).call(this)}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55}],23:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)"base64"===e&&(t=E(t)),i=r.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&R(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(this.length>B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");var a;r.TYPED_ARRAY_SUPPORT?a=r._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)a._set(t);else if(T(t))if(r.isBuffer(t))for(s=0;i>s;s++)a[s]=t.readUInt8(s);else for(s=0;i>s;s++)a[s]=(t[s]%256+256)%256;else if("string"===o)a.write(t,0,e);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT&&!n)for(s=0;i>s;s++)a[s]=0;return a}function i(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function o(t,e,n,r){var i=N(C(e),t,n,r);return i}function a(t,e,n,r){var i=N(P(e),t,n,r);return i}function s(t,e,n,r){return a(t,e,n,r)}function u(t,e,n,r){var i=N(O(e),t,n,r);return i}function l(t,e,n,r){var i=N(D(e),t,n,r,2);return i}function c(t,e,n){return I.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function h(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=M(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+M(i)}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function f(t,e,n){return d(t,e,n)}function p(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=k(t[o]);return i}function v(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function g(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,n,i,o,a){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new TypeError("value is out of bounds");if(n+i>t.length)throw new TypeError("index out of range")}function m(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function b(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255;

}function w(t,e,n,r,i,o){if(e>i||o>e)throw new TypeError("value is out of bounds");if(n+r>t.length)throw new TypeError("index out of range")}function x(t,e,n,r,i){return i||w(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),L.write(t,e,n,r,23,4),n+4}function _(t,e,n,r,i){return i||w(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),L.write(t,e,n,r,52,8),n+8}function E(t){for(t=S(t).replace(j,"");t.length%4!==0;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function T(t){return R(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function k(t){return 16>t?"0"+t.toString(16):t.toString(16)}function C(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(127>=r)e.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function P(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function D(t){for(var e,n,r,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),n=e>>8,r=e%256,i.push(r),i.push(n);return i}function O(t){return I.toByteArray(t)}function N(t,e,n,r,i){i&&(r-=r%i);for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function M(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var I=t("base64-js"),L=t("ieee754"),R=t("is-array");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var B=1073741823;r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);a>o&&t[o]===e[o];o++);return o!==a&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!R(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,o),o+=a.length}return i},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=C(t).length;break;case"base64":n=O(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return p(this,e,n);case"utf8":case"utf-8":return h(this,e,n);case"ascii":return d(this,e,n);case"binary":return f(this,e,n);case"base64":return c(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return r.compare(this,t)},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var c=r;r=e,e=n,n=c}e=Number(e)||0;var h=this.length-e;n?(n=Number(n),n>h&&(n=h)):n=h,r=String(r||"utf8").toLowerCase();var d;switch(r){case"hex":d=i(this,t,e,n);break;case"utf8":case"utf-8":d=o(this,t,e,n);break;case"ascii":d=a(this,t,e,n);break;case"binary":d=s(this,t,e,n);break;case"base64":d=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=l(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return d},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;if(t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t),r.TYPED_ARRAY_SUPPORT)return r._augment(this.subarray(t,e));for(var i=e-t,o=new r(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+t];return o},r.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readInt8=function(t,e){return e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),L.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),L.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),L.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),L.read(this,t,!1,52,8)},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):b(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):b(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return x(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return x(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),e||(e=0),i!==n&&0!==t.length&&0!==o.length){if(n>i)throw new TypeError("sourceEnd < sourceStart");if(0>e||e>=t.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=o.length)throw new TypeError("sourceStart out of bounds");if(0>i||i>o.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var a=i-n;if(1e3>a||!r.TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+a),e)}},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new TypeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=C(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var A=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=A.get,t.set=A.set,t.write=A.write,t.toString=A.toString,t.toLocaleString=A.toString,t.toJSON=A.toJSON,t.equals=A.equals,t.compare=A.compare,t.copy=A.copy,t.slice=A.slice,t.readUInt8=A.readUInt8,t.readUInt16LE=A.readUInt16LE,t.readUInt16BE=A.readUInt16BE,t.readUInt32LE=A.readUInt32LE,t.readUInt32BE=A.readUInt32BE,t.readInt8=A.readInt8,t.readInt16LE=A.readInt16LE,t.readInt16BE=A.readInt16BE,t.readInt32LE=A.readInt32LE,t.readInt32BE=A.readInt32BE,t.readFloatLE=A.readFloatLE,t.readFloatBE=A.readFloatBE,t.readDoubleLE=A.readDoubleLE,t.readDoubleBE=A.readDoubleBE,t.writeUInt8=A.writeUInt8,t.writeUInt16LE=A.writeUInt16LE,t.writeUInt16BE=A.writeUInt16BE,t.writeUInt32LE=A.writeUInt32LE,t.writeUInt32BE=A.writeUInt32BE,t.writeInt8=A.writeInt8,t.writeInt16LE=A.writeInt16LE,t.writeInt16BE=A.writeInt16BE,t.writeInt32LE=A.writeInt32LE,t.writeInt32BE=A.writeInt32BE,t.writeFloatLE=A.writeFloatLE,t.writeFloatBE=A.writeFloatBE,t.writeDoubleLE=A.writeDoubleLE,t.writeDoubleBE=A.writeDoubleBE,t.fill=A.fill,t.inspect=A.inspect,t.toArrayBuffer=A.toArrayBuffer,t};var j=/[^+\/0-9A-z]/g},{"base64-js":24,ieee754:25,"is-array":26}],24:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a?62:e===s?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function n(t){function n(t){l[h++]=t}var r,i,a,s,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var h=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),l}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],25:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?0/0:(f?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?d/u:d*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=p,a/=256,l-=8);t[n+f-p]|=128*v}},{}],26:[function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],27:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(l=n.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],28:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],29:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],30:[function(t,n,i){(function(t){!function(r){function o(t){throw RangeError(L[t])}function a(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function s(t,e){return a(t.split(I),e).join(".")}function u(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=A(t>>>10&1023|55296),t=56320|1023&t),e+=A(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:E}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?B(t/C):t>>1,t+=B(t/e);t>R*T>>1;r+=E)t=B(t/R);return B(r+(R+1)*t/(t+k))}function f(t){var e,n,r,i,a,s,u,h,f,p,v=[],g=t.length,y=0,m=D,b=P;for(n=t.lastIndexOf(O),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&o("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;g>i;){for(a=y,s=1,u=E;i>=g&&o("invalid-input"),h=c(t.charCodeAt(i++)),(h>=E||h>B((_-y)/s))&&o("overflow"),y+=h*s,f=b>=u?S:u>=b+T?T:u-b,!(f>h);u+=E)p=E-f,s>B(_/p)&&o("overflow"),s*=p;e=v.length+1,b=d(y-a,e,0==a),B(y/e)>_-m&&o("overflow"),m+=B(y/e),y%=e,v.splice(y++,0,m)}return l(v)}function p(t){var e,n,r,i,a,s,l,c,f,p,v,g,y,m,b,w=[];for(t=u(t),g=t.length,e=D,n=0,a=P,s=0;g>s;++s)v=t[s],128>v&&w.push(A(v));for(r=i=w.length,i&&w.push(O);g>r;){for(l=_,s=0;g>s;++s)v=t[s],v>=e&&l>v&&(l=v);for(y=r+1,l-e>B((_-n)/y)&&o("overflow"),n+=(l-e)*y,e=l,s=0;g>s;++s)if(v=t[s],e>v&&++n>_&&o("overflow"),v==e){for(c=n,f=E;p=a>=f?S:f>=a+T?T:f-a,!(p>c);f+=E)b=c-p,m=E-p,w.push(A(h(p+b%m,0))),c=B(b/m);w.push(A(h(c,0))),a=d(n,y,r==i),n=0,++r}++n,++e}return w.join("")}function v(t){return s(t,function(t){return N.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return M.test(t)?"xn--"+p(t):t})}var y="object"==typeof i&&i,m="object"==typeof n&&n&&n.exports==y&&n,b="object"==typeof t&&t;(b.global===b||b.window===b)&&(r=b);var w,x,_=2147483647,E=36,S=1,T=26,k=38,C=700,P=72,D=128,O="-",N=/^xn--/,M=/[^ -~]/,I=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=E-S,B=Math.floor,A=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:u,encode:l},decode:f,encode:p,toASCII:g,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(y&&!y.nodeType)if(m)m.exports=w;else for(x in w)w.hasOwnProperty(x)&&(y[x]=w[x]);else r.punycode=w}(this)}).call(this,"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var h,d,f,p,v=t[c].replace(s,"%20"),g=v.indexOf(n);g>=0?(h=v.substr(0,g),d=v.substr(g+1)):(h=v,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],32:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(i(a))+n;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],33:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":31,"./encode":32}],34:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":35}],35:[function(t,e,n){(function(n){function r(t){return this instanceof r?(u.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}e.exports=r;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},s=t("core-util-is");s.inherits=t("inherits");var u=t("./_stream_readable"),l=t("./_stream_writable");s.inherits(r,u),o(a(l.prototype),function(t){r.prototype[t]||(r.prototype[t]=l.prototype[t])})}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_readable":37,"./_stream_writable":39,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,"core-util-is":40,inherits:28}],36:[function(t,e,n){function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":38,"core-util-is":40,inherits:28}],37:[function(t,e,n){(function(n){function r(e,n){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(P||(P=t("string_decoder/").StringDecoder),this.decoder=new P(e.encoding),this.encoding=e.encoding)}function i(t){return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,void k.call(this)):new i(t)}function o(t,e,n,r,i){var o=l(e,n);if(o)t.emit("error",o);else if(null===n||void 0===n)e.reading=!1,e.ended||c(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||i||r||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&h(t),f(t,e);else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=D)t=D;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var n=null;return S.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?h(t):w(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?n.nextTick(function(){d(t)}):d(t))}function d(t){t.emit("readable")}function f(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){p(t,e)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&g(t)}}function g(t){function e(t,e,i){var o=t.write(n);!1===o&&r.awaitDrain++}var n,r=t._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=t.read());)if(1===r.pipesCount?e(r.pipes,0,null):x(r.pipes,e),t.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(T.listenerCount(t,"data")>0&&m(t))):void(r.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function m(t,e){var r=t._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,o=!1;t.readable=!0,t.pipe=k.prototype.pipe,t.on=t.addListener=k.prototype.on,t.on("readable",function(){o=!0;for(var e;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,o?n.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!t||t>=i)n=o?r.join(""):S.concat(r,i),r.length=0;else if(t<r[0].length){var s=r[0];n=s.slice(0,t),r[0]=s.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new S(t);for(var u=0,l=0,c=r.length;c>l&&t>u;l++){var s=r[0],h=Math.min(t-u,s.length);o?n+=s.slice(0,h):s.copy(n,u,0,h),h<s.length?r[0]=s.slice(h):r.shift(),u+=h}}return n}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function _(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}e.exports=i;var E=t("isarray"),S=t("buffer").Buffer;i.ReadableState=r;var T=t("events").EventEmitter;T.listenerCount||(T.listenerCount=function(t,e){return t.listeners(e).length});var k=t("stream"),C=t("core-util-is");C.inherits=t("inherits");var P;C.inherits(i,k),i.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new S(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){P||(P=t("string_decoder/").StringDecoder),this._readableState.decoder=new P(e),this._readableState.encoding=e};var D=8388608;i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,r=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h(this),null;if(t=u(t,e),0===t&&e.ended)return n=null,e.length>0&&e.decoder&&(n=b(t,e),e.length-=n.length),0===e.length&&w(this),n;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(r,e)),n=t>0?b(t,e):null,null===n&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&w(this),n},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){t===c&&o()}function i(){t.end()}function o(){t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("drain",p),t.removeListener("error",a),t.removeListener("unpipe",r),c.removeListener("end",i),c.removeListener("end",o),(!t._writableState||t._writableState.needDrain)&&p()}function a(e){l(),t.removeListener("error",a),0===T.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",u),l()}function u(){t.removeListener("close",s),l()}function l(){c.unpipe(t)}var c=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,f=d?i:o;h.endEmitted?n.nextTick(f):c.once("end",f),t.on("unpipe",r);var p=v(c);return t.on("drain",p),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",s),t.once("finish",u),t.emit("pipe",c),h.flowing||(this.on("readable",y),h.flowing=!0,n.nextTick(function(){g(c)})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var n=k.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&h(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){m(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&"undefined"==typeof this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,"core-util-is":40,events:27,inherits:28,isarray:29,stream:45,"string_decoder/":46}],38:[function(t,e,n){function r(t,e){
this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":35,"core-util-is":40,inherits:28}],39:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){f(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void _.call(this)):new o(e)}function a(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function s(t,e,r,i){var o=!0;if(!w.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),n.nextTick(function(){i(a)}),o=!1}return o}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new w(e,n)),e}function l(t,e,n,i,o){n=u(e,n,i),w.isBuffer(n)&&(i="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing?e.buffer.push(new r(n,i,o)):c(t,e,a,n,i,o),s}function c(t,e,n,r,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t._write(r,i,e.onwrite),e.sync=!1}function h(t,e,r,i,o){r?n.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function f(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(d(r),e)h(t,r,i,e,o);else{var a=y(t,r);a||r.bufferProcessing||!r.buffer.length||g(t,r),i?n.nextTick(function(){p(t,r,a,o)}):p(t,r,a,o)}}function p(t,e,n,r){n||v(t,e),r(),n&&m(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var r=e.buffer[n],i=r.chunk,o=r.encoding,a=r.callback,s=e.objectMode?1:i.length;if(c(t,e,s,i,o,a),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var n=y(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function b(t,e,r){e.ending=!0,m(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var x=t("core-util-is");x.inherits=t("inherits");var _=t("stream");x.inherits(o,_),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),w.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):s(this,r,t,n)&&(i=l(this,r,t,e,n)),i},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),r.ending||r.finished||b(this,r,n)}}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_duplex":35,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,"core-util-is":40,inherits:28,stream:45}],40:[function(t,e,n){(function(t){function e(t){return Array.isArray(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return h(t)&&"[object RegExp]"===y(t)}function h(t){return"object"==typeof t&&null!==t}function d(t){return h(t)&&"[object Date]"===y(t)}function f(t){return h(t)&&("[object Error]"===y(t)||t instanceof Error)}function p(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=l,n.isRegExp=c,n.isObject=h,n.isDate=d,n.isError=f,n.isFunction=p,n.isPrimitive=v,n.isBuffer=g}).call(this,t("buffer").Buffer)},{buffer:23}],41:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":36}],42:[function(t,e,n){var r=t("stream");n=e.exports=t("./lib/_stream_readable.js"),n.Stream=r,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":35,"./lib/_stream_passthrough.js":36,"./lib/_stream_readable.js":37,"./lib/_stream_transform.js":38,"./lib/_stream_writable.js":39,stream:45}],43:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":38}],44:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":39}],45:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function a(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){l.removeListener("data",n),t.removeListener("drain",r),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),t.removeListener("close",u)}var l=this;l.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),t.on("error",s),l.on("end",u),l.on("close",u),t.on("close",u),t.emit("pipe",l),t}},{events:27,inherits:28,"readable-stream/duplex.js":34,"readable-stream/passthrough.js":41,"readable-stream/readable.js":42,"readable-stream/transform.js":43,"readable-stream/writable.js":44}],46:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=t("buffer").Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:23}],47:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&l(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function h(t){return null==t}var d=t("punycode");n.parse=i,n.resolve=a,n.resolveObject=s,n.format=o,n.Url=r;var f=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),m=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=f.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(a||i&&!T[i])){for(var s=-1,l=0;l<b.length;l++){var c=r.indexOf(b[l]);-1!==c&&(-1===s||s>c)&&(s=c)}var h,p;p=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==p&&(h=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(h)),s=-1;for(var l=0;l<m.length;l++){var c=r.indexOf(m[l]);-1!==c&&(-1===s||s>c)&&(s=c)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),l=0,C=g.length;C>l;l++){var P=g[l];if(P&&!P.match(x)){for(var D="",O=0,N=P.length;N>O;O++)D+=P.charCodeAt(O)>127?"x":P[O];if(!D.match(x)){var M=g.slice(0,l),I=g.slice(l+1),L=P.match(_);L&&(M.push(L[1]),I.unshift(L[2])),I.length&&(r="/"+I.join(".")+r),this.hostname=M.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!v){for(var R=this.hostname.split("."),B=[],l=0;l<R.length;++l){var A=R[l];B.push(A.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(A):A)}this.hostname=B.join(".")}var j=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+j,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[o])for(var l=0,C=y.length;C>l;l++){var z=y[l],F=encodeURIComponent(z);F===z&&(F=escape(z)),r=r.split(z).join(F)}var V=r.indexOf("#");-1!==V&&(this.hash=r.substr(V),r=r.slice(0,V));var U=r.indexOf("?");if(-1!==U?(this.search=r.substr(U),this.query=r.substr(U+1),e&&(this.query=k.parse(this.query)),r=r.slice(0,U)):e&&(this.search="",this.query={}),r&&(this.pathname=r),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",A=this.search||"";this.path=j+A}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!T[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=l||s||n.host&&t.pathname,f=d,p=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!T[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),d=d&&(""===i[0]||""===p[0])),l)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(v){n.hostname=n.host=p.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=t.search,n.query=t.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var y=p.slice(-1)[0],m=(n.host||t.host)&&("."===y||".."===y)||""===y,b=0,w=p.length;w>=0;w--)y=p[w],"."==y?p.splice(w,1):".."===y?(p.splice(w,1),b++):b&&(p.splice(w,1),b--);if(!d&&!f)for(;b--;b)p.unshift("..");!d||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),m&&"/"!==p.join("/").substr(-1)&&p.push("");var x=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=x?"":p.length?p.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return d=d||n.host&&p.length,d&&!x&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:30,querystring:33}],48:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],49:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&n._extend(r,e),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&k(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=l(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),T(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(k(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return c(e)}var y="",m=!1,w=["{","}"];if(p(e)&&(m=!0,w=["[","]"]),k(e)){var x=e.name?": "+e.name:"";y=" [Function"+x+"]"}if(_(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),T(e)&&(y=" "+c(e)),0===a.length&&(!m||0==e.length))return w[0]+y+w[1];if(0>r)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=m?h(t,e,r,v,a):a.map(function(n){return d(t,e,r,v,n,m)}),t.seen.pop(),f(E,y,w)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(N(e,String(a))?d(t,e,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(t,e,n,r,i,!0))}),o}function d(t,e,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=g(n)?u(t,l.value,null):u(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function f(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function _(t){return E(t)&&"[object RegExp]"===P(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===P(t)}function T(t){return E(t)&&("[object Error]"===P(t)||t instanceof Error)}function k(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function P(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(M,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),s=r[n];o>n;s=r[++n])a+=g(s)||!E(s)?" "+s:" "+i(s);return a},n.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(x(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var I,L={};n.debuglog=function(t){if(x(I)&&(I=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var r=e.pid;L[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else L[t]=function(){};return L[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=v,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=m,n.isString=b,n.isSymbol=w,n.isUndefined=x,n.isRegExp=_,n.isObject=E,n.isDate=S,n.isError=T,n.isFunction=k,n.isPrimitive=C,n.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":48,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,inherits:28}],50:[function(t,e,n){var r=e.exports,i=(t("events").EventEmitter,t("./lib/request")),o=t("url");r.request=function(t,e){"string"==typeof t&&(t=o.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.protocol||(t.protocol=t.scheme?t.scheme+":":window.location.protocol),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https:"==t.protocol?443:80);var n=new i(new a,t);return e&&n.on("response",e),n},r.get=function(t,e){t.method="GET";var n=r.request(t,e);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var n=new window.ActiveXObject(t[e]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(t[e])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":51,events:27,url:47}],51:[function(t,e,n){var r=t("stream"),i=t("./response"),o=t("Base64"),a=t("inherits"),s=e.exports=function(t,e){var n=this;n.writable=!0,n.xhr=t,n.body=[],n.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(r){}if(e.responseType)try{t.responseType=e.responseType}catch(r){}if(t.open(e.method||"GET",n.uri,!0),t.onerror=function(t){n.emit("error",new Error("Network error"))},n._headers={},e.headers)for(var a=u(e.headers),s=0;s<a.length;s++){var l=a[s];if(n.isSafeRequestHeader(l)){var c=e.headers[l];n.setHeader(l,c)}}e.auth&&this.setHeader("Authorization","Basic "+o.btoa(e.auth));var h=new i;h.on("close",function(){n.emit("close")}),h.on("ready",function(){n.emit("response",h)}),h.on("error",function(t){n.emit("error",t)}),t.onreadystatechange=function(){t.__aborted||h.handle(t)}};a(s,r),s.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},s.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},s.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},s.prototype.write=function(t){this.body.push(t)},s.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=u(this._headers),n=0;n<e.length;n++){var r=e[n],i=this._headers[r];if(l(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(r,i[o]);else this.xhr.setRequestHeader(r,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(l(this.body[0])){for(var a=[],n=0;n<this.body.length;n++)a.push.apply(a,this.body[n]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,n=0;n<this.body.length;n++)s+=this.body[n].length;for(var a=new this.body[0].constructor(s),c=0,n=0;n<this.body.length;n++)for(var d=this.body[n],o=0;o<d.length;o++)a[c++]=d[o];this.xhr.send(a)}else if(h(this.body[0]))this.xhr.send(this.body[0]);else{for(var a="",n=0;n<this.body.length;n++)a+=this.body[n].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(t){return t?-1===c(s.unsafeHeaders,t.toLowerCase()):!1};var u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},h=function(t){return"undefined"!=typeof Blob&&t instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&t instanceof FormData?!0:void 0}},{"./response":52,Base64:53,inherits:54,stream:45}],52:[function(t,e,n){function r(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<e.length;r++){var i=e[r];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==n[a]?u(n[a])?n[a].push(s):n[a]=[n[a],s]:n[a]=s}else n[i]=!0}}return n}var i=t("stream"),o=t("util"),a=e.exports=function(t){this.offset=0,this.readable=!0};o.inherits(a,i);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&s.status2){try{this.statusCode=t.status,this.headers=r(t)}catch(e){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=r(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){s.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{stream:45,util:49}],53:[function(t,e,n){!function(){function t(t){this.message=t}var e="undefined"!=typeof n?n:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var n,i,o=0,a=r,s="";e.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&n>>8-o%1*8)){if(i=e.charCodeAt(o+=.75),i>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return s}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)i=r.indexOf(i);return s})}()},{}],54:[function(t,e,n){e.exports=t(28)},{"/home/alex/projects/javascript/imjs/node_modules/grunt-browserify/node_modules/browserify/node_modules/inherits/inherits_browser.js":28}],55:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.once=r,i.off=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],56:[function(t,e,n){(function(r){function i(t,e,n){function i(){for(;l.length&&!h.paused;){var t=l.shift();if(null===t)return h.emit("end");h.emit("data",t)}}function a(){h.writable=!1,e.call(h),!h.readable&&h.autoDestroy&&h.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&n.autoDestroy===!1),h.write=function(e){return t.call(this,e),!h.paused},h.queue=h.push=function(t){return c?h:(null==t&&(c=!0),l.push(t),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(t){return s?void 0:(s=!0,arguments.length&&h.write(t),a(),h)},h.destroy=function(){return u?void 0:(u=!0,s=!0,l.length=0,h.writable=h.readable=!1,h.emit("close"),h)},h.pause=function(){return h.paused?void 0:(h.paused=!0,h)},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=t("stream");n=e.exports=i,i.through=i}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,stream:45}]},{},[2])(2)})}(window.intermine)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){e.exports=[{selector:"node",style:{content:"data(label)"}},{selector:":selected",style:{"text-outline-color":"black","background-color":"gold","border-color":"gold","border-width":"5px","border-style":"solid"}},{selector:"edge",style:{width:"2px"}},{selector:'edge[interactionType@="genetic"]',style:{"line-color":"#2c79be"}},{selector:'edge[interactionType@="physical"]',style:{"line-color":"red"}},{selector:".genetic",style:{"background-color":"#225f95",shape:"rectangle"}},{selector:".physical",style:{"background-color":"#c00",shape:"ellipse"}},{selector:".both",style:{"background-color":"#77304B",shape:"roundrectangle"}}]},{}],3:[function(t,e,n){var r=t("underscore"),i=function(t){function e(t,i){var o={nodes:[],edges:[]};for(var a in t){var s,l=t[a];s=n(l),l.interactions?o=r.extend(o,e(l.interactions,s)):o.edges=o.edges.concat(u(i,s)),o.nodes.push(s)}return o}this.records=t;var n=function(t){var e,n;return e=t.gene2?t.gene2:t,n=a(t),label=s(t),{classes:i(n),data:{title:e["class"]+" "+label,"interaction details":o(t.details)||{},label:label,"class":e["class"],interactionTypes:n,symbol:e.symbol,id:e.primaryIdentifier}}},i=function(t){var e=r.uniq(t);return e.length>1&&e.push("both"),e.join(" ")},o=function(t){var e={};return r.each(t,function(n,r){Array.isArray(t)?("object"==typeof n&&(n=o(n)),e[n.name]=1===n.length?n[0]:n):Array.isArray(n)?e[r]=1===n.length?n[0]:n:"object"==typeof n?(n=o(n),e[n.name||n["class"]]=1===n.length?n[0]:n):e[r]=n}),e},a=function(t){var e=[];if(t.details)for(var n=0;n<t.details.length;n++)e.indexOf(t.details[n].type)<0&&e.push(t.details[n].type);else e.push("master");return e},s=function(t){return t.gene2&&t.gene2.symbol?t.gene2.symbol:t.symbol?t.symbol:t.details?t.details[0].name:"NAME MISSING"},u=function(t,e){for(var n=e.data.interactionTypes,r=[],i=0;i<n.length;i++)r.push({id:e.data["interaction details"].objectId,classes:n[i],data:{title:"Interaction between "+t.data.label+" and "+e.data.label,source:t.data.id,target:e.data.id,interactionType:n[i]}});return r};return e(t)};e.exports=i},{underscore:17}],4:[function(t,e,n){var r=t("./util"),i=t("./svDataFormatter")();exporter=function(){var t,e,n={},o=function(){var n=function(){s.download(e.jpg(),"network.jpg")},r=function(){s.download(e.png(),"network.png")},o=function(){s.sv("csv")},a=function(){s.sv("tsv")},s={sv:function(e){var n=i.format(e,t),r="text/"+e;s.download(n,"results-table."+e,r,!0)},download:function(t,e,n,r){var i,o=document.createElement("a"),n=n||"application/octet-stream";if(r?(i="data:"+n+",",i+=encodeURIComponent(t)):i=t,navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([t],{type:n}),e);if("download"in o)return o.href+=i,o.setAttribute("download",e),document.body.appendChild(o),setTimeout(function(){o.click(),document.body.removeChild(o)},66),!0;var a=document.createElement("iframe");return document.body.appendChild(a),a.src=i,setTimeout(function(){document.body.removeChild(a)},333),!0}};return{jpg:n,png:r,csv:o,tsv:a}},a=function(){var t=n;t.exportElem=t.parentElem.querySelector(".export"),t.formatChooser=t.exportElem.querySelector("select"),t.exportButton=t.exportElem.querySelector("button");var e=o();t.exportElem.addEventListener("click",function(){r.addClass(t.exportElem,"active")}),t.exportButton.addEventListener("click",function(){var n=u();try{e[n]()}catch(i){console.error("Invalid file format: '"+n+"'. ",i)}r.removeClass(t.exportElem,"active")})},s=function(r){n.parentElem=r.parentElem,t=r.rawData,e=r.cy,a()},u=function(){return n.formatChooser.value};return{init:s}},e.exports=exporter},{"./svDataFormatter":9,"./util":11}],5:[function(t,e,n){function r(t){function e(){if(!v.parentElem){var t=document.getElementById("cymine");if(!t)return console.error(u.dev.noParent.noDefault),!1;v.parentElem=t,console.info(u.dev.noParent.usingDefault)}return!0}function n(){if(v.service)return new a.Service({token:v.service.token,root:v.service.root,errorHandler:i});throw new f("noServiceUrl")}function r(){if(v.queryOn)return s.extend(l.where[0],v.queryOn),!0;throw new f("noQueryData")}function d(){if(e()){p=new h(v);var t=n();r()&&t&&t.records(l).then(function(t){if(t.length>0){v.data=new o(t),v.rawData=t,v.cy=p.init();try{g.init(v)}catch(e){console.error(e)}console.debug("response:",t,"graphdata:",v)}else p.init(u.user.noResults)})}}function f(t,e){var n=e?e:"noQueryData";p.init(u.user[n]),console.error(u.dev[t])}var p,v=s.extend({},t),g=c();d()}function i(){throw new initError("badServiceUrl")}var o=t("./dataFormatter"),a=t("./../bower_components/imjs/js/im.js"),s=(t("cytoscape"),t("underscore")),u=t("./strings"),l=t("./query"),c=t("./exporter"),h=t("./ui");e.exports=r},{"./../bower_components/imjs/js/im.js":1,"./dataFormatter":3,"./exporter":4,"./query":7,"./strings":8,"./ui":10,cytoscape:16,underscore:17}],6:[function(t,e,n){var r=["label","objectId","title","interactionTypes"];e.exports=r},{}],7:[function(t,e,n){e.exports={name:"Gene_Interactions",title:"Gene --> Interactions",description:"Show all interactions for a given gene.",constraintLogic:"A and B",from:"Gene",select:["primaryIdentifier","symbol","interactions.gene2.symbol","interactions.gene2.primaryIdentifier","interactions.details.name","interactions.details.role1","interactions.details.role2","interactions.details.type","interactions.details.dataSets.name"],orderBy:[{path:"symbol",direction:"ASC"}],where:[{path:"Gene",op:"LOOKUP",code:"A",editable:!0,switched:"LOCKED",switchable:!1}]}},{}],8:[function(t,e,n){e.exports={user:{noResults:"No interaction results for this query",noQueryData:"Problem loading query results"},dev:{noParent:{usingDefault:"Cymine: No parent element specified for Cymine. Using default '#cymine",noDefault:"Cymine: No parent element specified, and default '#cymine' not available."},noQueryData:"Cymine: No queryOn values supplied!",noServiceUrl:"Cymine: No serviceUrl defined, unable to query for interactions.",badServiceUrl:"Cymine: bad serviceUrl. Please check for typos and check this host is up."}}},{}],9:[function(t,e,n){var r=function(){var t=function(t,e){var n=["Gene > Symbol","Gene > DB identifier","Gene > Interactions > Details > Type","Gene > Interactions > Gene 2 . Symbol","Gene > Interactions > Gene 2 > DB identifier","Gene > Interactions > Details > Data Sets > Data Source > Name"];return n.join(t)},e=function(t){var e,r,i=[];t=t[0];for(var o=0;o<t.interactions.length;o++)r=t.interactions[o],e=[t.symbol,t.primaryIdentifier,r.gene2.symbol,r.gene2.primaryIdentifier],i=i.concat(n(e,r.details));return i},n=function(t,e){for(var n,i=[],o=0;o<e.length;o++)detail=e[o],n=t.slice(0),n.splice(2,0,detail.type),i=i.concat(r(n,detail.dataSets));return i},r=function(t,e){for(var n,r=[],i=0;i<e.length;i++)ds=e[i],n=t.slice(0),n.push(ds.name),r.push(n);return r},i=function(n,r){var i={csv:",",tsv:"	"},o=t(i[n],r)+"\n",a=e(r);return a.forEach(function(t,e){dataString=t.join(i[n]),o+=dataString+"\n"}),o};return{format:i}};e.exports=r},{}],10:[function(t,e,n){var r=t("./../template/cytomine.html"),i=t("./metaFields"),o=t("./util"),a=t("./cytoscapeStyle");ui=function(t){this.graph=t;var e,n={name:"cose"},s=function(e){targetElem=t.parentElem.querySelector("nodeDetails"),u(e),l(e)},u=function(e){var n=t.parentElem.querySelector(".nodeTitle");n.innerHTML=e.title},l=function(e){var n=h(e),r=t.parentElem.querySelector(".nodeInfo");n.setAttribute("class","nodeInfo"),r.parentElement.replaceChild(n,r)},c=function(){return r},h=function(t){var e,n,r=document.createElement("dl");for(var a in t)i.indexOf(a)<0&&(e=document.createElement("dt"),e.appendChild(document.createTextNode(a)),n=document.createElement("dd"),o.addClass(n,a),"object"==typeof t[a]?(o.addClass(n,"child"),n.appendChild(h(t[a]))):n.appendChild(document.createTextNode(t[a])),d([e,n],r));return r},d=function(t,e){for(var n=e.firstChild,r=0;r<t.length;r++)e.insertBefore(t[r],n)},f=function(t){return v(),t?y(t):g(),e},p=function(){var r,i=function(){return t.parentElem.querySelector(".interactionFilter")},a=function(){return t.parentElem.querySelector(".reset")},s=function(t){var n=t.target;if(n!==t.currentTarget&&"button"===n.nodeName.toLowerCase()){c();var i=n.className;o.addClass(n,"selected"),r&&r.restore(),r=e.elements().filterFn(function(t){return"default"===i?!t:!t.hasClass(i)&&!t.hasClass("both")&&!t.hasClass("master")}).remove()}},u=function(){e.makeLayout(n).run(),i().querySelector(".default").click()},l=function(){i().addEventListener("click",s,!1),a().addEventListener("click",u,!1)},c=function(){for(var t=i().querySelectorAll("button"),e=0;e<t.length;e++)o.removeClass(t[e]," selected"),o.removeClass(t[e],"selected")};return{listen:l}},v=function(){t.parentElem.innerHTML=c(),o.addClass(t.parentElem,"cymine"),t.statusBar=t.parentElem.querySelector(".status")},g=function(){t.targetElem=t.parentElem.querySelector(".cy"),t.targetElem.style.width=t.parentElem.querySelector(".graph").clientWidth+"px";try{var r=p();r.listen()}catch(i){console.error(i)}e=cytoscape({container:t.targetElem,layout:n,elements:t.data,style:a,ready:function(){window.cy=this,t.statusBar.remove()}}),e.on("tap","node",function(){s(this.data())}),e.on("tap","edge",function(){s(this.data())})},y=function(e){t.statusBar.className="status no-results",t.statusBar.innerHTML=e};return{init:f,noResults:y}},e.exports=ui},{"./../template/cytomine.html":18,"./cytoscapeStyle":2,"./metaFields":6,"./util":11}],11:[function(t,e,n){var r={addClass:function(t,e){r.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){t.className=t.className.replace(e,"")},hasClass:function(t,e){var n=t.className.split(" ");return n.indexOf(e)>=0}};e.exports=r},{}],12:[function(t,e,n){},{}],13:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],14:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:15}],15:[function(t,e,n){function r(){c=!1,s.length?l=s.concat(l):h=-1,l.length&&i()}function i(){if(!c){var t=setTimeout(r);c=!0;for(var e=l.length;e;){for(s=l,l=[];++h<e;)s[h].run();h=-1,e=l.length}s=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},l=[],c=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new o(t,e)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],16:[function(require,module,exports){(function(process,__dirname){var cytoscape;!function(t){"use strict";var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.version="2.4.5",e.init=function(t){return void 0===t&&(t={}),e.is.plainObject(t)?new e.Core(t):e.is.string(t)?e.extension.apply(e.extension,arguments):void 0},e.fn={},"undefined"!=typeof module&&module.exports&&(module.exports=cytoscape),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return cytoscape}),t&&(t.cytoscape=cytoscape)}("undefined"==typeof window?null:window),this.cytoscape=cytoscape,function(t){"use strict";var e=0,n=1,r=2,i=function(t){return this instanceof i?(this.id="Thenable/1.0.7",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(t)};i.prototype={fulfill:function(t){return o(this,n,"fulfillValue",t)},reject:function(t){return o(this,r,"rejectReason",t)},then:function(t,e){var n=this,r=new i;return n.onFulfilled.push(u(t,r,"fulfill")),n.onRejected.push(u(e,r,"reject")),a(n),r.proxy}};var o=function(t,n,r,i){return t.state===e&&(t.state=n,t[r]=i,a(t)),t},a=function(t){t.state===n?s(t,"onFulfilled",t.fulfillValue):t.state===r&&s(t,"onRejected",t.rejectReason)},s=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},u=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(o){return void e.reject(o)}l(e,i)}}},l=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof e&&null!==e||"function"==typeof e)try{n=e.then}catch(r){return void t.reject(r)}if("function"!=typeof n)t.fulfill(e);else{var i=!1;try{n.call(e,function(n){i||(i=!0,n===e?t.reject(new TypeError("circular thenable chain")):l(t,n))},function(e){i||(i=!0,t.reject(e))})}catch(r){i||t.reject(r)}}};t.Promise="undefined"==typeof Promise?i:Promise,t.Promise.all=t.Promise.all||function(e){return new t.Promise(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,i++,i===e.length&&t(r)},a=0;a<e.length;a++)!function(t){var r=e[t],i=null!=r.then;if(i)r.then(function(e){o(t,e)},function(t){n(t)});else{var a=r;o(t,a)}}(a)})}}(cytoscape),function(t,e){"use strict";var n="string",r=typeof{},i="function";t.is={defined:function(t){return null!=t},string:function(t){return null!=t&&typeof t==n},fn:function(t){return null!=t&&typeof t===i},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(e){return null!=e&&typeof e===r&&!t.is.array(e)&&e.constructor===Object},object:function(t){return null!=t&&typeof t===r},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(e){return t.is.number(e)&&Math.floor(e)===e},color:function(t){return null!=t&&"string"==typeof t&&""!==$.Color(t).toString()},bool:function(t){return null!=t&&typeof t==typeof!0},elementOrCollection:function(e){return t.is.element(e)||t.is.collection(e)},element:function(e){return e instanceof t.Element&&e._private.single},collection:function(e){return e instanceof t.Collection&&!e._private.single},core:function(e){return e instanceof t.Core},style:function(e){return e instanceof t.Style},stylesheet:function(e){return e instanceof t.Stylesheet},event:function(e){return e instanceof t.Event},thread:function(e){return e instanceof t.Thread},fabric:function(e){return e instanceof t.Fabric},emptyString:function(e){return e?t.is.string(e)&&(""===e||e.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(e){return e&&t.is.string(e)&&""!==e&&!e.match(/^\s+$/)?!0:!1},domElement:function(t){return"undefined"==typeof HTMLElement?!1:t instanceof HTMLElement},boundingBox:function(e){return t.is.plainObject(e)&&t.is.number(e.x1)&&t.is.number(e.x2)&&t.is.number(e.y1)&&t.is.number(e.y2)},promise:function(e){return t.is.object(e)&&t.is.fn(e.then)},touch:function(){return e&&("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return t.is.khtml()||t.is.webkit()||t.is.chromium()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.util={extend:function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||t.is.fn(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(n in e)r=s[n],i=e[n],s!==i&&(c&&i&&(t.is.plainObject(i)||(o=t.is.array(i)))?(o?(o=!1,a=r&&t.is.array(r)?r:[]):a=r&&t.is.plainObject(r)?r:{},s[n]=t.util.extend(c,a,i)):void 0!==i&&(s[n]=i));return s},require:function(n,r,i){var o;i=t.util.extend({msgIfNotFound:!0},i);var a=!1,s=function(t){a=!0,r(t)},u=function(t){e&&(o=e[n]),void 0!==o&&s(o),t&&t()},l=function(){a||c(h)},c=function(t){"undefined"!=typeof module&&module.exports&&require&&(o=require(n)),void 0!==o&&s(o),t&&t()},h=function(){a||d(f)},d=function(t){"undefined"!=typeof define&&define.amd&&require&&require([n],function(e){o=e,void 0!==o&&s(o),t&&t()})},f=function(){!a&&i.msgIfNotFound&&t.util.error("Cytoscape.js tried to pull in dependency `"+n+"` but no module (i.e. CommonJS, AMD, or window) was found")};u(l)},requires:function(e,n){for(var r=[],i=[],o=function(){for(var t=0;t<e.length;t++)if(!i[t])return;n.apply(n,r)},a=0;a<e.length;a++)!function(){var n=e[a],s=a;t.util.require(n,function(t){r[s]=t,i[s]=!0,o()})}()},throttle:function(e,n,r){var i=!0,o=!0;return r===!1?i=!1:t.is.plainObject(r)&&(i="leading"in r?r.leading:i,o="trailing"in r?r.trailing:o),r=r||{},r.leading=i,r.maxWait=n,r.trailing=o,t.util.debounce(e,n,r)},now:function(){return+new Date},debounce:function(e,n,r){var i,o,a,s,u,l,c,h=0,d=!1,f=!0;if(t.is.fn(e)){if(n=Math.max(0,n)||0,r===!0){var p=!0;f=!1}else t.is.plainObject(r)&&(p=r.leading,d="maxWait"in r&&(Math.max(n,r.maxWait)||0),f="trailing"in r?r.trailing:f);var v=function(){var r=n-(t.util.now()-s);if(0>=r){o&&clearTimeout(o);var d=c;o=l=c=void 0,d&&(h=t.util.now(),a=e.apply(u,i),l||o||(i=u=null))}else l=setTimeout(v,r)},g=function(){l&&clearTimeout(l),o=l=c=void 0,(f||d!==n)&&(h=t.util.now(),a=e.apply(u,i),l||o||(i=u=null))};return function(){if(i=arguments,s=t.util.now(),u=this,c=f&&(l||!p),d===!1)var r=p&&!l;else{o||p||(h=s);var y=d-(s-h),m=0>=y;m?(o&&(o=clearTimeout(o)),h=s,a=e.apply(u,i)):o||(o=setTimeout(g,y))}return m&&l?l=clearTimeout(l):l||n===d||(l=setTimeout(v,n)),r&&(m=!0,a=e.apply(u,i)),!m||l||o||(i=u=null),a}}},error:function(t){if(!console)throw t;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw t;console.log.apply(console,arguments)}},clone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},copy:function(e){return null==e?e:t.is.array(e)?e.slice():t.is.plainObject(e)?t.util.clone(e):e},makeBoundingBox:function(t){if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},mapEmpty:function(t){var e=!0;if(null!=t)for(var n in t){e=!1;break}return e},pushMap:function(e){var n=t.util.getMap(e);null==n?t.util.setMap($.extend({},e,{value:[e.value]})):n.push(e.value)},setMap:function(e){for(var n,r=e.map,i=e.keys,o=i.length,a=0;o>a;a++){var n=i[a];t.is.plainObject(n)&&t.util.error("Tried to set map with object key"),a<i.length-1?(null==r[n]&&(r[n]={}),r=r[n]):r[n]=e.value}},getMap:function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;i>o;o++){var a=r[o];if(t.is.plainObject(a)&&t.util.error("Tried to get map with object key"),n=n[a],null==n)return n}return n},deleteMap:function(e){for(var n=e.map,r=e.keys,i=r.length,o=e.keepChildren,a=0;i>a;a++){var s=r[a];t.is.plainObject(s)&&t.util.error("Tried to delete map with object key");var u=a===e.keys.length-1;if(u)if(o)for(var l in n)o[l]||(n[l]=void 0);else n[s]=void 0;else n=n[s]}},capitalize:function(e){return t.is.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},camel2dash:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r.toLowerCase(),o=r!==i;o?(e.push("-"),e.push(i)):e.push(r)}var a=e.length===t.length;return a?t:e.join("")},dash2camel:function(t){for(var e=[],n=!1,r=0;r<t.length;r++){var i=t[r],o="-"===i;o?n=!0:(e.push(n?i.toUpperCase():i),n=!1)}return e.join("")},trim:function(t){var e,n;for(e=0;e<t.length&&" "===t[e];e++);for(n=t.length-1;n>e&&" "===t[n];n--);return t.substring(e,n+1)},hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=4===t.length,o=16;return i?(e=parseInt(t[1]+t[1],o),n=parseInt(t[2]+t[2],o),r=parseInt(t[3]+t[3],o)):(e=parseInt(t[1]+t[2],o),n=parseInt(t[3]+t[4],o),r=parseInt(t[5]+t[6],o)),[e,n,r]}},hsl2tuple:function(e){function n(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var r,i,o,a,s,u,l,c,h=new RegExp("^"+t.util.regex.hsla+"$").exec(e);if(h){if(i=parseInt(h[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,o=parseFloat(h[2]),0>o||o>100)return;if(o/=100,a=parseFloat(h[3]),0>a||a>100)return;if(a/=100,s=h[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===o)u=l=c=Math.round(255*a);else{var d=.5>a?a*(1+o):a+o-a*o,f=2*a-d;u=Math.round(255*n(f,d,i+1/3)),l=Math.round(255*n(f,d,i)),c=Math.round(255*n(f,d,i-1/3))}r=[u,l,c,s]}return r},rgb2tuple:function(e){var n,r=new RegExp("^"+t.util.regex.rgba+"$").exec(e);if(r){n=[];for(var i=[],o=1;3>=o;o++){var a=r[o];if("%"===a[a.length-1]&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),0>a||a>255)return;n.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(void 0!==l){if(l=parseFloat(l),0>l||l>1)return;n.push(l)}}return n},colorname2tuple:function(e){return t.util.colors[e.toLowerCase()]},color2tuple:function(e){return(t.is.array(e)?e:null)||t.util.colorname2tuple(e)||t.util.hex2tuple(e)||t.util.rgb2tuple(e)||t.util.hsl2tuple(e)},tuple2hex:function(t){function e(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e}var n=t[0],r=t[1],i=t[2];return"#"+e(n)+e(r)+e(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},t.util.regex={},t.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",t.util.regex.rgba="rgb[a]?\\(("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",t.util.regex.hsla="hsl[a]?\\(("+t.util.regex.number+")\\s*,\\s*("+t.util.regex.number+"[%])\\s*,\\s*("+t.util.regex.number+"[%])(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+t.util.regex.number+")\\s*,\\s*(?:"+t.util.regex.number+"[%])\\s*,\\s*(?:"+t.util.regex.number+"[%])(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",t.util.regex.hex3="\\#[0-9a-fA-F]{3}",t.util.regex.hex6="\\#[0-9a-fA-F]{6}";var n=e?e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame:null;n=n||function(t){t&&setTimeout(t,1e3/60)},t.util.requestAnimationFrame=function(t){n(t)}}(cytoscape,"undefined"==typeof window?null:window),function(t){
"use strict";t.math={},t.math.signum=function(t){return t>0?1:0>t?-1:0},t.math.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},t.math.qbezierAt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},t.math.qbezierPtAt=function(e,n,r,i){return{x:t.math.qbezierAt(e.x,n.x,r.x,i),y:t.math.qbezierAt(e.y,n.y,r.y,i)}},t.math.boundingBoxesIntersect=function(t,e){return t.x1>e.x2?!1:e.x1>t.x2?!1:t.x2<e.x1?!1:e.x2<t.x1?!1:t.y2<e.y1?!1:e.y2<t.y1?!1:t.y1>e.y2?!1:e.y1>t.y2?!1:!0},t.math.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},t.math.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},t.math.roundRectangleIntersectLine=function(t,e,n,r,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,h=n-l+u-a,d=r-c-a,f=n+l-u+a,p=d;if(s=this.finiteLinesIntersect(t,e,n,r,h,d,f,p,!1),s.length>0)return s;var v=n+l+a,g=r-c+u-a,y=v,m=r+c-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,v,g,y,m,!1),s.length>0)return s;var b=n-l+u-a,w=r+c+a,x=n+l-u+a,_=w;if(s=this.finiteLinesIntersect(t,e,n,r,b,w,x,_,!1),s.length>0)return s;var E=n-l-a,S=r-c+u-a,T=E,k=r+c-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,E,S,T,k,!1),s.length>0)return s;var C,P=n-l+u,D=r-c+u;if(C=this.intersectLineCircle(t,e,n,r,P,D,u+a),C.length>0&&C[0]<=P&&C[1]<=D)return[C[0],C[1]];var O=n+l-u,N=r-c+u;if(C=this.intersectLineCircle(t,e,n,r,O,N,u+a),C.length>0&&C[0]>=O&&C[1]<=N)return[C[0],C[1]];var M=n+l-u,I=r+c-u;if(C=this.intersectLineCircle(t,e,n,r,M,I,u+a),C.length>0&&C[0]>=M&&C[1]>=I)return[C[0],C[1]];var L=n-l+u,R=r+c-u;return C=this.intersectLineCircle(t,e,n,r,L,R,u+a),C.length>0&&C[0]<=L&&C[1]>=R?[C[0],C[1]]:[]},t.math.roundRectangleIntersectBox=function(t,e,n,r,i,o,a,s,u){var l=this.getRoundRectangleRadius(i,o),c=a-i/2-u,h=s-o/2+l-u,d=a+i/2+u,f=s+o/2-l+u,p=a-i/2+l-u,v=s-o/2-u,g=a+i/2-l+u,y=s+o/2+u,m=Math.min(t,n),b=Math.max(t,n),w=Math.min(e,r),x=Math.max(e,r);return c>b?!1:m>d?!1:v>x?!1:w>y?!1:c>=m&&b>=c&&h>=w&&x>=h?!0:d>=m&&b>=d&&h>=w&&x>=h?!0:d>=m&&b>=d&&f>=w&&x>=f?!0:c>=m&&b>=c&&f>=w&&x>=f?!0:m>=c&&d>=m&&w>=h&&f>=w?!0:b>=c&&d>=b&&w>=h&&f>=w?!0:b>=c&&d>=b&&x>=h&&f>=x?!0:m>=c&&d>=m&&x>=h&&f>=x?!0:p>=m&&b>=p&&v>=w&&x>=v?!0:g>=m&&b>=g&&v>=w&&x>=v?!0:g>=m&&b>=g&&y>=w&&x>=y?!0:p>=m&&b>=p&&y>=w&&x>=y?!0:m>=p&&g>=m&&w>=v&&y>=w?!0:b>=p&&g>=b&&w>=v&&y>=w?!0:b>=p&&g>=b&&x>=v&&y>=x?!0:m>=p&&g>=m&&x>=v&&y>=x?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,p+u,h+u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,g-u,h+u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,g-u,f-u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,p+u,f-u)?!0:!1},t.math.checkInBoundingCircle=function(t,e,n,r,i,o,a,s){return t=(t-a)/(i+r),e=(e-s)/(o+r),n>=t*t+e*e},t.math.boxInBezierVicinity=function(t,e,n,r,i,o,a,s,u,l,c){var h=.25*i+.5*a+.25*u,d=.25*o+.5*s+.25*l,f=Math.min(t,n)-c,p=Math.min(e,r)-c,v=Math.max(t,n)+c,g=Math.max(e,r)+c;if(i>=f&&v>=i&&o>=p&&g>=o)return 1;if(u>=f&&v>=u&&l>=p&&g>=l)return 1;if(h>=f&&v>=h&&d>=p&&g>=d)return 1;if(a>=f&&v>=a&&s>=p&&g>=s)return 1;var y=Math.min(i,h,u),m=Math.min(o,d,l),b=Math.max(i,h,u),w=Math.max(o,d,l);return y>v||f>b||m>g||p>w?0:1},t.math.checkBezierInBox=function(e,n,r,i,o,a,s,u,l,c,h){function d(h){var d=t.math.qbezierAt(o,s,l,h),f=t.math.qbezierAt(a,u,c,h);return d>=e&&r>=d&&f>=n&&i>=f}for(var f=0;1>=f;f+=.25)if(!d(f))return!1;return!0},t.math.checkStraightEdgeInBox=function(t,e,n,r,i,o,a,s,u){return i>=t&&n>=i&&a>=t&&n>=a&&o>=e&&r>=o&&s>=e&&r>=s},t.math.checkStraightEdgeCrossesBox=function(t,e,n,r,i,o,a,s,u){var l,c,h=Math.min(t,n)-u,d=Math.min(e,r)-u,f=Math.max(t,n)+u,p=Math.max(e,r)+u,v=a-i,g=i,y=s-o,m=o;if(Math.abs(v)<1e-4)return i>=h&&f>=i&&Math.min(o,s)<=d&&Math.max(o,s)>=p;var b=(h-g)/v;if(b>0&&1>=b&&(l=y*b+m,l>=d&&p>=l))return!0;var w=(f-g)/v;if(w>0&&1>=w&&(l=y*w+m,l>=d&&p>=l))return!0;var x=(d-m)/y;if(x>0&&1>=x&&(c=v*x+g,c>=h&&f>=c))return!0;var _=(p-m)/y;return _>0&&1>=_&&(c=v*_+g,c>=h&&f>=c)?!0:!1},t.math.checkBezierCrossesBox=function(t,e,n,r,i,o,a,s,u,l,c){var h=Math.min(t,n)-c,d=Math.min(e,r)-c,f=Math.max(t,n)+c,p=Math.max(e,r)+c;if(i>=h&&f>=i&&o>=d&&p>=o)return!0;if(u>=h&&f>=u&&l>=d&&p>=l)return!0;var v=i-2*a+u,g=-2*i+2*a,y=i,m=[];if(Math.abs(v)<1e-4){var b=(h-i)/g,w=(f-i)/g;m.push(b,w)}else{var x,_,E=g*g-4*v*(y-h);if(E>0){var S=Math.sqrt(E);x=(-g+S)/(2*v),_=(-g-S)/(2*v),m.push(x,_)}var T,k,C=g*g-4*v*(y-f);if(C>0){var S=Math.sqrt(C);T=(-g+S)/(2*v),k=(-g-S)/(2*v),m.push(T,k)}}m.sort(function(t,e){return t-e});var P=o-2*s+l,D=-2*o+2*s,O=o,N=[];if(Math.abs(P)<1e-4){var M=(d-o)/D,I=(p-o)/D;N.push(M,I)}else{var L,R,B=D*D-4*P*(O-d);if(B>0){var S=Math.sqrt(B);L=(-D+S)/(2*P),R=(-D-S)/(2*P),N.push(L,R)}var A,j,q=D*D-4*P*(O-p);if(q>0){var S=Math.sqrt(q);A=(-D+S)/(2*P),j=(-D-S)/(2*P),N.push(A,j)}}N.sort(function(t,e){return t-e});for(var z=0;z<m.length;z+=2)for(var F=1;F<N.length;F+=2)if(m[z]<N[F]&&N[F]>=0&&m[z]<=1&&m[z+1]>N[F-1]&&N[F-1]<=1&&m[z+1]>=0)return!0;return!1},t.math.inLineVicinity=function(t,e,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return t>=u-s&&l+s>=t&&e>=c-s&&h+s>=e},t.math.inBezierVicinity=function(t,e,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i),x2:Math.max(n,a,i),y1:Math.min(r,s,o),y2:Math.max(r,s,o)};return t<l.x1||t>l.x2||e<l.y1||e>l.y2?!1:!0},t.math.solveCubic=function(t,e,n,r,i){e/=t,n/=t,r/=t;var o,a,s,u,l,c,h,d;return a=(3*n-e*e)/9,s=-(27*r)+e*(9*n-2*e*e),s/=54,o=a*a*a+s*s,i[1]=0,h=e/3,o>0?(l=s+Math.sqrt(o),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*d,void(i[4]=i[2]=-(d+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(u/3),i[2]=-h+d*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((u+4*Math.PI)/3))))},t.math.sqDistanceToQuadraticBezier=function(t,e,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,d=[];this.solveCubic(u,l,c,h,d);for(var f=1e-7,p=[],v=0;6>v;v+=2)Math.abs(d[v+1])<f&&d[v]>=0&&d[v]<=1&&p.push(d[v]);p.push(1),p.push(0);for(var g,y,m,b,w=-1,x=0;x<p.length;x++)y=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*a,m=Math.pow(1-p[x],2)*r+2*(1-p[x])*p[x]*o+p[x]*p[x]*s,b=Math.pow(y-t,2)+Math.pow(m-e,2),w>=0?w>b&&(w=b,g=p[x]):(w=b,g=p[x]);return w},t.math.sqDistanceToFiniteLine=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return 0>c?l:h>u?(t-i)*(t-i)+(e-o)*(e-o):l-h},t.math.pointInsidePolygon=function(t,e,n,r,i,o,a,s,u){var l=new Array(n.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var h=Math.cos(-c),d=Math.sin(-c),f=0;f<l.length/2;f++)l[2*f]=o/2*(n[2*f]*h-n[2*f+1]*d),l[2*f+1]=a/2*(n[2*f+1]*h+n[2*f]*d),l[2*f]+=r,l[2*f+1]+=i;var p;if(u>0){var v=this.expandPolygon(l,-u);p=this.joinLines(v)}else p=l;for(var g,y,m,b,w,x=0,_=0,f=0;f<p.length/2;f++)if(g=p[2*f],y=p[2*f+1],f+1<p.length/2?(m=p[2*(f+1)],b=p[2*(f+1)+1]):(m=p[2*(f+1-p.length/2)],b=p[2*(f+1-p.length/2)+1]),g==t&&m==t);else{if(!(g>=t&&t>=m||t>=g&&m>=t))continue;w=(t-g)/(m-g)*(b-y)+y,w>e&&x++,e>w&&_++}return x%2===0?!1:!0},t.math.joinLines=function(t){for(var e,n,r,i,o,a,s,u,l=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],n=t[4*c+1],r=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],u=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],u=t[3]);var h=this.finiteLinesIntersect(e,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},t.math.expandPolygon=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=n+h*e,a[4*s+1]=r+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},t.math.intersectLineEllipse=function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(n-t)*c+t,(r-e)*c+e]},t.math.dotProduct=function(t,e){if(2!=t.length||2!=e.length)throw"dot product: arguments are not vectors";return t[0]*e[0]+t[1]*e[1]},t.math.intersectLineCircle=function(t,e,n,r,i,o,a){var s=[n-t,r-e],u=[i,o],l=[t-i,e-o],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-a*a,d=h*h-4*c*u;if(0>d)return[];var f=(-h+Math.sqrt(d))/(2*c),p=(-h-Math.sqrt(d))/(2*c),v=Math.min(f,p),g=Math.max(f,p),y=[];if(v>=0&&1>=v&&y.push(v),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+t,b=y[0]*s[1]+e;if(y.length>1){if(y[0]==y[1])return[m,b];var w=y[1]*s[0]+t,x=y[1]*s[1]+e;return[m,b,w,x]}return[m,b]},t.math.findCircleNearPoint=function(t,e,n,r,i){var o=r-t,a=i-e,s=Math.sqrt(o*o+a*a),u=o/s,l=a/s;return[t+u*n,e+l*n]},t.math.findMaxSqDistanceToOrigin=function(t){for(var e,n=1e-6,r=0;r<t.length/2;r++)e=t[2*r]*t[2*r]+t[2*r+1]*t[2*r+1],e>n&&(n=e);return n},t.math.finiteLinesIntersect=function(t,e,n,r,i,o,a,s,u){var l=(a-i)*(e-o)-(s-o)*(t-i),c=(n-t)*(e-o)-(r-e)*(t-i),h=(s-o)*(n-t)-(a-i)*(r-e);if(0!==h){var d=l/h,f=c/h;return d>=0&&1>=d&&f>=0&&1>=f?[t+d*(n-t),e+d*(r-e)]:u?[t+d*(n-t),e+d*(r-e)]:[]}return 0===l||0===c?[t,n,a].sort()[1]===a?[a,s]:[t,n,i].sort()[1]===i?[i,o]:[i,a,n].sort()[1]===n?[n,r]:[]:[]},t.math.boxIntersectEllipse=function(t,e,n,r,i,o,a,s,u){if(t>n){var l=t;t=n,n=l}if(e>r){var c=e;e=r,r=c}var h=[s-o/2-i,u],d=[s+o/2+i,u],f=[s,u-a/2-i],p=[s,u+a/2+i];return n<h[0]?!1:t>d[0]?!1:e>p[1]?!1:r<f[1]?!1:t<=d[0]&&d[0]<=n&&e<=d[1]&&d[1]<=r?!0:t<=h[0]&&h[0]<=n&&e<=h[1]&&h[1]<=r?!0:t<=f[0]&&f[0]<=n&&e<=f[1]&&f[1]<=r?!0:t<=p[0]&&p[0]<=n&&e<=p[1]&&p[1]<=r?!0:(t=(t-s)/(o/2+i),n=(n-s)/(o/2+i),e=(e-u)/(a/2+i),r=(r-u)/(a/2+i),1>=t*t+e*e?!0:1>=n*n+e*e?!0:1>=n*n+r*r?!0:1>=t*t+r*r?!0:!1)},t.math.boxIntersectPolygon=function(e,n,r,i,o,a,s,u,l,c,h){if(e>r){var d=e;e=r,r=d}if(n>i){var f=n;n=i,i=f}var p=new Array(o.length),v=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var g=Math.cos(-v),y=Math.sin(-v),m=0;m<p.length/2;m++)p[2*m]=a/2*(o[2*m]*g-o[2*m+1]*y),p[2*m+1]=s/2*(o[2*m+1]*g+o[2*m]*y),p[2*m]+=u,p[2*m+1]+=l;for(var b=p[0],w=p[0],x=p[1],_=p[1],m=1;m<p.length/2;m++)p[2*m]>w&&(w=p[2*m]),p[2*m]<b&&(b=p[2*m]),p[2*m+1]>_&&(_=p[2*m+1]),p[2*m+1]<x&&(x=p[2*m+1]);if(b-h>r)return!1;if(e>w+h)return!1;if(x-h>i)return!1;if(n>_+h)return!1;var E;if(h>0){var S=t.math.expandPolygon(p,-h);E=t.math.joinLines(S)}else E=p;for(var m=0;m<p.length/2;m++)if(e<=p[2*m]&&p[2*m]<=r&&n<=p[2*m+1]&&p[2*m+1]<=i)return!0;for(var m=0;m<E.length/2;m++){var T,k,C=E[2*m],P=E[2*m+1];if(m<E.length/2-1?(T=E[2*(m+1)],k=E[2*(m+1)+1]):(T=E[0],k=E[1]),t.math.finiteLinesIntersect(C,P,T,k,e,n,r,n,!1).length>0)return!0;if(t.math.finiteLinesIntersect(C,P,T,k,e,i,r,i,!1).length>0)return!0;if(t.math.finiteLinesIntersect(C,P,T,k,e,n,e,i,!1).length>0)return!0;if(t.math.finiteLinesIntersect(C,P,T,k,r,n,r,i,!1).length>0)return!0}return!1},t.math.polygonIntersectLine=function(e,n,r,i,o,a,s,u){for(var l,c=[],h=new Array(r.length),d=0;d<h.length/2;d++)h[2*d]=r[2*d]*a+i,h[2*d+1]=r[2*d+1]*s+o;var f;if(u>0){var p=t.math.expandPolygon(h,-u);f=t.math.joinLines(p)}else f=h;for(var v,g,y,m,d=0;d<f.length/2;d++)v=f[2*d],g=f[2*d+1],d<f.length/2-1?(y=f[2*(d+1)],m=f[2*(d+1)+1]):(y=f[0],m=f[1]),l=this.finiteLinesIntersect(e,n,i,o,v,g,y,m),0!==l.length&&c.push(l[0],l[1]);return c},t.math.shortenIntersection=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return 0>o&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},t.math.generateUnitNgonPointsFitToSquare=function(e,n){var r=t.math.generateUnitNgonPoints(e,n);return r=t.math.fitPolygonToSquare(r)},t.math.fitPolygonToSquare=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;r>u;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),u=0;r>u;u++)e=t[2*u]=t[2*u]*l,n=t[2*u+1]=t[2*u+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(-1>o)for(var u=0;r>u;u++)n=t[2*u+1]=t[2*u+1]+(-1-o);return t},t.math.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,r=t%2===0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o,a,s=new Array(2*t),u=0;t>u;u++)i=u*n+r,o=s[2*u]=Math.cos(i),a=s[2*u+1]=Math.sin(-i);return s},t.math.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)}}(cytoscape),function(t){"use strict";function e(e,n,r){var i={};switch(i[n]=r,e){case"core":case"collection":t.fn[e](i)}if("layout"===e){for(var a=r.prototype,s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this}),a.stop||(a.stop=function(){var t=this.options;return t&&t.animate&&t.eles.stop(),this}),a.on=t.define.on({layout:!0}),a.one=t.define.on({layout:!0,unbindSelfOnTrigger:!0}),a.once=t.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),a.off=t.define.off({layout:!0}),a.trigger=t.define.trigger({layout:!0}),t.define.eventAliasesOn(a)}return t.util.setMap({map:o,keys:[e,n],value:r})}function n(e,n){return t.util.getMap({map:o,keys:[e,n]})}function r(e,n,r,i,o){return t.util.setMap({map:a,keys:[e,n,r,i],value:o})}function i(e,n,r,i){return t.util.getMap({map:a,keys:[e,n,r,i]})}var o={};t.extensions=o;var a={};t.modules=a,t.extension=function(){return 2==arguments.length?n.apply(this,arguments):3==arguments.length?e.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?r.apply(this,arguments):void t.util.error("Invalid extension access syntax")}}(cytoscape),function(t,e){"use strict";if(t){var n=function(t){var e=t[0]._cyreg=t[0]._cyreg||{};return e};t.fn.cytoscape=function(r){var i=t(this);if("get"===r)return n(i).cy;if(e.is.fn(r)){var o=r,a=n(i).cy;if(a&&a.isReady())a.trigger("ready",[],o);else{var s=n(i),u=s.readies=s.readies||[];u.push(o)}}else if(e.is.plainObject(r))return i.each(function(){var e=t.extend({},r,{container:t(this)[0]});cytoscape(e)})},t.cytoscape=cytoscape,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)}}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(t){"use strict";function e(){return!1}function n(){return!0}t.Event=function(r,i){return this instanceof t.Event?(r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented?n:e):this.type=r,i&&(this.type=void 0!==i.type?i.type:this.type,this.cy=i.cy,this.cyTarget=i.cyTarget,this.cyPosition=i.cyPosition,this.cyRenderedPosition=i.cyRenderedPosition,this.namespace=i.namespace,this.layout=i.layout,this.data=i.data,this.message=i.message),void(this.timeStamp=r&&r.timeStamp||+new Date)):new t.Event(r,i)},t.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=n;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e}}(cytoscape),function(t){"use strict";t.define={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return e=t.util.extend({},n,e),function(n,r){var i=e,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(t.is.string(n)){if(i.allowGetting&&void 0===r){var l;return u&&(l=u._private[i.field][n]),l}if(i.allowSetting&&void 0!==r){var c=!i.immutableKeys[n];if(c){for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][n]=r);i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&t.is.plainObject(n)){var f,p,v=n;for(f in v){p=v[f];var c=!i.immutableKeys[f];if(c)for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][f]=p)}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&t.is.fn(n)){var g=n;o.bind(i.bindingEvent,g)}else if(i.allowGetting&&void 0===n){var l;return u&&(l=u._private[i.field]),l}return o}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=t.util.extend({},n,e),function(n){var r=e,i=this,o=void 0!==i.length,a=o?i:[i];if(t.is.string(n)){for(var s=n.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!t.is.emptyString(c)){var h=!r.immutableKeys[c];if(h)for(var d=0,f=a.length;f>d;d++)a[d]._private[r.field][c]=void 0}}r.triggerEvent&&i[r.triggerFnName](r.event)}else if(void 0===n){for(var d=0,f=a.length;f>d;d++){var p=a[d]._private[r.field];for(var c in p){var v=!r.immutableKeys[c];v&&(p[c]=void 0)}}r.triggerEvent&&i[r.triggerFnName](r.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(e){var n={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return e=t.util.extend({},n,e),function(n,r,i,o){var a=this,s=void 0!==a.length,u=s?a:[a],l=t.is.string(n),c=e;if(t.is.plainObject(r)?(o=i,i=r,r=void 0):(t.is.fn(r)||r===!1)&&(o=r,i=void 0,r=void 0),(t.is.fn(i)||i===!1)&&(o=i,i=void 0),!t.is.fn(o)&&o!==!1&&l)return a;if(l){var h={};h[n]=o,n=h}for(var d in n)if(o=n[d],o===!1&&(o=t.define.event.falseCallback),t.is.fn(o)){d=d.split(/\s+/);for(var f=0;f<d.length;f++){var p=d[f];if(!t.is.emptyString(p)){var v=p.match(t.define.event.regex);if(v)for(var g=v[1],y=v[2]?v[2]:void 0,m={callback:o,data:i,delegated:r?!0:!1,selector:r,selObj:new t.Selector(r),type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:u},b=0;b<u.length;b++){var w=u[b]._private;w.listeners=w.listeners||[],w.listeners.push(m)}}}}return a}},eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.removeListener=n.unlisten=n.unbind=n.off,n.emit=n.trigger,n.pon=n.promiseOn=function(e,n){var r=this,i=Array.prototype.slice.call(arguments,0);return new t.Promise(function(t,e){var n=function(e){r.off.apply(r,a),t(e)},o=i.concat([n]),a=o.concat([]);r.on.apply(r,o)})}},off:function(e){var n={};return e=t.util.extend({},n,e),function(e,n,r){var i=this,o=void 0!==i.length,a=o?i:[i],s=t.is.string(e);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private.listeners=[];return i}if((t.is.fn(n)||n===!1)&&(r=n,n=void 0),s){var l={};l[e]=r,e=l}for(var c in e){r=e[c],r===!1&&(r=t.define.event.falseCallback),c=c.split(/\s+/);for(var h=0;h<c.length;h++){var d=c[h];if(!t.is.emptyString(d)){var f=d.match(t.define.event.optionalTypeRegex);if(f)for(var p=f[1]?f[1]:void 0,v=f[2]?f[2]:void 0,u=0;u<a.length;u++)for(var g=a[u]._private.listeners=a[u]._private.listeners||[],y=0;y<g.length;y++){var m=g[y],b=!v||v===m.namespace,w=!p||m.type===p,x=!r||r===m.callback,_=b&&w&&x;_&&(g.splice(y,1),y--)}}}}return i}},trigger:function(e){var n={};return e=t.util.extend({},n,e),function(n,r,i){var o=this,a=void 0!==o.length,s=a?o:[o],u=t.is.string(n),l=t.is.plainObject(n),c=t.is.event(n),h=this._private.cy||(t.is.core(this)?this:null),d=h?h.hasCompoundNodes():!1;if(u){var f=n.split(/\s+/);n=[];for(var p=0;p<f.length;p++){var v=f[p];if(!t.is.emptyString(v)){var g=v.match(t.define.event.regex),y=g[1],m=g[2]?g[2]:void 0;n.push({type:y,namespace:m})}}}else if(l){var b=n;n=[b]}r?t.is.array(r)||(r=[r]):r=[];for(var p=0;p<n.length;p++)for(var w=n[p],x=0;x<s.length;x++){var v,_=s[x],E=_._private.listeners=_._private.listeners||[],S=t.is.element(_),T=S||e.layout;if(c?(v=w,v.cyTarget=v.cyTarget||_,v.cy=v.cy||h):v=new t.Event(w,{cyTarget:_,cy:h,namespace:w.namespace}),w.layout&&(v.layout=w.layout),e.layout&&(v.layout=_),v.cyPosition){var k=v.cyPosition,C=h.zoom(),P=h.pan();v.cyRenderedPosition={x:k.x*C+P.x,y:k.y*C+P.y}}i&&(E=[{namespace:v.namespace,type:v.type,callback:i}]);for(var D=0;D<E.length;D++){var O=E[D],N=!O.namespace||O.namespace===v.namespace,M=O.type===v.type,I=O.delegated?_!==v.cyTarget&&t.is.element(v.cyTarget)&&O.selObj.matches(v.cyTarget):!0,L=N&&M&&I;if(L){var R=[v];if(R=R.concat(r),v.data=O.data?O.data:void 0,(O.unbindSelfOnTrigger||O.unbindAllBindersOnTrigger)&&(E.splice(D,1),D--),O.unbindAllBindersOnTrigger)for(var B=O.binders,A=0;A<B.length;A++){var j=B[A];if(j&&j!==_)for(var q=j._private.listeners,z=0;z<q.length;z++){var F=q[z];F===O&&(q.splice(z,1),z--)}}var V=O.delegated?v.cyTarget:_,U=O.callback.apply(V,R);(U===!1||v.isPropagationStopped())&&(T=!1,U===!1&&(v.stopPropagation(),v.preventDefault()))}}if(T){var X=d?_._private.parent:null,Y=null!=X&&0!==X.length;Y?(X=X[0],X.trigger(v)):h.trigger(v)}}return o}},animated:function(e){var n={};return e=t.util.extend({},n,e),function(){var t=this,e=void 0!==t.length,n=e?t:[t],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(e){var n={};return e=t.util.extend({},n,e),function(){var t=this,e=void 0!==t.length,n=e?t:[t],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this._private.cy||this;return n.styleEnabled()?(this.animate({delay:t},{duration:t,complete:e}),this):this}},animate:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var u,l=+new Date,c=o.style();switch(void 0===e&&(e={}),void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}var h=!0;if(t)for(var d in t){h=!1;break}if(h)return this;if(t.css&&s&&(t.css=c.getValueStyle(t.css,{array:!0})),t.renderedPosition&&s){var f=t.renderedPosition,p=o.pan(),v=o.zoom();t.position={x:(f.x-p.x)/v,y:(f.y-p.y)/v}}if(t.panBy&&a){var g=t.panBy,y=o.pan();t.pan={x:y.x+g.x,y:y.y+g.y}}var m=t.center||t.centre;if(m&&a){var b=o.getCenterPan(m.eles,t.zoom);b&&(t.pan=b)}if(t.fit&&a){var w=t.fit,x=o.getFitViewport(w.eles||w.boundingBox,w.padding);x&&(t.pan=x.pan,t.zoom=x.zoom)}for(var d=0;d<i.length;d++){var _=i[d];u=_.animated()&&(void 0===e.queue||e.queue)?_._private.animation.queue:_._private.animation.current,u.push({properties:t,duration:e.duration,params:e,callTime:l})}return s&&o.addToAnimationPool(this),this}},stop:function(e){var n={};return e=t.util.extend({},n,e),function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private.animation.current,l=0;l<u.length;l++){var c=u[l];e&&(c.duration=0)}t&&(s._private.animation.queue=[]),e||(s._private.animation.current=[])}return o.notify({collection:this,type:"draw"}),this}}}}(cytoscape),function(t){"use strict";t.fn.selector=function(e,n){for(var r in e){var i=e[r];t.Selector.prototype[r]=i}},t.Selector=function(e,n){if(!(this instanceof t.Selector))return new t.Selector(e,n);void 0===n&&void 0!==e&&(n=e,e=void 0);var r=this;if(r._private={selectorText:null,invalid:!0},!n||t.is.string(n)&&n.match(/^\s*$/))null==e?r.length=0:(r[0]=a(),r[0].group=e,r.length=1);else if(t.is.element(n)){var i=new t.Collection(r.cy(),[n]);r[0]=a(),r[0].collection=i,r.length=1}else if(t.is.collection(n))r[0]=a(),r[0].collection=n,r.length=1;else if(t.is.fn(n))r[0]=a(),r[0].filter=n,r.length=1;else{if(!t.is.string(n))return void t.util.error("A selector must be created from a string; found "+n);var o=null,a=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:t.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var u=function(t){return t.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(t,e,n,r){return e})},l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];s.comparatorOp+="|@"+h}for(var l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];h.indexOf("!")>=0||"="!==h&&(s.comparatorOp+="|\\!"+h)}var d={group:{query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"==t?t:t+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(t){this.ids.push(u(t))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(t){this.classes.push(u(t))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(t){this.data.push({field:u(t)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(t,e,n){var r=null!=new RegExp("^"+s.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:u(t),operator:e,value:n})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:u(e),operator:t})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(t,e,n){this.meta.push({field:u(t),operator:e,value:parseFloat(n)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){r[++c]=a(),o=null}},child:{separator:!0,regex:s.child,populate:function(){var t=a();t.parent=this,t.subject=o,r[c]=t}},descendant:{separator:!0,regex:s.descendant,populate:function(){var t=a();t.ancestor=this,t.subject=o,r[c]=t}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=o&&this.subject!=this?(t.util.error("Redefinition of subject in selector `"+n+"`"),!1):(o=this,void(this.subject=this))}}},f=0;for(var p in d)d[f]=d[p],d[f].name=p,f++;d.length=f,r._private.selectorText=n;var v=n,c=0,g=function(e){for(var n,r,i,o=0;o<d.length;o++){var a=d[o],s=a.name;if(!t.is.fn(e)||e(s,a)){var u=v.match(new RegExp("^"+a.regex));if(null!=u){r=u,n=a,i=s;var l=u[0];v=v.substring(l.length);break}}}return{expr:n,match:r,name:i}},y=function(){var t=v.match(/^\s+/);if(t){var e=t[0];v=v.substring(e.length)}};for(r[0]=a(),y();;){var m=g();if(null==m.expr)return void t.util.error("The selector `"+n+"`is invalid");for(var b=[],f=1;f<m.match.length;f++)b.push(m.match[f]);var w=m.expr.populate.apply(r[c],b);if(w===!1)return;if(v.match(/^\s*$/))break}for(r.length=c+1,f=0;f<r.length;f++){var x=r[f];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var _=x.parent,E=x;E.parent=null,_.child=E,x=_}else{if(null==x.ancestor){t.util.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var S=x.ancestor,T=x;T.ancestor=null,S.descendant=T,x=S}r[f]=x.subject}}if(null!=e)for(var f=0;f<r.length;f++){if(null!=r[f].group&&r[f].group!=e)return void t.util.error("Group `"+r[f].group+"` conflicts with implicit group `"+e+"` in selector `"+n+"`");r[f].group=e}}r._private.invalid=!1},t.selfn=t.Selector.prototype,t.selfn.size=function(){return this.length},t.selfn.eq=function(t){return this[t]},t.selfn.find=function(){};var e=function(n,r){if(null!=n.group&&"*"!=n.group&&n.group!=r._private.group)return!1;for(var i=r.cy(),o=!0,a=0;a<n.colonSelectors.length;a++){var s=n.colonSelectors[a];switch(s){case":selected":o=r.selected();break;case":unselected":o=!r.selected();break;case":selectable":o=r.selectable();break;case":unselectable":o=!r.selectable();break;case":locked":o=r.locked();break;case":unlocked":o=!r.locked();break;case":visible":o=r.visible();break;case":hidden":o=!r.visible();break;case":transparent":o=r.transparent();break;case":grabbed":o=r.grabbed();break;case":free":o=!r.grabbed();break;case":removed":o=r.removed();break;case":inside":o=!r.removed();break;case":grabbable":o=r.grabbable();break;case":ungrabbable":o=!r.grabbable();break;case":animated":o=r.animated();break;case":unanimated":o=!r.animated();break;case":parent":o=r.isNode()&&r.children().nonempty();break;case":child":case":nonorphan":o=r.isNode()&&r.parent().nonempty();break;case":orphan":o=r.isNode()&&r.parent().empty();break;case":loop":o=r.isEdge()&&r.data("source")===r.data("target");break;case":simple":o=r.isEdge()&&r.data("source")!==r.data("target");break;case":active":o=r.active();break;case":inactive":o=!r.active();break;case":touch":o=t.is.touch();break;case":backgrounding":o=r.backgrounding();break;case":nonbackgrounding":o=!r.backgrounding()}if(!o)break}if(!o)return!1;for(var u=!0,a=0;a<n.ids.length;a++){var l=n.ids[a],c=r._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var h=!0,a=0;a<n.classes.length;a++){var d=n.classes[a];if(h=h&&r.hasClass(d),!h)break}if(!h)return!1;var f=function(e){for(var r=!0,i=0;i<n[e.name].length;i++){var o,a=n[e.name][i],s=a.operator,u=a.value,l=a.field;if(null!=s&&null!=u){var c=e.fieldValue(l),h=t.is.string(c)||t.is.number(c)?""+c:"",d=""+u,f=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),f=!0);var p=!1,v=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),p=!0),f&&(u=d.toLowerCase(),c=h.toLowerCase()),s){case"*=":o=h.search(d)>=0;break;case"$=":o=null!=new RegExp(d+"$").exec(h);break;case"^=":o=null!=new RegExp("^"+d).exec(h);break;case"=":o=c===u;break;case"!=":o=c!==u;break;case">":o=p?u>=c:c>u,v=!0;break;case">=":o=p?u>c:c>=u,v=!0;break;case"<":o=p?c>=u:u>c,v=!0;break;case"<=":o=p?c>u:u>=c,v=!0;break;default:o=!1}}else if(null!=s)switch(s){case"?":o=e.fieldTruthy(l);break;case"!":o=!e.fieldTruthy(l);break;case"^":o=e.fieldUndefined(l)}else o=!e.fieldUndefined(l);if(p&&!v&&(o=!o,v=!0),!o){r=!1;break}}return r},p=f({name:"data",fieldValue:function(t){return r._private.data[t]},fieldRef:function(t){return"element._private.data."+t},fieldUndefined:function(t){return void 0===r._private.data[t]},fieldTruthy:function(t){return r._private.data[t]?!0:!1}});if(!p)return!1;var v=f({name:"meta",fieldValue:function(t){return r[t]()},fieldRef:function(t){return"element."+t+"()"},fieldUndefined:function(t){return null==r[t]()},fieldTruthy:function(t){return r[t]()?!0:!1}});if(!v)return!1;if(null!=n.collection){var g=null!=n.collection._private.ids[r.id()];if(!g)return!1}if(null!=n.filter&&0===r.collection().filter(n.filter).size())return!1;var y=function(t,n){if(null!=t){var r=!1;if(!i.hasCompoundNodes())return!1;n=n();for(var o=0;o<n.length;o++)if(e(t,n[o])){r=!0;break}return r}return!0};return y(n.parent,function(){return r.parent()})&&y(n.ancestor,function(){return r.parents()})&&y(n.child,function(){return r.children()})&&y(n.descendant,function(){return r.descendants()})?!0:!1};t.selfn.filter=function(n){var r=this,i=n.cy();if(r._private.invalid)return new t.Collection(i);var o=function(t,n){for(var i=0;i<r.length;i++){var o=r[i];if(e(o,n))return!0}return!1};null==r._private.selectorText&&(o=function(){return!0});var a=n.filter(o);return a},t.selfn.matches=function(t){var n=this;if(n._private.invalid)return!1;for(var r=0;r<n.length;r++){var i=n[r];if(e(i,t))return!0}return!1},t.selfn.toString=t.selfn.selector=function(){for(var e="",n=function(e,n){return t.is.string(e)?n?'"'+e+'"':e:""},r=function(t){var e="";t.subject===t&&(e+="$");var o=n(t.group);e+=o.substring(0,o.length-1);

for(var a=0;a<t.data.length;a++){var s=t.data[a];e+=s.value?"["+s.field+n(s.operator)+n(s.value,!0)+"]":"["+n(s.operator)+s.field+"]"}for(var a=0;a<t.meta.length;a++){var u=t.meta[a];e+="[["+u.field+n(u.operator)+n(u.value,!0)+"]]"}for(var a=0;a<t.colonSelectors.length;a++){var l=t.colonSelectors[i];e+=l}for(var a=0;a<t.ids.length;a++){var l="#"+t.ids[i];e+=l}for(var a=0;a<t.classes.length;a++){var l="."+t.classes[i];e+=l}return null!=t.parent&&(e=r(t.parent)+" > "+e),null!=t.ancestor&&(e=r(t.ancestor)+" "+e),null!=t.child&&(e+=" > "+r(t.child)),null!=t.descendant&&(e+=" "+r(t.descendant)),e},i=0;i<this.length;i++){var o=this[i];e+=r(o),this.length>1&&i<this.length-1&&(e+=", ")}return e}}(cytoscape),function(t){"use strict";t.Style=function(e){return this instanceof t.Style?t.is.core(e)?(this._private={cy:e,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void t.util.error("A style must have a core reference"):new t.Style(e)},t.style=t.Style,t.styfn=t.Style.prototype,t.fn.style=function(e,n){for(var r in e){var i=e[r];t.Style.prototype=i}},function(){var e=t.util.regex.number,n=t.util.regex.rgbaNoBackRefs,r=t.util.regex.hslaNoBackRefs,i=t.util.regex.hex3,o=t.util.regex.hex6,a=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(t){return"^"+t+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+e+"|\\w+|"+n+"|"+r+"|"+i+"|"+o+")\\s*\\,\\s*("+e+"|\\w+|"+n+"|"+r+"|"+i+"|"+o+")\\)$"};t.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"},textRotation:{enums:["none","autorotate"]}};var u=t.style.types,l=t.style.properties=[{name:"text-valign",type:u.valign},{name:"text-halign",type:u.halign},{name:"color",type:u.color},{name:"content",type:u.text},{name:"text-outline-color",type:u.color},{name:"text-outline-width",type:u.size},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size},{name:"text-border-style",type:u.borderStyle},{name:"text-background-shape",type:u.textBackgroundShape},{name:"text-transform",type:u.textTransform},{name:"text-wrap",type:u.textWrap},{name:"text-max-width",type:u.size},{name:"font-family",type:u.fontFamily},{name:"font-style",type:u.fontStyle},{name:"font-weight",type:u.fontWeight},{name:"font-size",type:u.size},{name:"min-zoomed-font-size",type:u.size},{name:"edge-text-rotation",type:u.textRotation},{name:"display",type:u.display},{name:"visibility",type:u.visibility},{name:"opacity",type:u.zeroOneNumber},{name:"z-index",type:u.nonNegativeInt},{name:"overlay-padding",type:u.size},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber},{name:"shadow-blur",type:u.size},{name:"shadow-color",type:u.color},{name:"shadow-opacity",type:u.zeroOneNumber},{name:"shadow-offset-x",type:u.number},{name:"shadow-offset-y",type:u.number},{name:"text-shadow-blur",type:u.size},{name:"text-shadow-color",type:u.color},{name:"text-shadow-opacity",type:u.zeroOneNumber},{name:"text-shadow-offset-x",type:u.number},{name:"text-shadow-offset-y",type:u.number},{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"height",type:u.autoSize},{name:"width",type:u.autoSize},{name:"shape",type:u.nodeShape},{name:"background-color",type:u.color},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size},{name:"border-style",type:u.borderStyle},{name:"background-image",type:u.url},{name:"background-image-opacity",type:u.zeroOneNumber},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"padding-left",type:u.size},{name:"padding-right",type:u.size},{name:"padding-top",type:u.size},{name:"padding-bottom",type:u.size},{name:"position",type:u.position},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels},{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"control-point-step-size",type:u.size},{name:"control-point-distance",type:u.number},{name:"control-point-weight",type:u.zeroOneNumber},{name:"curve-style",type:u.curveStyle},{name:"haystack-radius",type:u.zeroOneNumber},{name:"source-arrow-shape",type:u.arrowShape},{name:"target-arrow-shape",type:u.arrowShape},{name:"mid-source-arrow-shape",type:u.arrowShape},{name:"mid-target-arrow-shape",type:u.arrowShape},{name:"source-arrow-color",type:u.color},{name:"target-arrow-color",type:u.color},{name:"mid-source-arrow-color",type:u.color},{name:"mid-target-arrow-color",type:u.color},{name:"source-arrow-fill",type:u.arrowFill},{name:"target-arrow-fill",type:u.arrowFill},{name:"mid-source-arrow-fill",type:u.arrowFill},{name:"mid-target-arrow-fill",type:u.arrowFill},{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}];t.style.pieBackgroundN=16,l.push({name:"pie-size",type:u.bgSize});for(var c=1;c<=t.style.pieBackgroundN;c++)l.push({name:"pie-"+c+"-background-color",type:u.color}),l.push({name:"pie-"+c+"-background-size",type:u.percent}),l.push({name:"pie-"+c+"-background-opacity",type:u.zeroOneNumber});for(var c=0;c<l.length;c++){var h=l[c];l[h.name]=h}}(),t.styfn.addDefaultStylesheet=function(){var t="Helvetica",e="normal",n="normal",r="#000",i="none",o=16,a=9999;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:r,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":i,"text-wrap":"none","text-max-width":a,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":t,"font-style":e,"font-weight":n,"font-size":o,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.styfn.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},t.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},t.styfn.core=function(){return this._private.coreStyle},t.styfn.parse=function(e,n,r,i){e=t.util.camel2dash(e);var o=t.style.properties[e],a=n,s=t.style.types;if(!o)return null;if(void 0===n||null===n)return null;var u=t.is.string(n);u&&(n=t.util.trim(n));var l=o.type;if(!l)return null;if(r&&(""===n||null===n))return{name:e,value:n,bypass:!0,deleteBypass:!0};var c=e.match(/pie-(\d+)-background-size/);if(t.is.fn(n))return{name:e,value:n,strValue:"fn",mapped:s.fn,bypass:r,hasPie:c};var h,d,f,p,v,g;if(!u||i);else{if((h=new RegExp(s.data.regex).exec(n))||(f=new RegExp(s.layoutData.regex).exec(n))||(v=new RegExp(s.scratch.regex).exec(n))){if(r)return!1;var y;return y=h?s.data:f?s.layoutData:s.scratch,h=h||f||v,{name:e,value:h,strValue:""+n,mapped:y,field:h[1],bypass:r,hasPie:c}}if((d=new RegExp(s.mapData.regex).exec(n))||(p=new RegExp(s.mapLayoutData.regex).exec(n))||(g=new RegExp(s.mapScratch.regex).exec(n))){if(r)return!1;var y;if(y=d?s.mapData:p?s.mapLayoutData:s.mapScratch,d=d||p||g,!l.color&&!l.number)return!1;var m=this.parse(e,d[4]);if(!m||m.mapped)return!1;var b=this.parse(e,d[5]);if(!b||b.mapped)return!1;if(m.value===b.value)return!1;if(l.color){var w=m.value,x=b.value,_=!(w[0]!==x[0]||w[1]!==x[1]||w[2]!==x[2]||w[3]!==x[3]&&(null!=w[3]&&1!==w[3]||null!=x[3]&&1!==x[3]));if(_)return!1}return{name:e,value:d,strValue:""+n,mapped:y,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:m.value,valueMax:b.value,bypass:r,hasPie:c}}}if(l.number){var E,S="px";if(l.units&&(E=l.units),l.implicitUnits&&(S=l.implicitUnits),!l.unitless)if(u){var T="px|em"+(l.allowPercent?"|\\%":"");E&&(T=E);var k=n.match("^("+t.util.regex.number+")("+T+")?$");k&&(n=k[1],E=k[2]||S)}else(!E||l.implicitUnits)&&(E=S);if(n=parseFloat(n),isNaN(n)&&void 0===l.enums)return null;if(isNaN(n)&&void 0!==l.enums){n=a;for(var C=0;C<l.enums.length;C++){var P=l.enums[C];if(P===n)return{name:e,value:n,strValue:""+n,bypass:r}}return null}if(l.integer&&!t.is.integer(n))return null;if(void 0!==l.min&&n<l.min||void 0!==l.max&&n>l.max)return null;var D={name:e,value:n,strValue:""+n+(E?E:""),units:E,bypass:r,hasPie:c&&null!=n&&0!==n&&""!==n};return l.unitless||"px"!==E&&"em"!==E||(D.pxValue="px"!==E&&E?this.getEmSizeInPixels()*n:n),("ms"===E||"s"===E)&&(D.msValue="ms"===E?n:1e3*n),D}if(l.propList){var O=[],N=""+n;if("none"===N);else{for(var M=N.split(","),C=0;C<M.length;C++){var I=t.util.trim(M[C]);t.style.properties[I]&&O.push(I)}if(0===O.length)return null}return{name:e,value:O,strValue:0===O.length?"none":O.join(", "),bypass:r}}if(l.color){var L=t.util.color2tuple(n);return L?{name:e,value:L,strValue:""+n,bypass:r}:null}if(l.enums){for(var C=0;C<l.enums.length;C++){var P=l.enums[C];if(P===n)return{name:e,value:n,strValue:""+n,bypass:r}}return null}if(l.regex){var R=new RegExp(l.regex),B=R.exec(n);return B?{name:e,value:B,strValue:""+n,bypass:r}:null}return l.string?{name:e,value:n,strValue:""+n,bypass:r}:null},t.styfn.selector=function(e){var n="core"===e?null:new t.Selector(e),r=this.length++;return this[r]={selector:n,properties:[],mappedProperties:[],index:r},this},t.styfn.css=function(){var e=arguments;switch(e.length){case 1:for(var n=e[0],r=0;r<t.style.properties.length;r++){var i=t.style.properties[r],o=n[i.name];void 0===o&&(o=n[t.util.dash2camel(i.name)]),void 0!==o&&this.cssRule(i.name,o)}break;case 2:this.cssRule(e[0],e[1])}return this},t.styfn.style=t.styfn.css,t.styfn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.hasPie&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this}}(cytoscape),function(t){"use strict";t.styfn.apply=function(t){var e=this;e._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<t.length;n++){var r=t[n],i=e.getContextMeta(r),o=e.getContextStyle(i),a=e.applyContextStyle(i,o,r);e.updateTransitions(r,a.diffProps),e.updateStyleHints(r)}e._private.newStyle=!1},t.styfn.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===t[u],h="t"===e[u],d=c!==h,f=l.mappedProperties.length>0;if(d||f){var p;d&&f?p=l.properties:d?p=l.properties:f&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var w=n[b],x="t"===e[b];if(x&&(m=null!=w.properties[g.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},t.styfn.getContextMeta=function(t){var e,n=this,r="",i=t._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o],s=a.selector&&a.selector.matches(t);r+=s?"t":"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e}},t.styfn.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o],s="t"===e[o];if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u],c=i[l.name]=l;c.context=a}}return r[e]=i,i},t.styfn.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=e[s],l=n._private.style[s];if(u&&l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},t.styfn.updateStyleHints=function(e){var n=e._private,r=this,i=n.style,o=!1;if("nodes"===n.group&&r._private.hasPie)for(var a=1;a<=t.style.pieBackgroundN;a++){var s=n.style["pie-"+a+"-background-size"].value;if(s>0){o=!0;break}}n.hasPie=o;var u=i["text-transform"].strValue,l=i.content.strValue,c=i["font-style"].strValue,s=i["font-size"].pxValue+"px",h=i["font-family"].strValue,d=i["font-weight"].strValue,f=i["text-valign"].strValue,p=i["text-valign"].strValue,v=i["text-outline-width"].pxValue,g=i["text-wrap"].strValue,y=i["text-max-width"].pxValue;n.labelKey=c+"$"+s+"$"+h+"$"+d+"$"+l+"$"+u+"$"+f+"$"+p+"$"+v+"$"+g+"$"+y,n.fontKey=c+"$"+d+"$"+s+"$"+h;var m=i.width.pxValue,b=i.height.pxValue,w=i["border-width"].pxValue;if(n.boundingBoxKey=m+"$"+b+"$"+w,"edges"===e._private.group){var x=i["control-point-step-size"].pxValue,_=i["control-point-distance"]?i["control-point-distance"].pxValue:void 0,E=i["control-point-weight"].value,S=i["curve-style"].strValue;n.boundingBoxKey+="$"+x+"$"+_+"$"+E+"$"+S}n.styleKey=Date.now()},t.styfn.applyParsedProperty=function(e,n){var r,i,o=n,a=e._private.style,s=t.style.types,u=t.style.properties[o.name].type,l=o.bypass,c=a[o.name],h=c&&c.bypass,d=e._private;if(("height"===n.name||"width"===n.name)&&e.isNode()){if("auto"===n.value&&!e.isParent())return!1;"auto"!==n.value&&e.isParent()&&(o=n=this.parse(n.name,"auto",l))}if(l&&o.deleteBypass){var f=a[o.name];return f?f.bypass&&f.bypassed?(a[o.name]=f.bypassed,!0):!1:!0}var p=function(){t.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:case s.mapLayoutData:case s.mapScratch:var r,v=o.mapped===s.mapLayoutData,g=o.mapped===s.mapScratch,y=o.field.split(".");r=g||v?d.scratch:d.data;for(var m=0;m<y.length&&r;m++){var b=y[m];r=r[b]}var w;if(w=t.is.number(r)?(r-o.fieldMin)/(o.fieldMax-o.fieldMin):0,0>w?w=0:w>1&&(w=1),u.color){var x=o.valueMin[0],_=o.valueMax[0],E=o.valueMin[1],S=o.valueMax[1],T=o.valueMin[2],k=o.valueMax[2],C=null==o.valueMin[3]?1:o.valueMin[3],P=null==o.valueMax[3]?1:o.valueMax[3],D=[Math.round(x+(_-x)*w),Math.round(E+(S-E)*w),Math.round(T+(k-T)*w),Math.round(C+(P-C)*w)];i={bypass:o.bypass,name:o.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!u.number)return!1;var O=o.valueMin+(o.valueMax-o.valueMin)*w;i=this.parse(o.name,O,o.bypass,!0)}i||(i=this.parse(o.name,c.strValue,o.bypass,!0)),i||p(),i.mapping=o,o=i;break;case s.data:case s.layoutData:case s.scratch:var r,v=o.mapped===s.layoutData,g=o.mapped===s.scratch,y=o.field.split(".");if(r=g||v?d.scratch:d.data)for(var m=0;m<y.length;m++){var b=y[m];r=r[b]}if(i=this.parse(o.name,r,o.bypass,!0),!i){var N=c?c.strValue:"";i=this.parse(o.name,N,o.bypass,!0)}i||p(),i.mapping=o,o=i;break;case s.fn:var M=o.value,I=M(e);i=this.parse(o.name,I,o.bypass,!0),i.mapping=o,o=i;break;case void 0:break;default:return!1}return l?(o.bypassed=h?c.bypassed:c,a[o.name]=o):h?c.bypassed=o:a[o.name]=o,!0},t.styfn.update=function(){var t=this._private.cy,e=t.elements();e.updateStyle()},t.styfn.updateMappers=function(e){for(var n=0;n<e.length;n++){for(var r=e[n],i=r._private.style,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},t.styfn.updateTransitions=function(e,n,r){var i=this,o=e._private.style,a=o["transition-property"].value,s=o["transition-duration"].msValue,u=o["transition-delay"].msValue,l={};if(a.length>0&&s>0){for(var c=!1,h=0;h<a.length;h++){var d=a[h],f=o[d],p=n[d];if(p){var v=p.prev,g=v,y=null!=p.next?p.next:f,m=!1;g&&(t.is.number(g.pxValue)&&t.is.number(y.pxValue)?m=g.pxValue!==y.pxValue:t.is.number(g.value)&&t.is.number(y.value)?m=g.value!==y.value:t.is.array(g.value)&&t.is.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2]),m&&(l[d]=y.strValue,this.applyBypass(e,d,g.strValue),c=!0))}}if(!c)return;e._private.transitioning=!0,e.stop(),u>0&&e.delay(u),e.animate({css:l},{duration:s,queue:!1,complete:function(){r||i.removeBypasses(e,a),e._private.transitioning=!1}})}else e._private.transitioning&&(e.stop(),this.removeBypasses(e,a),e._private.transitioning=!1)}}(cytoscape),function(t){"use strict";t.styfn.applyBypass=function(e,n,r,i){var o=[],a=!0;if("*"===n||"**"===n){if(void 0!==r)for(var s=0;s<t.style.properties.length;s++){var u=t.style.properties[s],n=u.name,l=this.parse(n,r,!0);l&&o.push(l)}}else if(t.is.string(n)){var l=this.parse(n,r,!0);l&&o.push(l)}else{if(!t.is.plainObject(n))return!1;var c=n;i=r;for(var s=0;s<t.style.properties.length;s++){var u=t.style.properties[s],n=u.name,r=c[n];if(void 0===r&&(r=c[t.util.dash2camel(n)]),void 0!==r){var l=this.parse(n,r,!0);l&&o.push(l)}}}if(0===o.length)return!1;for(var h=!1,s=0;s<e.length;s++){for(var d,f=e[s],p=f._private.style,v={},g=0;g<o.length;g++){var u=o[g];if(i){var y=p[u.name];d=v[u.name]={prev:y}}h=this.applyParsedProperty(f,u)||h,i&&(d.next=p[u.name])}i&&this.updateTransitions(f,v,a)}return h},t.styfn.overrideBypass=function(e,n,r){for(var i=0;i<e.length;i++){var o=e[i],a=o._private.style[t.util.camel2dash(n)];a.bypass?(a.value=r,a.pxValue=r):this.applyBypass(o,n,r)}},t.styfn.removeAllBypasses=function(e,n){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a={},s=o._private.style,u=0;u<t.style.properties.length;u++){var l=t.style.properties[u],c=l.name,h="",d=this.parse(c,h,!0),f=s[l.name],p=a[l.name]={prev:f};this.applyParsedProperty(o,d),p.next=s[l.name]}n&&this.updateTransitions(o,a,r)}},t.styfn.removeBypasses=function(e,n,r){for(var i=!0,o=0;o<e.length;o++){for(var a=e[o],s={},u=a._private.style,l=0;l<n.length;l++){var c=n[l],h=t.style.properties[c],d="",f=this.parse(c,d,!0),p=u[h.name],v=s[h.name]={prev:p};this.applyParsedProperty(a,f),v.next=u[h.name]}r&&this.updateTransitions(a,s,i)}}}(cytoscape),function(t,e){"use strict";t.styfn.getEmSizeInPixels=function(){var t=this._private.cy,n=t.container();if(e&&n&&e.getComputedStyle){var r=e.getComputedStyle(n).getPropertyValue("font-size"),i=parseFloat(r);return i}return 1},t.styfn.containerCss=function(t){var n=this._private.cy,r=n.container();return e&&r&&e.getComputedStyle?e.getComputedStyle(r).getPropertyValue(t):void 0},t.styfn.containerProperty=function(t){var e=this.containerCss(t),n=this.parse(t,e);return n},t.styfn.containerPropertyAsString=function(t){var e=this.containerProperty(t);return e?e.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.styfn.getRenderedStyle=function(e){var e=e[0];if(e){for(var n={},r=e._private.style,i=this._private.cy,o=i.zoom(),a=0;a<t.style.properties.length;a++){var s=t.style.properties[a],u=r[s.name];if(u){var l=u.unitless?u.strValue:u.pxValue*o+"px";n[s.name]=l,n[t.util.dash2camel(s.name)]=l}}return n}},t.styfn.getRawStyle=function(e){var e=e[0];if(e){for(var n={},r=e._private.style,i=0;i<t.style.properties.length;i++){var o=t.style.properties[i],a=r[o.name];a&&(n[o.name]=a.strValue,n[t.util.dash2camel(o.name)]=a.strValue)}return n}},t.styfn.getValueStyle=function(e,n){n=n||{};var r,i=n.array?[]:{};if(r=t.is.element(e)?e._private.style:e)for(var o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=r[a.name]||r[t.util.dash2camel(a.name)];void 0===s||t.is.plainObject(s)||(s=this.parse(a.name,s)),s&&(n.array?i.push(s):(i[a.name]=s,i[t.util.dash2camel(a.name)]=s))}return i}}(cytoscape),function(t){"use strict";t.style.applyFromJson=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css;t.selector(i);for(var a in o){var s=o[a];t.css(a,s)}}return t},t.style.fromJson=function(e,n){var r=new t.Style(e);return t.style.applyFromJson(r,n),r},t.styfn.fromJson=function(e){var n=this;return n.resetToDefault(),t.style.applyFromJson(n,e),n},t.styfn.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}}(cytoscape),function(t){"use strict";t.style.applyFromString=function(e,n){function r(){u=u.length>o.length?u.substr(o.length):""}function i(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=""+n;for(u=u.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var l=u.match(/^\s*$/);if(l)break;var c=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){t.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}o=c[0];var h=c[1];if("core"!==h){var d=new t.Selector(h);if(d._private.invalid){t.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),r();continue}}var f=c[2],p=!1;a=f;for(var v=[];;){var l=a.match(/^\s*$/);if(l)break;var g=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){t.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f),p=!0;break}s=g[0];var y=g[1],m=g[2],b=t.style.properties[y];if(b){var w=e.parse(y,m);w?(v.push({name:y,val:m}),i()):(t.util.error("Skipping property: Invalid property definition in: "+s),i())}else t.util.error("Skipping property: Invalid property name in: "+s),i()}if(p){r();break}e.selector(h);for(var x=0;x<v.length;x++){var b=v[x];e.css(b.name,b.val)}r()}return e},t.style.fromString=function(e,n){var r=new t.Style(e);return t.style.applyFromString(r,n),r},t.styfn.fromString=function(e){var n=this;return n.resetToDefault(),t.style.applyFromString(n,e),n}}(cytoscape),function(t){"use strict";t.stylesheet=t.Stylesheet=function(){return this instanceof t.Stylesheet?void(this.length=0):new t.Stylesheet},t.sheetfn=t.Stylesheet.prototype,t.sheetfn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this},t.sheetfn.css=function(e,n){var r=this.length-1;if(t.is.string(e))this[r].properties.push({name:e,value:n});else if(t.is.plainObject(e))for(var i=e,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=i[a.name];if(void 0===s&&(s=i[t.util.dash2camel(a.name)]),void 0!==s){var e=a.name,n=s;this[r].properties.push({name:e,value:n})}}return this},t.sheetfn.style=t.sheetfn.css,t.sheetfn.generateStyle=function(e){for(var n=new t.Style(e),r=0;r<this.length;r++){var i=this[r],o=i.selector,a=i.properties;n.selector(o);for(var s=0;s<a.length;s++){var u=a[s];n.css(u.name,u.value)}}return n}}(cytoscape),function(t,e){"use strict";t.Thread=function(e){return this instanceof t.Thread?(this._private={requires:[],files:[],queue:null,pass:[]},void(e&&this.run(e))):new t.Thread(e)},t.thread=t.Thread,t.thdfn=t.Thread.prototype,t.fn.thread=function(e,n){for(var r in e){var i=e[r];t.Thread.prototype[r]=i}};var n=function(e){var n=t.is.fn(e)?e.toString():'JSON.parse("'+JSON.stringify(e)+'")';return n},r=function(e){var i,a;t.is.object(e)&&e.fn?(i=o(e.fn,e.name),a=e.name,e=e.fn):t.is.fn(e)?(i=e.toString(),a=e.name):t.is.string(e)?i=e:t.is.object(e)&&(i=e.proto?"":e.name+" = {};",a=e.name,e=e.obj),i+="\n";var s=function(t,e){if(t.prototype){var n=!1;for(var o in t.prototype){n=!0;break}n&&(i+=r({name:e,obj:t,proto:!0},t))}};if(e.prototype&&null!=a)for(var u in e.prototype){var l="",c=e.prototype[u],h=n(c),d=a+".prototype."+u;l+=d+" = "+h+";\n",l&&(i+=l),s(c,d)}if(!t.is.string(e))for(var u in e){var f="";if(e.hasOwnProperty(u)){var c=e[u],h=n(c),d=a+'["'+u+'"]';f+=d+" = "+h+";\n"}f&&(i+=f),s(c,d)}return i},i=function(e){return t.is.string(e)&&e.match(/\.js$/)};t.fn.thread({require:function(e,n){return i(e)?(this._private.files.push(e),this):(n&&(t.is.fn(e)?(n=n||e.name,e={name:n,fn:e}):e={name:n,obj:e}),this._private.requires.push(e),this)},pass:function(t){return this._private.pass.push(t),this},run:function(n,i){var o=this,a=this._private;if(i=i||a.pass.shift(),a.stopped)return void t.util.error("Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.");if(a.running)return a.queue=a.queue.then(function(){return o.run(n,i)});var s=null!=e,u="undefined"!=typeof module;o.trigger("run");var l=new t.Promise(function(l,c){a.running=!0;var h=a.ran,d=t.is.string(n)?n:n.toString(),f="\n"+a.requires.map(function(t){return r(t)}).concat(a.files.map(function(t){if(s){var n=function(t){return t.match(/^\.\//)||t.match(/^\.\./)?e.location.origin+e.location.pathname+t:t.match(/^\//)?e.location.origin+"/"+t:t};return'importScripts("'+n(t)+'");'}return u?'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );':void 0})).concat(["( function(){","var ret = ("+d+")("+JSON.stringify(i)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(a.requires=[],a.files=[],s){var p,v;if(!h){var g=f+"";f=["function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),f+=g,p=new Blob([f],{type:"application/javascript"}),v=e.URL.createObjectURL(p)}var y=a.webworker=a.webworker||new Worker(v);h&&y.postMessage({$$eval:f});var m;y.addEventListener("message",m=function(e){var n=t.is.object(e)&&t.is.object(e.data);n&&"$$resolve"in e.data?(y.removeEventListener("message",m),l(e.data.$$resolve)):n&&"$$reject"in e.data?(y.removeEventListener("message",m),c(e.data.$$reject)):o.trigger(new t.Event(e,{type:"message",message:e.data}))},!1),h||y.postMessage("$$start");

}else if(u){var m,b=require("path"),w=require("child_process"),x=a.child=a.child||w.fork(b.join(__dirname,"thread-node-fork"));x.on("message",m=function(e){t.is.object(e)&&"$$resolve"in e?(x.removeListener("message",m),l(e.$$resolve)):t.is.object(e)&&"$$reject"in e?(x.removeListener("message",m),c(e.$$reject)):o.trigger(new t.Event({},{type:"message",message:e}))}),x.send({$$eval:f})}else t.error("Tried to create thread but no underlying tech found!")}).then(function(t){return a.running=!1,a.ran=!0,o.trigger("ran"),t});return null==a.queue&&(a.queue=l),l},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var o=function(t,e){var n=t.toString();return n=n.replace(/function.*\(/,"function "+e+"(")},a=function(t){return t=t||{},function(e,n){var r=o(e,"_$_$_"+t.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};t.fn.thread({reduce:a({name:"reduce"}),reduceRight:a({name:"reduceRight"}),map:a({name:"map"})});var s=t.thdfn;s.promise=s.run,s.terminate=s.halt=s.stop,s.include=s.require,t.worker=t.Worker=t.Thread,t.fn.thread({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.thdfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.Fabric=function(e){if(!(this instanceof t.Fabric))return new t.Fabric(e);this._private={pass:[]};var n=4;t.is.number(e),e="undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:"undefined"!=typeof module?require("os").cpus().length:n;for(var r=0;e>r;r++)this[r]=t.Thread();this.length=e},t.fabric=t.Fabric,t.fabfn=t.Fabric.prototype,t.fn.fabric=function(e,n){for(var r in e){var i=e[r];t.Fabric.prototype[r]=i}},t.fn.fabric({require:function(t,e){for(var n=0;n<this.length;n++){var r=this[n];r.require(t,e)}return this},random:function(){var t=Math.round((this.length-1)*Math.random()),e=this[t];return e},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){var n=this[e];n.message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){var e=this[t];e.stop()}return this},pass:function(e){var n=this._private.pass;return t.is.array(e)?n.push(e):t.util.error("Only arrays or collections may be used with fabric.pass()"),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(e){for(var n=this,r=n._private,i=n.spreadSize(),o=r.pass.shift().concat([]),a=[],s=0;s<this.length;s++){var u=this[s],l=o.splice(0,i),c=u.pass(l).run(e);a.push(c);var h=0===o.length;if(h)break}return t.Promise.all(a).then(function(t){for(var e=[],n=0,r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.length;o++){var a=i[o];e[n++]=a}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],n=resolve;resolve=function(t){e.push(t)};for(var r=0;r<t.length;r++){var i=e.length,o=_$_$_fabmap(t[r]),a=i===e.length;a&&e.push(o)}return resolve=n,e})},filter:function(t){var e=this._private,n=e.pass[0];return this.map(t).then(function(t){for(var e=[],r=0;r<n.length;r++){var i=n[r],o=t[r];o&&e.push(i)}return e})},sort:function(t){var e=this,n=this._private.pass[0].length,r=this.spreadSize();return t=t||function(t,e){return e>t?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var i=function(r,i,o){i=Math.min(i,n),o=Math.min(o,n);for(var a=r,s=i,u=[],l=a;o>l;l++){var c=e[r],h=e[i];s>r&&(i>=o||t(c,h)<=0)?(u.push(c),r++):(u.push(h),i++)}for(var l=0;l<u.length;l++){var d=a+l;e[d]=u[l]}},o=r;n>o;o*=2)for(var a=0;n>a;a+=2*o)i(a,a+o,a+2*o);return e})}});var n=function(t){return t=t||{},function(e,n){var r=this._private.pass.shift();return this.random().pass(r)[t.threadFn](e,n)}};t.fn.fabric({randomMap:n({threadFn:"map"}),reduce:n({threadFn:"reduce"}),reduceRight:n({threadFn:"reduceRight"})});var r=t.fabfn;r.promise=r.run,r.terminate=r.halt=r.stop,r.include=r.require,t.fn.fabric({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.fabfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";var n={},r=t.util.copy(n);t.defaults=function(e){n=t.util.extend({},r,e)},t.fn.core=function(e,n){for(var r in e){var i=e[r];t.Core.prototype[r]=i}},t.Core=function(r){if(!(this instanceof t.Core))return new t.Core(r);var i=this;r=t.util.extend({},n,r);var o=r.container,a=o?o._cyreg:null;if(a=a||{},a&&a.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);a.cy.notify({type:"destroy"}),a={}}var s=a.readies=a.readies||[];o&&(o._cyreg=a),a.cy=i;var u=void 0!==e&&void 0!==o&&!r.headless,l=r;l.layout=t.util.extend({name:u?"grid":"null"},l.layout),l.renderer=t.util.extend({name:u?"canvas":"null"},l.renderer);var c=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},h=this._private={container:l.container,ready:!1,initrender:!1,options:l,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:t.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,l.zoomingEnabled),userZoomingEnabled:c(!0,l.userZoomingEnabled),panningEnabled:c(!0,l.panningEnabled),userPanningEnabled:c(!0,l.userPanningEnabled),boxSelectionEnabled:c(!1,l.boxSelectionEnabled),autolock:c(!1,l.autolock,l.autolockNodes),autoungrabify:c(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:c(!1,l.autounselectify),styleEnabled:void 0===l.styleEnabled?u:l.styleEnabled,zoom:t.is.number(l.zoom)?l.zoom:1,pan:{x:t.is.plainObject(l.pan)&&t.is.number(l.pan.x)?l.pan.x:0,y:t.is.plainObject(l.pan)&&t.is.number(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},d=l.selectionType;h.selectionType=void 0===d||"additive"!==d&&"single"!==d?"single":d,t.is.number(l.minZoom)&&t.is.number(l.maxZoom)&&l.minZoom<l.maxZoom?(h.minZoom=l.minZoom,h.maxZoom=l.maxZoom):t.is.number(l.minZoom)&&void 0===l.maxZoom?h.minZoom=l.minZoom:t.is.number(l.maxZoom)&&void 0===l.minZoom&&(h.maxZoom=l.maxZoom);var f=function(e){for(var n=!1,r=0;r<p.length;r++){var i=p[r];if(t.is.promise(i)){n=!0;break}}return n?t.Promise.all(p).then(e):void e(p)},p=[l.style,l.elements];f(function(e){var n=e[0],r=e[1];h.styleEnabled&&i.setStyle(n),i.initRenderer(t.util.extend({hideEdgesOnViewport:l.hideEdgesOnViewport,hideLabelsOnViewport:l.hideLabelsOnViewport,textureOnViewport:l.textureOnViewport,wheelSensitivity:t.is.number(l.wheelSensitivity)&&l.wheelSensitivity>0?l.wheelSensitivity:1,motionBlur:void 0===l.motionBlur?!0:l.motionBlur,motionBlurOpacity:void 0===l.motionBlurOpacity?.05:l.motionBlurOpacity,pixelRatio:t.is.number(l.pixelRatio)&&l.pixelRatio>0?l.pixelRatio:"auto"===l.pixelRatio?void 0:1,desktopTapThreshold:void 0===l.desktopTapThreshold?4:l.desktopTapThreshold,touchTapThreshold:void 0===l.touchTapThreshold?8:l.touchTapThreshold},l.renderer)),l.initrender&&(i.on("initrender",l.initrender),i.on("initrender",function(){i._private.initrender=!0})),i.load(r,function(){i.startAnimationLoop(),i._private.ready=!0,t.is.fn(l.ready)&&i.on("ready",l.ready);for(var e=0;e<s.length;e++){var n=s[e];i.on("ready",n)}a&&(a.readies=[]),i.trigger("ready")},l.done)})},t.corefn=t.Core.prototype,t.fn.core({isReady:function(){return this._private.ready},ready:function(t){this.isReady()?this.trigger("ready",[],t):this.on("ready",t)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var t=this.container(),e=t.parentNode;if(e)try{e.removeChild(t)}catch(n){}return this},getElementById:function(e){var n=this._private.id2index[e];return void 0!==n?this._private.elements[n]:new t.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){for(var e=this._private.elements,n=this._private.id2index,r=0;r<t.length;r++){var i=t[r],o=i._private.data.id,a=n[o],s=void 0!==a;s||(a=e.length,e.push(i),n[o]=a,i._private.index=a)}return this},removeFromPool:function(t){for(var e=this._private.elements,n=this._private.id2index,r=0;r<t.length;r++){var i=t[r],o=i._private.data.id,a=n[o],s=void 0!==a;if(s){this._private.id2index[o]=void 0,e.splice(a,1);for(var u=a;u<e.length;u++){var l=e[u]._private.data.id;n[l]--,e[u]._private.index--}}}},container:function(){return this._private.container},options:function(){return t.util.copy(this._private.options)},json:function(t){var e={},n=this;return e.elements={},n.elements().each(function(t,n){var r=n.group();e.elements[r]||(e.elements[r]=[]),e.elements[r].push(n.json())}),this._private.styleEnabled&&(e.style=n.style().json()),e.zoomingEnabled=n._private.zoomingEnabled,e.userZoomingEnabled=n._private.userZoomingEnabled,e.zoom=n._private.zoom,e.minZoom=n._private.minZoom,e.maxZoom=n._private.maxZoom,e.panningEnabled=n._private.panningEnabled,e.userPanningEnabled=n._private.userPanningEnabled,e.pan=n._private.pan,e.boxSelectionEnabled=n._private.boxSelectionEnabled,e.layout=n._private.options.layout,e.renderer=n._private.options.renderer,e.hideEdgesOnViewport=n._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=n._private.options.hideLabelsOnViewport,e.textureOnViewport=n._private.options.textureOnViewport,e.wheelSensitivity=n._private.options.wheelSensitivity,e.motionBlur=n._private.options.motionBlur,e},defer:function(t){var e=this,n=e._private,r=n.deferredExecQueue;r.push(t),n.deferredTimeout||(n.deferredTimeout=setTimeout(function(){for(;r.length>0;)r.shift()();n.deferredTimeout=null},0))}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";function n(t){var e=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?n:t;setTimeout(e,9,t)}t.fn.core({add:function(e){var n,r=this;if(t.is.elementOrCollection(e)){var i=e;if(i._private.cy===r)n=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}n=new t.Collection(r,o)}}else if(t.is.array(e)){var o=e;n=new t.Collection(r,o)}else if(t.is.plainObject(e)&&(t.is.array(e.nodes)||t.is.array(e.edges))){for(var u=e,o=[],l=["nodes","edges"],a=0,c=l.length;c>a;a++){var h=l[a],d=u[h];if(t.is.array(d))for(var f=0,p=d.length;p>f;f++){var v=d[f];v.group=h,o.push(v)}}n=new t.Collection(r,o)}else{var v=e;n=new t.Element(r,v).collection()}return n},remove:function(e){if(t.is.elementOrCollection(e))e=e;else if(t.is.string(e)){var n=e;e=this.$(n)}return e.remove()},load:function(r,i,o){function a(){s.one("layoutready",function(t){s.notifications(!0),s.trigger(t),s.notify({type:"load",collection:s.elements()}),s.one("load",i),s.trigger("load")}).one("layoutstop",function(){s.one("done",o),s.trigger("done")});var e=t.util.extend({},s._private.options.layout);e.eles=s.$(),s.layout(e)}var s=this;s.notifications(!1);var u=s.elements();return u.length>0&&u.remove(),null!=r&&(t.is.plainObject(r)||t.is.array(r))&&s.add(r),e?n(a):a(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.fn.core({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},startAnimationLoop:function(){function n(){t.util.requestAnimationFrame(function(t){r(t),n()})}function r(e){function n(n,r){var s=n._private.animation.current,u=n._private.animation.queue,l=!1;if(0===s.length){var c=u.length>0?u.shift():null;c&&(c.callTime=e,s.push(c))}for(var h=[],d=s.length-1;d>=0;d--){var f=s[d];f.started||i(n,f),o(n,f,e,r),f.done&&(h.push(f),s.splice(d,1)),l=!0}for(var d=0;d<h.length;d++){var f=h[d],p=f.params.complete;t.is.fn(p)&&p.apply(n,[e])}return r||0!==s.length||0!==u.length||a.push(n),l}e=+new Date;for(var r=u._private.aniEles,a=[],s=0;s<r.length;s++){var l=r[s];n(l)}var c=n(u,!0);if(r.length>0||c){var h;if(r.length>0){var d=r.updateCompoundBounds();h=d.length>0?r.add(d):r}u.notify({type:"draw",collection:h})}r.unmerge(a)}function i(e,n){var r=t.is.core(e),i=!r,o=e,a=u._private.style;if(i)var s=o._private.position,l={x:s.x,y:s.y},c=a.getValueStyle(o);if(r)var h=u._private.pan,d={x:h.x,y:h.y},f=u._private.zoom;n.started=!0,n.startTime=Date.now(),n.startPosition=l,n.startStyle=c,n.startPan=d,n.startZoom=f}function o(e,n,r,i){var o,l=u._private.style,c=n.properties,h=n.params,d=n.startTime,f=!i;if(o=0===n.duration?1:Math.min(1,(r-d)/n.duration),0>o?o=0:o>1&&(o=1),null==c.delay){var p=n.startPosition,v=c.position,g=e._private.position;v&&f&&(a(p.x,v.x)&&(g.x=s(p.x,v.x,o)),a(p.y,v.y)&&(g.y=s(p.y,v.y,o)));var y=n.startPan,m=c.pan,b=e._private.pan,w=null!=m&&i;w&&(a(y.x,m.x)&&(b.x=s(y.x,m.x,o)),a(y.y,m.y)&&(b.y=s(y.y,m.y,o)),e.trigger("pan"));var x=n.startZoom,_=c.zoom,E=null!=_&&i;E&&(a(x,_)&&(e._private.zoom=s(x,_,o)),e.trigger("zoom")),(w||E)&&e.trigger("viewport");var S=c.style||c.css;if(S&&f)for(var T=0;T<S.length;T++){var k=S[T].name,C=S[T],P=C,D=n.startStyle[k],O=s(D,P,o);l.overrideBypass(e,k,O)}}return t.is.fn(h.step)&&h.step.apply(e,[r]),o>=1&&(n.done=!0),o}function a(e,n){return null==e||null==n?!1:t.is.number(e)&&t.is.number(n)?!0:e&&n?!0:!1}function s(e,n,r){0>r?r=0:r>1&&(r=1);var i,o;if(i=null!=e.pxValue||null!=e.value?null!=e.pxValue?e.pxValue:e.value:e,o=null!=n.pxValue||null!=n.value?null!=n.pxValue?n.pxValue:n.value:n,t.is.number(i)&&t.is.number(o))return i+(o-i)*r;if(t.is.number(i[0])&&t.is.number(o[0])){var a=i,s=o,u=function(t,e){var n=e-t,i=t;return Math.round(r*n+i)},l=u(a[0],s[0]),c=u(a[1],s[1]),h=u(a[2],s[2]);return[l,c,h]}return void 0}var u=this;u.styleEnabled()&&e&&n()}})}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.fn.core({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:t.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:t.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(t){"use strict";t.fn.core({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.corefn)}(cytoscape),function(t){"use strict";t.fn.core({png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}}),t.corefn.jpeg=t.corefn.jpg}(cytoscape),function(t){"use strict";t.fn.core({layout:function(e){var n;return null==e&&(e=t.util.extend({},this._private.options.layout),e.eles=this.$()),n=this.initLayout(e),n.run(),this},makeLayout:function(t){return this.initLayout(t)},initLayout:function(e){if(null==e)return void t.util.error("Layout options must be specified to make a layout");if(null==e.name)return void t.util.error("A `name` must be specified to make a layout");var n=e.name,r=t.extension("layout",n);if(null==r)return void t.util.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");e.eles=null!=e.eles?e.eles:this.$(),t.is.string(e.eles)&&(e.eles=this.$(e.eles));var i=new r(t.util.extend({},e,{cy:this}));return t.is.plainObject(i._private)||(i._private={}),i._private.cy=this,i._private.listeners=[],i}}),t.corefn.createLayout=t.corefn.makeLayout}(cytoscape),function(t){"use strict";t.fn.core({notify:function(t){if(this._private.batchingNotify){var e=this._private.batchNotifyEles,n=this._private.batchNotifyTypes;if(t.collection)for(var r=0;r<t.collection.length;r++){var i=t.collection[r];e.ids[i._private.id]||e.push(i)}return void(n.ids[t.type]||n.push(t.type))}if(this._private.notificationsEnabled){var o=this.renderer();o.notify(t)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:void(e.notificationsEnabled=t?!0:!1)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=[],t.batchNotifyEles=[],t.batchNotifyTypes=[],t.batchStyleEles.ids={},t.batchNotifyEles.ids={},t.batchNotifyTypes.ids={},this},endBatch:function(){var e=this._private;return e.batchingStyle=!1,new t.Collection(this,e.batchStyleEles).updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,collection:e.batchNotifyEles}),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n in t){var r=t[n],i=e.getElementById(n);i.data(r)}})}})}(cytoscape),function(t){"use strict";t.fn.core({renderTo:function(t,e,n,r){var i=this._private.renderer;return i.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(e){var n=this,r=t.extension("renderer",e.name);return null==r?void t.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name):void(this._private.renderer=new r(t.util.extend({},e,{cy:n,style:n._private.style})))},triggerOnRender:function(){for(var t=this._private.onRenders,e=0;e<t.length;e++){var n=t[e];n()}return this},onRender:function(t){return this._private.onRenders.push(t),this},offRender:function(t){var e=this._private.onRenders;if(null==t)return this._private.onRenders=[],this;for(var n=0;n<e.length;n++){var r=e[n];if(t===r){e.splice(n,1);break}}return this}})}(cytoscape),function(t){"use strict";t.fn.core({collection:function(e){return t.is.string(e)?this.$(e):t.is.elementOrCollection(e)?e.collection():t.is.array(e)?new t.Collection(this,e):new t.Collection(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(e){var n=new t.Collection(this,this._private.elements);return e?n.filter(e):n}}),t.corefn.elements=t.corefn.filter=t.corefn.$}(cytoscape),function(t){"use strict";t.fn.core({style:function(t){if(t){var e=this.setStyle(t);e.update()}return this._private.style},setStyle:function(e){var n=this._private;return n.style=t.is.stylesheet(e)?e.generateStyle(this):t.is.array(e)?t.style.fromJson(this,e):t.is.string(e)?t.style.fromString(this,e):new t.Style(this),n.style}})}(cytoscape),function(t){"use strict";t.fn.core({autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=t?!0:!1,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=t?!0:!1,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=t?!0:!1,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=t?!0:!1,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=t?!0:!1,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=t?!0:!1,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=t?!0:!1,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=t?!0:!1,this)},pan:function(){var e,n,r,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(t.is.string(a[0]))return e=a[0],s[e];if(t.is.plainObject(a[0])){if(!this._private.panningEnabled)return this;r=a[0],i=r.x,o=r.y,t.is.number(i)&&(s.x=i),t.is.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],n=a[1],"x"!==e&&"y"!==e||!t.is.number(n)||(s[e]=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e){var n,r,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:t.is.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,t.is.number(o)&&(u.x+=o),t.is.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:n=s[0],r=s[1],"x"!==n&&"y"!==n||!t.is.number(r)||(u[n]+=r),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,n){if(t.is.number(e)&&void 0===n&&(n=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(t.is.string(e)){var i=e;e=this.$(i)}else if(t.is.boundingBox(e)){var o=e;r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else t.is.elementOrCollection(e)||(e=this.elements());r=r||e.boundingBox();var a,s=this.width(),u=this.height();if(n=t.is.number(n)?n:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){a=Math.min((s-2*n)/r.w,(u-2*n)/r.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var l={x:(s-a*(r.x1+r.x2))/2,y:(u-a*(r.y1+r.y2))/2};return{zoom:a,pan:l}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(t.is.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(t.is.number(e)&&(this._private.maxZoom=e),this)},zoom:function(e){var n,r;if(void 0===e)return this._private.zoom;if(t.is.number(e))r=e;else if(t.is.plainObject(e)){if(r=e.level,e.position){var i=e.position,o=this._private.pan,a=this._private.zoom;n={x:i.x*a+o.x,y:i.y*a+o.y}}else e.renderedPosition&&(n=e.renderedPosition);if(n&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!t.is.number(r)||n&&(!t.is.number(n.x)||!t.is.number(n.y)))return this;if(r=r>this._private.maxZoom?this._private.maxZoom:r,r=r<this._private.minZoom?this._private.minZoom:r,n){var s=this._private.pan,u=this._private.zoom,l=r,c={x:-l/u*(n.x-s.x)+n.x,y:-l/u*(n.y-s.y)+n.y};this._private.zoom=r,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=r,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(e){var n=this._private,r=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(t.is.number(e.zoom)||(r=!1),t.is.plainObject(e.pan)||(i=!1),!r&&!i)return this;if(r){var u=e.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&n.panningEnabled){var l=e.pan;t.is.number(l.x)&&(n.pan.x=l.x,s=!1),t.is.number(l.y)&&(n.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(t.is.string(e)){var r=e;e=this.elements(r)}else t.is.elementOrCollection(e)||(e=this.elements());var i=e.boundingBox(),o=this.width(),a=this.height();n=void 0===n?this._private.zoom:n;var s={x:(o-n*(i.x1+i.x2))/2,y:(a-n*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var t=this._private.container;return t?t.clientWidth:1},height:function(){var t=this._private.container;return t?t.clientHeight:1},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}}),t.corefn.centre=t.corefn.center,t.corefn.autolockNodes=t.corefn.autolock,t.corefn.autoungrabifyNodes=t.corefn.autoungrabify}(cytoscape),function(t){"use strict";t.fn.collection=t.fn.eles=function(e,n){for(var r in e){var i=e[r];t.Collection.prototype[r]=i}};var e={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(e,n,r){var i=t.is.element(n)?n._private:n,o=i.group,a=null!=r?r:this.prefix[o]+this.id[o];if(e.getElementById(a).empty())this.id[o]++;else for(;!e.getElementById(a).empty();)a=this.prefix[o]+ ++this.id[o];return a}};t.Element=function(e,n,r){if(!(this instanceof t.Element))return new t.Element(e,n,r);var i=this;if(r=void 0===r||r?!0:!1,void 0===e||void 0===n||!t.is.core(e))return void t.util.error("An element must have a core reference and parameters set");if("nodes"!==n.group&&"edges"!==n.group)return void t.util.error("An element must be of type `nodes` or `edges`; you specified `"+n.group+"`");if(this.length=1,this[0]=this,this._private={cy:e,single:!0,data:n.data||{},position:n.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:n.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:n.selected?!0:!1,selectable:void 0===n.selectable?!0:n.selectable?!0:!1,locked:n.locked?!0:!1,grabbed:!1,grabbable:void 0===n.grabbable?!0:n.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[]},n.renderedPosition){var o=n.renderedPosition,a=e.pan(),s=e.zoom();this._private.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}if(t.is.string(n.classes))for(var u=n.classes.split(/\s+/),l=0,c=u.length;c>l;l++){var h=u[l];h&&""!==h&&(i._private.classes[h]=!0)}n.css&&e.style().applyBypass(this,n.css),(void 0===r||r)&&this.restore()},t.Collection=function(n,r,i){if(!(this instanceof t.Collection))return new t.Collection(n,r);if(void 0===n||!t.is.core(n))return void t.util.error("A collection must have a reference to the core");var o={},a={},s=!1;if(r){if(r.length>0&&t.is.plainObject(r[0])&&!t.is.element(r[0])){s=!0;for(var u=[],l={},c=0,h=r.length;h>c;c++){var d=r[c];null==d.data&&(d.data={});var f=d.data;if(null==f.id)f.id=e.generate(n,d);else if(0!==n.getElementById(f.id).length||l[f.id])continue;var p=new t.Element(n,d,!1);u.push(p),l[f.id]=!0}r=u}}else r=[];this.length=0;for(var c=0,h=r.length;h>c;c++){var v=r[c];if(v){var g=v._private.data.id;(!i||i.unique&&!o[g])&&(o[g]=v,a[g]=this.length,this[this.length]=v,this.length++)}}this._private={cy:n,ids:o,indexes:a},s&&this.restore()},t.elefn=t.elesfn=t.Element.prototype=t.Collection.prototype,t.elesfn.cy=function(){return this._private.cy},t.elesfn.element=function(){return this[0]},t.elesfn.collection=function(){return t.is.collection(this)?this:new t.Collection(this._private.cy,[this])},t.elesfn.unique=function(){return new t.Collection(this._private.cy,this,{unique:!0})},t.elesfn.getElementById=function(e){var n=this._private.cy,r=this._private.ids[e];return r?r:t.Collection(n)},t.elesfn.json=function(){var e=this.element();if(null==e)return void 0;var n=e._private,r=t.util.copy({data:n.data,position:n.position,group:n.group,bypass:n.bypass,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbed:n.grabbed,grabbable:n.grabbable,classes:""}),i=[];for(var o in n.classes)n.classes[o]&&i.push(o);for(var a=0;a<i.length;a++){var o=i[a];r.classes+=o+(a<i.length-1?" ":"")}return r},t.elesfn.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t},t.elesfn.clone=function(){for(var e=this.cy(),n=[],r=0;r<this.length;r++){var i=this[r],o=i.json(),a=new t.Element(e,o,!1);n.push(a)}return new t.Collection(e,n)},t.elesfn.copy=t.elesfn.clone,t.elesfn.restore=function(n){var r=this,i=[],o=r.cy();void 0===n&&(n=!0);for(var a=[],s=[],u=[],l=0,c=0,h=0,d=r.length;d>h;h++){var f=r[h];f.isNode()?(s.push(f),l++):(u.push(f),c++)}a=s.concat(u);for(var h=0,d=a.length;d>h;h++){var f=a[h];if(f.removed()){var p=f._private,v=p.data;if(void 0===v.id)v.id=e.generate(o,f);else{if(t.is.emptyString(v.id)||!t.is.string(v.id)){t.util.error("Can not create element with invalid string ID `"+v.id+"`");continue}if(0!==o.getElementById(v.id).length){t.util.error("Can not create second element with ID `"+v.id+"`");continue}}var g=v.id;if(f.isEdge()){for(var y=f,m=["source","target"],b=m.length,w=!1,x=0;b>x;x++){var _=m[x],E=v[_];null==E||""===E?(t.util.error("Can not create edge `"+g+"` with unspecified "+_),w=!0):o.getElementById(E).empty()&&(t.util.error("Can not create edge `"+g+"` with nonexistant "+_+" `"+E+"`"),w=!0)}if(w)continue;var S=o.getElementById(v.source),T=o.getElementById(v.target);S._private.edges.push(y),T._private.edges.push(y),y._private.source=S,y._private.target=T}p.ids={},p.ids[g]=f,p.removed=!1,o.addToPool(f),i.push(f)}}for(var h=0;l>h;h++){var k=a[h],v=k._private.data,C=k._private.data.parent,P=null!=C;if(P){var D=o.getElementById(C);if(D.empty())v.parent=void 0;else{for(var O=!1,N=D;!N.empty();){if(k.same(N)){O=!0,v.parent=void 0;break}N=N.parent()}O||(D[0]._private.children.push(k),k._private.parent=D[0],o._private.hasCompoundNodes=!0)}}}if(i=new t.Collection(o,i),i.length>0){var M=i.add(i.connectedNodes()).add(i.parent());M.updateStyle(n),n?i.rtrigger("add"):i.trigger("add")}return r},t.elesfn.removed=function(){var t=this[0];return t&&t._private.removed},t.elesfn.inside=function(){var t=this[0];return t&&!t._private.removed},t.elesfn.remove=function(e){function n(t){for(var e=t._private.edges,n=0;n<e.length;n++)i(e[n])}function r(t){for(var e=t._private.children,n=0;n<e.length;n++)i(e[n])}function i(t){var e=c[t.id()];e||(c[t.id()]=!0,t.isNode()?(l.push(t),n(t),r(t)):l.unshift(t))}function o(t,e){for(var n=t._private.edges,r=0;r<n.length;r++){var i=n[r];if(e===i){n.splice(r,1);break}}}function a(t,e){e=e[0],t=t[0];for(var n=t._private.children,r=0;r<n.length;r++)if(n[r][0]===e[0]){n.splice(r,1);break}}var s=this,u=[],l=[],c={},h=s._private.cy;void 0===e&&(e=!0);for(var d=0,f=s.length;f>d;d++){var p=s[d];i(p)}for(var d=0;d<l.length;d++){var p=l[d];if(p._private.removed=!0,h.removeFromPool(p),u.push(p),p.isEdge()){var v=p.source()[0],g=p.target()[0];o(v,p),o(g,p)}else{var y=p.parent();0!==y.length&&a(y,p)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var p=m[d];if(p.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new t.Collection(this.cy(),u);b.size()>0&&(e&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var w={},d=0;d<l.length;d++){var p=l[d],x="nodes"===p._private.group,_=p._private.data.parent;if(x&&void 0!==_&&!w[_]){w[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this},t.elesfn.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,r=t.target,i=e.getElementById(n).length>0,o=e.getElementById(r).length>0;if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r))}return e.add(a)}}else if(void 0!==t.parent){var l=t.parent,c=null===l||e.getElementById(l).length>0;if(c){var a=this.jsons(),h=this.descendants(),d=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){
var u=a[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return e.add(a).merge(d.restore())}return this}}(cytoscape),function(t){"use strict";t.fn.eles({stdBreadthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.breadthFirstSearch(e)},breadthFirstSearch:function(e,n,r){var i,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.roots,n=i.visit,r=i.directed,o=i.std,a=i.thisArg),r=2!==arguments.length||t.is.fn(n)?r:n,n=t.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},f={},p={},v=0,g=this.nodes(),y=this.edges(),m=0;m<l.length;m++)l[m].isNode()&&(c.unshift(l[m]),p[l[m].id()]=!0,h.push(l[m]),f[l[m].id()]=0);for(;0!==c.length;){var b,l=c.shift(),w=f[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?n.call(a,l,x,_,v++,w):n.call(l,v++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(y),m=0;m<E.length;m++){var S=E[m],T=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(g);0===T.length||p[T.id()]||(T=T[0],c.push(T),p[T.id()]=!0,f[T.id()]=f[l.id()]+1,h.push(T),d[T.id()]=S)}}for(var k=[],m=0;m<h.length;m++){var C=h[m],P=d[C.id()];P&&k.push(P),k.push(C)}return{path:new t.Collection(u,k,{unique:!0}),found:new t.Collection(u,s,{unique:!0})}},stdDepthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.depthFirstSearch(e)},depthFirstSearch:function(e,n,r){var i,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.roots,n=i.visit,r=i.directed,o=i.std,a=i.thisArg),r=2!==arguments.length||t.is.fn(n)?r:n,n=t.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},f={},p={},v=0,g=this.edges(),y=this.nodes(),m=0;m<l.length;m++)l[m].isNode()&&(c.push(l[m]),h.push(l[m]),f[l[m].id()]=0);for(;0!==c.length;){var l=c.pop();if(!p[l.id()]){p[l.id()]=!0;var b,w=f[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?n.call(a,l,x,_,v++,w):n.call(l,v++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(g),m=0;m<E.length;m++){var S=E[m],T=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(y);0===T.length||p[T.id()]||(T=T[0],c.push(T),f[T.id()]=f[l.id()]+1,h.push(T),d[T.id()]=S)}}}for(var k=[],m=0;m<h.length;m++){var C=h[m],P=d[C.id()];P&&k.push(P),k.push(C)}return{path:new t.Collection(u,k,{unique:!0}),found:new t.Collection(u,s,{unique:!0})}},kruskal:function(e){function n(t){for(var e=0;e<i.length;e++){var n=i[e];if(n.anySame(t))return{eles:n,index:e}}}e=t.is.fn(e)?e:function(){return 1};for(var r=new t.Collection(this._private.cy,[]),i=[],o=this.nodes(),a=0;a<o.length;a++)i.push(o[a].collection());for(var s=this.edges(),u=s.toArray().sort(function(t,n){var r=e.call(t,t),i=e.call(n,n);return r-i}),a=0;a<u.length;a++){var l=u[a],c=l.source()[0],h=l.target()[0],d=n(c),f=n(h);d.index!==f.index&&(r=r.add(l),i[d.index]=d.eles.add(f.eles),i.splice(f.index,1))}return o.add(r)},dijkstra:function(e,n,r){var i;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.root,n=i.weight,r=i.directed);var o=this._private.cy;n=t.is.fn(n)?n:function(){return 1};for(var a=t.is.string(e)?this.filter(e)[0]:e[0],s={},u={},l={},c=this.edges().filter(function(){return!this.isLoop()}),h=this.nodes(),d=[],f=0;f<h.length;f++)s[h[f].id()]=h[f].same(a)?0:1/0,d.push(h[f]);var p=function(t){return s[t.id()]};d=new t.Collection(o,d);for(var v=t.Minheap(o,d,p),g=function(t,e){for(var i,o=(r?t.edgesTo(e):t.edgesWith(e)).intersect(c),a=1/0,s=0;s<o.length;s++){var u=o[s],l=n.apply(u,[u]);(a>l||!i)&&(a=l,i=u)}return{edge:i,dist:a}};v.size()>0;){var y=v.pop(),m=y.value,b=y.id,w=o.getElementById(b);if(l[b]=m,m===Math.Infinite)break;for(var x=w.neighborhood().intersect(h),f=0;f<x.length;f++){var _=x[f],E=_.id(),S=g(w,_),T=m+S.dist;T<v.getValueById(E)&&(v.edit(E,T),u[E]={node:w,edge:S.edge})}}return{distanceTo:function(e){var n=t.is.string(e)?h.filter(e)[0]:e[0];return l[n.id()]},pathTo:function(e){var n=t.is.string(e)?h.filter(e)[0]:e[0],r=[],i=n;if(n.length>0)for(r.unshift(n);u[i.id()];){var a=u[i.id()];r.unshift(a.edge),r.unshift(a.node),i=a.node}return new t.Collection(o,r)}}}}),t.elesfn.bfs=t.elesfn.breadthFirstSearch,t.elesfn.dfs=t.elesfn.depthFirstSearch,t.elesfn.stdBfs=t.elesfn.stdBreadthFirstSearch,t.elesfn.stdDfs=t.elesfn.stdDepthFirstSearch}(cytoscape),function(t){"use strict";t.fn.eles({aStar:function(e){e=e||{};var n=function(t,e,r,o){if(t==e)return o.push(i.getElementById(e)),o;if(e in r){var a=r[e],s=f[e];return o.push(i.getElementById(e)),o.push(i.getElementById(s)),n(t,a,r,o)}return void 0},r=function(t,e){if(0===t.length)return void 0;for(var n=0,r=e[t[0]],i=1;i<t.length;i++){var o=e[t[i]];r>o&&(r=o,n=i)}return n},i=this._private.cy;if(null==e||null==e.root)return void 0;var o=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null==e.goal)return void 0;var a=t.is.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&t.is.fn(e.heuristic))var s=e.heuristic;else var s=function(){return 0};if(null!=e.weight&&t.is.fn(e.weight))var u=e.weight;else var u=function(t){return 1};if(null!=e.directed)var l=e.directed;else var l=!1;var c=[],h=[o.id()],d={},f={},p={},v={};p[o.id()]=0,v[o.id()]=s(o);for(var g=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),m=0;h.length>0;){var b=r(h,v),w=i.getElementById(h[b]);if(m++,w.id()==a.id()){var x=n(o.id(),a.id(),d,[]);return x.reverse(),{found:!0,distance:p[w.id()],path:new t.Collection(i,x),steps:m}}c.push(w.id()),h.splice(b,1);var _=w.connectedEdges();l&&(_=_.stdFilter(function(t){return t.data("source")===w.id()})),_=_.intersect(g);for(var E=0;E<_.length;E++){var S=_[E],T=S.connectedNodes().stdFilter(function(t){return t.id()!==w.id()}).intersect(y);if(-1==c.indexOf(T.id())){var k=p[w.id()]+u.apply(S,[S]);-1!=h.indexOf(T.id())?k<p[T.id()]&&(p[T.id()]=k,v[T.id()]=k+s(T),d[T.id()]=w.id()):(p[T.id()]=k,v[T.id()]=k+s(T),h.push(T.id()),d[T.id()]=w.id(),f[T.id()]=S.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}},floydWarshall:function(e){e=e||{};var n=this._private.cy;if(null!=e.weight&&t.is.fn(e.weight))var r=e.weight;else var r=function(t){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;s>l;l++)u[a[l].id()]=l;for(var c=[],l=0;s>l;l++){for(var h=new Array(s),d=0;s>d;d++)h[d]=l==d?0:1/0;c.push(h)}var f=[],p=[],v=function(t){for(var e=0;s>e;e++){for(var n=new Array(s),r=0;s>r;r++)n[r]=void 0;t.push(n)}};v(f),v(p);for(var l=0;l<o.length;l++){var g=u[o[l].source().id()],y=u[o[l].target().id()],m=r.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,f[g][y]=y,p[g][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var g=u[o[l].target().id()],y=u[o[l].source().id()],m=r.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,f[g][y]=y,p[g][y]=o[l])}for(var b=0;s>b;b++)for(var l=0;s>l;l++)for(var d=0;s>d;d++)c[l][b]+c[b][d]<c[l][d]&&(c[l][d]=c[l][b]+c[b][d],f[l][d]=f[l][b]);for(var w=[],l=0;s>l;l++)w.push(a[l].id());var x={distance:function(e,r){if(t.is.string(e))var i=n.filter(e)[0].id();else var i=e.id();if(t.is.string(r))var o=n.filter(r)[0].id();else var o=r.id();return c[u[i]][u[o]]},path:function(e,r){var i=function(t,e,r,i,o){if(t===e)return n.getElementById(i[t]);if(void 0===r[t][e])return void 0;for(var a=[n.getElementById(i[t])],s=t;t!==e;){s=t,t=r[t][e];var u=o[s][t];a.push(u),a.push(n.getElementById(i[t]))}return a};if(t.is.string(e))var o=n.filter(e)[0].id();else var o=e.id();if(t.is.string(r))var a=n.filter(r)[0].id();else var a=r.id();var s=i(u[o],u[a],f,w,p);return new t.Collection(n,s)}};return x},bellmanFord:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var n=e.weight;else var n=function(t){return 1};if(null!=e.directed)var r=e.directed;else var r=!1;if(null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var i=this.filter(e.root)[0];else var i=e.root[0];for(var o=this._private.cy,a=this.edges().stdFilter(function(t){return!t.isLoop()}),s=this.nodes(),u=s.length,l={},c=0;u>c;c++)l[s[c].id()]=c;for(var h=[],d=[],f=[],c=0;u>c;c++)h[c]=s[c].id()===i.id()?0:1/0,d[c]=void 0;for(var p=!1,c=1;u>c;c++){p=!1;for(var v=0;v<a.length;v++){var g=l[a[v].source().id()],y=l[a[v].target().id()],m=n.apply(a[v],[a[v]]),b=h[g]+m;if(b<h[y]&&(h[y]=b,d[y]=g,f[y]=a[v],p=!0),!r){var b=h[y]+m;b<h[g]&&(h[g]=b,d[g]=y,f[g]=a[v],p=!0)}}if(!p)break}if(p)for(var v=0;v<a.length;v++){var g=l[a[v].source().id()],y=l[a[v].target().id()],m=n.apply(a[v],[a[v]]);if(h[g]+m<h[y])return t.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],c=0;u>c;c++)w.push(s[c].id());var x={distanceTo:function(e){if(t.is.string(e))var n=o.filter(e)[0].id();else var n=e.id();return h[l[n]]},pathTo:function(e){var n=function(t,e,n,r,i,a){for(;;){if(i.push(o.getElementById(r[n])),i.push(a[n]),e===n)return i;var s=t[n];if("undefined"==typeof s)return void 0;n=s}};if(t.is.string(e))var r=o.filter(e)[0].id();else var r=e.id();var a=[],s=n(d,l[i.id()],l[r],w,a,f);return null!=s&&s.reverse(),new t.Collection(o,s)},hasNegativeWeightCycle:!1};return x},kargerStein:function(e){e=e||{};var n=function(t,e,n){for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],u=n.filter(function(t){return e[t[1]]===a&&e[t[2]]===s?!1:e[t[1]]===s&&e[t[2]]===a?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<e.length;l++)e[l]===s&&(e[l]=a);return u},r=function(t,e,i,o){if(o>=i)return e;var a=Math.floor(Math.random()*e.length),s=n(a,t,e);return r(t,s,i-1,o)},i=this._private.cy,o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u=o.length,l=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),c=Math.floor(s/Math.sqrt(2));if(2>s)return void t.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var h={},d=0;s>d;d++)h[a[d].id()]=d;for(var f=[],d=0;u>d;d++){var p=o[d];f.push([d,h[p.source().id()],h[p.target().id()]])}for(var v,g=1/0,y=[],d=0;s>d;d++)y.push(d);for(var m=0;l>=m;m++){var b=y.slice(0),w=r(b,f,s,c),x=b.slice(0),_=r(b,w,c,2),E=r(x,w,c,2);_.length<=E.length&&_.length<g?(g=_.length,v=[_,b]):E.length<=_.length&&E.length<g&&(g=E.length,v=[E,x])}for(var S=v[0].map(function(t){return o[t[0]]}),T=[],k=[],C=v[1][0],d=0;d<v[1].length;d++){var P=v[1][d];P===C?T.push(a[d]):k.push(a[d])}var D={cut:new t.Collection(i,S),partition1:new t.Collection(i,T),partition2:new t.Collection(i,k)};return D},pageRank:function(e){e=e||{};var n=function(t){for(var e=t.length,n=0,r=0;e>r;r++)n+=t[r];for(var r=0;e>r;r++)t[r]=t[r]/n};if(null!=e&&null!=e.dampingfactor)var r=e.dampingFactor;else var r=.8;if(null!=e&&null!=e.precision)var i=e.precision;else var i=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else var o=200;if(null!=e&&null!=e.weight&&t.is.fn(e.weight))var a=e.weight;else var a=function(t){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(t){return!t.isLoop()}),l=this.nodes(),c=l.length,h=u.length,d={},f=0;c>f;f++)d[l[f].id()]=f;for(var p=[],v=[],g=(1-r)/c,f=0;c>f;f++){for(var y=[],m=0;c>m;m++)y.push(0);p.push(y),v.push(0)}for(var f=0;h>f;f++){var b=u[f],w=d[b.source().id()],x=d[b.target().id()],_=a.apply(b,[b]);p[x][w]+=_,v[w]+=_}for(var E=1/c+g,m=0;c>m;m++)if(0===v[m])for(var f=0;c>f;f++)p[f][m]=E;else for(var f=0;c>f;f++)p[f][m]=p[f][m]/v[m]+g;for(var S,T=[],k=[],f=0;c>f;f++)T.push(1),k.push(0);for(var C=0;o>C;C++){for(var P=k.slice(0),f=0;c>f;f++)for(var m=0;c>m;m++)P[f]+=p[f][m]*T[m];n(P),S=T,T=P;for(var D=0,f=0;c>f;f++)D+=Math.pow(S[f]-T[f],2);if(i>D)break}var O={rank:function(e){if(t.is.string(e))var n=s.filter(e)[0].id();else var n=e.id();return T[d[n]]}};return O},degreeCentralityNormalized:function(e){if(e=e||{},null!=e.directed)var n=e.directed;else var n=!1;var r=this.nodes(),i=r.length;if(n){for(var o={},a={},s=0,u=0,l=0;i>l;l++){var c=r[l],h=this.degreeCentrality(t.util.extend({},e,{root:c}));s<h.indegree&&(s=h.indegree),u<h.outdegree&&(u=h.outdegree),o[c.id()]=h.indegree,a[c.id()]=h.outdegree}return{indegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return o[e]/s},outdegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return a[e]/u}}}for(var d={},f=0,l=0;i>l;l++){var c=r[l],h=this.degreeCentrality(t.util.extend({},e,{root:c}));f<h.degree&&(f=h.degree),d[c.id()]=h.degree}return{degree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return d[e]/f}}},degreeCentrality:function(e){e=e||{};var n=this;if(null==e||null==e.root)return void 0;var r=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var i=e.weight;else var i=function(t){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.alpha&&t.is.number(e.alpha))var a=e.alpha;else a=0;if(o){for(var s=r.connectedEdges('edge[target = "'+r.id()+'"]').intersection(n),u=r.connectedEdges('edge[source = "'+r.id()+'"]').intersection(n),l=s.length,c=u.length,h=0,d=0,f=0;f<s.length;f++){var p=s[f];h+=i.apply(p,[p])}for(var f=0;f<u.length;f++){var p=u[f];d+=i.apply(p,[p])}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var v=r.connectedEdges().intersection(n),g=v.length,y=0,f=0;f<v.length;f++){var p=v[f];y+=i.apply(p,[p])}return{degree:Math.pow(g,1-a)*Math.pow(y,a)}},closenessCentralityNormalized:function(e){e=e||{};var n=e.harmonic;void 0===n&&(n=!0);for(var r={},i=0,o=this.nodes(),a=this.floydWarshall({weight:e.weight,directed:e.directed}),s=0;s<o.length;s++){for(var u=0,l=0;l<o.length;l++)if(s!=l){var c=a.distance(o[s],o[l]);u+=n?1/c:c}n||(u=1/u),u>i&&(i=u),r[o[s].id()]=u}return{closeness:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return r[e]/i}}},closenessCentrality:function(e){if(e=e||{},null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var n=this.filter(e.root)[0];else var n=e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var r=e.weight;else var r=function(){return 1};if(null!=e.directed&&t.is.bool(e.directed))var i=e.directed;else var i=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=n.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s},betweennessCentrality:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var n=e.weight,r=!0;else var r=!1;if(null!=e.directed&&t.is.bool(e.directed))var i=e.directed;else var i=!1;for(var o=function(t,e){t.unshift(e);for(var n=0;v[t[n]]<v[t[n+1]]&&n<t.length-1;n++){var r=t[n];t[n]=t[n+1],t[n+1]=r}},a=this._private.cy,s=this.nodes(),u={},l={},c=0;c<s.length;c++)u[s[c].id()]=i?s[c].outgoers("node"):s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)l[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var d=[],f={},p={},v={},g=[],c=0;c<s.length;c++)f[s[c].id()]=[],p[s[c].id()]=0,v[s[c].id()]=Number.POSITIVE_INFINITY;for(p[s[h].id()]=1,v[s[h].id()]=0,g.unshift(s[h].id());g.length>0;){var y=g.pop();d.push(y),u[y].forEach(r?function(t){if(a.$("#"+y).edgesTo(t).length>0)var e=a.$("#"+y).edgesTo(t)[0];else var e=t.edgesTo("#"+y)[0];var r=n.apply(e,[e]);v[t.id()]>v[y]+r&&(v[t.id()]=v[y]+r,g.indexOf(t.id())<0?o(g,t.id()):(g.splice(g.indexOf(t.id()),1),o(g,t.id())),p[t.id()]=0,f[t.id()]=[]),v[t.id()]==v[y]+r&&(p[t.id()]=p[t.id()]+p[y],f[t.id()].push(y))}:function(t){v[t.id()]==Number.POSITIVE_INFINITY&&(g.unshift(t.id()),v[t.id()]=v[y]+1),v[t.id()]==v[y]+1&&(p[t.id()]=p[t.id()]+p[y],f[t.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;d.length>0;){var b=d.pop();f[b].forEach(function(t){m[t]=m[t]+p[t]/p[b]*(1+m[b]),b!=s[h].id()&&(l[b]=l[b]+m[b])})}}var w=0;for(var x in l)w<l[x]&&(w=l[x]);var _={betweenness:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]},betweennessNormalized:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]/w}};return _.betweennessNormalised=_.betweennessNormalized,_}}),t.elesfn.dc=t.elesfn.degreeCentrality,t.elesfn.dcn=t.elesfn.degreeCentralityNormalised=t.elesfn.degreeCentralityNormalized,t.elesfn.cc=t.elesfn.closenessCentrality,t.elesfn.ccn=t.elesfn.closenessCentralityNormalised=t.elesfn.closenessCentralityNormalized,t.elesfn.bc=t.elesfn.betweennessCentrality}(cytoscape),function(t){"use strict";t.fn.eles({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop()})}(cytoscape),function(t){"use strict";t.fn.eles({addClass:function(e){e=e.split(/\s+/);for(var n=this,r=[],i=0;i<e.length;i++){var o=e[i];if(!t.is.emptyString(o))for(var a=0;a<n.length;a++){var s=n[a],u=s._private.classes[o];s._private.classes[o]=!0,u||r.push(s)}}return r.length>0&&new t.Collection(this._private.cy,r).updateStyle().trigger("class"),n},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes[t]?!0:!1},toggleClass:function(e,n){for(var r=e.split(/\s+/),i=this,o=[],a=0,s=i.length;s>a;a++)for(var u=i[a],l=0;l<r.length;l++){var c=r[l];if(!t.is.emptyString(c)){var h=u._private.classes[c],d=n||void 0===n&&!h;d?(u._private.classes[c]=!0,h||o.push(u)):(u._private.classes[c]=!1,h&&o.push(u))}}return o.length>0&&new t.Collection(this._private.cy,o).updateStyle().trigger("class"),i},removeClass:function(e){e=e.split(/\s+/);for(var n=this,r=[],i=0;i<n.length;i++)for(var o=n[i],a=0;a<e.length;a++){var s=e[a];if(s&&""!==s){var u=o._private.classes[s];o._private.classes[s]=void 0,u&&r.push(o)}}return r.length>0&&new t.Collection(n._private.cy,r).updateStyle(),n.trigger("class"),n},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}})}(cytoscape),function(t){"use strict";t.fn.eles({allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var n=0;n<this.length;n++){var r=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(r)return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){var r=e?t.apply(e,[this[n],n,this]):t(this[n],n,this);if(!r)return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length!==t.length?!1:this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}}),t.elesfn.allAreNeighbours=t.elesfn.allAreNeighbors}(cytoscape),function(t){"use strict";t.fn.eles({parent:function(e){for(var n=[],r=this._private.cy,i=0;i<this.length;i++){var o=this[i],a=r.getElementById(o._private.data.parent);a.size()>0&&n.push(a)}return new t.Collection(r,n,{unique:!0}).filter(e)},parents:function(e){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];n.push(o)}r=r.parent()}return new t.Collection(this.cy(),n,{unique:!0}).filter(e)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n],i=r.parents();e=e||i,e=e.intersect(i)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];n=n.concat(i._private.children)}return new t.Collection(this.cy(),n,{unique:!0}).filter(e)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];return t?0!==t._private.children.length:void 0},isChild:function(){var t=this[0];return t?void 0!==t._private.data.parent&&0!==t.parent().length:void 0},descendants:function(e){function n(t){for(var e=0;e<t.length;e++){var i=t[e];r.push(i),i.children().nonempty()&&n(i.children())}}var r=[];return n(this.children()),new t.Collection(this.cy(),r,{unique:!0}).filter(e)}}),t.elesfn.ancestors=t.elesfn.parents}(cytoscape),function(t){"use strict";var e=1,n=0;t.fn.eles({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:t.define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:t.define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:t.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:t.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];return t?t._private.data.id:void 0},position:t.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){var e=t.updateCompoundBounds();e.rtrigger("position")},canSet:function(t){return!t.locked()}}),silentPosition:t.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()}}),positions:function(e,n){if(t.is.plainObject(e))this.position(e);else if(t.is.fn(e)){for(var r=e,i=0;i<this.length;i++){var o=this[i],e=r.apply(o,[i,o]);if(e&&!o.locked()){var a=o._private.position;a.x=e.x,a.y=e.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;n?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},updateCompoundBounds:function(){function e(t){var e=t.children(),n=t._private.style,i="include"===n["compound-sizing-wrt-labels"].value,o=e.boundingBox({includeLabels:i,includeEdges:!0}),a={top:n["padding-top"].pxValue,bottom:n["padding-bottom"].pxValue,left:n["padding-left"].pxValue,right:n["padding-right"].pxValue},s=t._private.position,u=!1;"auto"===n.width.value&&(t._private.autoWidth=o.w+a.left+a.right,s.x=(o.x1+o.x2-a.left+a.right)/2,u=!0),"auto"===n.height.value&&(t._private.autoHeight=o.h+a.top+a.bottom,s.y=(o.y1+o.y2-a.top+a.bottom)/2,u=!0),u&&r.push(t)}var n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return n.collection();for(var r=[],i=this.parent();i.nonempty();){for(var o=0;o<i.length;o++){var a=i[o];e(a)}i=i.parent()}return new t.Collection(n,r)},renderedPosition:function(e,n){var r=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=t.is.plainObject(e)?e:void 0,u=void 0!==s||void 0!==n&&t.is.string(e);if(r&&r.isNode()){if(!u){var l=r._private.position;return s={x:l.x*o+a.x,y:l.y*o+a.y},void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var r=this[c];void 0!==n?r._private.position[e]=(n-a[e])/o:void 0!==s&&(r._private.position={x:(s.x-a.x)/o,y:(s.y-a.y)/o})}this.rtrigger("position")}else if(!u)return void 0;return this},relativePosition:function(e,n){var r=this[0],i=this.cy(),o=t.is.plainObject(e)?e:void 0,a=void 0!==o||void 0!==n&&t.is.string(e),s=i.hasCompoundNodes();if(r&&r.isNode()){if(!a){var u=r._private.position,l=s?r.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};return o={x:u.x-d.x,y:u.y-d.y},void 0===e?o:o[e]}for(var f=0;f<this.length;f++){var r=this[f],l=s?r.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};void 0!==n?r._private.position[e]=n+d[e]:void 0!==o&&(r._private.position={x:o.x+d.x,y:o.y+d.y})}this.rtrigger("position")}else if(!a)return void 0;return this},width:function(){var t=this[0],e=t._private.cy,n=e._private.styleEnabled;if(t){if(n){var r=t._private.style.width;return"auto"===r.strValue?t._private.autoWidth:r.pxValue}return 1}},outerWidth:function(){var t=this[0],r=t._private.cy,i=r._private.styleEnabled;if(t){if(i){var o=t._private.style,a="auto"===o.width.strValue?t._private.autoWidth:o.width.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+n:0;return a+s}return 1}},renderedWidth:function(){var t=this[0];if(t){var e=t.width();return e*this.cy().zoom()}},renderedOuterWidth:function(){var t=this[0];if(t){var e=t.outerWidth();return e*this.cy().zoom()}},height:function(){var t=this[0],e=t._private.cy,n=e._private.styleEnabled;if(t&&"nodes"===t._private.group){if(n){var r=t._private.style.height;return"auto"===r.strValue?t._private.autoHeight:r.pxValue}return 1}},outerHeight:function(){var t=this[0],r=t._private.cy,i=r._private.styleEnabled;if(t&&"nodes"===t._private.group){if(!i)return 1;var o=t._private.style,a="auto"===o.height.strValue?t._private.autoHeight:o.height.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+n:0;return a+s}},renderedHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.height();return e*this.cy().zoom()}},renderedOuterHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.outerHeight();return e*this.cy().zoom()}},renderedBoundingBox:function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},boundingBox:function(t){var e=this,n=e._private.cy,r=n._private,i=r.styleEnabled;t=t||{};var o=void 0===t.includeNodes?!0:t.includeNodes,a=void 0===t.includeEdges?!0:t.includeEdges,s=void 0===t.includeLabels?!0:t.includeLabels;i&&r.renderer.recalculateRenderedStyle(this);for(var u=1/0,l=-(1/0),c=1/0,h=-(1/0),d=0;d<e.length;d++){var f,p,v,g,y,m,b=e[d],w=b._private,x=w.style,_=i?w.style.display.value:"element",E="nodes"===w.group,S=!1;if("none"!==_){if(E&&o){S=!0;var T=w.position;y=T.x,m=T.y;var k=b.outerWidth(),C=k/2,P=b.outerHeight(),D=P/2;f=y-C,p=y+C,v=m-D,g=m+D,u=u>f?f:u,l=p>l?p:l,c=c>v?v:c,h=g>h?g:h}else if(b.isEdge()&&a){S=!0;var O=w.source,N=O._private,M=N.position,I=w.target,L=I._private,R=L.position,B=w.rstyle||{};if(f=M.x,p=R.x,v=M.y,g=R.y,f>p){var A=f;f=p,p=A}if(v>g){var A=v;v=g,g=A}if(u=u>f?f:u,l=p>l?p:l,c=c>v?v:c,h=g>h?g:h,i)for(var j=B.bezierPts||[],k=x.width.pxValue,q=k/2,z=0;z<j.length;z++){var F=j[z];f=F.x-q,p=F.x+q,v=F.y-q,g=F.y+q,u=u>f?f:u,l=p>l?p:l,c=c>v?v:c,h=g>h?g:h}if(i&&"haystack"===x["curve-style"].strValue){var V=w.rscratch.haystackPts;if(f=V[0],v=V[1],p=V[2],g=V[3],f>p){var A=f;f=p,p=A}if(v>g){var A=v;v=g,g=A}u=u>f?f:u,l=p>l?p:l,c=c>v?v:c,h=g>h?g:h}}if(i){var x=b._private.style,B=b._private.rstyle,U=x.content.strValue,X=x["font-size"],Y=x["text-halign"],W=x["text-valign"],H=B.labelWidth,$=B.labelHeight,G=B.labelX,Z=B.labelY;if(S&&s&&U&&X&&null!=$&&null!=H&&null!=G&&null!=Z&&Y&&W){var K,J,Q,tt,et=$,nt=H;if(b.isEdge())K=G-nt/2,J=G+nt/2,Q=Z-et/2,tt=Z+et/2;else{switch(Y.value){case"left":K=G-nt,J=G;break;case"center":K=G-nt/2,J=G+nt/2;break;case"right":K=G,J=G+nt}switch(W.value){case"top":Q=Z-et,tt=Z;break;case"center":Q=Z-et/2,tt=Z+et/2;break;case"bottom":Q=Z,tt=Z+et}}u=u>K?K:u,l=J>l?J:l,c=c>Q?Q:c,h=tt>h?tt:h}}}}var rt=function(t){return t===1/0||t===-(1/0)?0:t};return u=rt(u),l=rt(l),c=rt(c),h=rt(h),{x1:u,x2:l,y1:c,y2:h,w:l-u,h:h-c}}});var r=t.elesfn;r.attr=r.data,r.removeAttr=r.removeData,r.modelPosition=r.point=r.position,r.modelPositions=r.points=r.positions,r.renderedPoint=r.renderedPosition,r.relativePoint=r.relativePosition,r.boundingbox=r.boundingBox,r.renderedBoundingbox=r.renderedBoundingBox}(cytoscape),function(t){"use strict";function e(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];(e||!s.isLoop())&&(r+=t(i,s))}return r}}}function n(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);void 0===s||void 0!==r&&!e(s,r)||(r=s)}return r}}t.fn.eles({degree:e(function(t,e){return e.source().same(e.target())?2:1}),indegree:e(function(t,e){return e.target().same(t)?1:0}),outdegree:e(function(t,e){return e.source().same(t)?1:0})}),t.fn.eles({minDegree:n("degree",function(t,e){return e>t}),maxDegree:n("degree",function(t,e){return t>e}),minIndegree:n("indegree",function(t,e){return e>t}),maxIndegree:n("indegree",function(t,e){return t>e}),minOutdegree:n("outdegree",function(t,e){return e>t}),maxOutdegree:n("outdegree",function(t,e){return t>e})}),t.fn.eles({totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}})}(cytoscape),function(t){"use strict";t.fn.eles({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger(),rtrigger:function(t,e){return 0!==this.length?(this.cy().notify({type:t,collection:this}),this.trigger(t,e),this):void 0}}),t.define.eventAliasesOn(t.elesfn)}(cytoscape),function(t){"use strict";t.fn.eles({nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(e){var n=this._private.cy;if(t.is.fn(e)){for(var r=[],i=0;i<this.length;i++){var o=this[i];e.apply(o,[i,o])&&r.push(o)}return new t.Collection(n,r)}return t.is.string(e)||t.is.elementOrCollection(e)?new t.Selector(e).filter(this):void 0===e?this:new t.Collection(n)},not:function(e){var n=this._private.cy;if(e){t.is.string(e)&&(e=this.filter(e));for(var r=[],i=0;i<this.length;i++){var o=this[i],a=e._private.ids[o.id()];a||r.push(o)}return new t.Collection(n,r)}return this},absoluteComplement:function(){var t=this._private.cy;return t.elements().not(this)},intersect:function(e){var n=this._private.cy;if(t.is.string(e)){var r=e;return this.filter(r)}for(var i=[],o=this,a=e,s=this.length<e.length,u=s?a._private.ids:o._private.ids,l=s?o:a,c=0;c<l.length;c++){var h=l[c]._private.data.id,d=u[h];d&&i.push(d)}return new t.Collection(n,i)},xor:function(e){var n=this._private.cy;t.is.string(e)&&(e=n.$(e));var r=[],i=this,o=e,a=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=i._private.data.id,a=e._private.ids[o];a||r.push(i)}};return a(i,o),a(o,i),new t.Collection(n,r)},diff:function(e){var n=this._private.cy;t.is.string(e)&&(e=n.$(e));var r=[],i=[],o=[],a=this,s=e,u=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id,s=e._private.ids[a];s?o.push(i):n.push(i)}};return u(a,s,r),u(s,a,i),{left:new t.Collection(n,r,{unique:!0}),right:new t.Collection(n,i,{unique:!0}),both:new t.Collection(n,o,{unique:!0})}},add:function(e){var n=this._private.cy;if(!e)return this;if(t.is.string(e)){var r=e;e=n.elements(r)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<e.length;o++){var a=!this._private.ids[e[o].id()];a&&i.push(e[o])}return new t.Collection(n,i)},merge:function(e){var n=this._private,r=n.cy;if(!e)return this;if(t.is.string(e)){var i=e;e=r.elements(i)}for(var o=0;o<e.length;o++){var a=e[o],s=a.id(),u=!n.ids[s];if(u){var l=this.length++;this[l]=a,n.ids[s]=a,n.indexes[s]=l}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t.id(),r=e.indexes[n];if(null==r)return this;this[r]=void 0,e.ids[n]=void 0,e.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o];this[o]=void 0,this[r]=a,e.indexes[a.id()]=r}return this.length--,this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(t.is.string(e)){var r=e;e=n.elements(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=e?t.apply(e,[o,i,r]):t(o,i,r);n.push(a)}return n},stdFilter:function(e,n){
for(var r=[],i=this,o=this._private.cy,a=0;a<i.length;a++){var s=i[a],u=n?e.apply(n,[s,a,i]):e(s,a,i);u&&r.push(s)}return new t.Collection(o,r)},max:function(t,e){for(var n,r=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);r>s&&(r=s,n=a)}return{value:r,ele:n}}});var e=t.elesfn;e.u=e["|"]=e["+"]=e.union=e.or=e.add,e["\\"]=e["!"]=e["-"]=e.difference=e.relativeComplement=e.not,e.n=e["&"]=e["."]=e.and=e.intersection=e.intersect,e["^"]=e["(+)"]=e["(-)"]=e.symmetricDifference=e.symdiff=e.xor,e.fnFilter=e.filterFn=e.stdFilter,e.complement=e.abscomp=e.absoluteComplement}(cytoscape),function(t){"use strict";t.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];return t?t._private.group:void 0}})}(cytoscape),function(t){"use strict";t.fn.eles({each:function(e){if(t.is.fn(e))for(var n=0;n<this.length;n++){var r=this[n],i=e.apply(r,[n,r]);if(i===!1)break}return this},forEach:function(e,n){if(t.is.fn(e))for(var r=0;r<this.length;r++){var i=this[r],o=n?e.apply(n,[i,r,this]):e(i,r,this);if(o===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(e,n){var r=[],i=this.length;null==n&&(n=i),null==e&&(e=0),0>e&&(e=i+e),0>n&&(n=i+n);for(var o=e;o>=0&&n>o&&i>o;o++)r.push(this[o]);return new t.Collection(this.cy(),r)},size:function(){return this.length},eq:function(e){return this[e]||new t.Collection(this.cy())},first:function(){return this[0]||new t.Collection(this.cy())},last:function(){return this[this.length-1]||new t.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!t.is.fn(e))return this;var n=this.cy(),r=this.toArray().sort(e);return new t.Collection(n,r)},sortByZIndex:function(){return this.sort(t.Collection.zIndexSort)},zDepth:function(){var t=this[0];if(!t)return void 0;var e=t._private,n=e.group;if("nodes"===n){var r=e.data.parent?t.parents().size():0;return t.isParent()?r:Number.MAX_VALUE}var i=e.source,o=e.target,a=i.zDepth(),s=o.zDepth();return Math.max(a,s,0)}}),t.Collection.zIndexSort=function(t,e){var n=t.cy(),r=t._private,i=e._private,o=r.style["z-index"].value-i.style["z-index"].value,a=0,s=0,u=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,h="nodes"===i.group,d="edges"===i.group;u&&(a=t.zDepth(),s=e.zDepth());var f=a-s,p=0===f;return p?l&&d?1:c&&h?-1:0===o?r.index-i.index:o:f}}(cytoscape),function(t){"use strict";t.fn.eles({layoutPositions:function(e,n,r){var i=this.nodes(),o=this.cy();if(e.trigger({type:"layoutstart",layout:e}),n.animate){for(var a=0;a<i.length;a++){var s=i[a],u=a===i.length-1,l=r.call(s,a,s),c=s.position();t.is.number(c.x)&&t.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:l},{duration:n.animationDuration,step:u?function(){n.fit&&o.fit(n.eles,n.padding)}:void 0,complete:u?function(){null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),n.fit&&o.fit(n.eles,n.padding),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})}:void 0})}e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})}else i.positions(r),n.fit&&o.fit(n.eles,n.padding),null!=n.zoom&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.layout(t.util.extend({},e,{eles:this})),this},makeLayout:function(e){var n=this.cy();return n.makeLayout(t.util.extend({},e,{eles:this}))}}),t.elesfn.createLayout=t.elesfn.makeLayout}(cytoscape),function(t){"use strict";t.fn.eles({updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){for(var n=e._private.batchStyleEles,r=0;r<this.length;r++){var i=this[r];n.ids[i._private.id]||n.push(i)}return this}var o=e.style();t=t||void 0===t?!0:!1,o.apply(this);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;return t?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=t||void 0===t?!0:!1,!e.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return t?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===t?r:r[t]}},css:function(e,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,o=r.style();if(t.is.plainObject(e)){var a=e;o.applyBypass(this,a,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(t.is.string(e)){if(void 0===n){var l=this[0];return l?l._private.style[e].strValue:void 0}o.applyBypass(this,e,n,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===e){var l=this[0];return l?o.getRawStyle(l):void 0}return this},removeCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=!1,r=e.style(),i=this;if(void 0===t)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{t=t.split(/\s+/);for(var o=0;o<i.length;o++){var a=i[o];r.removeBypasses(a,t,n)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],n=t.hasCompoundNodes();if(e){var r=e._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===e._private.group){if(!n)return!0;var i=e._private.data.parent?e.parents():null;if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a._private.style,u=s.visibility.value,l=s.display.value;if("visible"!==u||"element"!==l)return!1}return!0}var c=e._private.source,h=e._private.target;return c.visible()&&h.visible()}},hidden:function(){var t=this[0];return t?!t.visible():void 0},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0],n=e.cy().hasCompoundNodes();return e?n?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];if(e){var n="auto"===e._private.style.width.value,r="auto"===e._private.style.height.value;return e.isParent()&&n&&r}},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];return e._private.backgrounding?!0:!1}}),t.elesfn.bypass=t.elesfn.style=t.elesfn.css,t.elesfn.renderedStyle=t.elesfn.renderedCss,t.elesfn.removeBypass=t.elesfn.removeStyle=t.elesfn.removeCss}(cytoscape),function(t){"use strict";function e(e){return function(){var n=arguments,r=[];if(2===n.length){var i=n[0],o=n[1];this.bind(e.event,i,o)}else if(1===n.length){var o=n[0];this.bind(e.event,o)}else if(0===n.length){for(var a=0;a<this.length;a++){var s=this[a],u=!e.ableField||s._private[e.ableField],l=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(u=c,!c))return this}u&&(s._private[e.field]=e.value,l&&r.push(s))}var h=t.Collection(this.cy(),r);h.updateStyle(),h.trigger(e.event)}return this}}function n(n){t.elesfn[n.field]=function(){var t=this[0];if(t){if(n.overrideField){var e=n.overrideField(t);if(void 0!==e)return e}return t._private[n.field]}},t.elesfn[n.on]=e({event:n.on,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!0}),t.elesfn[n.off]=e({event:n.off,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!1})}n({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),n({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),n({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),n({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),t.elesfn.deselect=t.elesfn.unselect,t.elesfn.grabbed=function(){var t=this[0];return t?t._private.grabbed:void 0},n({field:"active",on:"activate",off:"unactivate"}),t.elesfn.inactive=function(){var t=this[0];return t?!t._private.active:void 0}}(cytoscape),function(t){"use strict";function e(e){return function(n){for(var r=[],i=this._private.cy,o=0;o<this.length;o++){var a=this[o],s=a._private[e.attr];s&&r.push(s)}return new t.Collection(i,r,{unique:!0}).filter(n)}}function n(e){return function(n){var r=[],i=this._private.cy,o=e||{};t.is.string(n)&&(n=i.$(n));for(var a=this._private.ids,s=n._private.ids,u=0;u<n.length;u++)for(var l=n[u]._private.edges,c=0;c<l.length;c++){var h=l[c],d=h._private.data,f=a[d.source]&&s[d.target],p=s[d.source]&&a[d.target],v=f||p;if(v){if(o.thisIs){if("source"===o.thisIs&&!f)continue;if("target"===o.thisIs&&!p)continue}r.push(h)}}return new t.Collection(i,r,{unique:!0})}}function r(e){var n={codirected:!1};return e=t.util.extend({},n,e),function(n){for(var r=this._private.cy,i=[],o=this.edges(),a=e,s=0;s<o.length;s++)for(var u=o[s],l=u.source()[0],c=l.id(),h=u.target()[0],d=h.id(),f=l._private.edges,p=0;p<f.length;p++){var v=f[p],g=v._private.data,y=g.target,m=g.source,b=y===d&&m===c,w=c===y&&d===m;(a.codirected&&b||!a.codirected&&(b||w))&&i.push(v)}return new t.Collection(r,i,{unique:!0}).filter(n)}}t.fn.eles({roots:function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("target")===o.id()&&this.data("source")!==o.id()}).length>0;a||r.push(o)}}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)},leaves:function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("source")===o.id()&&this.data("target")!==o.id()}).length>0;a||r.push(o)}}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)},outgoers:function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;c===a&&h!==a&&(r.push(l),r.push(l.target()[0]))}}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)},successors:function(e){for(var n=this,r=[],i={};;){var o=n.outgoers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)},incomers:function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;h===a&&c!==a&&(r.push(l),r.push(l.source()[0]))}}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)},predecessors:function(e){for(var n=this,r=[],i={};;){var o=n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return new t.Collection(this._private.cy,r,{unique:!0}).filter(e)}}),t.fn.eles({neighborhood:function(e){for(var n=[],r=this._private.cy,i=this.nodes(),o=0;o<i.length;o++)for(var a=i[o],s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.connectedNodes().not(a);c.length>0&&n.push(c[0]),n.push(l[0])}return new t.Collection(r,n,{unique:!0}).filter(e)},closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),t.elesfn.neighbourhood=t.elesfn.neighborhood,t.elesfn.closedNeighbourhood=t.elesfn.closedNeighborhood,t.elesfn.openNeighbourhood=t.elesfn.openNeighborhood,t.fn.eles({source:function(t){var e,n=this[0];return n&&(e=n._private.source),e&&t?e.filter(t):e},target:function(t){var e,n=this[0];return n&&(e=n._private.target),e&&t?e.filter(t):e},sources:e({attr:"source"}),targets:e({attr:"target"})}),t.fn.eles({edgesWith:n(),edgesTo:n({thisIs:"source"})}),t.fn.eles({connectedEdges:function(e){for(var n=[],r=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];if(a.isNode())for(var s=a._private.edges,u=0;u<s.length;u++){var l=s[u];n.push(l)}}return new t.Collection(r,n,{unique:!0}).filter(e)},connectedNodes:function(e){for(var n=[],r=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];a.isEdge()&&(n.push(a.source()[0]),n.push(a.target()[0]))}return new t.Collection(r,n,{unique:!0}).filter(e)},parallelEdges:r(),codirectedEdges:r({codirected:!0})})}(cytoscape),function(t){"use strict";t.fn.eles({fit:function(){},center:function(){}})}(cytoscape),function(t){"use strict";t.Minheap=function(e,n,r){return new t.Heap(e,n,t.Heap.minHeapComparator,r)},t.Maxheap=function(e,n,r){return new t.Heap(e,n,t.Heap.maxHeapComparator,r)},t.Heap=function(e,n,r,i){if("undefined"!=typeof r&&"undefined"!=typeof n){"undefined"==typeof i&&(i=t.Heap.idFn);var o,a,s,u=[],l={},c=[],h=0;for(n=this.getArgumentAsCollection(n,e),s=n.length,h=0;s>h;h+=1){if(u.push(i.call(e,n[h],h,n)),o=n[h].id(),l.hasOwnProperty(o))throw"ERROR: Multiple items with the same id found: "+o;l[o]=h,c.push(o)}for(this._private={cy:e,heap:u,pointers:l,elements:c,comparator:r,extractor:i,length:s},h=Math.floor(s/2);h>=0;h-=1)a=this.heapify(h);return a}},t.Heap.idFn=function(t){return t.id()},t.Heap.minHeapComparator=function(t,e){return t>=e},t.Heap.maxHeapComparator=function(t,e){return e>=t},t.fn.heap=function(e,n){for(var r in e){var i=e[r];t.Heap.prototype[r]=i}},t.heapfn=t.Heap.prototype,t.heapfn.size=function(){return this._private.length},t.heapfn.getArgumentAsCollection=function(e,n){var r;if("undefined"==typeof n&&(n=this._private.cy),t.is.elementOrCollection(e))r=e;else{for(var i=[],o=[].concat.apply([],[e]),a=0;a<o.length;a++){var s=o[a],u=n.getElementById(s);u.length>0&&i.push(u)}r=new t.Collection(n,i)}return r},t.heapfn.isHeap=function(){var t,e,n,r,i,o=this._private.heap,a=o.length,s=this._private.comparator;for(t=0;a>t;t+=1)if(e=2*t+1,n=e+1,r=a>e?s(o[e],o[t]):!0,i=a>n?s(o[n],o[t]):!0,!r||!i)return!1;return!0},t.heapfn.heapSwap=function(t,e){var n=this._private.heap,r=this._private.pointers,i=this._private.elements,o=n[t],a=i[t],s=i[t],u=i[e];n[t]=n[e],i[t]=i[e],r[s]=e,r[u]=t,n[e]=o,i[e]=a},t.heapfn.heapify=function(t,e){var n,r,i,o,a,s,u,l=0,c=!1;for("undefined"==typeof e&&(e=!0),n=this._private.heap,l=n.length,s=this._private.comparator,r=t;!c;)e?(i=2*r+1,o=i+1,a=r,l>i&&!s(n[i],n[a])&&(a=i),l>o&&!s(n[o],n[a])&&(a=o),c=a===r,c||(this.heapSwap(a,r),r=a)):(u=Math.floor((r-1)/2),a=r,c=0>u||s(n[a],n[u]),c||(this.heapSwap(a,u),r=u))},t.heapfn.insert=function(t){var e,n,r,i,o,a=this.getArgumentAsCollection(t),s=a.length;for(o=0;s>o;o+=1){if(e=a[o],n=this._private.heap.length,r=this._private.extractor(e),i=e.id(),this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(r),this._private.elements.push(i),this._private.pointers[i]=n,this.heapify(n,!1)}this._private.length=this._private.heap.length},t.heapfn.getValueById=function(t){if(this._private.pointers.hasOwnProperty(t)){var e=this._private.pointers[t];return this._private.heap[e]}},t.heapfn.contains=function(t){for(var e=this.getArgumentAsCollection(t),n=0;n<e.length;n+=1){var r=e[n].id();if(!this._private.pointers.hasOwnProperty(r))return!1}return!0},t.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},t.heapfn.pop=function(){if(this._private.length>0){var t,e,n,r=this.top(),i=this._private.length-1;return this.heapSwap(0,i),t=this._private.elements[i],e=this._private.heap[i],n=t,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[n]=void 0,this.heapify(0),r}},t.heapfn.findDirectionHeapify=function(t){var e=Math.floor((t-1)/2),n=this._private.heap,r=0>e||this._private.comparator(n[t],n[e]);this.heapify(t,r)},t.heapfn.edit=function(e,n){for(var r=this.getArgumentAsCollection(e),i=0;i<r.length;i+=1){var o=r[i].id(),a=this._private.pointers[o],s=this._private.heap[a];t.is.number(n)?this._private.heap[a]=n:t.is.fn(n)&&(this._private.heap[a]=n.call(this._private.cy,s,a)),this.findDirectionHeapify(a)}},t.heapfn.remove=function(t){for(var e=this.getArgumentAsCollection(t),n=0;n<e.length;n+=1){var r,i,o,a=e[n].id(),s=this._private.pointers[a],u=this._private.length-1;s!==u&&this.heapSwap(s,u),r=this._private.elements[u],i=this._private.heap[u],o=r,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[o]=void 0,this.findDirectionHeapify(s)}return i}}(cytoscape),function(t){"use strict";function e(t){this.options=t,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:t.cy,container:t.cy.container(),canvases:new Array(e.CANVAS_LAYERS),contexts:new Array(e.CANVAS_LAYERS),canvasNeedsRedraw:new Array(e.CANVAS_LAYERS),bufferCanvases:new Array(e.BUFFER_COUNT),bufferContexts:new Array(e.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=t.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var n=this.data.canvasContainer.style;n.position="absolute",n.zIndex="0",n.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var r=0;r<e.CANVAS_LAYERS;r++)this.data.canvases[r]=document.createElement("canvas"),this.data.contexts[r]=this.data.canvases[r].getContext("2d"),this.data.canvases[r].style.position="absolute",this.data.canvases[r].setAttribute("data-id","layer"+r),this.data.canvases[r].style.zIndex=String(e.CANVAS_LAYERS-r),this.data.canvasContainer.appendChild(this.data.canvases[r]),this.data.canvasNeedsRedraw[r]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[e.NODE].setAttribute("data-id","layer"+e.NODE+"-node"),this.data.canvases[e.SELECT_BOX].setAttribute("data-id","layer"+e.SELECT_BOX+"-selectbox"),this.data.canvases[e.DRAG].setAttribute("data-id","layer"+e.DRAG+"-drag");for(var r=0;r<e.BUFFER_COUNT;r++)this.data.bufferCanvases[r]=document.createElement("canvas"),this.data.bufferContexts[r]=this.data.bufferCanvases[r].getContext("2d"),this.data.bufferCanvases[r].style.position="absolute",this.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),this.data.bufferCanvases[r].style.zIndex=String(-r-1),this.data.bufferCanvases[r].style.visibility="hidden";this.hideEdgesOnViewport=t.hideEdgesOnViewport,this.hideLabelsOnViewport=t.hideLabelsOnViewport,this.textureOnViewport=t.textureOnViewport,this.wheelSensitivity=t.wheelSensitivity,this.motionBlurEnabled=t.motionBlur,this.forcedPixelRatio=t.pixelRatio,this.motionBlur=!0,this.motionBlurOpacity=t.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=t.desktopTapThreshold,this.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,this.touchTapThreshold=t.touchTapThreshold,this.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,this.tapholdDuration=500,this.load()}e.CANVAS_LAYERS=3,e.SELECT_BOX=0,e.DRAG=1,e.NODE=2,e.BUFFER_COUNT=3,e.TEXTURE_BUFFER=0,e.MOTIONBLUR_BUFFER_NODE=1,e.MOTIONBLUR_BUFFER_DRAG=2,e.panOrBoxSelectDelay=400;var n="undefined"!=typeof Path2D;e.usePaths=function(){return n},e.prototype.notify=function(n){var r;r=t.is.array(n.type)?n.type:[n.type];for(var i=0;i<r.length;i++){var o=r[i];switch(o){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[e.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===o||"resize"===o)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[e.NODE]=!0,this.data.canvasNeedsRedraw[e.DRAG]=!0,this.redraw()},e.prototype.destroy=function(){this.destroyed=!0;for(var t=0;t<this.bindings.length;t++){var e=this.bindings[t],n=e;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(r){}};for(var r in t.math)e.prototype[r]=t.math[r];t("renderer","canvas",e)}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype,r=e.arrowShapes={};e.arrowShapeHeight=.3;var i=function(t,e,n,r,i,o,a,s){var u=n-i/2,l=n+i/2,c=r-o/2,h=r+o/2;return t>=u&&l>=t&&e>=c&&h>=e},o=function(t,e,n,r,i){r=-r;var o=t*Math.cos(r)-e*Math.sin(r),a=t*Math.sin(r)+e*Math.cos(r),s=o*n,u=a*n,l=s+i.x,c=u+i.y;return{x:l,y:c}};r.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(e,n,i,o,a,s,u,l){var c=r.arrow._points;return t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,n,i){for(var a=r.arrow._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,n,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},r.triangle=r.arrow,r["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(e,n,i,o,a,s,u,l){var c=r.triangle._points;return t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,n,i){for(var a,s=r.triangle._points,u=0;u<s.length/2;u++){var l=o(s[2*u],s[2*u+1],e,n,i);0===u&&(a=l),t.lineTo(l.x,l.y)}var c=this._ctrlPt,h=o(c[0],c[1],e,n,i);t.quadraticCurveTo(h.x,h.y,a.x,a.y)},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},r["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,n,i,o,a,s,u,l){var c=r["triangle-tee"]._points,h=r["triangle-tee"]._pointsTee,d=t.math.pointInsidePolygon(e,n,h,i,o,a,s,u,l)||t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l);return d},roughCollide:i,draw:function(t,e,n,i){for(var a=r["triangle-tee"]._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,n,i);t.lineTo(u.x,u.y)}var l=r["triangle-tee"]._pointsTee,c=o(l[0],l[1],e,n,i);t.moveTo(c.x,c.y);for(var s=0;s<l.length/2;s++){var u=o(l[2*s],l[2*s+1],e,n,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},r["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(e,n,r,i,o,a,s,u){var l=this._points;return t.math.pointInsidePolygon(e,n,l,r,i,o,a,s,u)},roughCollide:i,draw:function(t,e,n,r){for(var i=this._points,a=0;a<i.length/2;a++){var s=o(i[2*a],i[2*a+1],e,n,r);t.lineTo(s.x,s.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},r.none={collide:function(t,e,n,r,i,o,a,s){return!1},roughCollide:function(t,e,n,r,i,o,a,s){return!1},draw:function(t){},spacing:function(t){return 0},gap:function(t){return 0}},r.circle={_baseRadius:.15,collide:function(t,e,n,i,o,a,s,u){if(o!=a){var l=(a+u)/(o+u);return e/=l,i/=l,Math.pow(n-t,2)+Math.pow(i-e,2)<=Math.pow((o+u)*r.circle._baseRadius,2)}return Math.pow(n-t,2)+Math.pow(i-e,2)<=Math.pow((o+u)*r.circle._baseRadius,2)},roughCollide:i,draw:function(t,e,n,i){t.arc(i.x,i.y,r.circle._baseRadius*e,0,2*Math.PI,!1)},spacing:function(t){return n.getArrowWidth(t._private.style.width.pxValue)*r.circle._baseRadius},gap:function(t){return 2*t._private.style.width.pxValue}},r.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(e,n,i,o,a,s,u,l){var c=r.inhibitor._points;return t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,n,i){for(var a=r.inhibitor._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,n,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 1},gap:function(t){return 1}},r.tee=r.inhibitor,r.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(e,n,i,o,a,s,u,l){var c=r.square._points;return t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,n,i){for(var a=r.square._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,n,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},r.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(e,n,i,o,a,s,u,l){var c=r.diamond._points;return t.math.pointInsidePolygon(e,n,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,n,i){for(var a=r.diamond._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,n,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return t._private.style.width.pxValue}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.getCachedNodes=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedNodes&&(t.cache.cachedNodes=e.nodes()),t.cache.cachedNodes},n.updateNodesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedNodes=e.nodes()},n.getCachedEdges=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedEdges&&(t.cache.cachedEdges=e.edges()),t.cache.cachedEdges},n.updateEdgesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedEdges=e.edges()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.projectIntoViewport=function(t,e){var n=this.findContainerClientCoords(),r=n[0],i=n[1],o=t-r,a=e-i;return o-=this.data.cy.pan().x,a-=this.data.cy.pan().y,o/=this.data.cy.zoom(),a/=this.data.cy.zoom(),[o,a]},n.findContainerClientCoords=function(){var t=this.data.container,e=this.containerBB=this.containerBB||t.getBoundingClientRect();return[e.left,e.top,e.right-e.left,e.bottom-e.top]},n.invalidateContainerClientCoordsCache=function(){this.containerBB=null},n.findNearestElement=function(n,r,i,o){function a(t){var o=t.outerWidth()+2*p,a=t.outerHeight()+2*p,s=o/2,l=a/2,h=t._private.position;if(h.x-s<=n&&n<=h.x+s&&h.y-l<=r&&r<=h.y+l){var d=!i||t.visible()&&!t.transparent();if(i&&!d)return;{var f=e.nodeShapes[u.getNodeShape(t)];t._private.style["border-width"].pxValue/2}f.checkPoint(n,r,0,o,a,h.x,h.y)&&c.push(t)}}function s(o){var s,l,h=o._private.rscratch,p=o._private.style,v=p.width.pxValue/2+f,g=v*v,y=2*v,m=o._private.source,b=o._private.target,w=!1,x=function(){if(void 0!==l)return l;if(!i)return l=!0,!0;var t=o.visible()&&!o.transparent();return t?(l=!0,!0):(l=!1,!1)};if("self"===h.edgeType||"compound"===h.edgeType)((w=t.math.inBezierVicinity(n,r,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(n,r,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY))||(w=t.math.inBezierVicinity(n,r,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(n,r,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY)))&&c.push(o);else if("haystack"===h.edgeType){var _=p["haystack-radius"].value,E=_/2,S=b._private.position,T=b.width(),k=b.height(),C=m._private.position,P=m.width(),D=m.height(),O=C.x+h.source.x*P*E,N=C.y+h.source.y*D*E,M=S.x+h.target.x*T*E,I=S.y+h.target.y*k*E;(w=t.math.inLineVicinity(n,r,O,N,M,I,y))&&x()&&g>(s=t.math.sqDistanceToFiniteLine(n,r,O,N,M,I))&&c.push(o)}else"straight"===h.edgeType?(w=t.math.inLineVicinity(n,r,h.startX,h.startY,h.endX,h.endY,y))&&x()&&g>(s=t.math.sqDistanceToFiniteLine(n,r,h.startX,h.startY,h.endX,h.endY))&&c.push(o):"bezier"===h.edgeType&&(w=t.math.inBezierVicinity(n,r,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(n,r,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY))&&c.push(o);if(w&&x()&&0===c.length||c[c.length-1]!==o){var L=e.arrowShapes[p["source-arrow-shape"].value],R=e.arrowShapes[p["target-arrow-shape"].value],m=m||o._private.source,b=b||o._private.target,S=b._private.position,C=m._private.position,B=u.getArrowWidth(p.width.pxValue),A=u.getArrowHeight(p.width.pxValue),j=B,q=A;(L.roughCollide(n,r,h.arrowStartX,h.arrowStartY,B,A,[h.arrowStartX-C.x,h.arrowStartY-C.y],f)&&L.collide(n,r,h.arrowStartX,h.arrowStartY,B,A,[h.arrowStartX-C.x,h.arrowStartY-C.y],f)||R.roughCollide(n,r,h.arrowEndX,h.arrowEndY,j,q,[h.arrowEndX-S.x,h.arrowEndY-S.y],f)&&R.collide(n,r,h.arrowEndX,h.arrowEndY,j,q,[h.arrowEndX-S.x,h.arrowEndY-S.y],f))&&c.push(o)}d&&c.length>0&&c[c.length-1]===o&&(a(m),a(b))}for(var u=this,l=this.getCachedZSortedEles(),c=[],h=this.data.cy.zoom(),d=this.data.cy.hasCompoundNodes(),f=(o?24:8)/h,p=(o?8:2)/h,v=l.length-1;v>=0;v--){var g=l[v];if(c.length>0)break;"nodes"===g._private.group?a(l[v]):s(l[v])}return c.length>0?c[c.length-1]:null},n.getAllInBox=function(n,r,i,o){var a=this.getCachedNodes(),s=this.getCachedEdges(),u=[],l=Math.min(n,i),c=Math.max(n,i),h=Math.min(r,o),d=Math.max(r,o);n=l,i=c,r=h,o=d;for(var f,p=0;p<a.length;p++){var v=a[p]._private.position,g=this.getNodeShape(a[p]),y=this.getNodeWidth(a[p]),m=this.getNodeHeight(a[p]),b=a[p]._private.style["border-width"].pxValue/2,w=e.nodeShapes[g];w.intersectBox(n,r,i,o,y,m,v.x,v.y,b)&&u.push(a[p])}for(var p=0;p<s.length;p++){var x=s[p]._private.rscratch;if("self"==s[p]._private.rscratch.edgeType&&((f=t.math.boxInBezierVicinity(n,r,i,o,x.startX,x.startY,x.cp2ax,x.cp2ay,x.endX,x.endY,s[p]._private.style.width.pxValue))&&(2==f||1==f&&t.math.checkBezierInBox(n,r,i,o,x.startX,x.startY,x.cp2ax,x.cp2ay,x.endX,x.endY,s[p]._private.style.width.pxValue))||(f=t.math.boxInBezierVicinity(n,r,i,o,x.startX,x.startY,x.cp2cx,x.cp2cy,x.endX,x.endY,s[p]._private.style.width.pxValue))&&(2==f||1==f&&t.math.checkBezierInBox(n,r,i,o,x.startX,x.startY,x.cp2cx,x.cp2cy,x.endX,x.endY,s[p]._private.style.width.pxValue)))&&u.push(s[p]),"bezier"==x.edgeType&&(f=t.math.boxInBezierVicinity(n,r,i,o,x.startX,x.startY,x.cp2x,x.cp2y,x.endX,x.endY,s[p]._private.style.width.pxValue))&&(2==f||1==f&&t.math.checkBezierInBox(n,r,i,o,x.startX,x.startY,x.cp2x,x.cp2y,x.endX,x.endY,s[p]._private.style.width.pxValue))&&u.push(s[p]),"straight"==x.edgeType&&(f=t.math.boxInBezierVicinity(n,r,i,o,x.startX,x.startY,.5*x.startX+.5*x.endX,.5*x.startY+.5*x.endY,x.endX,x.endY,s[p]._private.style.width.pxValue))&&(2==f||1==f&&t.math.checkStraightEdgeInBox(n,r,i,o,x.startX,x.startY,x.endX,x.endY,s[p]._private.style.width.pxValue))&&u.push(s[p]),"haystack"==x.edgeType){var _=s[p].target()[0],E=_.position(),S=s[p].source()[0],T=S.position(),k=T.x+x.source.x,C=T.y+x.source.y,P=E.x+x.target.x,D=E.y+x.target.y,O=k>=n&&i>=k&&C>=r&&o>=C,N=P>=n&&i>=P&&D>=r&&o>=D;O&&N&&u.push(s[p])}}return u},n.getNodeWidth=function(t){return t.width()},n.getNodeHeight=function(t){return t.height()},n.getNodeShape=function(t){var e=t._private.style.shape.value;return t.isParent()?"rectangle"===e||"roundrectangle"===e?e:"rectangle":e},n.getNodePadding=function(t){var e=t._private.style["padding-left"].pxValue,n=t._private.style["padding-right"].pxValue,r=t._private.style["padding-top"].pxValue,i=t._private.style["padding-bottom"].pxValue;

return isNaN(e)&&(e=0),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=0),{left:e,right:n,top:r,bottom:i}},n.zOrderSort=t.Collection.zIndexSort,n.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},n.getCachedZSortedEles=function(t){var e=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),o=[];if(!t&&e&&n&&e===r&&n===i)o=this.cachedZSortedEles;else{for(var a=0;a<r.length;a++)r[a].visible()&&!r[a].transparent()&&o.push(r[a]);for(var a=0;a<i.length;a++)i[a].visible()&&!i[a].transparent()&&o.push(i[a]);o.sort(this.zOrderSort),this.cachedZSortedEles=o}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,o},n.projectBezier=function(e){function n(t){o.push({x:r(t[0],t[2],t[4],.05),y:r(t[1],t[3],t[5],.05)}),o.push({x:r(t[0],t[2],t[4],.25),y:r(t[1],t[3],t[5],.25)}),o.push({x:r(t[0],t[2],t[4],.4),y:r(t[1],t[3],t[5],.4)});var e={x:r(t[0],t[2],t[4],.5),y:r(t[1],t[3],t[5],.5)};o.push(e),"self"===i.edgeType||"compound"===i.edgeType?(i.midX=i.selfEdgeMidX,i.midY=i.selfEdgeMidY):(i.midX=e.x,i.midY=e.y),o.push({x:r(t[0],t[2],t[4],.6),y:r(t[1],t[3],t[5],.6)}),o.push({x:r(t[0],t[2],t[4],.75),y:r(t[1],t[3],t[5],.75)}),o.push({x:r(t[0],t[2],t[4],.95),y:r(t[1],t[3],t[5],.95)})}var r=t.math.qbezierAt,i=e._private.rscratch,o=e._private.rstyle.bezierPts=[];"self"===i.edgeType?(n([i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY]),n([i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY])):"bezier"===i.edgeType&&n([i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY])},n.recalculateNodeLabelProjection=function(t){var e=t._private.style.content.strValue;if(e&&!e.match(/^\s+$/)){var n,r,i=t.outerWidth(),o=t.outerHeight(),a=t._private.position,s=t._private.style["text-halign"].strValue,u=t._private.style["text-valign"].strValue,l=t._private.rscratch,c=t._private.rstyle;switch(s){case"left":n=a.x-i/2;break;case"right":n=a.x+i/2;break;default:n=a.x}switch(u){case"top":r=a.y-o/2;break;case"bottom":r=a.y+o/2;break;default:r=a.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(t)}},n.recalculateEdgeLabelProjection=function(e){var n=e._private.style.content.strValue;if(n&&!n.match(/^\s+$/)){var r,i,o,a,s=e._private,u=s.rscratch,l=s.rstyle;if("self"==u.edgeType)o=u.selfEdgeMidX,a=u.selfEdgeMidY;else if("straight"==u.edgeType)o=(u.startX+u.endX)/2,a=(u.startY+u.endY)/2;else if("bezier"==u.edgeType)o=t.math.qbezierAt(u.startX,u.cp2x,u.endX,.5),a=t.math.qbezierAt(u.startY,u.cp2y,u.endY,.5);else if("haystack"==u.edgeType){var c=u.haystackPts;o=(c[0]+c[2])/2,a=(c[1]+c[3])/2}r=o,i=a,u.labelX=r,u.labelY=i,l.labelX=r,l.labelY=i,this.applyLabelDimensions(e)}},n.applyLabelDimensions=function(t){var e=t._private.rscratch,n=t._private.rstyle,r=this.getLabelText(t),i=this.calculateLabelDimensions(t,r);n.labelWidth=i.width,e.labelWidth=i.width,n.labelHeight=i.height,e.labelHeight=i.height},n.getLabelText=function(t){var e=t._private.style,n=t._private.style.content.strValue,r=e["text-transform"].value,i=t._private.rscratch;if("none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),"wrap"===e["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var o=n.split("\n"),a=e["text-max-width"].pxValue,s=[],u=0;u<o.length;u++){var l=o[u],c=this.calculateLabelDimensions(t,l,"line="+l),h=c.width;if(h>a){for(var d=l.split(/\s+/),f="",p=0;p<d.length;p++){var v=d[p],g=0===f.length?v:f+" "+v,y=this.calculateLabelDimensions(t,g,"testLine="+g),m=y.width;a>=m?f+=v+" ":(s.push(f),f=v+" ")}f.match(/^\s+$/)||s.push(f)}else s.push(l)}i.labelWrapCachedLines=s,i.labelWrapCachedText=n=s.join("\n"),i.labelWrapKey=i.labelKey}return n},n.calculateLabelDimensions=function(t,e,n){var r=this,i=t._private.style,o=i["font-style"].strValue,a=i["font-size"].pxValue+"px",s=i["font-family"].strValue,u=i["font-weight"].strValue,l=t._private.labelKey;n&&(l+="$@$"+n);var c=r.labelDimCache||(r.labelDimCache={});if(c[l])return c[l];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var d=h.style;return d.fontFamily=s,d.fontStyle=o,d.fontSize=a,d.fontWeight=u,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",d.whiteSpace="wrap"===i["text-wrap"].value?"pre":"normal",h.textContent=e,c[l]={width:h.clientWidth,height:h.clientHeight},c[l]},n.recalculateRenderedStyle=function(t){for(var e=[],n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o._private,s=a.style,u=a.rscratch,l=a.rstyle,c=a.data.id,h=null!=u.boundingBoxKey&&a.boundingBoxKey===u.boundingBoxKey,d=null!=u.labelKey&&a.labelKey===u.labelKey,f=h&&d;if("nodes"===o._private.group){var p=a.position,v=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY,g=null!=l.nodeW&&l.nodeW===s.width.pxValue,y=null!=l.nodeH&&l.nodeH===s.height.pxValue;v&&f&&g&&y||n.push(o),l.nodeX=p.x,l.nodeY=p.y,l.nodeW=s.width.pxValue,l.nodeH=s.height.pxValue}else{var m=o._private.source._private.position,b=o._private.target._private.position,w=null!=l.srcX&&null!=l.srcY&&m.x===l.srcX&&m.y===l.srcY,x=null!=l.tgtX&&null!=l.tgtY&&b.x===l.tgtX&&b.y===l.tgtY,_=w&&x;if(!_||!f){var E=a.style["curve-style"].value;if("bezier"===E){if(!r[c]){e.push(o),r[c]=!0;for(var S=o.parallelEdges(),i=0;i<S.length;i++){var T=S[i],k=T._private.data.id;r[k]||(e.push(T),r[k]=!0)}}}else e.push(o)}l.srcX=m.x,l.srcY=m.y,l.tgtX=b.x,l.tgtY=b.y}u.boundingBoxKey=a.boundingBoxKey,u.labelKey=a.labelKey}this.recalculateEdgeProjections(e),this.recalculateLabelProjections(n,e)},n.recalculateLabelProjections=function(t,e){for(var n=0;n<t.length;n++)this.recalculateNodeLabelProjection(t[n]);for(var n=0;n<e.length;n++)this.recalculateEdgeLabelProjection(e[n])},n.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},n.findEdgeControlPoints=function(n){if(n&&0!==n.length){for(var r,i=this.data.cy,o=i.hasCompoundNodes(),a={},s=[],u=[],l=0;l<n.length;l++){var c=n[l],h=c._private.style,d="unbundled-bezier"===h["curve-style"].value;if("none"!==h.display.value)if("haystack"!==h["curve-style"].value){var f=c._private.data.source,p=c._private.data.target;r=f>p?p+"-"+f:f+"-"+p,d&&(r="unbundled"+c._private.data.id),null==a[r]&&(a[r]=[],s.push(r)),a[r].push(c),d&&(a[r].hasUnbundled=!0)}else u.push(c)}for(var v,g,y,m,b,w,x,_,E,S,T,k,C,P,D=0;D<s.length;D++){r=s[D];var O=a[r];if(O.sort(function(t,e){return t._private.index-e._private.index}),v=O[0]._private.source,g=O[0]._private.target,v._private.data.id>g._private.data.id){var N=v;v=g,g=N}if(y=v._private.position,m=g._private.position,b=this.getNodeWidth(v),w=this.getNodeHeight(v),x=this.getNodeWidth(g),_=this.getNodeHeight(g),E=e.nodeShapes[this.getNodeShape(v)],S=e.nodeShapes[this.getNodeShape(g)],T=v._private.style["border-width"].pxValue,k=g._private.style["border-width"].pxValue,P=!1,O.length>1&&v!==g||O.hasUnbundled){var M=E.intersectLine(y.x,y.y,b,w,m.x,m.y,T/2),I=S.intersectLine(m.x,m.y,x,_,y.x,y.y,k/2),L={x1:M[0],x2:I[0],y1:M[1],y2:I[1]},R=I[1]-M[1],B=I[0]-M[0],A=Math.sqrt(B*B+R*R),j={x:B,y:R},q={x:j.x/A,y:j.y/A};C={x:-q.y,y:q.x},(S.checkPoint(M[0],M[1],k/2,x,_,m.x,m.y)||E.checkPoint(I[0],I[1],T/2,b,w,y.x,y.y))&&(C={},P=!0)}for(var c,z,l=0;l<O.length;l++){c=O[l],z=c._private.rscratch;var F=z.lastEdgeIndex,V=l,U=z.lastNumEdges,X=O.length,Y=c._private.style,W=Y["control-point-step-size"].pxValue,H=void 0!==Y["control-point-distance"]?Y["control-point-distance"].pxValue:void 0,$=Y["control-point-weight"].value,d="unbundled-bezier"===Y["curve-style"].value,G=c._private.source!==v;G&&d&&(H*=-1);var Z=z.lastSrcCtlPtX,K=y.x,J=z.lastSrcCtlPtY,Q=y.y,tt=z.lastSrcCtlPtW,et=v.outerWidth(),nt=z.lastSrcCtlPtH,rt=v.outerHeight(),it=z.lastTgtCtlPtX,ot=m.x,at=z.lastTgtCtlPtY,st=m.y,ut=z.lastTgtCtlPtW,lt=g.outerWidth(),ct=z.lastTgtCtlPtH,ht=g.outerHeight(),dt=z.lastW,ft=Y["control-point-step-size"].pxValue;if(z.badBezier=P?!0:!1,Z!==K||J!==Q||tt!==et||nt!==rt||it!==ot||at!==st||ut!==lt||ct!==ht||dt!==ft||!(F===V&&U===X||d)){if(z.lastSrcCtlPtX=K,z.lastSrcCtlPtY=Q,z.lastSrcCtlPtW=et,z.lastSrcCtlPtH=rt,z.lastTgtCtlPtX=ot,z.lastTgtCtlPtY=st,z.lastTgtCtlPtW=lt,z.lastTgtCtlPtH=ht,z.lastEdgeIndex=V,z.lastNumEdges=X,z.lastWidth=ft,v===g){z.edgeType="self";var pt=l,vt=W;d&&(pt=0,vt=H),z.cp2ax=y.x,z.cp2ay=y.y-(1+Math.pow(w,1.12)/100)*vt*(pt/3+1),z.cp2cx=y.x-(1+Math.pow(b,1.12)/100)*vt*(pt/3+1),z.cp2cy=y.y,z.selfEdgeMidX=(z.cp2ax+z.cp2cx)/2,z.selfEdgeMidY=(z.cp2ay+z.cp2cy)/2}else if(o&&(v.isParent()||v.isChild()||g.isParent()||g.isChild())&&(v.parents().anySame(g)||g.parents().anySame(v))){z.edgeType="compound",z.badBezier=!1;var pt=l,vt=W;d&&(pt=0,vt=H);var gt=50,yt={x:y.x-b/2,y:y.y-w/2},mt={x:m.x-x/2,y:m.y-_/2},bt=1;z.cp2ax=yt.x,z.compoundStretchA=Math.max(bt,Math.log(.01*b)),z.cp2ay=yt.y-(1+Math.pow(gt,1.12)/100)*vt*(pt/3+1)*z.compoundStretchA,z.compoundStretchB=Math.max(bt,Math.log(.01*x)),z.cp2cx=mt.x-(1+Math.pow(gt,1.12)/100)*vt*(pt/3+1)*z.compoundStretchB,z.cp2cy=mt.y,z.selfEdgeMidX=(z.cp2ax+z.cp2cx)/2,z.selfEdgeMidY=(z.cp2ay+z.cp2cy)/2}else if(O.length%2!==1||l!==Math.floor(O.length/2)||d){var wt,xt=(.5-O.length/2+l)*W,_t=t.math.signum(xt);wt=d?H:void 0!==H?_t*H:void 0;var Et=void 0!==wt?wt:xt,St=1-$,Tt=$;G&&(St=$,Tt=1-$);var kt={x:L.x1*St+L.x2*Tt,y:L.y1*St+L.y2*Tt};z.edgeType="bezier",z.cp2x=kt.x+C.x*Et,z.cp2y=kt.y+C.y*Et}else z.edgeType="straight";this.findEndpoints(c);var Ct=!t.is.number(z.startX)||!t.is.number(z.startY),Pt=!t.is.number(z.arrowStartX)||!t.is.number(z.arrowStartY),Dt=!t.is.number(z.endX)||!t.is.number(z.endY),Ot=!t.is.number(z.arrowEndX)||!t.is.number(z.arrowEndY),Nt=3,Mt=this.getArrowWidth(c._private.style.width.pxValue)*e.arrowShapeHeight,It=Nt*Mt,Lt=t.math.distance({x:z.cp2x,y:z.cp2y},{x:z.startX,y:z.startY}),Rt=It>Lt,Bt=t.math.distance({x:z.cp2x,y:z.cp2y},{x:z.endX,y:z.endY}),At=It>Bt;if("bezier"===z.edgeType){var jt=!1;if(Ct||Pt||Rt){jt=!0;var qt={x:z.cp2x-y.x,y:z.cp2y-y.y},zt=Math.sqrt(qt.x*qt.x+qt.y*qt.y),Ft={x:qt.x/zt,y:qt.y/zt},Vt=Math.max(b,w),Ut={x:z.cp2x+2*Ft.x*Vt,y:z.cp2y+2*Ft.y*Vt},Xt=E.intersectLine(y.x,y.y,b,w,Ut.x,Ut.y,T/2);Rt?(z.cp2x=z.cp2x+Ft.x*(It-Lt),z.cp2y=z.cp2y+Ft.y*(It-Lt)):(z.cp2x=Xt[0]+Ft.x*It,z.cp2y=Xt[1]+Ft.y*It)}if(Dt||Ot||At){jt=!0;var qt={x:z.cp2x-m.x,y:z.cp2y-m.y},zt=Math.sqrt(qt.x*qt.x+qt.y*qt.y),Ft={x:qt.x/zt,y:qt.y/zt},Vt=Math.max(b,w),Ut={x:z.cp2x+2*Ft.x*Vt,y:z.cp2y+2*Ft.y*Vt},Yt=S.intersectLine(m.x,m.y,x,_,Ut.x,Ut.y,k/2);At?(z.cp2x=z.cp2x+Ft.x*(It-Bt),z.cp2y=z.cp2y+Ft.y*(It-Bt)):(z.cp2x=Yt[0]+Ft.x*It,z.cp2y=Yt[1]+Ft.y*It)}jt&&this.findEndpoints(c)}else"straight"===z.edgeType&&(z.midX=(K+ot)/2,z.midY=(Q+st)/2);this.projectBezier(c),this.recalculateEdgeLabelProjection(c)}}}for(var l=0;l<u.length;l++){var c=u[l],Wt=c._private,Ht=Wt.rscratch,z=Ht;if(!Ht.haystack){var $t=2*Math.random()*Math.PI;Ht.source={x:Math.cos($t),y:Math.sin($t)};var $t=2*Math.random()*Math.PI;Ht.target={x:Math.cos($t),y:Math.sin($t)}}var v=Wt.source,g=Wt.target,y=v._private.position,m=g._private.position,b=v.width(),x=g.width(),w=v.height(),_=g.height(),Vt=h["haystack-radius"].value,Gt=Vt/2;z.haystackPts=[z.source.x*b*Gt+y.x,z.source.y*w*Gt+y.y,z.target.x*x*Gt+m.x,z.target.y*_*Gt+m.y],Ht.edgeType="haystack",Ht.haystack=!0,this.recalculateEdgeLabelProjection(c)}return a}},n.findEndpoints=function(n){var r,i=n.source()[0],o=n.target()[0],a=n._private.style["target-arrow-shape"].value,s=n._private.style["source-arrow-shape"].value,u=o._private.style["border-width"].pxValue,l=i._private.style["border-width"].pxValue,c=n._private.rscratch;if("self"==c.edgeType||"compound"==c.edgeType){var h=[c.cp2cx,c.cp2cy];r=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],u/2);var d=t.math.shortenIntersection(r,h,e.arrowShapes[a].spacing(n)),f=t.math.shortenIntersection(r,h,e.arrowShapes[a].gap(n));c.endX=f[0],c.endY=f[1],c.arrowEndX=d[0],c.arrowEndY=d[1];var h=[c.cp2ax,c.cp2ay];r=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),h[0],h[1],l/2);var p=t.math.shortenIntersection(r,h,e.arrowShapes[s].spacing(n)),v=t.math.shortenIntersection(r,h,e.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=p[0],c.arrowStartY=p[1]}else if("straight"==c.edgeType){r=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),i.position().x,i.position().y,u/2),c.noArrowPlacement=0===r.length?!0:!1;var d=t.math.shortenIntersection(r,[i.position().x,i.position().y],e.arrowShapes[a].spacing(n)),f=t.math.shortenIntersection(r,[i.position().x,i.position().y],e.arrowShapes[a].gap(n));c.endX=f[0],c.endY=f[1],c.arrowEndX=d[0],c.arrowEndY=d[1],r=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),o.position().x,o.position().y,l/2),c.noArrowPlacement=0===r.length?!0:!1;var p=t.math.shortenIntersection(r,[o.position().x,o.position().y],e.arrowShapes[s].spacing(n)),v=t.math.shortenIntersection(r,[o.position().x,o.position().y],e.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=p[0],c.arrowStartY=p[1],c.badLine=t.is.number(c.startX)&&t.is.number(c.startY)&&t.is.number(c.endX)&&t.is.number(c.endY)?!1:!0}else if("bezier"==c.edgeType){var h=[c.cp2x,c.cp2y];r=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],u/2);var d=t.math.shortenIntersection(r,h,e.arrowShapes[a].spacing(n)),f=t.math.shortenIntersection(r,h,e.arrowShapes[a].gap(n));c.endX=f[0],c.endY=f[1],c.arrowEndX=d[0],c.arrowEndY=d[1],r=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),h[0],h[1],l/2);var p=t.math.shortenIntersection(r,h,e.arrowShapes[s].spacing(n)),v=t.math.shortenIntersection(r,h,e.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=p[0],c.arrowStartY=p[1]}else if(c.isArcEdge)return},n.findEdges=function(t){for(var e=this.getCachedEdges(),n={},r=[],i=0;i<t.length;i++)n[t[i]._private.data.id]=t[i];for(var i=0;i<e.length;i++)(n[e[i]._private.data.source]||n[e[i]._private.data.target])&&r.push(e[i]);return r},n.getArrowWidth=n.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},n=e[t];return n?n:(n=Math.max(Math.pow(13.37*t,.9),29),e[t]=n,n)}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawEdge=function(t,n,r){var i=n._private.rscratch,o=e.usePaths();if(!i.badBezier&&("bezier"!==i.edgeType&&"straight"!==i.edgeType||!isNaN(i.startX))){var a=n._private.style;if(!(a.width.pxValue<=0)){var s=a["overlay-padding"].pxValue,u=a["overlay-opacity"].value,l=a["overlay-color"].value;if(r){if(0===u)return;this.strokeStyle(t,l[0],l[1],l[2],u),t.lineCap="round","self"!=n._private.rscratch.edgeType||o||(t.lineCap="butt")}else{var c=a["line-color"].value;this.strokeStyle(t,c[0],c[1],c[2],a.opacity.value),t.lineCap="butt"}var h,d,f,p;f=h=n._private.source,p=d=n._private.target;var v=a.width.pxValue+(r?2*s:0),g=r?"solid":a["line-style"].value;t.lineWidth=v;var y=a["shadow-blur"].pxValue,m=a["shadow-opacity"].value,b=a["shadow-color"].value,w=a["shadow-offset-x"].pxValue,x=a["shadow-offset-y"].pxValue;if(this.shadowStyle(t,b,r?0:m,y,w,x),"haystack"===i.edgeType)this.drawStyledEdge(n,t,i.haystackPts,g,v);else if("self"===i.edgeType||"compound"===i.edgeType){var _=n._private.rscratch,E=[_.startX,_.startY,_.cp2ax,_.cp2ay,_.selfEdgeMidX,_.selfEdgeMidY,_.selfEdgeMidX,_.selfEdgeMidY,_.cp2cx,_.cp2cy,_.endX,_.endY];this.drawStyledEdge(n,t,E,g,v)}else if("straight"===i.edgeType){var S=d._private.position.x-h._private.position.x,T=d._private.position.y-h._private.position.y,k=i.endX-i.startX,C=i.endY-i.startY;if(0>S*k+T*C)i.straightEdgeTooShort=!0;else{var _=i;this.drawStyledEdge(n,t,[_.startX,_.startY,_.endX,_.endY],g,v),i.straightEdgeTooShort=!1}}else{var _=i;this.drawStyledEdge(n,t,[_.startX,_.startY,_.cp2x,_.cp2y,_.endX,_.endY],g,v)}"haystack"===i.edgeType?this.drawArrowheads(t,n,r):i.noArrowPlacement!==!0&&void 0!==i.startX&&this.drawArrowheads(t,n,r),this.shadowStyle(t,"transparent",0)}}},n.drawStyledEdge=function(t,n,r,i,o){var a,s=t._private.rscratch,u=n,l=!1,c=e.usePaths();if(c){for(var h=r,d=s.pathCacheKey&&h.length===s.pathCacheKey.length,f=d,p=0;f&&p<h.length;p++)s.pathCacheKey[p]!==h[p]&&(f=!1);f?(a=n=s.pathCache,l=!0):(a=n=new Path2D,s.pathCacheKey=h,s.pathCache=a)}if(u.setLineDash)switch(i){case"dotted":u.setLineDash([1,1]);break;case"dashed":u.setLineDash([6,3]);break;case"solid":u.setLineDash([])}l||(n.beginPath&&n.beginPath(),n.moveTo(r[0],r[1]),6!==r.length||s.badBezier?12!==r.length||s.badBezier?4!==r.length||s.badLine||n.lineTo(r[2],r[3]):(n.quadraticCurveTo(r[2],r[3],r[4],r[5]),n.quadraticCurveTo(r[8],r[9],r[10],r[11])):n.quadraticCurveTo(r[2],r[3],r[4],r[5])),n=u,c?n.stroke(a):n.stroke(),n.setLineDash&&n.setLineDash([])},n.drawArrowheads=function(t,e,n){function r(n,r,i,o,a){var s=v[n+"-arrow-shape"].value;if("none"!==s){var u=t.globalCompositeOperation,l="hollow"===v[n+"-arrow-fill"].value?"both":"filled",c=v[n+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",l="hollow"),(1!==v.opacity.value||"hollow"===c)&&(t.globalCompositeOperation="destination-out",h.fillStyle(t,255,255,255,1),h.strokeStyle(t,255,255,255,1),h.drawArrowShape(e,n,t,l,v.width.pxValue,v[n+"-arrow-shape"].value,r,i,o,a),t.globalCompositeOperation=u);var d=v[n+"-arrow-color"].value;h.fillStyle(t,d[0],d[1],d[2],v.opacity.value),h.strokeStyle(t,d[0],d[1],d[2],v.opacity.value),h.drawArrowShape(e,n,t,c,v.width.pxValue,v[n+"-arrow-shape"].value,r,i,o,a)}}if(!n){var i,o,a,s,u,l,c=e._private.rscratch,h=this,d="haystack"===c.edgeType,f=e.source().position(),p=e.target().position();d?(a=c.haystackPts[0],s=c.haystackPts[1],u=c.haystackPts[2],l=c.haystackPts[3]):(a=c.arrowStartX,s=c.arrowStartY,u=c.arrowEndX,l=c.arrowEndY);var v=e._private.style;i=a-f.x,o=s-f.y,d||isNaN(a)||isNaN(s)||isNaN(i)||isNaN(o)||r("source",a,s,i,o);var g=c.midX,y=c.midY;d&&(g=(a+u)/2,y=(s+l)/2),i=a-u,o=s-l,"self"===c.edgeType&&(i=1,o=-1),isNaN(g)||isNaN(y)||r("mid-target",g,y,i,o),i*=-1,o*=-1,isNaN(g)||isNaN(y)||r("mid-source",g,y,i,o),i=u-p.x,o=l-p.y,d||isNaN(u)||isNaN(l)||isNaN(i)||isNaN(o)||r("target",u,l,i,o)}},n.drawArrowShape=function(t,n,r,i,o,a,s,u,l,c){var h,d=e.usePaths(),f=t._private.rscratch,p=!1,v=r,g={x:s,y:u},y=Math.asin(c/Math.sqrt(l*l+c*c));0>l?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(o),b=e.arrowShapes[a];if(d){var w=m+"$"+a+"$"+y+"$"+s+"$"+u;f.arrowPathCacheKey=f.arrowPathCacheKey||{},f.arrowPathCache=f.arrowPathCache||{};var x=f.arrowPathCacheKey[n]===w;x?(h=r=f.arrowPathCache[n],p=!0):(h=r=new Path2D,f.arrowPathCacheKey[n]=w,f.arrowPathCache[n]=h)}r.beginPath&&r.beginPath(),p||b.draw(r,m,y,g),!b.leavePathOpen&&r.closePath&&r.closePath(),r=v,("filled"===i||"both"===i)&&(d?r.fill(h):r.fill()),("hollow"===i||"both"===i)&&(r.lineWidth=b.matchEdgeWidth?o:1,r.lineJoin="miter",d?r.stroke(h):r.stroke())}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.getCachedImage=function(t,e){var n=this,r=n.imageCache=n.imageCache||{};if(r[t]&&r[t].image)return r[t].image;var i=r[t]=r[t]||{},o=i.image=new Image;return o.addEventListener("load",e),o.src=t,o},n.safeDrawImage=function(t,n,r,i,o,a,s,u,l,c){var h=this;try{t.drawImage(n,r,i,o,a,s,u,l,c)}catch(d){h.data.canvasNeedsRedraw[e.NODE]=!0,h.data.canvasNeedsRedraw[e.DRAG]=!0,h.drawingImage=!0,h.redraw()}},n.drawInscribedImage=function(t,n,r){var i=this,o=r._private.position.x,a=r._private.position.y,s=r._private.style,u=s["background-fit"].value,l=s["background-position-x"],c=s["background-position-y"],h=s["background-repeat"].value,d=r.width(),f=r.height(),p=r._private.rscratch,v=s["background-clip"].value,g="node"===v,y=s["background-image-opacity"].value,m=n.width,b=n.height;if(0!==m&&0!==b){var w=s["background-width"];"auto"!==w.value&&(m="%"===w.units?w.value/100*d:w.pxValue);var x=s["background-height"];if("auto"!==x.value&&(b="%"===x.units?x.value/100*f:x.pxValue),0!==m&&0!==b){if("contain"===u){var _=Math.min(d/m,f/b);m*=_,b*=_}else if("cover"===u){var _=Math.max(d/m,f/b);m*=_,b*=_}var E=o-d/2;E+="%"===l.units?(d-m)*l.value/100:l.pxValue;var S=a-f/2;S+="%"===c.units?(f-b)*c.value/100:c.pxValue,p.pathCache&&(E-=o,S-=a,o=0,a=0);var T=t.globalAlpha;if(t.globalAlpha=y,"no-repeat"===h)g&&(t.save(),p.pathCache?t.clip(p.pathCache):(e.nodeShapes[i.getNodeShape(r)].drawPath(t,o,a,d,f),t.clip())),i.safeDrawImage(t,n,0,0,n.width,n.height,E,S,m,b),g&&t.restore();else{var k=t.createPattern(n,h);t.fillStyle=k,e.nodeShapes[i.getNodeShape(r)].drawPath(t,o,a,d,f),t.translate(E,S),t.fill(),t.translate(-E,-S)}t.globalAlpha=T}}}}(cytoscape),function(t){"use strict";function e(t,e,n,r,i,o){var o=o||5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}var n=t("renderer","canvas"),r=n.prototype;r.drawEdgeText=function(e,n){var r=n._private.style.content.strValue;if(!(!r||r.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var i=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){e.textAlign="center",e.textBaseline="middle";var a=n._private.rscratch;if(t.is.number(a.labelX)&&t.is.number(a.labelY)){var s,u,l,c=n._private.style,h="autorotate"===c["edge-text-rotation"].strValue;if(h){switch(a.edgeType){case"haystack":u=a.haystackPts[2]-a.haystackPts[0],l=a.haystackPts[3]-a.haystackPts[1];break;default:u=a.endX-a.startX,l=a.endY-a.startY}s=Math.atan(l/u),e.translate(a.labelX,a.labelY),e.rotate(s),this.drawText(e,n,0,0),e.rotate(-s),e.translate(-a.labelX,-a.labelY)}else this.drawText(e,n,a.labelX,a.labelY)}}}},r.drawNodeText=function(e,n){var r=n._private.style.content.strValue;if(r&&!r.match(/^\s+$/)){var i=n._private.style["font-size"].pxValue*n.cy().zoom(),o=n._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){var a=n._private.style["text-halign"].strValue,s=n._private.style["text-valign"].strValue,u=n._private.rscratch;if(t.is.number(u.labelX)&&t.is.number(u.labelY)){switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(s){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,n,u.labelX,u.labelY)}}}},r.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},r.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),r=e._private.style,i=r["font-style"].strValue,o=r["font-size"].pxValue+"px",a=r["font-family"].strValue,s=r["font-weight"].strValue,u=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*u,c=r.color.value,h=r["text-outline-color"].value,d=r["text-shadow-blur"].pxValue,f=r["text-shadow-opacity"].value,p=r["text-shadow-color"].value,v=r["text-shadow-offset-x"].pxValue,g=r["text-shadow-offset-y"].pxValue,y=e._private.fontKey,m=this.getFontCache(t);m.key!==y&&(t.font=i+" "+s+" "+o+" "+a,m.key=y);var b=this.getLabelText(e);return t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],u),this.strokeStyle(t,h[0],h[1],h[2],l),this.shadowStyle(t,p,f,d,v,g),b},r.drawText=function(t,n,r,i){var o=n._private,a=o.style,s=o.rstyle,u=o.rscratch,l=n.effectiveOpacity();if(0!==l&&0!==a["text-opacity"].value){var c=this.setupTextStyle(t,n),h=a["text-halign"].value,d=a["text-valign"].value;if(n.isEdge()&&(h="center",d="center"),null!=c&&!isNaN(r)&&!isNaN(i)){var f=a["text-background-opacity"].value,p=a["text-border-opacity"].value,v=a["text-border-width"].pxValue;if(f>0||v>0&&p>0){var g=4+v/2;n.isNode()&&("top"===d?i-=g:"bottom"===d&&(i+=g),"left"===h?r-=g:"right"===h&&(r+=g));var y=s.labelWidth,m=s.labelHeight,b=r;h&&("center"==h?b-=y/2:"left"==h&&(b-=y));var w=i;if(n.isNode()?"top"==d?w-=m:"center"==d&&(w-=m/2):w-=m/2,"autorotate"===a["edge-text-rotation"].strValue?(i=0,y+=4,b=r-y/2,w=i-m/2):(b-=g,w-=g,m+=2*g,y+=2*g),f>0){var x=t.fillStyle,_=a["text-background-color"].value;t.fillStyle="rgba("+_[0]+","+_[1]+","+_[2]+","+f*l+")";var E=a["text-background-shape"].strValue;"roundrectangle"==E?e(t,b,w,y,m,2):t.fillRect(b,w,y,m),t.fillStyle=x}if(v>0&&p>0){var S=t.strokeStyle,T=t.lineWidth,k=a["text-border-color"].value,C=a["text-border-style"].value;if(t.strokeStyle="rgba("+k[0]+","+k[1]+","+k[2]+","+p*l+")",t.lineWidth=v,t.setLineDash)switch(C){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=v/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(b,w,y,m),"double"===C){var P=v/2;t.strokeRect(b+P,w+P,y-2*P,m-2*P)}t.setLineDash&&t.setLineDash([]),t.lineWidth=T,t.strokeStyle=S}}var D=2*a["text-outline-width"].pxValue;if(D>0&&(t.lineWidth=D),"wrap"===a["text-wrap"].value){var O=u.labelWrapCachedLines,N=s.labelHeight/O.length;switch(d){case"top":i-=(O.length-1)*N;break;case"bottom":break;default:case"center":i-=(O.length-1)*N/2}for(var M=0;M<O.length;M++)D>0&&t.strokeText(O[M],r,i),t.fillText(O[M],r,i),i+=N}else D>0&&t.strokeText(c,r,i),t.fillText(c,r,i);this.shadowStyle(t,"transparent",0)}}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawNode=function(t,n,r){var i,o,a,s=this,u=n._private.style,l=n._private.rscratch,c=n._private,h=e.usePaths(),d=t,f=!1,p=u["overlay-padding"].pxValue,v=u["overlay-opacity"].value,g=u["overlay-color"].value;if(!r||0!==v){var y=n.effectiveOpacity();if(0!==y)if(i=this.getNodeWidth(n),o=this.getNodeHeight(n),t.lineWidth=u["border-width"].pxValue,void 0!==r&&r)v>0&&(this.fillStyle(t,g[0],g[1],g[2],v),e.nodeShapes.roundrectangle.drawPath(t,n._private.position.x,n._private.position.y,i+2*p,o+2*p),t.fill());else{var m,b=u["background-image"].value[2]||u["background-image"].value[1];if(void 0!==b){m=this.getCachedImage(b,function(){s.data.canvasNeedsRedraw[e.NODE]=!0,s.data.canvasNeedsRedraw[e.DRAG]=!0,s.drawingImage=!0,s.redraw()});var w=c.backgrounding;c.backgrounding=!m.complete,w!==c.backgrounding&&n.updateStyle(!1)}var x=u["background-color"].value,_=u["border-color"].value,E=u["border-style"].value;this.fillStyle(t,x[0],x[1],x[2],u["background-opacity"].value*y),this.strokeStyle(t,_[0],_[1],_[2],u["border-opacity"].value*y);var S=u["shadow-blur"].pxValue,T=u["shadow-opacity"].value,k=u["shadow-color"].value,C=u["shadow-offset-x"].pxValue,P=u["shadow-offset-y"].pxValue;if(this.shadowStyle(t,k,T,S,C,P),t.lineJoin="miter",t.setLineDash)switch(E){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var D=u.shape.strValue,O=n._private.position;if(h){var N=D+"$"+i+"$"+o;t.translate(O.x,O.y),l.pathCacheKey===N?(a=t=l.pathCache,f=!0):(a=t=new Path2D,l.pathCacheKey=N,l.pathCache=a)}if(!f){var M=O;h&&(M={x:0,y:0}),e.nodeShapes[this.getNodeShape(n)].drawPath(t,M.x,M.y,i,o)}t=d,h?t.fill(a):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==b&&m.complete&&this.drawInscribedImage(t,m,n);var I=u["background-blacken"].value,L=u["border-width"].pxValue;if(this.hasPie(n)&&(this.drawPie(t,n,y),(0!==I||0!==L)&&(h||e.nodeShapes[this.getNodeShape(n)].drawPath(t,O.x,O.y,i,o))),I>0?(this.fillStyle(t,0,0,0,I),h?t.fill(a):t.fill()):0>I&&(this.fillStyle(t,255,255,255,-I),h?t.fill(a):t.fill()),L>0&&(h?t.stroke(a):t.stroke(),"double"===E)){t.lineWidth=u["border-width"].pxValue/3;var R=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(a):t.stroke(),t.globalCompositeOperation=R}h&&t.translate(-O.x,-O.y),t.setLineDash&&t.setLineDash([])}}},n.hasPie=function(t){return t=t[0],t._private.hasPie},n.drawPie=function(n,r,i){r=r[0];var o=r._private,a=o.style,s=a["pie-size"],u=this.getNodeWidth(r),l=this.getNodeHeight(r),c=o.position.x,h=o.position.y,d=Math.min(u,l)/2,f=0,p=e.usePaths();p&&(c=0,h=0),"%"===s.units?d=d*s.value/100:void 0!==s.pxValue&&(d=s.pxValue/2);for(var v=1;v<=t.style.pieBackgroundN;v++){var g=a["pie-"+v+"-background-size"].value,y=a["pie-"+v+"-background-color"].value,m=a["pie-"+v+"-background-opacity"].value*i,b=g/100,w=1.5*Math.PI+2*Math.PI*f,x=2*Math.PI*b,_=w+x;0===g||f>=1||f+b>1||(n.beginPath(),n.moveTo(c,h),n.arc(c,h,d,w,_),n.closePath(),this.fillStyle(n,y[0],y[1],y[2],m),n.fill(),f+=b)}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e,r=e.prototype;r.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},r.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(e=n[i],e.context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},r.fillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},r.strokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},r.shadowStyle=function(t,e,n,r,i,o){var a=this.data.cy.zoom(),s=this.paintCache(t);(0!==s.shadowOpacity||0!==n)&&(s.shadowOpacity=n,n>0?(t.shadowBlur=r*a,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+n+")",t.shadowOffsetX=i*a,t.shadowOffsetY=o*a):(t.shadowBlur=0,t.shadowColor="transparent"))},r.matchCanvasSize=function(t){var r=this.data,i=t.clientWidth,o=t.clientHeight,a=this.getPixelRatio(),s=this.motionBlurPxRatio;(t===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE]||t===this.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u,l=i*a,c=o*a;if(l!==this.canvasWidth||c!==this.canvasHeight){this.fontCaches=null;var h=r.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)u=r.canvases[d],(u.width!==l||u.height!==c)&&(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");for(var d=0;d<e.BUFFER_COUNT;d++)u=r.bufferCanvases[d],(u.width!==l||u.height!==c)&&(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");this.textureMult=1,1>=a&&(u=r.bufferCanvases[e.TEXTURE_BUFFER],this.textureMult=2,u.width=l*this.textureMult,u.height=c*this.textureMult),this.canvasWidth=l,this.canvasHeight=c}},r.renderTo=function(t,e,n,r){this.redraw({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},e.minRedrawLimit=1e3/60,e.maxRedrawLimit=1e3,e.motionBlurDelay=100,r.redraw=function(r){function i(){function r(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c.fillStyle(t,255,255,255,c.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function i(t,e){var i,s,h,d;c.clearingMotionBlur||t!==f.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]&&t!==f.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]?(i=C,s=T,h=c.canvasWidth,d=c.canvasHeight):(i={x:k.x*y,y:k.y*y},s=S*y,h=c.canvasWidth*y,d=c.canvasHeight*y),t.setTransform(1,0,0,1,0,0),"motionBlur"===e?r(t,0,0,h,d):o||void 0!==e&&!e||t.clearRect(0,0,h,d),a||(t.translate(i.x,i.y),t.scale(s,s)),l&&t.translate(l.x,l.y),u&&t.scale(u,u)}function w(t,e){for(var n=t.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(c.drawNode(e,i),F||c.drawNodeText(e,i),c.drawNode(e,i,!0)):z||(c.drawEdge(e,i),F||c.drawEdgeText(e,i),c.drawEdge(e,i,!0))}}c.textureDrawLastFrame&&!v&&(p[n.NODE]=!0,p[n.SELECT_BOX]=!0);var _=c.getCachedEdges(),E=d.style()._private.coreStyle,S=d.zoom(),T=void 0!==u?u:S,k=d.pan(),C={x:k.x,y:k.y},D={zoom:S,pan:{x:k.x,y:k.y}},O=c.prevViewport,N=void 0===O||D.zoom!==O.zoom||D.pan.x!==O.pan.x||D.pan.y!==O.pan.y;

N||b&&!m||(c.motionBlurPxRatio=1),l&&(C=l),T*=h,C.x*=h,C.y*=h;var M={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(v||(c.textureDrawLastFrame=!1),v){c.textureDrawLastFrame=!0;var I;if(!c.textureCache){c.textureCache={},I=c.textureCache.bb=d.elements().boundingBox(),c.textureCache.texture=c.data.bufferCanvases[e.TEXTURE_BUFFER];var L=c.data.bufferContexts[e.TEXTURE_BUFFER];L.setTransform(1,0,0,1,0,0),L.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.redraw({forcedContext:L,drawOnlyNodeLayer:!0,forcedPxRatio:h*c.textureMult});var D=c.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:c.canvasWidth,height:c.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}p[n.DRAG]=!1,p[n.NODE]=!1;var R=f.contexts[n.NODE],B=c.textureCache.texture,D=c.textureCache.viewport;I=c.textureCache.bb,R.setTransform(1,0,0,1,0,0),g?r(R,0,0,D.width,D.height):R.clearRect(0,0,D.width,D.height);var A=E["outside-texture-bg-color"].value,j=E["outside-texture-bg-opacity"].value;c.fillStyle(R,A[0],A[1],A[2],j),R.fillRect(0,0,D.width,D.height);var S=d.zoom();i(R,!1),R.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/h,D.height/D.zoom/h),R.drawImage(B,D.mpan.x,D.mpan.y,D.width/D.zoom/h,D.height/D.zoom/h)}else c.textureOnViewport&&!o&&(c.textureCache=null);var q=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,z=c.hideEdgesOnViewport&&q,F=c.hideLabelsOnViewport&&q;if(p[n.DRAG]||p[n.NODE]||a||s){z||c.findEdgeControlPoints(_);for(var V=c.getCachedZSortedEles(),U=d.extent(),X=0;X<V.length;X++){var Y,W=V[X],I=o?null:W.boundingBox(),H=o?!0:t.math.boundingBoxesIntersect(U,I);H&&(Y=W._private.rscratch.inDragLayer?M.drag:M.nondrag,Y.eles.push(W))}}var $=[];if($[n.NODE]=!p[n.NODE]&&g&&!c.clearedForMotionBlur[n.NODE]||c.clearingMotionBlur,$[n.NODE]&&(c.clearedForMotionBlur[n.NODE]=!0),$[n.DRAG]=!p[n.DRAG]&&g&&!c.clearedForMotionBlur[n.DRAG]||c.clearingMotionBlur,$[n.DRAG]&&(c.clearedForMotionBlur[n.DRAG]=!0),p[n.NODE]||a||s||$[n.NODE]){var G=g&&!$[n.NODE]&&1!==y,R=o||(G?c.data.bufferContexts[n.MOTIONBLUR_BUFFER_NODE]:f.contexts[n.NODE]),Z=g&&!G?"motionBlur":void 0;i(R,Z),w(M.nondrag,R),a||g||(p[n.NODE]=!1)}if(!s&&(p[n.DRAG]||a||$[n.DRAG])){var G=g&&!$[n.DRAG]&&1!==y,R=o||(G?c.data.bufferContexts[n.MOTIONBLUR_BUFFER_DRAG]:f.contexts[n.DRAG]);i(R,g&&!G?"motionBlur":void 0),w(M.drag,R),a||g||(p[n.DRAG]=!1)}if(c.showFps||!s&&p[n.SELECT_BOX]&&!a){var R=o||f.contexts[n.SELECT_BOX];if(i(R),1==f.select[4]&&(c.hoverData.selecting||c.touchData.selecting)){var S=f.cy.zoom(),K=E["selection-box-border-width"].value/S;R.lineWidth=K,R.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",R.fillRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]),K>0&&(R.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",R.strokeRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]))}if(f.bgActivePosistion&&!c.hoverData.selecting){var S=f.cy.zoom(),J=f.bgActivePosistion;R.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",R.beginPath(),R.arc(J.x,J.y,E["active-bg-size"].pxValue/S,0,2*Math.PI),R.fill()}var Q=c.averageRedrawTime;if(c.showFps&&Q){Q=Math.round(Q);var tt=Math.round(1e3/Q);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+Q+" ms = "+tt+" fps",0,20);var et=60;R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(tt/et,1),20)}a||(p[n.SELECT_BOX]=!1)}if(g&&1!==y){var nt=f.contexts[n.NODE],rt=c.data.bufferCanvases[n.MOTIONBLUR_BUFFER_NODE],it=f.contexts[n.DRAG],ot=c.data.bufferCanvases[n.MOTIONBLUR_BUFFER_DRAG],at=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!x?t.clearRect(0,0,c.canvasWidth,c.canvasHeight):r(t,0,0,c.canvasWidth,c.canvasHeight);var i=y;t.drawImage(e,0,0,c.canvasWidth*i,c.canvasHeight*i,0,0,c.canvasWidth,c.canvasHeight)};(p[n.NODE]||$[n.NODE])&&(at(nt,rt,$[n.NODE]),p[n.NODE]=!1),(p[n.DRAG]||$[n.DRAG])&&(at(it,ot,$[n.DRAG]),p[n.DRAG]=!1)}var st=Date.now();void 0===c.averageRedrawTime&&(c.averageRedrawTime=st-P),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0),c.redrawTotalTime+=st-P,c.lastRedrawTime=st-P,c.averageRedrawTime=c.averageRedrawTime/2+(st-P)/2,c.currentlyDrawing=!1,c.prevViewport=D,c.clearingMotionBlur&&(c.clearingMotionBlur=!1,c.motionBlurCleared=!0,c.motionBlur=!0),g&&(c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null,c.clearedForMotionBlur[n.NODE]=!1,c.clearedForMotionBlur[n.DRAG]=!1,c.motionBlur=!1,c.clearingMotionBlur=!v,c.mbFrames=0,p[n.NODE]=!0,p[n.DRAG]=!0,c.redraw()},e.motionBlurDelay)),c.drawingImage=!1}r=r||{};var o=r.forcedContext,a=r.drawAllLayers,s=r.drawOnlyNodeLayer,u=r.forcedZoom,l=r.forcedPan,c=this,h=void 0===r.forcedPxRatio?this.getPixelRatio():r.forcedPxRatio,d=c.data.cy,f=c.data,p=f.canvasNeedsRedraw,v=c.textureOnViewport&&!o&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming),g=void 0!==r.motionBlur?r.motionBlur:c.motionBlur,y=c.motionBlurPxRatio,m=d.hasCompoundNodes(),b=c.hoverData.draggingEles,w=c.hoverData.selecting||c.touchData.selecting?!0:!1;g=g&&!o&&c.motionBlurEnabled&&!w;var x=g;!o&&c.motionBlurTimeout&&clearTimeout(c.motionBlurTimeout),!o&&this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var _=e.minRedrawLimit,E=e.maxRedrawLimit,S=this.averageRedrawTime;S=_>S?_:S,S=E>S?S:E,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var T=Date.now(),k=T-this.lastDrawTime,C=k>=S;if(!o&&!c.clearingMotionBlur){if(!C||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){c.redraw()},S));this.lastDrawTime=T,this.currentlyDrawing=!0}g&&(null==c.mbFrames&&(c.mbFrames=0),c.drawingImage||c.mbFrames++,c.mbFrames<3&&(x=!1),c.mbFrames>c.minMbLowQualFrames&&(c.motionBlurPxRatio=c.mbPxRBlurry)),c.clearingMotionBlur&&(c.motionBlurPxRatio=1);var P=Date.now();o?i():t.util.requestAnimationFrame(i),o||c.initrender||(c.initrender=!0,d.trigger("initrender")),o||d.triggerOnRender()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],n+s*o[2*u+1]);t.closePath()},n.drawPolygon=function(t,e,n,r,i,o){this.drawPolygonPath(t,e,n,r,i,o),t.fill()},n.drawRoundRectanglePath=function(e,n,r,i,o,a){var s=i/2,u=o/2,l=t.math.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(n,r-u),e.arcTo(n+s,r-u,n+s,r,l),e.arcTo(n+s,r+u,n,r+u,l),e.arcTo(n-s,r+u,n-s,r,l),e.arcTo(n-s,r-u,n,r-u,l),e.lineTo(n,r-u),e.closePath()},n.drawRoundRectangle=function(t,e,n,r,i,o){this.drawRoundRectanglePath(t,e,n,r,i,o),t.fill()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e.prototype;n.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},n.bufferCanvasImage=function(e){var n=this.data,r=n.cy,i=r.elements().boundingBox(),o=e.full?Math.ceil(i.w):this.data.container.clientWidth,a=e.full?Math.ceil(i.h):this.data.container.clientHeight,s=1;if(void 0!==e.scale)o*=e.scale,a*=e.scale,s=e.scale;else if(t.is.number(e.maxWidth)||t.is.number(e.maxHeight)){var u=1/0,l=1/0;t.is.number(e.maxWidth)&&(u=s*e.maxWidth/o),t.is.number(e.maxHeight)&&(l=s*e.maxHeight/a),s=Math.min(u,l),o*=s,a*=s}var c=document.createElement("canvas");c.width=o,c.height=a,c.style.width=o+"px",c.style.height=a+"px";var h=c.getContext("2d");if(o>0&&a>0)if(h.clearRect(0,0,o,a),e.bg&&(h.fillStyle=e.bg,h.rect(0,0,o,a),h.fill()),h.globalCompositeOperation="source-over",e.full)this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:s,forcedPan:{x:-i.x1*s,y:-i.y1*s},forcedPxRatio:1});else{var d=r.pan(),f={x:d.x*s,y:d.y*s},p=r.zoom()*s;this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:p,forcedPan:f,forcedPxRatio:1})}return c},n.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},n.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),n=e,r=n.prototype;r.registerBinding=function(t,e,n,r){this.bindings.push({target:t,event:e,handler:n,useCapture:r}),t.addEventListener(e,n,r)},r.nodeIsDraggable=function(t){return 0!==t._private.style.opacity.value&&"visible"==t._private.style.visibility.value&&"element"==t._private.style.display.value&&!t.locked()&&t.grabbable()?!0:!1},r.load=function(){var e=this,r=function(t){var n;if(t.addToList&&e.data.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var r=0;r<t.addToList.length;r++){var i=t.addToList[r];t.addToList.hasId[i.id()]=!0}}n=t.addToList.hasId}return n||{}},i=function(t,e){if(t._private.cy.hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList))for(var n=r(e),i=t.descendants(),o=0;o<i.size();o++){var a=i[o],s=a._private;e.inDragLayer&&(s.rscratch.inDragLayer=!0),e.addToList&&!n[a.id()]&&(e.addToList.push(a),n[a.id()]=!0,s.grabbed=!0);for(var u=s.edges,l=0;e.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},o=function(t,e){var n=t._private,o=r(e);e.inDragLayer&&(n.rscratch.inDragLayer=!0),e.addToList&&!o[t.id()]&&(e.addToList.push(t),o[t.id()]=!0,n.grabbed=!0);for(var a=n.edges,u=0;e.inDragLayer&&u<a.length;u++)a[u]._private.rscratch.inDragLayer=!0;i(t,e),s(t,{inDragLayer:e.inDragLayer})},a=function(t){if(t)for(var e=0;e<t.length;e++){var n=t[e]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var r=n.edges,i=0;i<r.length;i++)r[i]._private.rscratch.inDragLayer=!1;s(t[e],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},s=function(t,e){if(null!=e.inDragLayer||null!=e.addToList){var n=t;if(t._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=t){for(var i=n.descendants().merge(n).unmerge(t).unmerge(t.descendants()),o=i.connectedEdges(),a=r(e),s=0;s<i.size();s++)void 0!==e.inDragLayer&&(i[s]._private.rscratch.inDragLayer=e.inDragLayer),e.addToList&&!a[i[s].id()]&&(e.addToList.push(i[s]),a[i[s].id()]=!0,i[s]._private.grabbed=!0);for(var u=0;void 0!==e.inDragLayer&&u<o.length;u++)o[u]._private.rscratch.inDragLayer=e.inDragLayer}}}};"undefined"!=typeof MutationObserver?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===e.data.container){e.destroy();break}}}}),e.removeObserver.observe(e.data.container.parentNode,{childList:!0})):e.registerBinding(e.data.container,"DOMNodeRemoved",function(t){e.destroy()}),e.registerBinding(window,"resize",t.util.debounce(function(t){e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.data.container),e.data.canvasNeedsRedraw[n.NODE]=!0,e.redraw()},100));for(var u=function(t){e.registerBinding(t,"scroll",function(t){e.invalidateContainerClientCoordsCache()})},l=e.data.cy.container();u(l),l.parentNode;)l=l.parentNode;e.registerBinding(e.data.container,"contextmenu",function(t){t.preventDefault()});var c=function(){return 0!==e.data.select[4]};e.registerBinding(e.data.container,"mousedown",function(r){r.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=r.which;var i=e.data.cy,a=e.projectIntoViewport(r.clientX,r.clientY),s=e.data.select,u=e.findNearestElement(a[0],a[1],!0,!1),l=e.dragData.possibleDragElements;e.hoverData.mdownPos=a;var c=e.data.canvasNeedsRedraw,h=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.trigger(new t.Event(r,{type:"taphold",cyPosition:{x:a[0],y:a[1]}})):i.trigger(new t.Event(r,{type:"taphold",cyPosition:{x:a[0],y:a[1]}}))}},e.tapholdDuration)};if(3==r.which){e.hoverData.cxtStarted=!0;var d=new t.Event(r,{type:"cxttapstart",cyPosition:{x:a[0],y:a[1]}});u?(u.activate(),u.trigger(d),e.hoverData.down=u):i.trigger(d),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==r.which){if(u&&u.activate(),null!=u){if(e.nodeIsDraggable(u)){var f=new t.Event(r,{type:"grab",cyPosition:{x:a[0],y:a[1]}});if(u.isNode()&&!u.selected())l=e.dragData.possibleDragElements=[],o(u,{addToList:l}),u.trigger(f);else if(u.isNode()&&u.selected()){l=e.dragData.possibleDragElements=[];for(var p=i.$(function(){return this.isNode()&&this.selected()}),v=0;v<p.length;v++)e.nodeIsDraggable(p[v])&&o(p[v],{addToList:l});u.trigger(f)}c[n.NODE]=!0,c[n.DRAG]=!0}u.trigger(new t.Event(r,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(r,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(r,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}))}else null==u&&i.trigger(new t.Event(r,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(r,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(r,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}));if(e.hoverData.down=u,e.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){s[4]=1;var g=Math.max(0,n.panOrBoxSelectDelay-(+new Date-e.hoverData.downTime));clearTimeout(e.bgActiveTimeout),i.boxSelectionEnabled()||u&&u.isEdge()?e.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),e.data.bgActivePosistion={x:a[0],y:a[1]},e.hoverData.dragging=!0,c[n.SELECT_BOX]=!0,e.redraw()},g):(e.data.bgActivePosistion={x:a[0],y:a[1]},c[n.SELECT_BOX]=!0,e.redraw())}h()}s[0]=s[2]=a[0],s[1]=s[3]=a[1]},!1),e.registerBinding(window,"mousemove",t.util.throttle(function(r){var i=!1,a=e.hoverData.capture;if(!a){var s=e.findContainerClientCoords();if(!(r.clientX>s[0]&&r.clientX<s[0]+e.canvasWidth&&r.clientY>s[1]&&r.clientY<s[1]+e.canvasHeight))return;for(var u=e.data.container,l=r.target,c=l.parentNode,h=!1;c;){if(c===u){h=!0;break}c=c.parentNode}if(!h)return}var d=e.data.cy,f=d.zoom(),p=e.projectIntoViewport(r.clientX,r.clientY),v=e.data.select,g=e.data.canvasNeedsRedraw,y=null;e.hoverData.draggingEles||(y=e.findNearestElement(p[0],p[1],!0,!1));var m=e.hoverData.last,b=e.hoverData.down,w=[p[0]-v[2],p[1]-v[3]],x=e.dragData.possibleDragElements,_=v[2]-v[0],E=_*_,S=v[3]-v[1],T=S*S,k=E+T,C=k*f*f;e.hoverData.tapholdCancelled=!0;var P=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(w[0]),t.push(w[1])):(t[0]+=w[0],t[1]+=w[1])};if(i=!0,null!=y?y.trigger(new t.Event(r,{type:"mousemove",cyPosition:{x:p[0],y:p[1]}})).trigger(new t.Event(r,{type:"vmousemove",cyPosition:{x:p[0],y:p[1]}})).trigger(new t.Event(r,{type:"tapdrag",cyPosition:{x:p[0],y:p[1]}})):null==y&&d.trigger(new t.Event(r,{type:"mousemove",cyPosition:{x:p[0],y:p[1]}})).trigger(new t.Event(r,{type:"vmousemove",cyPosition:{x:p[0],y:p[1]}})).trigger(new t.Event(r,{type:"tapdrag",cyPosition:{x:p[0],y:p[1]}})),3===e.hoverData.which){var D=new t.Event(r,{type:"cxtdrag",cyPosition:{x:p[0],y:p[1]}});b?b.trigger(D):d.trigger(D),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&y===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.trigger(new t.Event(r,{type:"cxtdragout",cyPosition:{x:p[0],y:p[1]}})),e.hoverData.cxtOver=y,y&&y.trigger(new t.Event(r,{type:"cxtdragover",cyPosition:{x:p[0],y:p[1]}})))}else if(e.hoverData.dragging){if(i=!0,d.panningEnabled()&&d.userPanningEnabled()){var O;if(e.hoverData.justStartedPan){var N=e.hoverData.mdownPos;O={x:(p[0]-N[0])*f,y:(p[1]-N[1])*f},e.hoverData.justStartedPan=!1}else O={x:w[0]*f,y:w[1]*f};d.panBy(O),e.hoverData.dragged=!0}p=e.projectIntoViewport(r.clientX,r.clientY)}else if(1==v[4]&&(null==b||b.isEdge())&&(!d.boxSelectionEnabled()||+new Date-e.hoverData.downTime>=n.panOrBoxSelectDelay)&&!e.hoverData.selecting&&C>=e.desktopTapThreshold2&&d.panningEnabled()&&d.userPanningEnabled())e.hoverData.dragging=!0,e.hoverData.selecting=!1,e.hoverData.justStartedPan=!0,v[4]=0;else{if(d.boxSelectionEnabled()&&!e.hoverData.dragging&&Math.pow(v[2]-v[0],2)+Math.pow(v[3]-v[1],2)>7&&v[4]&&(clearTimeout(e.bgActiveTimeout),e.data.bgActivePosistion=void 0,e.hoverData.selecting=!0,g[n.SELECT_BOX]=!0,e.redraw()),b&&b.isEdge()&&b.active()&&b.unactivate(),y!=m&&(m&&(m.trigger(new t.Event(r,{type:"mouseout",cyPosition:{x:p[0],y:p[1]}})),m.trigger(new t.Event(r,{type:"tapdragout",cyPosition:{x:p[0],y:p[1]}}))),y&&(y.trigger(new t.Event(r,{type:"mouseover",cyPosition:{x:p[0],y:p[1]}})),y.trigger(new t.Event(r,{type:"tapdragover",cyPosition:{x:p[0],y:p[1]}}))),e.hoverData.last=y),b&&b.isNode()&&e.nodeIsDraggable(b))if(C>=e.desktopTapThreshold2){var M=!e.dragData.didDrag;M&&(g[n.NODE]=!0),e.dragData.didDrag=!0;for(var I=[],L=0;L<x.length;L++){var R=x[L];if(e.hoverData.draggingEles||o(R,{inDragLayer:!0}),R.isNode()&&e.nodeIsDraggable(R)&&R.grabbed()){var B=R._private.position;if(I.push(R),t.is.number(w[0])&&t.is.number(w[1])&&(B.x+=w[0],B.y+=w[1],M)){var A=e.hoverData.dragDelta;t.is.number(A[0])&&t.is.number(A[1])&&(B.x+=A[0],B.y+=A[1])}}}e.hoverData.draggingEles=!0;var j=new t.Collection(d,I);j.updateCompoundBounds(),j.trigger("position drag"),g[n.DRAG]=!0,e.redraw()}else P();i=!0}return v[2]=p[0],v[3]=p[1],i?(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"mouseup",function(r){var i=e.hoverData.capture;if(i){e.hoverData.capture=!1;var o=e.data.cy,s=e.projectIntoViewport(r.clientX,r.clientY),u=e.data.select,l=e.findNearestElement(s[0],s[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,d=r.shiftKey,f=e.data.canvasNeedsRedraw;if(e.data.bgActivePosistion&&(f[n.SELECT_BOX]=!0,e.redraw()),e.data.bgActivePosistion=void 0,clearTimeout(e.bgActiveTimeout),h&&h.unactivate(),3===e.hoverData.which){var p=new t.Event(r,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(h?h.trigger(p):o.trigger(p),!e.hoverData.cxtDragged){var v=new t.Event(r,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});h?h.trigger(v):o.trigger(v)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else{if(null!=h||e.dragData.didDrag||e.hoverData.dragged||(o.$(function(){return this.selected()}).unselect(),c.length>0&&(f[n.NODE]=!0),e.dragData.possibleDragElements=c=[]),null!=l?l.trigger(new t.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==l&&o.trigger(new t.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),e.dragData.didDrag||e.hoverData.dragged||(null!=l?l.trigger(new t.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==l&&o.trigger(new t.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),l!=h||e.dragData.didDrag||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect():l.select():d||(o.$(":selected").unmerge(l).unselect(),l.select())),f[n.NODE]=!0),e.hoverData.selecting&&o.boxSelectionEnabled()&&Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)>7&&u[4]){var g=[],y=e.getAllInBox(u[0],u[1],u[2],u[3]);f[n.SELECT_BOX]=!0,y.length>0&&(f[n.NODE]=!0);for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=new t.Collection(o,g);"additive"===o.selectionType()?b.select():(d||o.$(":selected").unmerge(b).unselect(),b.select()),e.redraw()}e.hoverData.dragging&&(e.hoverData.dragging=!1,f[n.SELECT_BOX]=!0,f[n.NODE]=!0,e.redraw()),u[4]||(f[n.DRAG]=!0,f[n.NODE]=!0,a(c),h&&h.trigger("free"))}u[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[]}},!1);var h=function(t){if(!e.scrollingPage){var r=e.data.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||c())return void t.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.data.canvasNeedsRedraw[n.NODE]=!0,e.redraw()},150);var a=t.deltaY/-250||t.wheelDeltaY/1e3||t.wheelDelta/1e3;a*=e.wheelSensitivity;var s=1===t.deltaMode;s&&(a*=33),r.zoom({level:r.zoom()*Math.pow(10,a),renderedPosition:{x:o[0],y:o[1]}})}}};e.registerBinding(e.data.container,"wheel",h,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.data.container,"mouseout",function(n){var r=e.projectIntoViewport(n.clientX,n.clientY);e.data.cy.trigger(new t.Event(n,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),e.registerBinding(e.data.container,"mouseover",function(n){var r=e.projectIntoViewport(n.clientX,n.clientY);e.data.cy.trigger(new t.Event(n,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1);var d,f,p,v,g,y,m,b,w,x,_,E,S,T=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},k=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};e.registerBinding(e.data.container,"touchstart",function(r){clearTimeout(this.threeFingerSelectTimeout),r.target!==e.data.link&&r.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var i=e.data.cy,a=e.getCachedNodes(),s=e.getCachedEdges(),u=e.touchData.now,l=e.touchData.earlier,c=e.data.canvasNeedsRedraw;if(r.touches[0]){var h=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(r.touches[1]){var h=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=h[0],u[3]=h[1]}if(r.touches[2]){var h=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=h[0],u[5]=h[1]}if(r.touches[1]){var C=function(t){for(var e=0;e<t.length;e++)t[e]._private.grabbed=!1,t[e]._private.rscratch.inDragLayer=!1,t[e].active()&&t[e].unactivate()};C(a),C(s);var P=e.findContainerClientCoords();w=P[0],x=P[1],_=P[2],E=P[3],d=r.touches[0].clientX-w,f=r.touches[0].clientY-x,p=r.touches[1].clientX-w,v=r.touches[1].clientY-x,S=d>=0&&_>=d&&p>=0&&_>=p&&f>=0&&E>=f&&v>=0&&E>=v;var D=i.pan(),O=i.zoom();g=T(d,f,p,v),y=k(d,f,p,v),m=[(d+p)/2,(f+v)/2],b=[(m[0]-D.x)/O,(m[1]-D.y)/O];var N=200,M=N*N;if(M>y&&!r.touches[2]){var I=e.findNearestElement(u[0],u[1],!0,!0),L=e.findNearestElement(u[2],u[3],!0,!0);return I&&I.isNode()?(I.activate().trigger(new t.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=I):L&&L.isNode()?(L.activate().trigger(new t.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=L):(i.trigger(new t.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(r.touches[2]);else if(r.touches[1]);else if(r.touches[0]){var R=e.findNearestElement(u[0],u[1],!0,!0);if(null!=R){if(R.activate(),e.touchData.start=R,R.isNode()&&e.nodeIsDraggable(R)){var B=e.dragData.touchDragEles=[];if(c[n.NODE]=!0,c[n.DRAG]=!0,R.selected())for(var A=i.$(function(){return this.isNode()&&this.selected()}),j=0;j<A.length;j++){var q=A[j];e.nodeIsDraggable(q)&&o(q,{addToList:B})}else o(R,{addToList:B});R.trigger(new t.Event(r,{type:"grab",cyPosition:{x:u[0],y:u[1]}}))}R.trigger(new t.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(r,{type:"vmousdown",cyPosition:{x:u[0],y:u[1]}}))}null==R&&(i.trigger(new t.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(r,{type:"vmousedown",cyPosition:{x:u[0],y:u[1]}})),e.data.bgActivePosistion={x:h[0],y:h[1]},c[n.SELECT_BOX]=!0,e.redraw());for(var z=0;z<u.length;z++)l[z]=u[z],e.touchData.startPosition[z]=u[z];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||(e.touchData.start?e.touchData.start.trigger(new t.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})):(e.data.cy.trigger(new t.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})),i.$(":selected").unselect()))},e.tapholdDuration)}},!1),e.registerBinding(window,"touchmove",t.util.throttle(function(r){var i=e.data.select,a=e.touchData.capture;a&&r.preventDefault();var s=e.data.cy,u=e.touchData.now,l=e.touchData.earlier,c=s.zoom(),h=e.data.canvasNeedsRedraw;if(r.touches[0]){var m=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=m[0],u[1]=m[1]}if(r.touches[1]){var m=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=m[0],u[3]=m[1]}if(r.touches[2]){var m=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=m[0],u[5]=m[1]}for(var _=[],E=0;E<u.length;E++)_[E]=u[E]-l[E];var C=e.touchData.startPosition,P=u[0]-C[0],D=P*P,O=u[1]-C[1],N=O*O,M=D+N,I=M*c*c;if(a&&e.touchData.cxt){var L=r.touches[0].clientX-w,R=r.touches[0].clientY-x,B=r.touches[1].clientX-w,A=r.touches[1].clientY-x,j=k(L,R,B,A),q=j/y,z=150,F=z*z,V=1.5,U=V*V;if(q>=U||j>=F){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var X=new t.Event(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});e.touchData.start?e.touchData.start.trigger(X):s.trigger(X)}}if(a&&e.touchData.cxt){var X=new t.Event(r,{type:"cxtdrag",cyPosition:{x:u[0],y:u[1]}});e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0,e.touchData.start?e.touchData.start.trigger(X):s.trigger(X),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Y=e.findNearestElement(u[0],u[1],!0,!0);e.touchData.cxtOver&&Y===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.trigger(new t.Event(r,{type:"cxtdragout",cyPosition:{x:u[0],y:u[1]}})),e.touchData.cxtOver=Y,Y&&Y.trigger(new t.Event(r,{type:"cxtdragover",cyPosition:{x:u[0],y:u[1]}})))}else if(a&&r.touches[2]&&s.boxSelectionEnabled())e.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,e.touchData.selecting=!0,h[n.SELECT_BOX]=!0,i&&0!==i.length&&void 0!==i[0]?(i[2]=(u[0]+u[2]+u[4])/3,i[3]=(u[1]+u[3]+u[5])/3):(i[0]=(u[0]+u[2]+u[4])/3,i[1]=(u[1]+u[3]+u[5])/3,i[2]=(u[0]+u[2]+u[4])/3+1,i[3]=(u[1]+u[3]+u[5])/3+1),i[4]=1,e.touchData.selecting=!0,e.redraw();else if(a&&r.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){e.data.bgActivePosistion=void 0,h[n.SELECT_BOX]=!0;var W=e.dragData.touchDragEles;if(W){h[n.DRAG]=!0;for(var H=0;H<W.length;H++)W[H]._private.grabbed=!1,W[H]._private.rscratch.inDragLayer=!1}var L=r.touches[0].clientX-w,R=r.touches[0].clientY-x,B=r.touches[1].clientX-w,A=r.touches[1].clientY-x,$=T(L,R,B,A),G=$/g;if(1!=G&&S){var Z=L-d,K=R-f,J=B-p,Q=A-v,tt=(Z+J)/2,et=(K+Q)/2,nt=s.zoom(),rt=nt*G,it=s.pan(),ot=b[0]*nt+it.x,at=b[1]*nt+it.y,st={x:-rt/nt*(ot-it.x-tt)+ot,y:-rt/nt*(at-it.y-et)+at};if(e.touchData.start){var W=e.dragData.touchDragEles;if(W)for(var H=0;H<W.length;H++){var ut=W[H]._private;ut.grabbed=!1,ut.rscratch.inDragLayer=!1}var lt=e.touchData.start._private;lt.active=!1,lt.grabbed=!1,lt.rscratch.inDragLayer=!1,h[n.DRAG]=!0,e.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:rt,pan:st,cancelOnFailedZoom:!0}),g=$,d=L,f=R,p=B,v=A,e.pinching=!0}if(r.touches[0]){var m=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=m[0],u[1]=m[1]}if(r.touches[1]){var m=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=m[0],u[3]=m[1]}if(r.touches[2]){var m=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=m[0],u[5]=m[1]}}else if(r.touches[0]){var ct=e.touchData.start,ht=e.touchData.last,Y=Y||e.findNearestElement(u[0],u[1],!0,!0);if(null!=ct&&"nodes"==ct._private.group&&e.nodeIsDraggable(ct))if(I>=e.touchTapThreshold2){for(var W=e.dragData.touchDragEles,dt=0;dt<W.length;dt++){var ft=W[dt];if(e.nodeIsDraggable(ft)&&ft.isNode()&&ft.grabbed()){e.dragData.didDrag=!0;var pt=ft._private.position,vt=!e.hoverData.draggingEles;if(t.is.number(_[0])&&t.is.number(_[1])&&(pt.x+=_[0],pt.y+=_[1]),vt){o(ft,{inDragLayer:!0}),h[n.NODE]=!0;var gt=e.touchData.dragDelta;t.is.number(gt[0])&&t.is.number(gt[1])&&(pt.x+=gt[0],pt.y+=gt[1])}}}var yt=new t.Collection(s,ft);yt.updateCompoundBounds(),yt.trigger("position drag"),e.hoverData.draggingEles=!0,h[n.DRAG]=!0,e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&(h[n.NODE]=!0),e.redraw()}else{var gt=e.touchData.dragDelta=e.touchData.dragDelta||[];0===gt.length?(gt.push(_[0]),gt.push(_[1])):(gt[0]+=_[0],gt[1]+=_[1])}null!=ct&&(ct.trigger(new t.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),ct.trigger(new t.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),ct.trigger(new t.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==ct&&(null!=Y&&(Y.trigger(new t.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),Y.trigger(new t.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),Y.trigger(new t.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==Y&&(s.trigger(new t.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new t.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new t.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}})))),Y!=ht&&(ht&&ht.trigger(new t.Event(r,{type:"tapdragout",cyPosition:{x:u[0],y:u[1]}})),Y&&Y.trigger(new t.Event(r,{type:"tapdragover",cyPosition:{x:u[0],y:u[1]}}))),e.touchData.last=Y;for(var H=0;H<u.length;H++)u[H]&&e.touchData.startPosition[H]&&Math.abs(u[H]-e.touchData.startPosition[H])>4&&(e.touchData.singleTouchMoved=!0);if(a&&(null==ct||ct.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){e.swipePanning?s.panBy({x:_[0]*c,y:_[1]*c}):I>=e.touchTapThreshold2&&(e.swipePanning=!0,s.panBy({x:P*c,y:O*c})),ct&&(ct.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:u[0],y:u[1]}),h[n.SELECT_BOX]=!0,e.touchData.start=null);var m=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=m[0],u[1]=m[1]}}for(var E=0;E<u.length;E++)l[E]=u[E]},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"touchcancel",function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(window,"touchend",function(r){var i=e.touchData.start,o=e.touchData.capture;if(o){e.touchData.capture=!1,r.preventDefault();var s=e.data.select;e.swipePanning=!1,e.hoverData.draggingEles=!1;var u=e.data.cy,l=u.zoom(),c=e.touchData.now,h=e.touchData.earlier,d=e.data.canvasNeedsRedraw;if(r.touches[0]){var f=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);c[0]=f[0],c[1]=f[1]}if(r.touches[1]){var f=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);c[2]=f[0],c[3]=f[1]}if(r.touches[2]){var f=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);c[4]=f[0],c[5]=f[1]}i&&i.unactivate();var p;if(e.touchData.cxt){if(p=new t.Event(r,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),i?i.trigger(p):u.trigger(p),!e.touchData.cxtDragged){var v=new t.Event(r,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(v):u.trigger(v);

}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!r.touches[2]&&u.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1,clearTimeout(this.threeFingerSelectTimeout);var g=[],y=e.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,d[n.SELECT_BOX]=!0;for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=new t.Collection(u,g);"single"===u.selectionType()&&u.$(":selected").unmerge(b).unselect(),b.select(),b.length>0?d[n.NODE]=!0:e.redraw()}var w=!1;if(null!=i&&(i._private.active=!1,w=!0,i.unactivate()),r.touches[2])e.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){e.data.bgActivePosistion=void 0,d[n.SELECT_BOX]=!0;var x=e.dragData.touchDragEles;if(null!=i){var _=i._private.grabbed;a(x),d[n.DRAG]=!0,d[n.NODE]=!0,_&&i.trigger("free"),i.trigger(new t.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),i.unactivate(),e.touchData.start=null}else{var E=e.findNearestElement(c[0],c[1],!0,!0);null!=E&&E.trigger(new t.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==E&&u.trigger(new t.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var S=e.touchData.startPosition[0]-c[0],T=S*S,k=e.touchData.startPosition[1]-c[1],C=k*k,P=T+C,D=P*l*l;null!=i&&!e.dragData.didDrag&&i._private.selectable&&D<e.touchTapThreshold2&&!e.pinching&&("single"===u.selectionType()?(u.$(":selected").unmerge(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),w=!0,d[n.NODE]=!0),e.touchData.singleTouchMoved===!1&&(i?i.trigger(new t.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):u.trigger(new t.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),e.touchData.singleTouchMoved=!0}for(var O=0;O<c.length;O++)h[O]=c[O];e.dragData.didDrag=!1,0===r.touches.length&&(e.touchData.dragDelta=[]),w&&i&&i.updateStyle(!1),r.touches.length<2&&(e.pinching=!1,d[n.NODE]=!0,e.redraw())}},!1)}}(cytoscape),function(t){"use strict";function e(e,n){o[e]={points:n,draw:function(t,n,i,a,s){r.drawPolygon(t,n,i,a,s,o[e].points)},drawPath:function(t,n,i,a,s){r.drawPolygonPath(t,n,i,a,s,o[e].points)},intersectLine:function(n,r,i,a,s,u,l){return t.math.polygonIntersectLine(s,u,o[e].points,n,r,i/2,a/2,l)},intersectBox:function(n,r,i,a,s,u,l,c,h){var d=o[e].points;return t.math.boxIntersectPolygon(n,r,i,a,d,s,u,l,c,[0,-1],h)},checkPoint:function(n,r,i,a,s,u,l){return t.math.pointInsidePolygon(n,r,o[e].points,u,l,a,s,[0,-1],i)}}}for(var n=t("renderer","canvas"),r=n.prototype,i=n.usePaths(),o=n.nodeShapes={},a=Math.sin(0),s=Math.cos(0),u={},l={},c=.1,h=0*Math.PI;h<2*Math.PI;h+=c)u[h]=Math.sin(h),l[h]=Math.cos(h);o.ellipse={draw:function(t,e,n,r,i){o.ellipse.drawPath(t,e,n,r,i),t.fill()},drawPath:function(t,e,n,r,o){if(i){t.beginPath&&t.beginPath();for(var h,d,f=r/2,p=o/2,v=0*Math.PI;v<2*Math.PI;v+=c)h=e-f*u[v]*a+f*l[v]*s,d=n+p*l[v]*a+p*u[v]*s,0===v?t.moveTo(h,d):t.lineTo(h,d);t.closePath()}else t.beginPath&&t.beginPath(),t.translate(e,n),t.scale(r/2,o/2),t.arc(0,0,1,0,2*Math.PI*.999,!1),t.closePath(),t.scale(2/r,2/o),t.translate(-e,-n)},intersectLine:function(e,n,r,i,o,a,s){var u=t.math.intersectLineEllipse(o,a,e,n,r/2+s,i/2+s);return u},intersectBox:function(e,n,r,i,o,a,s,u,l){return t.math.boxIntersectEllipse(e,n,r,i,l,o,a,s,u)},checkPoint:function(t,e,n,r,i,o,a){return t-=o,e-=a,t/=r/2+n,e/=i/2+n,Math.pow(t,2)+Math.pow(e,2)<=1}},e("triangle",t.math.generateUnitNgonPointsFitToSquare(3,0)),e("square",t.math.generateUnitNgonPointsFitToSquare(4,0)),o.rectangle=o.square,o.roundrectangle={points:t.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,i,o){r.drawRoundRectangle(t,e,n,i,o,10)},drawPath:function(t,e,n,i,o){r.drawRoundRectanglePath(t,e,n,i,o,10)},intersectLine:function(e,n,r,i,o,a,s){return t.math.roundRectangleIntersectLine(o,a,e,n,r,i,s)},intersectBox:function(e,n,r,i,o,a,s,u,l){return t.math.roundRectangleIntersectBox(e,n,r,i,o,a,s,u,l)},checkPoint:function(e,n,r,i,a,s,u){var l=t.math.getRoundRectangleRadius(i,a);if(t.math.pointInsidePolygon(e,n,o.roundrectangle.points,s,u,i,a-2*l,[0,-1],r))return!0;if(t.math.pointInsidePolygon(e,n,o.roundrectangle.points,s,u,i-2*l,a,[0,-1],r))return!0;var c=function(t,e,n,r,i,o,a){return t-=n,e-=r,t/=i/2+a,e/=o/2+a,Math.pow(t,2)+Math.pow(e,2)<=1};return c(e,n,s-i/2+l,u-a/2+l,2*l,2*l,r)?!0:c(e,n,s+i/2-l,u-a/2+l,2*l,2*l,r)?!0:c(e,n,s+i/2-l,u+a/2-l,2*l,2*l,r)?!0:c(e,n,s-i/2+l,u+a/2-l,2*l,2*l,r)?!0:!1}},e("diamond",[0,1,1,0,0,-1,-1,0]),e("pentagon",t.math.generateUnitNgonPointsFitToSquare(5,0)),e("hexagon",t.math.generateUnitNgonPointsFitToSquare(6,0)),e("heptagon",t.math.generateUnitNgonPointsFitToSquare(7,0)),e("octagon",t.math.generateUnitNgonPointsFitToSquare(8,0));var d=new Array(20),f=t.math.generateUnitNgonPoints(5,0),p=t.math.generateUnitNgonPoints(5,Math.PI/5),v=.5*(3-Math.sqrt(5));v*=1.57;for(var h=0;h<p.length/2;h++)p[2*h]*=v,p[2*h+1]*=v;for(var h=0;5>h;h++)d[4*h]=f[2*h],d[4*h+1]=f[2*h+1],d[4*h+2]=p[2*h],d[4*h+3]=p[2*h+1];d=t.math.fitPolygonToSquare(d),e("star",d),e("vee",[-1,-1,0,-.333,1,-1,0,1]),e("rhomboid",[-1,-1,.333,-1,1,1,-.333,1])}(cytoscape),function(t){"use strict";function e(e){this._private={},this._private.options=t.util.extend({},n,e)}var n={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(t){var e=t;return e.max<=.5||e.mean<=.3},infinite:!1};e.prototype.run=function(){var e=this,n=this._private.options;return t.util.require("arbor",function(r){function i(t,e){return null==e?void 0:"function"==typeof e?e.apply(t,[t._private.data,{nodes:l.length,edges:c.length,element:t}]):e}function o(t){if(!t.isFullAutoParent()){var e=t._private.data.id,r=i(t,n.nodeMass),o=t._private.locked,a=t.position(),s=f.fromScreen({x:a.x,y:a.y});t.scratch().arbor=f.addNode(e,{element:t,mass:r,fixed:o,x:o?s.x:void 0,y:o?s.y:void 0})}}function a(t){var e=t.source().id(),r=t.target().id(),o=i(t,n.edgeLength);t.scratch().arbor=f.addEdge(e,r,{length:o})}var s=n.cy,u=n.eles,l=u.nodes().not(":parent"),c=u.edges(),h=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),d=!1;if(e.trigger({type:"layoutstart",layout:e}),void 0!==n.liveUpdate&&(n.animate=n.liveUpdate),u.nodes().size()<=1)return n.fit&&s.reset(),u.nodes().position({x:Math.round((h.x1+h.x2)/2),y:Math.round((h.y1+h.y2)/2)}),e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),void e.trigger({type:"layoutstop",layout:e});var f=e._private.system=r.ParticleSystem();f.parameters({repulsion:n.repulsion,stiffness:n.stiffness,friction:n.friction,gravity:n.gravity,fps:n.fps,dt:n.dt,precision:n.precision}),n.animate&&n.fit&&s.fit(h,n.padding);var p,v=250,g=!1,y=+new Date,m={init:function(t){},redraw:function(){var t=f.energy();if(!n.infinite&&null!=n.stableEnergy&&null!=t&&t.n>0&&n.stableEnergy(t))return void e.stop();n.infinite||v==1/0||(clearTimeout(p),p=setTimeout(T,v));var r=s.collection();f.eachNode(function(t,e){var n=t.data,i=n.element;null!=i&&(i.locked()||i.grabbed()||(i.silentPosition({x:h.x1+e.x,y:h.y1+e.y}),r.merge(i)))}),n.animate&&r.length>0&&(d=!0,r.rtrigger("position"),n.fit&&s.fit(n.padding),y=+new Date,d=!1),g||(g=!0,e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e}))}};f.renderer=m,f.screenSize(h.w,h.h),f.screenPadding(n.padding,n.padding,n.padding,n.padding),f.screenStep(n.stepSize);var b;l.on("grab free position",b=function(t){if(!d){var e=this.position(),i=f.fromScreen(e);if(i){var o=r.Point(i.x,i.y),a=n.padding;switch(h.x1+a<=e.x&&e.x<=h.x2-a&&h.y1+a<=e.y&&e.y<=h.y2-a&&(this.scratch().arbor.p=o),t.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var w;l.on("lock unlock",w=function(t){node.scratch().arbor.fixed=node.locked()});var x;u.on("remove",x=function(t){});var _;s.on("add","*",_=function(){});var E;s.on("resize",E=function(){if(null==n.boundingBox&&null!=e._private.system){var t=s.width(),r=s.height();f.screenSize(t,r)}}),l.each(function(t,e){o(e)}),c.each(function(t,e){a(e)});var S=l.filter(":grabbable");n.ungrabifyWhileSimulating&&S.ungrabify();var T=e._private.doneHandler=function(){e._private.doneHandler=null,n.animate||(n.fit&&s.reset(),l.rtrigger("position")),l.off("grab free position",b),l.off("lock unlock",w),u.off("remove",x),s.off("add","*",_),s.off("resize",E),n.ungrabifyWhileSimulating&&S.grabify(),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})};f.start(),!n.infinite&&null!=n.maxSimulationTime&&n.maxSimulationTime>0&&n.maxSimulationTime!==1/0&&setTimeout(function(){e.stop()},n.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},t("layout","arbor",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e,n=this.options,r=n,i=n.cy,o=r.eles,a=o.nodes().not(":parent"),s=o,u=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(t.is.elementOrCollection(r.roots))e=r.roots;else if(t.is.array(r.roots)){for(var l=[],c=0;c<r.roots.length;c++){var h=r.roots[c],d=i.getElementById(h);l.push(d)}e=new t.Collection(i,l)}else if(t.is.string(r.roots))e=i.$(r.roots);else if(r.directed)e=a.roots();else{for(var f=[],p=a;p.length>0;){var v=i.collection();o.bfs({roots:p[0],visit:function(t,e,n,r,i){v=v.add(n)},directed:!1}),p=p.not(v),f.push(v)}e=i.collection();for(var c=0;c<f.length;c++){var g=f[c],y=g.maxDegree(!1),m=g.filter(function(){return this.degree(!1)===y});e=e.add(m)}}var b=[],w={},x={},_={},E={},S={};s.bfs({roots:e,directed:r.directed,visit:function(t,e,n,r,i){var o=this[0],a=o.id();if(b[e]||(b[e]=[]),b[e].push(o),w[a]=!0,x[a]=e,_[a]=i,E[a]=r,i){var s=i.id(),u=S[s]=S[s]||[];u.push(n)}}});for(var T=[],c=0;c<a.length;c++){var d=a[c];w[d.id()]||T.push(d)}for(var k=3*T.length,C=0;0!==T.length&&k>C;){for(var P=T.shift(),D=P.neighborhood().nodes(),O=!1,c=0;c<D.length;c++){var N=x[D[c].id()];if(void 0!==N){b[N].push(P),O=!0;break}}O||T.push(P),C++}for(;0!==T.length;){var P=T.shift(),O=!1;O||(0===b.length&&b.push([]),b[0].push(P))}var M=function(){for(var t=0;t<b.length;t++)for(var e=b[t],n=0;n<e.length;n++){var r=e[n];r._private.scratch.breadthfirst={depth:t,index:n}}};M();for(var I=function(t){for(var e,n=t.connectedEdges(function(){return this.data("target")===t.id()}),r=t._private.scratch.breadthfirst,i=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,e=s)}return e},L=0;L<r.maximalAdjustments;L++){for(var R=b.length,B=[],c=0;R>c;c++)for(var N=b[c],A=N.length,j=0;A>j;j++){var d=N[j],q=d._private.scratch.breadthfirst,z=I(d);z&&(q.intEle=z,B.push(d))}for(var c=0;c<B.length;c++){var d=B[c],q=d._private.scratch.breadthfirst,z=q.intEle,F=z._private.scratch.breadthfirst;b[q.depth].splice(q.index,1);for(var V=F.depth+1;V>b.length-1;)b.push([]);b[V].push(d),q.depth=V,q.index=b[V].length-1}M()}var U=0;if(r.avoidOverlap){for(var c=0;c<a.length;c++){var X=a[c].outerWidth(),Y=a[c].outerHeight();U=Math.max(U,X,Y)}U*=r.spacingFactor}for(var W={},H=function(t){if(W[t.id()])return W[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent"),r=0,i=0,o=0;o<n.length;o++){var a=n[o],s=a._private.scratch.breadthfirst,u=s.index,l=s.depth,c=b[l].length;(e>l||0===e)&&(r+=u/c,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),W[t.id()]=r,r},$=function(t,e){var n=H(t),r=H(e);return n-r},G=0;3>G;G++){for(var c=0;c<b.length;c++)b[c]=b[c].sort($);M()}for(var Z=0,c=0;c<b.length;c++)Z=Math.max(b[c].length,Z);for(var K={x:u.x1+u.w/2,y:u.x1+u.h/2},J=function(t,e){var n=t._private.scratch.breadthfirst,i=n.depth,o=n.index,a=b[i].length,s=Math.max(u.w/(a+1),U),l=Math.max(u.h/(b.length+1),U),c=Math.min(u.w/2/b.length,u.h/2/b.length);if(c=Math.max(c,U),r.circle){if(r.circle){var h=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),d=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:K.x+h*Math.cos(d),y:K.y+h*Math.sin(d)}}return{x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l}}var f={x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l};return e?f:f},Q={},c=b.length-1;c>=0;c--)for(var N=b[c],j=0;j<N.length;j++){var P=N[j];Q[P.id()]=J(P,c===b.length-1)}return a.layoutPositions(this,r,function(){return Q[this.id()]}),this},t("layout","breadthfirst",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));for(var a,s=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=n.startAngle,c=2*Math.PI/o.length,h=0,d=0;d<o.length;d++){var f=o[d].outerWidth(),p=o[d].outerHeight();h=Math.max(h,f,p)}if(a=t.is.number(n.radius)?n.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&n.avoidOverlap){h*=1.75;var c=2*Math.PI/o.length,v=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(h*h/(v*v+g*g));a=Math.max(y,a)}var m=function(t,e){var r=a*Math.cos(l),i=a*Math.sin(l),o={x:u.x+r,y:u.y+i};return l=n.counterclockwise?l-c:l+c,o};return o.layoutPositions(this,n,m),this},t("layout","circle",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};e.prototype.run=function(){var e=this,n=this.options;return e.manuallyStopped=!1,t.util.require("cola",function(r){var i=n.cy,o=n.eles,a=o.nodes(),s=o.edges(),u=!1,l=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),c=function(e,n){if(t.is.fn(e)){var r=e;return r.apply(n,[n])}return e},h=function(){for(var e={min:1/0,max:-(1/0)},r={min:1/0,max:-(1/0)},o=0;o<a.length;o++){var s=a[o],h=s._private.scratch.cola;if(e.min=Math.min(e.min,h.x||0),e.max=Math.max(e.max,h.x||0),r.min=Math.min(r.min,h.y||0),r.max=Math.max(r.max,h.y||0),!h.updatedDims){var d=s.boundingBox(),p=c(n.nodeSpacing,s);h.width=d.w+2*p,h.height=d.h+2*p}}a.positions(function(n,i){var o,a=i._private.scratch.cola;return i.grabbed()||i.isParent()||(o={x:l.x1+a.x-e.min,y:l.y1+a.y-r.min},t.is.number(o.x)&&t.is.number(o.y)||(o=void 0)),o}),a.updateCompoundBounds(),u||(f(),u=!0),n.fit&&i.fit(n.padding)},d=function(){n.ungrabifyWhileSimulating&&y.grabify(),a.off("grab free position",m),a.off("lock unlock",b),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})},f=function(){e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})},p=n.refresh,v=1;n.refresh<0?(v=Math.abs(n.refresh),p=1):p=Math.max(1,p);var g=e.adaptor=r.adaptor({trigger:function(t){var e=r.EventType?r.EventType.tick:null,i=r.EventType?r.EventType.end:null;switch(t.type){case"tick":case e:n.animate&&h();break;case"end":case i:h(),n.infinite||d()}},kick:function(){var r=function(){if(e.manuallyStopped)return d(),!0;var t=g.tick();return t&&n.infinite&&g.resume(),t},i=function(){for(var t,e=0;p>e&&!t;e++)t=t||r();return t};if(n.animate){var o=function(){i()||t.util.requestAnimationFrame(o)};t.util.requestAnimationFrame(o)}else for(;!r(););},on:function(t,e){},drag:function(){}});e.adaptor=g;var y=a.filter(":grabbable");n.ungrabifyWhileSimulating&&y.ungrabify();var m;a.on("grab free position",m=function(e){var n=this,r=n._private.scratch.cola,i=n._private.position;switch(n.grabbed()?(r.x=i.x-l.x1,r.y=i.y-l.y1,g.dragstart(r)):t.is.number(r.x)&&t.is.number(r.y)&&(i.x=r.x+l.x1,i.y=r.y+l.y1),e.type){case"grab":g.dragstart(r),g.resume();break;case"free":g.dragend(r)}});var b;a.on("lock unlock",b=function(t){var e=this,n=e._private.scratch.cola;e.locked()?g.dragstart(n):g.dragend(n)});var w=a.stdFilter(function(t){return!t.isParent()});if(g.nodes(w.map(function(t,e){var r=c(n.nodeSpacing,t),i=t.position(),o=t.boundingBox(),a=t._private.scratch.cola={x:n.randomize||void 0===i.x?Math.round(Math.random()*l.w):i.x,y:n.randomize||void 0===i.y?Math.round(Math.random()*l.h):i.y,width:o.w+2*r,height:o.h+2*r,index:e};return a})),n.alignment){var x=[],_=[];w.forEach(function(t){var e=c(n.alignment,t),r=t._private.scratch.cola,i=r.index;e&&(null!=e.x&&x.push({node:i,offset:e.x}),null!=e.y&&_.push({node:i,offset:e.y}))});var E=[];x.length>0&&E.push({type:"alignment",axis:"x",offsets:x}),_.length>0&&E.push({type:"alignment",axis:"y",offsets:_}),g.constraints(E)}g.groups(a.stdFilter(function(t){return t.isParent()}).map(function(t,e){var r=t._private.style,i=c(n.nodeSpacing,t),o=r["padding-left"].pxValue+i,a=r["padding-right"].pxValue+i,s=r["padding-top"].pxValue+i,u=r["padding-bottom"].pxValue+i;return t._private.scratch.cola={index:e,padding:Math.max(o,a,s,u),leaves:t.descendants().stdFilter(function(t){return!t.isParent()}).map(function(t){return t[0]._private.scratch.cola.index})},t}).map(function(t){return t._private.scratch.cola.groups=t.descendants().stdFilter(function(t){return t.isParent()}).map(function(t){return t._private.scratch.cola.index}),t._private.scratch.cola}));var S,T;null!=n.edgeLength?(S=n.edgeLength,T="linkDistance"):null!=n.edgeSymDiffLength?(S=n.edgeSymDiffLength,T="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(S=n.edgeJaccardLength,T="jaccardLinkLengths"):(S=100,T="linkDistance");var k=function(t){return t.calcLength};if(g.links(s.stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}).map(function(t,e){var n=t._private.scratch.cola={source:t.source()[0]._private.scratch.cola.index,target:t.target()[0]._private.scratch.cola.index};return null!=S&&(n.calcLength=c(S,t)),n})),g.size([l.w,l.h]),null!=S&&g[T](k),n.flow){var C,P="y",D=50;t.is.string(n.flow)?C={axis:n.flow,minSeparation:D}:t.is.number(n.flow)?C={axis:P,minSeparation:n.flow}:t.is.plainObject(n.flow)?(C=n.flow,C.axis=C.axis||P,C.minSeparation=null!=C.minSeparation?C.minSeparation:D):C={axis:P,minSeparation:D},g.flowLayout(C.axis,C.minSeparation)}e.trigger({type:"layoutstart",layout:e}),g.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){e.manuallyStopped||g.stop()},n.maxSimulationTime)}),this},e.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t("layout","cola",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){for(var e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().not(":parent"),a=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=n.startAngle,c=0,h=0;h<o.length;h++){var d,f=o[h];d=n.concentric.apply(f,[f]),u.push({value:d,node:f}),f._private.scratch.concentric=d}o.updateStyle();for(var h=0;h<o.length;h++){var f=o[h];c=Math.max(c,f.outerWidth(),f.outerHeight())}u.sort(function(t,e){return e.value-t.value});for(var p=n.levelWidth(o),v=[[]],g=v[0],h=0;h<u.length;h++){var y=u[h];if(g.length>0){var m=Math.abs(g[0].value-y.value);m>=p&&(g=[],v.push(g))}g.push(y)}var b={},w=0,x=c+n.minNodeSpacing;if(!n.avoidOverlap){var _=v.length>0&&v[0].length>1,E=Math.min(a.w,a.h)/2-x,S=E/(v.length+_?1:0);x=Math.min(x,S)}for(var h=0;h<v.length;h++){var T=v[h],k=2*Math.PI/T.length;if(T.length>1&&n.avoidOverlap){var C=Math.cos(k)-Math.cos(0),P=Math.sin(k)-Math.sin(0),D=Math.sqrt(x*x/(C*C+P*P));w=Math.max(D,w)}for(var O=0;O<T.length;O++){var y=T[O],l=n.startAngle+(n.counterclockwise?-1:1)*k*O,N={x:s.x+w*Math.cos(l),y:s.y+w*Math.sin(l)};b[y.node.id()]=N}w+=x}return o.layoutPositions(this,n,function(){var t=this.id();return b[t]}),this},t("layout","concentric",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},r,e)}var n,r={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};e.prototype.run=function(){var e=this.options,r=e.cy,o=this;o.stopped=!1,o.trigger({type:"layoutstart",layout:o}),n=!0===e.debug?!0:!1;var a=new Date,h=i(r,o,e);n&&s(h),!0===e.randomize&&u(h,r),m(h,r,e);var d=function(t){return o.stopped?!1:(c(h,r,e,t),h.temperature=h.temperature*e.coolingFactor,h.temperature<e.minTemp?!1:!0)},f=function(){l(h,r,e),!0===e.fit&&r.fit(e.padding);var t=new Date;console.info("Layout took "+(t-a)+" ms"),o.one("layoutstop",e.stop),o.trigger({type:"layoutstop",layout:o})};if(e.animate){var p=0,v=function(){for(var n,i=0;i<e.refresh&&p<e.numIter;){var n=d(p);if(n===!1)break;i++,p++}l(h,r,e),e.fit&&r.fit(e.padding),n!==!1&&p+1<e.numIter?t.util.requestAnimationFrame(v):f()};t.util.requestAnimationFrame(v)}else{for(var p=0;p<e.numIter&&d(p)!==!1;p++);f()}return this},e.prototype.stop=function(){return this.stopped=!0,this};var i=function(e,n,r){for(var i=r.eles.edges(),a=r.eles.nodes(),s={layout:n,layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},u=0;u<s.nodeSize;u++){var l={};l.id=a[u].data("id"),l.parentId=a[u].data("parent"),l.children=[],l.positionX=a[u].position("x"),l.positionY=a[u].position("y"),l.offsetX=0,l.offsetY=0,l.height=a[u].height(),l.width=a[u].width(),l.maxX=l.positionX+l.width/2,l.minX=l.positionX-l.width/2,l.maxY=l.positionY+l.height/2,l.minY=l.positionY-l.height/2,l.padLeft=a[u]._private.style["padding-left"].pxValue,l.padRight=a[u]._private.style["padding-right"].pxValue,l.padTop=a[u]._private.style["padding-top"].pxValue,l.padBottom=a[u]._private.style["padding-bottom"].pxValue,s.layoutNodes.push(l),s.idToIndex[l.id]=u}for(var c=[],h=0,d=-1,f=[],u=0;u<s.nodeSize;u++){var p=s.layoutNodes[u],v=p.parentId;null!=v?s.layoutNodes[s.idToIndex[v]].children.push(p.id):(c[++d]=p.id,f.push(p.id))}for(s.graphSet.push(f);d>=h;){var g=c[h++],y=s.idToIndex[g],m=s.layoutNodes[y],b=m.children;if(b.length>0){s.graphSet.push(b);for(var u=0;u<b.length;u++)c[++d]=b[u]}}for(var u=0;u<s.graphSet.length;u++)for(var w=s.graphSet[u],x=0;x<w.length;x++){var _=s.idToIndex[w[x]];s.indexToGraph[_]=u}for(var u=0;u<s.edgeSize;u++){var E=i[u],S={};S.id=E.data("id"),S.sourceId=E.data("source"),S.targetId=E.data("target");var T=r.idealEdgeLength,k=s.idToIndex[S.sourceId],C=s.idToIndex[S.targetId],P=s.indexToGraph[k],D=s.indexToGraph[C];if(P!=D){for(var O=o(S.sourceId,S.targetId,s),N=s.graphSet[O],M=0,l=s.layoutNodes[k];-1===$.inArray(l.id,N);)l=s.layoutNodes[s.idToIndex[l.parentId]],M++;for(l=s.layoutNodes[C];-1===$.inArray(l.id,N);)l=s.layoutNodes[s.idToIndex[l.parentId]],M++;T*=M*r.nestingFactor}S.idealLength=T,s.layoutEdges.push(S)}return s},o=function(t,e,n){var r=a(t,e,0,n);return 2>r.count?0:r.graph},a=function(t,e,n,r){var i=r.graphSet[n];if(-1<$.inArray(t,i)&&-1<$.inArray(e,i))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=r.idToIndex[u],c=r.layoutNodes[l].children;if(0!==c.length){var h=r.indexToGraph[r.idToIndex[c[0]]],d=a(t,e,h,r);if(0!==d.count){if(1!==d.count)return d;if(o++,2===o)break}}}return{count:o,graph:n}},s=function(t){if(n){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var r=t.layoutNodes[e],i="\nindex: "+e+"\nId: "+r.id+"\nChildren: "+r.children.toString()+"\nparentId: "+r.parentId+"\npositionX: "+r.positionX+"\npositionY: "+r.positionY+"\nOffsetX: "+r.offsetX+"\nOffsetY: "+r.offsetY+"\npadLeft: "+r.padLeft+"\npadRight: "+r.padRight+"\npadTop: "+r.padTop+"\npadBottom: "+r.padBottom;console.debug(i)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var o=t.graphSet,e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(var i="IndexToGraph",e=0;e<t.indexToGraph.length;e++)i+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(i),i="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];i+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(i),i="nodeSize: "+t.nodeSize,i+="\nedgeSize: "+t.edgeSize,i+="\ntemperature: "+t.temperature,console.debug(i)}},u=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];o.positionX=Math.random()*n,o.positionY=Math.random()*r}},l=function(t,e,n){var r=t.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))},c=function(t,e,n,r){h(t,e,n),v(t,e,n),g(t,e,n),y(t,e,n),m(t,e,n)},h=function(t,e,n){for(var r=0;r<t.graphSet.length;r++)for(var i=t.graphSet[r],o=i.length,a=0;o>a;a++)for(var s=t.layoutNodes[t.idToIndex[i[a]]],u=a+1;o>u;u++){var l=t.layoutNodes[t.idToIndex[i[u]]];d(s,l,t,e,n)}},d=function(t,e,n,r,i){var o=e.positionX-t.positionX,a=e.positionY-t.positionY;if(0!==o||0!==a){var s=p(t,e,o,a);if(s>0)var u=i.nodeOverlap*s,l=Math.sqrt(o*o+a*a),c=u*o/l,h=u*a/l;else var d=f(t,o,a),v=f(e,-1*o,-1*a),g=v.x-d.x,y=v.y-d.y,m=g*g+y*y,l=Math.sqrt(m),u=i.nodeRepulsion/m,c=u*g/l,h=u*y/l;t.offsetX-=c,t.offsetY-=h,e.offsetX+=c,e.offsetY+=h}},f=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height,a=t.width,s=n/e,u=o/a,l={};do{if(0===e&&n>0){l.x=r,l.y=i+o/2;break}if(0===e&&0>n){l.x=r,l.y=i+o/2;break}if(e>0&&s>=-1*u&&u>=s){l.x=r+a/2,l.y=i+a*n/2/e;break}if(0>e&&s>=-1*u&&u>=s){l.x=r-a/2,l.y=i-a*n/2/e;break}if(n>0&&(-1*u>=s||s>=u)){l.x=r+o*e/2/n,l.y=i+o/2;break}if(0>n&&(-1*u>=s||s>=u)){l.x=r-o*e/2/n,l.y=i-o/2;break}}while(!1);return l},p=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else var i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else var o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},v=function(t,e,n){for(var r=0;r<t.edgeSize;r++){var i=t.layoutEdges[r],o=t.idToIndex[i.sourceId],a=t.layoutNodes[o],s=t.idToIndex[i.targetId],u=t.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(0===l&&0===c)return;var h=f(a,l,c),d=f(u,-1*l,-1*c),p=d.x-h.x,v=d.y-h.y,g=Math.sqrt(p*p+v*v),y=Math.pow(i.idealLength-g,2)/n.edgeElasticity;if(0!==g)var m=y*p/g,b=y*v/g;else var m=0,b=0;a.offsetX+=m,a.offsetY+=b,u.offsetX-=m,u.offsetY-=b}},g=function(t,e,n){for(var r=0;r<t.graphSet.length;r++){var i=t.graphSet[r],o=i.length;if(0===r)var a=t.clientHeight/2,s=t.clientWidth/2;else var u=t.layoutNodes[t.idToIndex[i[0]]],l=t.layoutNodes[t.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;o>c;c++){var h=t.layoutNodes[t.idToIndex[i[c]]],d=a-h.positionX,f=s-h.positionY,p=Math.sqrt(d*d+f*f);if(p>1){var v=n.gravity*d/p,g=n.gravity*f/p;h.offsetX+=v,h.offsetY+=g}}}},y=function(t,e,n){var r=[],i=0,o=-1;for(r.push.apply(r,t.graphSet[0]),o+=t.graphSet[0].length;o>=i;){var a=r[i++],s=t.idToIndex[a],u=t.layoutNodes[s],l=u.children;if(0<l.length){for(var c=u.offsetX,h=u.offsetY,d=0;d<l.length;d++){var f=t.layoutNodes[t.idToIndex[l[d]]];f.offsetX+=c,f.offsetY+=h,r[++o]=l[d]}u.offsetX=0,u.offsetY=0}}},m=function(t,e,n){for(var r=0;r<t.nodeSize;r++){var i=t.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<t.nodeSize;r++){var i=t.layoutNodes[r];if(!(0<i.children.length)){var o=b(i.offsetX,i.offsetY,t.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,w(i,t)}}for(var r=0;r<t.nodeSize;r++){var i=t.layoutNodes[r];0<i.children.length&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},b=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else var i={x:t,y:e};return i},w=function(t,e){var n=t.parentId;if(null!=n){var r=e.layoutNodes[e.idToIndex[n]],i=!1;return(null==r.maxX||t.maxX+r.padRight>r.maxX)&&(r.maxX=t.maxX+r.padRight,i=!0),(null==r.minX||t.minX-r.padLeft<r.minX)&&(r.minX=t.minX-r.padLeft,i=!0),(null==r.maxY||t.maxY+r.padBottom>r.maxY)&&(r.maxY=t.maxY+r.padBottom,i=!0),(null==r.minY||t.minY-r.padTop<r.minY)&&(r.minY=t.minY-r.padTop,i=!0),i?w(r,e):void 0}};t("layout","cose",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};e.prototype.run=function(){var e=this.options,n=this;return t.util.require("dagre",function(r){var i=e.cy,o=e.eles,a=function(e,n){return t.is.fn(n)?n.apply(e,[e]):n},s=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u=new r.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",e.nodeSep),c("edgesep",e.edgeSep),c("ranksep",e.rankSep),c("rankdir",e.rankDir),u.setGraph(l),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var f=h[d];u.setNode(f.id(),{width:f.width(),height:f.height(),name:f.id()})}for(var d=0;d<h.length;d++){var f=h[d];f.isChild()&&u.setParent(f.id(),f.parent().id())}for(var p=o.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),d=0;d<p.length;d++){var v=p[d];u.setEdge(v.source().id(),v.target().id(),{minlen:a(v,e.minLen),weight:a(v,e.edgeWeight),name:v.id()},v.id())}r.layout(u);for(var g=u.nodes(),d=0;d<g.length;d++){var y=g[d],m=u.node(y);i.getElementById(y).scratch().dagre=m}var b;e.boundingBox?(b={x1:1/0,x2:-(1/0),y1:1/0,
y2:-(1/0)},h.forEach(function(t){var e=t.scratch().dagre;b.x1=Math.min(b.x1,e.x),b.x2=Math.max(b.x2,e.x),b.y1=Math.min(b.y1,e.y),b.y2=Math.max(b.y2,e.y)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1):b=s;var w=function(t){if(e.boundingBox){var n=(t.x-b.x1)/b.w,r=(t.y-b.y1)/b.h;return{x:s.x1+n*s.w,y:s.y1+r*s.h}}return t};h.layoutPositions(n,e,function(){var t=this.scratch().dagre;return w({x:t.x,y:t.y})})}),this},t("layout","dagre",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e,r=e.cy,i=n.eles,o=i.nodes().not(":parent");n.sort&&(o=o.sort(n.sort));var a=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)o.layoutPositions(this,n,function(){return{x:a.x1,y:a.y1}});else{var s=o.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(t){if(null==t)return Math.min(l,c);var e=Math.min(l,c);e==l?l=t:c=t},d=function(t){if(null==t)return Math.max(l,c);var e=Math.max(l,c);e==l?l=t:c=t};if(null!=n.rows&&null!=n.columns)l=n.rows,c=n.columns;else if(null!=n.rows&&null==n.columns)l=n.rows,c=Math.ceil(s/l);else if(null==n.rows&&null!=n.columns)c=n.columns,l=Math.ceil(s/c);else if(c*l>s){var f=h(),p=d();(f-1)*p>=s?h(f-1):(p-1)*f>=s&&d(p-1)}else for(;s>c*l;){var f=h(),p=d();(p+1)*f>=s?d(p+1):h(f+1)}var v=a.w/c,g=a.h/l;if(n.avoidOverlap)for(var y=0;y<o.length;y++){var m=o[y],b=m.outerWidth(),w=m.outerHeight();v=Math.max(v,b),g=Math.max(g,w)}for(var x={},_=function(t,e){return x["c-"+t+"-"+e]?!0:!1},E=function(t,e){x["c-"+t+"-"+e]=!0},S=0,T=0,k=function(){T++,T>=c&&(T=0,S++)},C={},y=0;y<o.length;y++){var m=o[y],P=n.position(m);if(P&&(void 0!==P.row||void 0!==P.col)){var D={row:P.row,col:P.col};if(void 0===D.col)for(D.col=0;_(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;_(D.row,D.col);)D.row++;C[m.id()]=D,E(D.row,D.col)}}var O=function(t,e){var n,r;if(e.locked()||e.isFullAutoParent())return!1;var i=C[e.id()];if(i)n=i.col*v+v/2+a.x1,r=i.row*g+g/2+a.y1;else{for(;_(S,T);)k();n=T*v+v/2+a.x1,r=S*g+g/2+a.y1,E(S,T),k()}return{x:n,y:r}};o.layoutPositions(this,n,O)}return this},t("layout","grid",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={ready:function(){},stop:function(){}};e.prototype.run=function(){{var t=this.options,e=t.eles,n=this;t.cy}return n.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this},e.prototype.stop=function(){return this},t("layout","null",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){function e(t){if(null==n.positions)return null;if(o)return n.positions.apply(t,[t]);var e=n.positions[t._private.data.id];return null==e?null:e}var n=this.options,r=n.eles,i=r.nodes(),o=t.is.fn(n.positions);return i.layoutPositions(this,n,function(t,n){var r=e(n);return n.locked()||null==r?!1:r}),this},t("layout","preset",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,n=e.cy,r=e.eles,i=r.nodes().not(":parent"),o=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),a=function(t,e){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}};return i.layoutPositions(this,e,a),this},t("layout","random",e)}(cytoscape),function($$){"use strict";function SpreadLayout(t){this.options=$$.util.extend({},defaults,t)}function cellCentroid(t){for(var e,n,r,i=t.halfedges,o=0,a=0,s=0,u=0;u<i.length;++u)e=i[u].getEndpoint(),n=i[u].getStartpoint(),o+=e.x*n.y,o-=e.y*n.x,r=e.x*n.y-n.x*e.y,a+=(e.x+n.x)*r,s+=(e.y+n.y)*r;return o/=2,r=6*o,{x:a/r,y:s/r}}function sitesDistance(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}var defaults={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0};SpreadLayout.prototype.run=function(){var layout=this,options=this.options;return $$.util.requires(["foograph","Voronoi"],function(foograph,Voronoi){function setPositions(t){for(var e=t.vertices,n=[],r=0;r<e.length;++r){var i=e[r];n[i.id]={x:i.x,y:i.y}}nodes.positions(function(t,e){var r=e._private.data.id,i=n[r];return{x:Math.round(simBB.x1+i.x),y:Math.round(simBB.y1+i.y)}}),options.fit&&cy.fit(options.padding),cy.nodes().rtrigger("position")}var cy=options.cy,nodes=cy.nodes(),edges=cy.edges(),cWidth=cy.width(),cHeight=cy.height(),simulationBounds=options.boundingBox?$$.util.makeBoundingBox(options.boundingBox):null,padding=options.padding,simBBFactor=Math.max(1,.8*Math.log(nodes.length));nodes.length<100&&(simBBFactor/=2),layout.trigger({type:"layoutstart",layout:layout});var simBB={x1:0,y1:0,x2:cWidth*simBBFactor,y2:cHeight*simBBFactor};simulationBounds&&(simBB.x1=simulationBounds.x1,simBB.y1=simulationBounds.y1,simBB.x2=simulationBounds.x2,simBB.y2=simulationBounds.y2),simBB.x1+=padding,simBB.y1+=padding,simBB.x2-=padding,simBB.y2-=padding;var width=simBB.x2-simBB.x1,height=simBB.y2-simBB.y1,startTime=Date.now();if(nodes.size()<=1){nodes.positions({x:Math.round((simBB.x1+simBB.x2)/2),y:Math.round((simBB.y1+simBB.y2)/2)}),options.fit&&cy.fit(options.padding);var endTime=Date.now();return console.info("Layout on "+nodes.size()+" nodes took "+(endTime-startTime)+" ms"),layout.one("layoutready",options.ready),layout.trigger("layoutready"),layout.one("layoutstop",options.stop),void layout.trigger("layoutstop")}var pData={width:width,height:height,minDist:options.minDist,expFact:options.expandingFactor,expIt:0,maxExpIt:options.maxExpandIterations,vertices:[],edges:[],startTime:startTime,maxFruchtermanReingoldIterations:options.maxFruchtermanReingoldIterations};nodes.each(function(t,e){var n=this._private.data.id;pData.vertices.push({id:n,x:0,y:0})}),edges.each(function(){var t=this.source().id(),e=this.target().id();pData.edges.push({src:t,tgt:e})});var t1=$$.Thread();t1.require(foograph,"foograph"),t1.require(Voronoi),t1.require(sitesDistance),t1.require(cellCentroid);var didLayoutReady=!1;t1.on("message",function(t){var e=t.message;options.animate&&(setPositions(e),didLayoutReady||(layout.trigger("layoutready"),didLayoutReady=!0))}),layout.one("layoutready",options.ready),t1.pass(pData).run(function(pData){function checkMinDist(t){for(var e=0,n=0;n<t.length;++n){var r=t[n];null!=r.lSite&&null!=r.rSite&&sitesDistance(r.lSite,r.rSite)<lMinDist&&++e}return e}foograph=eval("foograph"),Voronoi=eval("Voronoi");for(var lWidth=pData.width,lHeight=pData.height,lMinDist=pData.minDist,lExpFact=pData.expFact,lMaxExpIt=pData.maxExpIt,lMaxFruchtermanReingoldIterations=pData.maxFruchtermanReingoldIterations,savePositions=function(){pData.width=lWidth,pData.height=lHeight,pData.expIt=expandIteration,pData.expFact=lExpFact,pData.vertices=[];for(var t=0;t<fv.length;++t)pData.vertices.push({id:fv[t].label,x:fv[t].x,y:fv[t].y})},messagePositions=function(){broadcast(pData)},frg=new foograph.Graph("FRgraph",!1),frgNodes={},dataVertices=pData.vertices,ni=0;ni<dataVertices.length;++ni){var id=dataVertices[ni].id,v=new foograph.Vertex(id,Math.round(Math.random()*lHeight),Math.round(Math.random()*lHeight));frgNodes[id]=v,frg.insertVertex(v)}for(var dataEdges=pData.edges,ei=0;ei<dataEdges.length;++ei){var srcNodeId=dataEdges[ei].src,tgtNodeId=dataEdges[ei].tgt;frg.insertEdge("",1,frgNodes[srcNodeId],frgNodes[tgtNodeId])}var fv=frg.vertices,iterations=lMaxFruchtermanReingoldIterations,frLayoutManager=new foograph.ForceDirectedVertexLayout(lWidth,lHeight,iterations,!1,lMinDist);frLayoutManager.callback=function(){savePositions(),messagePositions()},frLayoutManager.layout(frg),savePositions(),messagePositions();for(var voronoi=new Voronoi,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},vSites=[],i=0;i<fv.length;++i)vSites[fv[i].label]=fv[i];for(var diagram=voronoi.compute(fv,bbox),cells=diagram.cells,i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}0>lExpFact&&(lExpFact=Math.max(.05,Math.min(.1,lMinDist/Math.sqrt(lWidth*lHeight/fv.length)*.5)));for(var prevInfractions=checkMinDist(diagram.edges),bStop=0>=prevInfractions,voronoiIteration=0,expandIteration=0;!bStop;){++voronoiIteration;for(var it=0;4>=it;++it){voronoi.recycle(diagram),diagram=voronoi.compute(fv,bbox),cells=diagram.cells;for(var i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}}var currInfractions=checkMinDist(diagram.edges);0>=currInfractions?bStop=!0:(currInfractions>=prevInfractions||voronoiIteration>=4)&&(expandIteration>=lMaxExpIt?bStop=!0:(lWidth+=lWidth*lExpFact,lHeight+=lHeight*lExpFact,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},++expandIteration,voronoiIteration=0)),prevInfractions=currInfractions,savePositions(),messagePositions()}return savePositions(),pData}).then(function(t){var e=t.vertices;setPositions(t);var n=t.startTime,r=new Date;console.info("Layout on "+e.length+" nodes took "+(r-n)+" ms"),layout.one("layoutstop",options.stop),options.animate||layout.trigger("layoutready"),layout.trigger("layoutstop"),t1.stop()})}),this},SpreadLayout.prototype.stop=function(){},$$("layout","spread",SpreadLayout)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},n,e)}var n={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};e.prototype.run=function(){var e=this,n=this,r=this.options;return t.util.require("Springy",function(i){function o(t){var e=t.scratch("springy").model.id,n=x.layout.nodePoints[e].p,r=t.position(),i=null!=r.x&&null!=r.y?y(t.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}function a(){n.stopped=!1,r.ungrabifyWhileSimulating&&E.ungrabify(),x.start()}var s=!1,u=r.cy;e.trigger({type:"layoutstart",layout:e});var l=r.eles,c=l.nodes().not(":parent"),h=l.edges(),d=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()}),f=new i.Graph;c.each(function(t,e){e.scratch("springy",{model:f.newNode({element:e})})}),h.each(function(t,e){var n=e.source().scratch("springy").model,r=e.target().scratch("springy").model;e.scratch("springy",{model:f.newEdge(n,r,{element:e})})});var p=window.sim=new i.Layout.ForceDirected(f,r.stiffness,r.repulsion,r.damping);r.infinite&&(p.minEnergyThreshold=-(1/0));var v=p.getBoundingBox(),g=function(t){v=p.getBoundingBox();var e=v.topright.subtract(v.bottomleft),n=t.subtract(v.bottomleft).divide(e.x).x*d.w+d.x1,r=t.subtract(v.bottomleft).divide(e.y).y*d.h+d.x1;return new i.Vector(n,r)},y=function(t){v=p.getBoundingBox();var e=v.topright.subtract(v.bottomleft),n=(t.x-d.x1)/d.w*e.x+v.bottomleft.x,r=(t.y-d.y1)/d.h*e.y+v.bottomleft.y;return new i.Vector(n,r)},m=u.collection(),b=u.nodes().size(),w=1,x=new i.Renderer(p,function(){n.stopped||m.length>0&&r.animate&&(s=!0,m.rtrigger("position"),r.fit&&u.fit(r.padding),m=u.collection(),s=!1)},function(t,e,n){},function(t,i){if(!n.stopped){var o=g(i),a=t.data.element;a.locked()||a.grabbed()||(a._private.position={x:o.x,y:o.y},m.merge(a)),w==b&&(e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e})),w++}});c.each(function(t,e){r.random||o(e)});var _;c.on("position",_=function(){s||o(this)});var E=c.filter(":grabbable");n.stopSystem=function(){n.stopped=!0,f.filterNodes(function(){return!1}),r.ungrabifyWhileSimulating&&E.grabify(),r.fit&&u.fit(r.padding),c.off("drag position",_),e.one("layoutstop",r.stop),e.trigger({type:"layoutstop",layout:e}),n.stopSystem=null},a(),r.infinite||setTimeout(function(){n.stop()},r.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},t("layout","springy",e)}(cytoscape),function(t){"use strict";function e(t){this.options=t}e.prototype.recalculateRenderedStyle=function(){},e.prototype.notify=function(){},t("renderer","null",e)}(cytoscape)}).call(this,require("_process"),"/node_modules/cytoscape/dist")},{_process:15,child_process:12,os:13,path:14}],17:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&a>o;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=x(r,o,4);var a=!P(n)&&w.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=C(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=C(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=I.length,r=t.constructor,i=w.isFunction(r)&&r.prototype||l,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)o=I[n],o in t&&t[o]!==i[o]&&!w.contains(e,o)&&e.push(o)}var a=this,s=a._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,d=u.slice,f=l.toString,p=l.hasOwnProperty,v=Array.isArray,g=Object.keys,y=c.bind,m=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=w),n._=w):a._=w,w.VERSION="1.8.3";var x=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?w.identity:w.isFunction(t)?x(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return _(t,e,1/0)};var E=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;s>u;u++){var l=a[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}},S=function(t){if(!w.isObject(t))return{};if(m)return m(t);b.prototype=t;var e=new b;return b.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},k=Math.pow(2,53)-1,C=T("length"),P=function(t){var e=C(t);return"number"==typeof e&&e>=0&&k>=e};w.each=w.forEach=function(t,e,n){e=x(e,n);var r,i;if(P(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=w.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},w.map=w.collect=function(t,e,n){e=_(e,n);for(var r=!P(t)&&w.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(t,e,n){var r;return r=P(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},w.filter=w.select=function(t,e,n){var r=[];return e=_(e,n),w.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},w.reject=function(t,e,n){return w.filter(t,w.negate(_(e)),n)},w.every=w.all=function(t,e,n){e=_(e,n);for(var r=!P(t)&&w.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=_(e,n);for(var r=!P(t)&&w.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,r){return P(t)||(t=w.values(t)),("number"!=typeof n||r)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=d.call(arguments,2),r=w.isFunction(e);return w.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=P(t)?t:w.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],r>o&&(o=r)}else e=_(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},w.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=P(t)?t:w.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],o>r&&(o=r)}else e=_(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(a>i||i===1/0&&o===1/0)&&(o=t,a=i)});return o},w.shuffle=function(t){for(var e,n=P(t)?t:w.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=w.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},w.sample=function(t,e,n){return null==e||n?(P(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=_(e,n),w.pluck(w.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,r){var i={};return n=_(n,r),w.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};w.groupBy=D(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=D(function(t,e,n){t[n]=e}),w.countBy=D(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?d.call(t):P(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:P(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return w.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},w.first=w.head=w.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var O=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=C(t);s>a;a++){var u=t[a];if(P(u)&&(w.isArray(u)||w.isArguments(u))){e||(u=O(u,e,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};w.flatten=function(t,e){return O(t,e,!1)},w.without=function(t){return w.difference(t,d.call(arguments,1))},w.uniq=w.unique=function(t,e,n,r){w.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=C(t);s>a;a++){var u=t[a],l=n?n(u,a,t):u;e?(a&&o===l||i.push(u),o=l):n?w.contains(o,l)||(o.push(l),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(O(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=C(t);i>r;r++){var o=t[r];if(!w.contains(e,o)){for(var a=1;n>a&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=O(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,C).length||0,n=Array(e),r=0;e>r;r++)n[r]=w.pluck(t,r);return n},w.object=function(t,e){for(var n={},r=0,i=C(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),o=0,a=C(t);a>o;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var N=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=S(t.prototype),a=t.apply(o,i);return w.isObject(a)?a:o};w.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,d.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return N(t,r,e,this,n.concat(d.call(arguments)))};return r},w.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===w?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return N(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:w.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var l=w.now();s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,0>=c||c>e?(a&&(clearTimeout(a),a=null),s=l,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,c)),o}},w.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var l=w.now()-a;e>l&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(o,i),o=i=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},w.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},w.once=w.partial(w.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return M&&o(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return M&&o(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},w.mapObject=function(t,e,n){e=_(e,n);for(var r,i=w.keys(t),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=e(t[r],r,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},w.invert=function(t){for(var e={},n=w.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=E(w.allKeys),w.extendOwn=w.assign=E(w.keys),w.findKey=function(t,e,n){e=_(e,n);for(var r,i=w.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],e(t[r],r,t))return r},w.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;w.isFunction(e)?(i=w.allKeys(a),r=x(e,n)):(i=O(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var r=w.map(O(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(r,e)}}return w.pick(t,e,n)},w.defaults=E(w.allKeys,!0),w.create=function(t,e){var n=S(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var L=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var i=f.call(t);if(i!==f.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!L(t[u],e[u],n,r))return!1}else{var l,c=w.keys(t);if(u=c.length,w.keys(e).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(e,l)||!L(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(t,e){return L(t,e)},w.isEmpty=function(t){return null==t?!0:P(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=v||function(t){return"[object Array]"===f.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&p.call(t,e)},w.noConflict=function(){return a._=s,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=T,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var r=Array(Math.max(0,t));e=x(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=w.invert(R),A=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};w.escape=A(R),w.unescape=A(B),w.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),w.isFunction(r)?r.call(t):r};var j=0;w.uniqueId=function(t){var e=++j+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+z[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var r=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(F,V),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(t){return a.call(this,t,w)},l=e.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},w.chain=function(t){var e=w(t);return e._chain=!0,e};var U=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),U(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),w.each(["concat","join","slice"],function(t){var e=u[t];w.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}],18:[function(t,e,n){e.exports='<body>\n  <div class="graph">\n    <div class="cy">\n      <div class="status loader"></div>\n    </div>\n    <div class="controls">\n      <div class="interactionFilter">\n        <div>Show the following interaction types:</div>\n        <div>\n          <button class="genetic">Genetic</button><button class="default selected">All</button><button class="physical">Physical</button>\n        </div>\n      </div>\n      <div class="secondaryControls">\n        <div class="reset">Reset&nbsp;view</div>\n        <div class="export">Export&nbsp;graph...\n          <div class="exportValues">\n            <select>\n              <option value="png">PNG</option>\n              <option value="jpg">JPG</option>\n              <option value="tsv">TSV</option>\n              <option value="csv" selected>CSV</option>\n            </select>\n            <button>Go!</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nodeDetails">\n    <h2 class="nodeTitle"></h2>\n    <dl class="nodeInfo intro">\n      <dt class="intro">Click on a gene to get more info about it.</dt>\n      <!-- dynamically output data here.  -->\n    </dl>\n  </div>\n</body>\n'},{}]},{},[5])(5)});