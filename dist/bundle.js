!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(require,module,exports){(function(process,__dirname){var cytoscape;!function(t){"use strict";var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.version="2.4.5",e.init=function(t){return void 0===t&&(t={}),e.is.plainObject(t)?new e.Core(t):e.is.string(t)?e.extension.apply(e.extension,arguments):void 0},e.fn={},"undefined"!=typeof module&&module.exports&&(module.exports=cytoscape),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return cytoscape}),t&&(t.cytoscape=cytoscape)}("undefined"==typeof window?null:window),this.cytoscape=cytoscape,function(t){"use strict";var e=0,r=1,n=2,i=function(t){return this instanceof i?(this.id="Thenable/1.0.7",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(t)};i.prototype={fulfill:function(t){return o(this,r,"fulfillValue",t)},reject:function(t){return o(this,n,"rejectReason",t)},then:function(t,e){var r=this,n=new i;return r.onFulfilled.push(u(t,n,"fulfill")),r.onRejected.push(u(e,n,"reject")),a(r),n.proxy}};var o=function(t,r,n,i){return t.state===e&&(t.state=r,t[n]=i,a(t)),t},a=function(t){t.state===r?s(t,"onFulfilled",t.fulfillValue):t.state===n&&s(t,"onRejected",t.rejectReason)},s=function(t,e,r){if(0!==t[e].length){var n=t[e];t[e]=[];var i=function(){for(var t=0;t<n.length;t++)n[t](r)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},u=function(t,e,r){return function(n){if("function"!=typeof t)e[r].call(e,n);else{var i;try{i=t(n)}catch(o){return void e.reject(o)}l(e,i)}}},l=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var r;if("object"==typeof e&&null!==e||"function"==typeof e)try{r=e.then}catch(n){return void t.reject(n)}if("function"!=typeof r)t.fulfill(e);else{var i=!1;try{r.call(e,function(r){i||(i=!0,r===e?t.reject(new TypeError("circular thenable chain")):l(t,r))},function(e){i||(i=!0,t.reject(e))})}catch(n){i||t.reject(n)}}};t.Promise="undefined"==typeof Promise?i:Promise,t.Promise.all=t.Promise.all||function(e){return new t.Promise(function(t,r){for(var n=new Array(e.length),i=0,o=function(r,o){n[r]=o,i++,i===e.length&&t(n)},a=0;a<e.length;a++)!function(t){var n=e[t],i=null!=n.then;if(i)n.then(function(e){o(t,e)},function(t){r(t)});else{var a=n;o(t,a)}}(a)})}}(cytoscape),function(t,e){"use strict";var r="string",n=typeof{},i="function";t.is={defined:function(t){return null!=t},string:function(t){return null!=t&&typeof t==r},fn:function(t){return null!=t&&typeof t===i},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(e){return null!=e&&typeof e===n&&!t.is.array(e)&&e.constructor===Object},object:function(t){return null!=t&&typeof t===n},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(e){return t.is.number(e)&&Math.floor(e)===e},color:function(t){return null!=t&&"string"==typeof t&&""!==$.Color(t).toString()},bool:function(t){return null!=t&&typeof t==typeof!0},elementOrCollection:function(e){return t.is.element(e)||t.is.collection(e)},element:function(e){return e instanceof t.Element&&e._private.single},collection:function(e){return e instanceof t.Collection&&!e._private.single},core:function(e){return e instanceof t.Core},style:function(e){return e instanceof t.Style},stylesheet:function(e){return e instanceof t.Stylesheet},event:function(e){return e instanceof t.Event},thread:function(e){return e instanceof t.Thread},fabric:function(e){return e instanceof t.Fabric},emptyString:function(e){return e?t.is.string(e)&&(""===e||e.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(e){return e&&t.is.string(e)&&""!==e&&!e.match(/^\s+$/)?!0:!1},domElement:function(t){return"undefined"==typeof HTMLElement?!1:t instanceof HTMLElement},boundingBox:function(e){return t.is.plainObject(e)&&t.is.number(e.x1)&&t.is.number(e.x2)&&t.is.number(e.y1)&&t.is.number(e.y2)},promise:function(e){return t.is.object(e)&&t.is.fn(e.then)},touch:function(){return e&&("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return t.is.khtml()||t.is.webkit()||t.is.chromium()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.util={extend:function(){var e,r,n,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||t.is.fn(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(r in e)n=s[r],i=e[r],s!==i&&(c&&i&&(t.is.plainObject(i)||(o=t.is.array(i)))?(o?(o=!1,a=n&&t.is.array(n)?n:[]):a=n&&t.is.plainObject(n)?n:{},s[r]=t.util.extend(c,a,i)):void 0!==i&&(s[r]=i));return s},require:function(r,n,i){var o;i=t.util.extend({msgIfNotFound:!0},i);var a=!1,s=function(t){a=!0,n(t)},u=function(t){e&&(o=e[r]),void 0!==o&&s(o),t&&t()},l=function(){a||c(h)},c=function(t){"undefined"!=typeof module&&module.exports&&require&&(o=require(r)),void 0!==o&&s(o),t&&t()},h=function(){a||d(p)},d=function(t){"undefined"!=typeof define&&define.amd&&require&&require([r],function(e){o=e,void 0!==o&&s(o),t&&t()})},p=function(){!a&&i.msgIfNotFound&&t.util.error("Cytoscape.js tried to pull in dependency `"+r+"` but no module (i.e. CommonJS, AMD, or window) was found")};u(l)},requires:function(e,r){for(var n=[],i=[],o=function(){for(var t=0;t<e.length;t++)if(!i[t])return;r.apply(r,n)},a=0;a<e.length;a++)!function(){var r=e[a],s=a;t.util.require(r,function(t){n[s]=t,i[s]=!0,o()})}()},throttle:function(e,r,n){var i=!0,o=!0;return n===!1?i=!1:t.is.plainObject(n)&&(i="leading"in n?n.leading:i,o="trailing"in n?n.trailing:o),n=n||{},n.leading=i,n.maxWait=r,n.trailing=o,t.util.debounce(e,r,n)},now:function(){return+new Date},debounce:function(e,r,n){var i,o,a,s,u,l,c,h=0,d=!1,p=!0;if(t.is.fn(e)){if(r=Math.max(0,r)||0,n===!0){var f=!0;p=!1}else t.is.plainObject(n)&&(f=n.leading,d="maxWait"in n&&(Math.max(r,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=r-(t.util.now()-s);if(0>=n){o&&clearTimeout(o);var d=c;o=l=c=void 0,d&&(h=t.util.now(),a=e.apply(u,i),l||o||(i=u=null))}else l=setTimeout(v,n)},g=function(){l&&clearTimeout(l),o=l=c=void 0,(p||d!==r)&&(h=t.util.now(),a=e.apply(u,i),l||o||(i=u=null))};return function(){if(i=arguments,s=t.util.now(),u=this,c=p&&(l||!f),d===!1)var n=f&&!l;else{o||f||(h=s);var y=d-(s-h),m=0>=y;m?(o&&(o=clearTimeout(o)),h=s,a=e.apply(u,i)):o||(o=setTimeout(g,y))}return m&&l?l=clearTimeout(l):l||r===d||(l=setTimeout(v,r)),n&&(m=!0,a=e.apply(u,i)),!m||l||o||(i=u=null),a}}},error:function(t){if(!console)throw t;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw t;console.log.apply(console,arguments)}},clone:function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},copy:function(e){return null==e?e:t.is.array(e)?e.slice():t.is.plainObject(e)?t.util.clone(e):e},makeBoundingBox:function(t){if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},mapEmpty:function(t){var e=!0;if(null!=t)for(var r in t){e=!1;break}return e},pushMap:function(e){var r=t.util.getMap(e);null==r?t.util.setMap($.extend({},e,{value:[e.value]})):r.push(e.value)},setMap:function(e){for(var r,n=e.map,i=e.keys,o=i.length,a=0;o>a;a++){var r=i[a];t.is.plainObject(r)&&t.util.error("Tried to set map with object key"),a<i.length-1?(null==n[r]&&(n[r]={}),n=n[r]):n[r]=e.value}},getMap:function(e){for(var r=e.map,n=e.keys,i=n.length,o=0;i>o;o++){var a=n[o];if(t.is.plainObject(a)&&t.util.error("Tried to get map with object key"),r=r[a],null==r)return r}return r},deleteMap:function(e){for(var r=e.map,n=e.keys,i=n.length,o=e.keepChildren,a=0;i>a;a++){var s=n[a];t.is.plainObject(s)&&t.util.error("Tried to delete map with object key");var u=a===e.keys.length-1;if(u)if(o)for(var l in r)o[l]||(r[l]=void 0);else r[s]=void 0;else r=r[s]}},capitalize:function(e){return t.is.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},camel2dash:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],i=n.toLowerCase(),o=n!==i;o?(e.push("-"),e.push(i)):e.push(n)}var a=e.length===t.length;return a?t:e.join("")},dash2camel:function(t){for(var e=[],r=!1,n=0;n<t.length;n++){var i=t[n],o="-"===i;o?r=!0:(e.push(r?i.toUpperCase():i),r=!1)}return e.join("")},trim:function(t){var e,r;for(e=0;e<t.length&&" "===t[e];e++);for(r=t.length-1;r>e&&" "===t[r];r--);return t.substring(e,r+1)},hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,r,n,i=4===t.length,o=16;return i?(e=parseInt(t[1]+t[1],o),r=parseInt(t[2]+t[2],o),n=parseInt(t[3]+t[3],o)):(e=parseInt(t[1]+t[2],o),r=parseInt(t[3]+t[4],o),n=parseInt(t[5]+t[6],o)),[e,r,n]}},hsl2tuple:function(e){function r(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}var n,i,o,a,s,u,l,c,h=new RegExp("^"+t.util.regex.hsla+"$").exec(e);if(h){if(i=parseInt(h[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,o=parseFloat(h[2]),0>o||o>100)return;if(o/=100,a=parseFloat(h[3]),0>a||a>100)return;if(a/=100,s=h[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===o)u=l=c=Math.round(255*a);else{var d=.5>a?a*(1+o):a+o-a*o,p=2*a-d;u=Math.round(255*r(p,d,i+1/3)),l=Math.round(255*r(p,d,i)),c=Math.round(255*r(p,d,i-1/3))}n=[u,l,c,s]}return n},rgb2tuple:function(e){var r,n=new RegExp("^"+t.util.regex.rgba+"$").exec(e);if(n){r=[];for(var i=[],o=1;3>=o;o++){var a=n[o];if("%"===a[a.length-1]&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),0>a||a>255)return;r.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(void 0!==l){if(l=parseFloat(l),0>l||l>1)return;r.push(l)}}return r},colorname2tuple:function(e){return t.util.colors[e.toLowerCase()]},color2tuple:function(e){return(t.is.array(e)?e:null)||t.util.colorname2tuple(e)||t.util.hex2tuple(e)||t.util.rgb2tuple(e)||t.util.hsl2tuple(e)},tuple2hex:function(t){function e(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e}var r=t[0],n=t[1],i=t[2];return"#"+e(r)+e(n)+e(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},t.util.regex={},t.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",t.util.regex.rgba="rgb[a]?\\(("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)\\s*,\\s*("+t.util.regex.number+"[%]?)(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)\\s*,\\s*(?:"+t.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",t.util.regex.hsla="hsl[a]?\\(("+t.util.regex.number+")\\s*,\\s*("+t.util.regex.number+"[%])\\s*,\\s*("+t.util.regex.number+"[%])(?:\\s*,\\s*("+t.util.regex.number+"))?\\)",t.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+t.util.regex.number+")\\s*,\\s*(?:"+t.util.regex.number+"[%])\\s*,\\s*(?:"+t.util.regex.number+"[%])(?:\\s*,\\s*(?:"+t.util.regex.number+"))?\\)",t.util.regex.hex3="\\#[0-9a-fA-F]{3}",t.util.regex.hex6="\\#[0-9a-fA-F]{6}";var r=e?e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame:null;r=r||function(t){t&&setTimeout(t,1e3/60)},t.util.requestAnimationFrame=function(t){r(t)}}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.math={},t.math.signum=function(t){return t>0?1:0>t?-1:0},t.math.distance=function(t,e){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},t.math.qbezierAt=function(t,e,r,n){return(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*r},t.math.qbezierPtAt=function(e,r,n,i){return{x:t.math.qbezierAt(e.x,r.x,n.x,i),y:t.math.qbezierAt(e.y,r.y,n.y,i)}},t.math.boundingBoxesIntersect=function(t,e){return t.x1>e.x2?!1:e.x1>t.x2?!1:t.x2<e.x1?!1:e.x2<t.x1?!1:t.y2<e.y1?!1:e.y2<t.y1?!1:t.y1>e.y2?!1:e.y1>t.y2?!1:!0},t.math.inBoundingBox=function(t,e,r){return t.x1<=e&&e<=t.x2&&t.y1<=r&&r<=t.y2},t.math.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},t.math.roundRectangleIntersectLine=function(t,e,r,n,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,h=r-l+u-a,d=n-c-a,p=r+l-u+a,f=d;if(s=this.finiteLinesIntersect(t,e,r,n,h,d,p,f,!1),s.length>0)return s;var v=r+l+a,g=n-c+u-a,y=v,m=n+c-u+a;if(s=this.finiteLinesIntersect(t,e,r,n,v,g,y,m,!1),s.length>0)return s;var b=r-l+u-a,w=n+c+a,x=r+l-u+a,_=w;if(s=this.finiteLinesIntersect(t,e,r,n,b,w,x,_,!1),s.length>0)return s;var E=r-l-a,S=n-c+u-a,T=E,k=n+c-u+a;if(s=this.finiteLinesIntersect(t,e,r,n,E,S,T,k,!1),s.length>0)return s;var P,C=r-l+u,D=n-c+u;if(P=this.intersectLineCircle(t,e,r,n,C,D,u+a),P.length>0&&P[0]<=C&&P[1]<=D)return[P[0],P[1]];var N=r+l-u,O=n-c+u;if(P=this.intersectLineCircle(t,e,r,n,N,O,u+a),P.length>0&&P[0]>=N&&P[1]<=O)return[P[0],P[1]];var M=r+l-u,L=n+c-u;if(P=this.intersectLineCircle(t,e,r,n,M,L,u+a),P.length>0&&P[0]>=M&&P[1]>=L)return[P[0],P[1]];var I=r-l+u,R=n+c-u;return P=this.intersectLineCircle(t,e,r,n,I,R,u+a),P.length>0&&P[0]<=I&&P[1]>=R?[P[0],P[1]]:[]},t.math.roundRectangleIntersectBox=function(t,e,r,n,i,o,a,s,u){var l=this.getRoundRectangleRadius(i,o),c=a-i/2-u,h=s-o/2+l-u,d=a+i/2+u,p=s+o/2-l+u,f=a-i/2+l-u,v=s-o/2-u,g=a+i/2-l+u,y=s+o/2+u,m=Math.min(t,r),b=Math.max(t,r),w=Math.min(e,n),x=Math.max(e,n);return c>b?!1:m>d?!1:v>x?!1:w>y?!1:c>=m&&b>=c&&h>=w&&x>=h?!0:d>=m&&b>=d&&h>=w&&x>=h?!0:d>=m&&b>=d&&p>=w&&x>=p?!0:c>=m&&b>=c&&p>=w&&x>=p?!0:m>=c&&d>=m&&w>=h&&p>=w?!0:b>=c&&d>=b&&w>=h&&p>=w?!0:b>=c&&d>=b&&x>=h&&p>=x?!0:m>=c&&d>=m&&x>=h&&p>=x?!0:f>=m&&b>=f&&v>=w&&x>=v?!0:g>=m&&b>=g&&v>=w&&x>=v?!0:g>=m&&b>=g&&y>=w&&x>=y?!0:f>=m&&b>=f&&y>=w&&x>=y?!0:m>=f&&g>=m&&w>=v&&y>=w?!0:b>=f&&g>=b&&w>=v&&y>=w?!0:b>=f&&g>=b&&x>=v&&y>=x?!0:m>=f&&g>=m&&x>=v&&y>=x?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,f+u,h+u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,g-u,h+u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,g-u,p-u)?!0:this.boxIntersectEllipse(m,w,b,x,u,2*l,2*l,f+u,p-u)?!0:!1},t.math.checkInBoundingCircle=function(t,e,r,n,i,o,a,s){return t=(t-a)/(i+n),e=(e-s)/(o+n),r>=t*t+e*e},t.math.boxInBezierVicinity=function(t,e,r,n,i,o,a,s,u,l,c){var h=.25*i+.5*a+.25*u,d=.25*o+.5*s+.25*l,p=Math.min(t,r)-c,f=Math.min(e,n)-c,v=Math.max(t,r)+c,g=Math.max(e,n)+c;if(i>=p&&v>=i&&o>=f&&g>=o)return 1;if(u>=p&&v>=u&&l>=f&&g>=l)return 1;if(h>=p&&v>=h&&d>=f&&g>=d)return 1;if(a>=p&&v>=a&&s>=f&&g>=s)return 1;var y=Math.min(i,h,u),m=Math.min(o,d,l),b=Math.max(i,h,u),w=Math.max(o,d,l);return y>v||p>b||m>g||f>w?0:1},t.math.checkBezierInBox=function(e,r,n,i,o,a,s,u,l,c,h){function d(h){var d=t.math.qbezierAt(o,s,l,h),p=t.math.qbezierAt(a,u,c,h);return d>=e&&n>=d&&p>=r&&i>=p}for(var p=0;1>=p;p+=.25)if(!d(p))return!1;return!0},t.math.checkStraightEdgeInBox=function(t,e,r,n,i,o,a,s,u){return i>=t&&r>=i&&a>=t&&r>=a&&o>=e&&n>=o&&s>=e&&n>=s},t.math.checkStraightEdgeCrossesBox=function(t,e,r,n,i,o,a,s,u){var l,c,h=Math.min(t,r)-u,d=Math.min(e,n)-u,p=Math.max(t,r)+u,f=Math.max(e,n)+u,v=a-i,g=i,y=s-o,m=o;if(Math.abs(v)<1e-4)return i>=h&&p>=i&&Math.min(o,s)<=d&&Math.max(o,s)>=f;var b=(h-g)/v;if(b>0&&1>=b&&(l=y*b+m,l>=d&&f>=l))return!0;var w=(p-g)/v;if(w>0&&1>=w&&(l=y*w+m,l>=d&&f>=l))return!0;var x=(d-m)/y;if(x>0&&1>=x&&(c=v*x+g,c>=h&&p>=c))return!0;var _=(f-m)/y;return _>0&&1>=_&&(c=v*_+g,c>=h&&p>=c)?!0:!1},t.math.checkBezierCrossesBox=function(t,e,r,n,i,o,a,s,u,l,c){var h=Math.min(t,r)-c,d=Math.min(e,n)-c,p=Math.max(t,r)+c,f=Math.max(e,n)+c;if(i>=h&&p>=i&&o>=d&&f>=o)return!0;if(u>=h&&p>=u&&l>=d&&f>=l)return!0;var v=i-2*a+u,g=-2*i+2*a,y=i,m=[];if(Math.abs(v)<1e-4){var b=(h-i)/g,w=(p-i)/g;m.push(b,w)}else{var x,_,E=g*g-4*v*(y-h);if(E>0){var S=Math.sqrt(E);x=(-g+S)/(2*v),_=(-g-S)/(2*v),m.push(x,_)}var T,k,P=g*g-4*v*(y-p);if(P>0){var S=Math.sqrt(P);T=(-g+S)/(2*v),k=(-g-S)/(2*v),m.push(T,k)}}m.sort(function(t,e){return t-e});var C=o-2*s+l,D=-2*o+2*s,N=o,O=[];if(Math.abs(C)<1e-4){var M=(d-o)/D,L=(f-o)/D;O.push(M,L)}else{var I,R,B=D*D-4*C*(N-d);if(B>0){var S=Math.sqrt(B);I=(-D+S)/(2*C),R=(-D-S)/(2*C),O.push(I,R)}var A,j,q=D*D-4*C*(N-f);if(q>0){var S=Math.sqrt(q);A=(-D+S)/(2*C),j=(-D-S)/(2*C),O.push(A,j)}}O.sort(function(t,e){return t-e});for(var z=0;z<m.length;z+=2)for(var V=1;V<O.length;V+=2)if(m[z]<O[V]&&O[V]>=0&&m[z]<=1&&m[z+1]>O[V-1]&&O[V-1]<=1&&m[z+1]>=0)return!0;return!1},t.math.inLineVicinity=function(t,e,r,n,i,o,a){var s=a,u=Math.min(r,i),l=Math.max(r,i),c=Math.min(n,o),h=Math.max(n,o);return t>=u-s&&l+s>=t&&e>=c-s&&h+s>=e},t.math.inBezierVicinity=function(t,e,r,n,i,o,a,s,u){var l={x1:Math.min(r,a,i),x2:Math.max(r,a,i),y1:Math.min(n,s,o),y2:Math.max(n,s,o)};return t<l.x1||t>l.x2||e<l.y1||e>l.y2?!1:!0},t.math.solveCubic=function(t,e,r,n,i){e/=t,r/=t,n/=t;var o,a,s,u,l,c,h,d;return a=(3*r-e*e)/9,s=-(27*n)+e*(9*r-2*e*e),s/=54,o=a*a*a+s*s,i[1]=0,h=e/3,o>0?(l=s+Math.sqrt(o),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*d,void(i[4]=i[2]=-(d+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(u/3),i[2]=-h+d*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((u+4*Math.PI)/3))))},t.math.sqDistanceToQuadraticBezier=function(t,e,r,n,i,o,a,s){var u=1*r*r-4*r*i+2*r*a+4*i*i-4*i*a+a*a+n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s,l=9*r*i-3*r*r-3*r*a-6*i*i+3*i*a+9*n*o-3*n*n-3*n*s-6*o*o+3*o*s,c=3*r*r-6*r*i+r*a-r*t+2*i*i+2*i*t-a*t+3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e,h=1*r*i-r*r+r*t-i*t+n*o-n*n+n*e-o*e,d=[];this.solveCubic(u,l,c,h,d);for(var p=1e-7,f=[],v=0;6>v;v+=2)Math.abs(d[v+1])<p&&d[v]>=0&&d[v]<=1&&f.push(d[v]);f.push(1),f.push(0);for(var g,y,m,b,w=-1,x=0;x<f.length;x++)y=Math.pow(1-f[x],2)*r+2*(1-f[x])*f[x]*i+f[x]*f[x]*a,m=Math.pow(1-f[x],2)*n+2*(1-f[x])*f[x]*o+f[x]*f[x]*s,b=Math.pow(y-t,2)+Math.pow(m-e,2),w>=0?w>b&&(w=b,g=f[x]):(w=b,g=f[x]);return w},t.math.sqDistanceToFiniteLine=function(t,e,r,n,i,o){var a=[t-r,e-n],s=[i-r,o-n],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return 0>c?l:h>u?(t-i)*(t-i)+(e-o)*(e-o):l-h},t.math.pointInsidePolygon=function(t,e,r,n,i,o,a,s,u){var l=new Array(r.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var h=Math.cos(-c),d=Math.sin(-c),p=0;p<l.length/2;p++)l[2*p]=o/2*(r[2*p]*h-r[2*p+1]*d),l[2*p+1]=a/2*(r[2*p+1]*h+r[2*p]*d),l[2*p]+=n,l[2*p+1]+=i;var f;if(u>0){var v=this.expandPolygon(l,-u);f=this.joinLines(v)}else f=l;for(var g,y,m,b,w,x=0,_=0,p=0;p<f.length/2;p++)if(g=f[2*p],y=f[2*p+1],p+1<f.length/2?(m=f[2*(p+1)],b=f[2*(p+1)+1]):(m=f[2*(p+1-f.length/2)],b=f[2*(p+1-f.length/2)+1]),g==t&&m==t);else{if(!(g>=t&&t>=m||t>=g&&m>=t))continue;w=(t-g)/(m-g)*(b-y)+y,w>e&&x++,e>w&&_++}return x%2===0?!1:!0},t.math.joinLines=function(t){for(var e,r,n,i,o,a,s,u,l=new Array(t.length/2),c=0;c<t.length/4;c++){e=t[4*c],r=t[4*c+1],n=t[4*c+2],i=t[4*c+3],c<t.length/4-1?(o=t[4*(c+1)],a=t[4*(c+1)+1],s=t[4*(c+1)+2],u=t[4*(c+1)+3]):(o=t[0],a=t[1],s=t[2],u=t[3]);var h=this.finiteLinesIntersect(e,r,n,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},t.math.expandPolygon=function(t,e){for(var r,n,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){r=t[2*s],n=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-n,l=-(i-r),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=r+h*e,a[4*s+1]=n+d*e,a[4*s+2]=i+h*e,a[4*s+3]=o+d*e}return a},t.math.intersectLineEllipse=function(t,e,r,n,i,o){var a=r-t,s=n-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(r-t)*c+t,(n-e)*c+e]},t.math.dotProduct=function(t,e){if(2!=t.length||2!=e.length)throw"dot product: arguments are not vectors";return t[0]*e[0]+t[1]*e[1]},t.math.intersectLineCircle=function(t,e,r,n,i,o,a){var s=[r-t,n-e],u=[i,o],l=[t-i,e-o],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-a*a,d=h*h-4*c*u;if(0>d)return[];var p=(-h+Math.sqrt(d))/(2*c),f=(-h-Math.sqrt(d))/(2*c),v=Math.min(p,f),g=Math.max(p,f),y=[];if(v>=0&&1>=v&&y.push(v),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+t,b=y[0]*s[1]+e;if(y.length>1){if(y[0]==y[1])return[m,b];var w=y[1]*s[0]+t,x=y[1]*s[1]+e;return[m,b,w,x]}return[m,b]},t.math.findCircleNearPoint=function(t,e,r,n,i){var o=n-t,a=i-e,s=Math.sqrt(o*o+a*a),u=o/s,l=a/s;return[t+u*r,e+l*r]},t.math.findMaxSqDistanceToOrigin=function(t){for(var e,r=1e-6,n=0;n<t.length/2;n++)e=t[2*n]*t[2*n]+t[2*n+1]*t[2*n+1],e>r&&(r=e);return r},t.math.finiteLinesIntersect=function(t,e,r,n,i,o,a,s,u){var l=(a-i)*(e-o)-(s-o)*(t-i),c=(r-t)*(e-o)-(n-e)*(t-i),h=(s-o)*(r-t)-(a-i)*(n-e);if(0!==h){var d=l/h,p=c/h;return d>=0&&1>=d&&p>=0&&1>=p?[t+d*(r-t),e+d*(n-e)]:u?[t+d*(r-t),e+d*(n-e)]:[]}return 0===l||0===c?[t,r,a].sort()[1]===a?[a,s]:[t,r,i].sort()[1]===i?[i,o]:[i,a,r].sort()[1]===r?[r,n]:[]:[]},t.math.boxIntersectEllipse=function(t,e,r,n,i,o,a,s,u){if(t>r){var l=t;t=r,r=l}if(e>n){var c=e;e=n,n=c}var h=[s-o/2-i,u],d=[s+o/2+i,u],p=[s,u-a/2-i],f=[s,u+a/2+i];return r<h[0]?!1:t>d[0]?!1:e>f[1]?!1:n<p[1]?!1:t<=d[0]&&d[0]<=r&&e<=d[1]&&d[1]<=n?!0:t<=h[0]&&h[0]<=r&&e<=h[1]&&h[1]<=n?!0:t<=p[0]&&p[0]<=r&&e<=p[1]&&p[1]<=n?!0:t<=f[0]&&f[0]<=r&&e<=f[1]&&f[1]<=n?!0:(t=(t-s)/(o/2+i),r=(r-s)/(o/2+i),e=(e-u)/(a/2+i),n=(n-u)/(a/2+i),1>=t*t+e*e?!0:1>=r*r+e*e?!0:1>=r*r+n*n?!0:1>=t*t+n*n?!0:!1)},t.math.boxIntersectPolygon=function(e,r,n,i,o,a,s,u,l,c,h){if(e>n){var d=e;e=n,n=d}if(r>i){var p=r;r=i,i=p}var f=new Array(o.length),v=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var g=Math.cos(-v),y=Math.sin(-v),m=0;m<f.length/2;m++)f[2*m]=a/2*(o[2*m]*g-o[2*m+1]*y),f[2*m+1]=s/2*(o[2*m+1]*g+o[2*m]*y),f[2*m]+=u,f[2*m+1]+=l;for(var b=f[0],w=f[0],x=f[1],_=f[1],m=1;m<f.length/2;m++)f[2*m]>w&&(w=f[2*m]),f[2*m]<b&&(b=f[2*m]),f[2*m+1]>_&&(_=f[2*m+1]),f[2*m+1]<x&&(x=f[2*m+1]);if(b-h>n)return!1;if(e>w+h)return!1;if(x-h>i)return!1;if(r>_+h)return!1;var E;if(h>0){var S=t.math.expandPolygon(f,-h);E=t.math.joinLines(S)}else E=f;for(var m=0;m<f.length/2;m++)if(e<=f[2*m]&&f[2*m]<=n&&r<=f[2*m+1]&&f[2*m+1]<=i)return!0;for(var m=0;m<E.length/2;m++){var T,k,P=E[2*m],C=E[2*m+1];if(m<E.length/2-1?(T=E[2*(m+1)],k=E[2*(m+1)+1]):(T=E[0],k=E[1]),t.math.finiteLinesIntersect(P,C,T,k,e,r,n,r,!1).length>0)return!0;if(t.math.finiteLinesIntersect(P,C,T,k,e,i,n,i,!1).length>0)return!0;if(t.math.finiteLinesIntersect(P,C,T,k,e,r,e,i,!1).length>0)return!0;if(t.math.finiteLinesIntersect(P,C,T,k,n,r,n,i,!1).length>0)return!0}return!1},t.math.polygonIntersectLine=function(e,r,n,i,o,a,s,u){for(var l,c=[],h=new Array(n.length),d=0;d<h.length/2;d++)h[2*d]=n[2*d]*a+i,h[2*d+1]=n[2*d+1]*s+o;var p;if(u>0){var f=t.math.expandPolygon(h,-u);p=t.math.joinLines(f)}else p=h;for(var v,g,y,m,d=0;d<p.length/2;d++)v=p[2*d],g=p[2*d+1],d<p.length/2-1?(y=p[2*(d+1)],m=p[2*(d+1)+1]):(y=p[0],m=p[1]),l=this.finiteLinesIntersect(e,r,i,o,v,g,y,m),0!==l.length&&c.push(l[0],l[1]);return c},t.math.shortenIntersection=function(t,e,r){var n=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=(i-r)/i;return 0>o&&(o=1e-5),[e[0]+o*n[0],e[1]+o*n[1]]},t.math.generateUnitNgonPointsFitToSquare=function(e,r){var n=t.math.generateUnitNgonPoints(e,r);return n=t.math.fitPolygonToSquare(n)},t.math.fitPolygonToSquare=function(t){for(var e,r,n=t.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;n>u;u++)e=t[2*u],r=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,r),s=Math.max(s,r);for(var l=2/(a-i),c=2/(s-o),u=0;n>u;u++)e=t[2*u]=t[2*u]*l,r=t[2*u+1]=t[2*u+1]*c,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,r),s=Math.max(s,r);if(-1>o)for(var u=0;n>u;u++)r=t[2*u+1]=t[2*u+1]+(-1-o);return t},t.math.generateUnitNgonPoints=function(t,e){var r=1/t*2*Math.PI,n=t%2===0?Math.PI/2+r/2:Math.PI/2;n+=e;for(var i,o,a,s=new Array(2*t),u=0;t>u;u++)i=u*r+n,o=s[2*u]=Math.cos(i),a=s[2*u+1]=Math.sin(-i);return s},t.math.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)}}(cytoscape),function(t){"use strict";function e(e,r,n){var i={};switch(i[r]=n,e){case"core":case"collection":t.fn[e](i)}if("layout"===e){for(var a=n.prototype,s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this}),a.stop||(a.stop=function(){var t=this.options;return t&&t.animate&&t.eles.stop(),this}),a.on=t.define.on({layout:!0}),a.one=t.define.on({layout:!0,unbindSelfOnTrigger:!0}),a.once=t.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),a.off=t.define.off({layout:!0}),a.trigger=t.define.trigger({layout:!0}),t.define.eventAliasesOn(a)}return t.util.setMap({map:o,keys:[e,r],value:n})}function r(e,r){return t.util.getMap({map:o,keys:[e,r]})}function n(e,r,n,i,o){return t.util.setMap({map:a,keys:[e,r,n,i],value:o})}function i(e,r,n,i){return t.util.getMap({map:a,keys:[e,r,n,i]})}var o={};t.extensions=o;var a={};t.modules=a,t.extension=function(){return 2==arguments.length?r.apply(this,arguments):3==arguments.length?e.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?n.apply(this,arguments):void t.util.error("Invalid extension access syntax")}}(cytoscape),function(t,e){"use strict";if(t){var r=function(t){var e=t[0]._cyreg=t[0]._cyreg||{};return e};t.fn.cytoscape=function(n){var i=t(this);if("get"===n)return r(i).cy;if(e.is.fn(n)){var o=n,a=r(i).cy;if(a&&a.isReady())a.trigger("ready",[],o);else{var s=r(i),u=s.readies=s.readies||[];u.push(o)}}else if(e.is.plainObject(n))return i.each(function(){var e=t.extend({},n,{container:t(this)[0]});cytoscape(e)})},t.cytoscape=cytoscape,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)}}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(t){"use strict";function e(){return!1}function r(){return!0}t.Event=function(n,i){return this instanceof t.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented?r:e):this.type=n,i&&(this.type=void 0!==i.type?i.type:this.type,this.cy=i.cy,this.cyTarget=i.cyTarget,this.cyPosition=i.cyPosition,this.cyRenderedPosition=i.cyRenderedPosition,this.namespace=i.namespace,this.layout=i.layout,this.data=i.data,this.message=i.message),void(this.timeStamp=n&&n.timeStamp||+new Date)):new t.Event(n,i)},t.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e}}(cytoscape),function(t){"use strict";t.define={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return e=t.util.extend({},r,e),function(r,n){var i=e,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(t.is.string(r)){if(i.allowGetting&&void 0===n){var l;return u&&(l=u._private[i.field][r]),l}if(i.allowSetting&&void 0!==n){var c=!i.immutableKeys[r];if(c){for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][r]=n);
i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&t.is.plainObject(r)){var p,f,v=r;for(p in v){f=v[p];var c=!i.immutableKeys[p];if(c)for(var h=0,d=s.length;d>h;h++)i.canSet(s[h])&&(s[h]._private[i.field][p]=f)}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&t.is.fn(r)){var g=r;o.bind(i.bindingEvent,g)}else if(i.allowGetting&&void 0===r){var l;return u&&(l=u._private[i.field]),l}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=t.util.extend({},r,e),function(r){var n=e,i=this,o=void 0!==i.length,a=o?i:[i];if(t.is.string(r)){for(var s=r.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!t.is.emptyString(c)){var h=!n.immutableKeys[c];if(h)for(var d=0,p=a.length;p>d;d++)a[d]._private[n.field][c]=void 0}}n.triggerEvent&&i[n.triggerFnName](n.event)}else if(void 0===r){for(var d=0,p=a.length;p>d;d++){var f=a[d]._private[n.field];for(var c in f){var v=!n.immutableKeys[c];v&&(f[c]=void 0)}}n.triggerEvent&&i[n.triggerFnName](n.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(e){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return e=t.util.extend({},r,e),function(r,n,i,o){var a=this,s=void 0!==a.length,u=s?a:[a],l=t.is.string(r),c=e;if(t.is.plainObject(n)?(o=i,i=n,n=void 0):(t.is.fn(n)||n===!1)&&(o=n,i=void 0,n=void 0),(t.is.fn(i)||i===!1)&&(o=i,i=void 0),!t.is.fn(o)&&o!==!1&&l)return a;if(l){var h={};h[r]=o,r=h}for(var d in r)if(o=r[d],o===!1&&(o=t.define.event.falseCallback),t.is.fn(o)){d=d.split(/\s+/);for(var p=0;p<d.length;p++){var f=d[p];if(!t.is.emptyString(f)){var v=f.match(t.define.event.regex);if(v)for(var g=v[1],y=v[2]?v[2]:void 0,m={callback:o,data:i,delegated:n?!0:!1,selector:n,selObj:new t.Selector(n),type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:u},b=0;b<u.length;b++){var w=u[b]._private;w.listeners=w.listeners||[],w.listeners.push(m)}}}}return a}},eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.removeListener=r.unlisten=r.unbind=r.off,r.emit=r.trigger,r.pon=r.promiseOn=function(e,r){var n=this,i=Array.prototype.slice.call(arguments,0);return new t.Promise(function(t,e){var r=function(e){n.off.apply(n,a),t(e)},o=i.concat([r]),a=o.concat([]);n.on.apply(n,o)})}},off:function(e){var r={};return e=t.util.extend({},r,e),function(e,r,n){var i=this,o=void 0!==i.length,a=o?i:[i],s=t.is.string(e);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private.listeners=[];return i}if((t.is.fn(r)||r===!1)&&(n=r,r=void 0),s){var l={};l[e]=n,e=l}for(var c in e){n=e[c],n===!1&&(n=t.define.event.falseCallback),c=c.split(/\s+/);for(var h=0;h<c.length;h++){var d=c[h];if(!t.is.emptyString(d)){var p=d.match(t.define.event.optionalTypeRegex);if(p)for(var f=p[1]?p[1]:void 0,v=p[2]?p[2]:void 0,u=0;u<a.length;u++)for(var g=a[u]._private.listeners=a[u]._private.listeners||[],y=0;y<g.length;y++){var m=g[y],b=!v||v===m.namespace,w=!f||m.type===f,x=!n||n===m.callback,_=b&&w&&x;_&&(g.splice(y,1),y--)}}}}return i}},trigger:function(e){var r={};return e=t.util.extend({},r,e),function(r,n,i){var o=this,a=void 0!==o.length,s=a?o:[o],u=t.is.string(r),l=t.is.plainObject(r),c=t.is.event(r),h=this._private.cy||(t.is.core(this)?this:null),d=h?h.hasCompoundNodes():!1;if(u){var p=r.split(/\s+/);r=[];for(var f=0;f<p.length;f++){var v=p[f];if(!t.is.emptyString(v)){var g=v.match(t.define.event.regex),y=g[1],m=g[2]?g[2]:void 0;r.push({type:y,namespace:m})}}}else if(l){var b=r;r=[b]}n?t.is.array(n)||(n=[n]):n=[];for(var f=0;f<r.length;f++)for(var w=r[f],x=0;x<s.length;x++){var v,_=s[x],E=_._private.listeners=_._private.listeners||[],S=t.is.element(_),T=S||e.layout;if(c?(v=w,v.cyTarget=v.cyTarget||_,v.cy=v.cy||h):v=new t.Event(w,{cyTarget:_,cy:h,namespace:w.namespace}),w.layout&&(v.layout=w.layout),e.layout&&(v.layout=_),v.cyPosition){var k=v.cyPosition,P=h.zoom(),C=h.pan();v.cyRenderedPosition={x:k.x*P+C.x,y:k.y*P+C.y}}i&&(E=[{namespace:v.namespace,type:v.type,callback:i}]);for(var D=0;D<E.length;D++){var N=E[D],O=!N.namespace||N.namespace===v.namespace,M=N.type===v.type,L=N.delegated?_!==v.cyTarget&&t.is.element(v.cyTarget)&&N.selObj.matches(v.cyTarget):!0,I=O&&M&&L;if(I){var R=[v];if(R=R.concat(n),v.data=N.data?N.data:void 0,(N.unbindSelfOnTrigger||N.unbindAllBindersOnTrigger)&&(E.splice(D,1),D--),N.unbindAllBindersOnTrigger)for(var B=N.binders,A=0;A<B.length;A++){var j=B[A];if(j&&j!==_)for(var q=j._private.listeners,z=0;z<q.length;z++){var V=q[z];V===N&&(q.splice(z,1),z--)}}var F=N.delegated?v.cyTarget:_,X=N.callback.apply(F,R);(X===!1||v.isPropagationStopped())&&(T=!1,X===!1&&(v.stopPropagation(),v.preventDefault()))}}if(T){var Y=d?_._private.parent:null,U=null!=Y&&0!==Y.length;U?(Y=Y[0],Y.trigger(v)):h.trigger(v)}}return o}},animated:function(e){var r={};return e=t.util.extend({},r,e),function(){var t=this,e=void 0!==t.length,r=e?t:[t],n=this._private.cy||this;if(!n.styleEnabled())return!1;var i=r[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(e){var r={};return e=t.util.extend({},r,e),function(){var t=this,e=void 0!==t.length,r=e?t:[t],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var i=0;i<r.length;i++){var o=r[i];o._private.animation.queue=[]}return this}},delay:function(e){var r={};return e=t.util.extend({},r,e),function(t,e){var r=this._private.cy||this;return r.styleEnabled()?(this.animate({delay:t},{duration:t,complete:e}),this):this}},animate:function(e){var r={};return e=t.util.extend({},r,e),function(t,e){var r=this,n=void 0!==r.length,i=n?r:[r],o=this._private.cy||this,a=!n,s=!a;if(!o.styleEnabled())return this;var u,l=+new Date,c=o.style();switch(void 0===e&&(e={}),void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}var h=!0;if(t)for(var d in t){h=!1;break}if(h)return this;if(t.css&&s&&(t.css=c.getValueStyle(t.css,{array:!0})),t.renderedPosition&&s){var p=t.renderedPosition,f=o.pan(),v=o.zoom();t.position={x:(p.x-f.x)/v,y:(p.y-f.y)/v}}if(t.panBy&&a){var g=t.panBy,y=o.pan();t.pan={x:y.x+g.x,y:y.y+g.y}}var m=t.center||t.centre;if(m&&a){var b=o.getCenterPan(m.eles,t.zoom);b&&(t.pan=b)}if(t.fit&&a){var w=t.fit,x=o.getFitViewport(w.eles||w.boundingBox,w.padding);x&&(t.pan=x.pan,t.zoom=x.zoom)}for(var d=0;d<i.length;d++){var _=i[d];u=_.animated()&&(void 0===e.queue||e.queue)?_._private.animation.queue:_._private.animation.current,u.push({properties:t,duration:e.duration,params:e,callTime:l})}return s&&o.addToAnimationPool(this),this}},stop:function(e){var r={};return e=t.util.extend({},r,e),function(t,e){var r=this,n=void 0!==r.length,i=n?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private.animation.current,l=0;l<u.length;l++){var c=u[l];e&&(c.duration=0)}t&&(s._private.animation.queue=[]),e||(s._private.animation.current=[])}return o.notify({collection:this,type:"draw"}),this}}}}(cytoscape),function(t){"use strict";t.fn.selector=function(e,r){for(var n in e){var i=e[n];t.Selector.prototype[n]=i}},t.Selector=function(e,r){if(!(this instanceof t.Selector))return new t.Selector(e,r);void 0===r&&void 0!==e&&(r=e,e=void 0);var n=this;if(n._private={selectorText:null,invalid:!0},!r||t.is.string(r)&&r.match(/^\s*$/))null==e?n.length=0:(n[0]=a(),n[0].group=e,n.length=1);else if(t.is.element(r)){var i=new t.Collection(n.cy(),[r]);n[0]=a(),n[0].collection=i,n.length=1}else if(t.is.collection(r))n[0]=a(),n[0].collection=r,n.length=1;else if(t.is.fn(r))n[0]=a(),n[0].filter=r,n.length=1;else{if(!t.is.string(r))return void t.util.error("A selector must be created from a string; found "+r);var o=null,a=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:t.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var u=function(t){return t.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(t,e,r,n){return e})},l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];s.comparatorOp+="|@"+h}for(var l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var h=l[c];h.indexOf("!")>=0||"="!==h&&(s.comparatorOp+="|\\!"+h)}var d={group:{query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"==t?t:t+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(t){this.ids.push(u(t))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(t){this.classes.push(u(t))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(t){this.data.push({field:u(t)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(t,e,r){var n=null!=new RegExp("^"+s.string+"$").exec(r);r=n?r.substring(1,r.length-1):parseFloat(r),this.data.push({field:u(t),operator:e,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:u(e),operator:t})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(t,e,r){this.meta.push({field:u(t),operator:e,value:parseFloat(r)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){n[++c]=a(),o=null}},child:{separator:!0,regex:s.child,populate:function(){var t=a();t.parent=this,t.subject=o,n[c]=t}},descendant:{separator:!0,regex:s.descendant,populate:function(){var t=a();t.ancestor=this,t.subject=o,n[c]=t}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=o&&this.subject!=this?(t.util.error("Redefinition of subject in selector `"+r+"`"),!1):(o=this,void(this.subject=this))}}},p=0;for(var f in d)d[p]=d[f],d[p].name=f,p++;d.length=p,n._private.selectorText=r;var v=r,c=0,g=function(e){for(var r,n,i,o=0;o<d.length;o++){var a=d[o],s=a.name;if(!t.is.fn(e)||e(s,a)){var u=v.match(new RegExp("^"+a.regex));if(null!=u){n=u,r=a,i=s;var l=u[0];v=v.substring(l.length);break}}}return{expr:r,match:n,name:i}},y=function(){var t=v.match(/^\s+/);if(t){var e=t[0];v=v.substring(e.length)}};for(n[0]=a(),y();;){var m=g();if(null==m.expr)return void t.util.error("The selector `"+r+"`is invalid");for(var b=[],p=1;p<m.match.length;p++)b.push(m.match[p]);var w=m.expr.populate.apply(n[c],b);if(w===!1)return;if(v.match(/^\s*$/))break}for(n.length=c+1,p=0;p<n.length;p++){var x=n[p];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var _=x.parent,E=x;E.parent=null,_.child=E,x=_}else{if(null==x.ancestor){t.util.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var S=x.ancestor,T=x;T.ancestor=null,S.descendant=T,x=S}n[p]=x.subject}}if(null!=e)for(var p=0;p<n.length;p++){if(null!=n[p].group&&n[p].group!=e)return void t.util.error("Group `"+n[p].group+"` conflicts with implicit group `"+e+"` in selector `"+r+"`");n[p].group=e}}n._private.invalid=!1},t.selfn=t.Selector.prototype,t.selfn.size=function(){return this.length},t.selfn.eq=function(t){return this[t]},t.selfn.find=function(){};var e=function(r,n){if(null!=r.group&&"*"!=r.group&&r.group!=n._private.group)return!1;for(var i=n.cy(),o=!0,a=0;a<r.colonSelectors.length;a++){var s=r.colonSelectors[a];switch(s){case":selected":o=n.selected();break;case":unselected":o=!n.selected();break;case":selectable":o=n.selectable();break;case":unselectable":o=!n.selectable();break;case":locked":o=n.locked();break;case":unlocked":o=!n.locked();break;case":visible":o=n.visible();break;case":hidden":o=!n.visible();break;case":transparent":o=n.transparent();break;case":grabbed":o=n.grabbed();break;case":free":o=!n.grabbed();break;case":removed":o=n.removed();break;case":inside":o=!n.removed();break;case":grabbable":o=n.grabbable();break;case":ungrabbable":o=!n.grabbable();break;case":animated":o=n.animated();break;case":unanimated":o=!n.animated();break;case":parent":o=n.isNode()&&n.children().nonempty();break;case":child":case":nonorphan":o=n.isNode()&&n.parent().nonempty();break;case":orphan":o=n.isNode()&&n.parent().empty();break;case":loop":o=n.isEdge()&&n.data("source")===n.data("target");break;case":simple":o=n.isEdge()&&n.data("source")!==n.data("target");break;case":active":o=n.active();break;case":inactive":o=!n.active();break;case":touch":o=t.is.touch();break;case":backgrounding":o=n.backgrounding();break;case":nonbackgrounding":o=!n.backgrounding()}if(!o)break}if(!o)return!1;for(var u=!0,a=0;a<r.ids.length;a++){var l=r.ids[a],c=n._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var h=!0,a=0;a<r.classes.length;a++){var d=r.classes[a];if(h=h&&n.hasClass(d),!h)break}if(!h)return!1;var p=function(e){for(var n=!0,i=0;i<r[e.name].length;i++){var o,a=r[e.name][i],s=a.operator,u=a.value,l=a.field;if(null!=s&&null!=u){var c=e.fieldValue(l),h=t.is.string(c)||t.is.number(c)?""+c:"",d=""+u,p=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),p=!0);var f=!1,v=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),f=!0),p&&(u=d.toLowerCase(),c=h.toLowerCase()),s){case"*=":o=h.search(d)>=0;break;case"$=":o=null!=new RegExp(d+"$").exec(h);break;case"^=":o=null!=new RegExp("^"+d).exec(h);break;case"=":o=c===u;break;case"!=":o=c!==u;break;case">":o=f?u>=c:c>u,v=!0;break;case">=":o=f?u>c:c>=u,v=!0;break;case"<":o=f?c>=u:u>c,v=!0;break;case"<=":o=f?c>u:u>=c,v=!0;break;default:o=!1}}else if(null!=s)switch(s){case"?":o=e.fieldTruthy(l);break;case"!":o=!e.fieldTruthy(l);break;case"^":o=e.fieldUndefined(l)}else o=!e.fieldUndefined(l);if(f&&!v&&(o=!o,v=!0),!o){n=!1;break}}return n},f=p({name:"data",fieldValue:function(t){return n._private.data[t]},fieldRef:function(t){return"element._private.data."+t},fieldUndefined:function(t){return void 0===n._private.data[t]},fieldTruthy:function(t){return n._private.data[t]?!0:!1}});if(!f)return!1;var v=p({name:"meta",fieldValue:function(t){return n[t]()},fieldRef:function(t){return"element."+t+"()"},fieldUndefined:function(t){return null==n[t]()},fieldTruthy:function(t){return n[t]()?!0:!1}});if(!v)return!1;if(null!=r.collection){var g=null!=r.collection._private.ids[n.id()];if(!g)return!1}if(null!=r.filter&&0===n.collection().filter(r.filter).size())return!1;var y=function(t,r){if(null!=t){var n=!1;if(!i.hasCompoundNodes())return!1;r=r();for(var o=0;o<r.length;o++)if(e(t,r[o])){n=!0;break}return n}return!0};return y(r.parent,function(){return n.parent()})&&y(r.ancestor,function(){return n.parents()})&&y(r.child,function(){return n.children()})&&y(r.descendant,function(){return n.descendants()})?!0:!1};t.selfn.filter=function(r){var n=this,i=r.cy();if(n._private.invalid)return new t.Collection(i);var o=function(t,r){for(var i=0;i<n.length;i++){var o=n[i];if(e(o,r))return!0}return!1};null==n._private.selectorText&&(o=function(){return!0});var a=r.filter(o);return a},t.selfn.matches=function(t){var r=this;if(r._private.invalid)return!1;for(var n=0;n<r.length;n++){var i=r[n];if(e(i,t))return!0}return!1},t.selfn.toString=t.selfn.selector=function(){for(var e="",r=function(e,r){return t.is.string(e)?r?'"'+e+'"':e:""},n=function(t){var e="";t.subject===t&&(e+="$");var o=r(t.group);e+=o.substring(0,o.length-1);for(var a=0;a<t.data.length;a++){var s=t.data[a];e+=s.value?"["+s.field+r(s.operator)+r(s.value,!0)+"]":"["+r(s.operator)+s.field+"]"}for(var a=0;a<t.meta.length;a++){var u=t.meta[a];e+="[["+u.field+r(u.operator)+r(u.value,!0)+"]]"}for(var a=0;a<t.colonSelectors.length;a++){var l=t.colonSelectors[i];e+=l}for(var a=0;a<t.ids.length;a++){var l="#"+t.ids[i];e+=l}for(var a=0;a<t.classes.length;a++){var l="."+t.classes[i];e+=l}return null!=t.parent&&(e=n(t.parent)+" > "+e),null!=t.ancestor&&(e=n(t.ancestor)+" "+e),null!=t.child&&(e+=" > "+n(t.child)),null!=t.descendant&&(e+=" "+n(t.descendant)),e},i=0;i<this.length;i++){var o=this[i];e+=n(o),this.length>1&&i<this.length-1&&(e+=", ")}return e}}(cytoscape),function(t){"use strict";t.Style=function(e){return this instanceof t.Style?t.is.core(e)?(this._private={cy:e,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void t.util.error("A style must have a core reference"):new t.Style(e)},t.style=t.Style,t.styfn=t.Style.prototype,t.fn.style=function(e,r){for(var n in e){var i=e[n];t.Style.prototype=i}},function(){var e=t.util.regex.number,r=t.util.regex.rgbaNoBackRefs,n=t.util.regex.hslaNoBackRefs,i=t.util.regex.hex3,o=t.util.regex.hex6,a=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(t){return"^"+t+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+e+"|\\w+|"+r+"|"+n+"|"+i+"|"+o+")\\s*\\,\\s*("+e+"|\\w+|"+r+"|"+n+"|"+i+"|"+o+")\\)$"};t.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"},textRotation:{enums:["none","autorotate"]}};var u=t.style.types,l=t.style.properties=[{name:"text-valign",type:u.valign},{name:"text-halign",type:u.halign},{name:"color",type:u.color},{name:"content",type:u.text},{name:"text-outline-color",type:u.color},{name:"text-outline-width",type:u.size},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size},{name:"text-border-style",type:u.borderStyle},{name:"text-background-shape",type:u.textBackgroundShape},{name:"text-transform",type:u.textTransform},{name:"text-wrap",type:u.textWrap},{name:"text-max-width",type:u.size},{name:"font-family",type:u.fontFamily},{name:"font-style",type:u.fontStyle},{name:"font-weight",type:u.fontWeight},{name:"font-size",type:u.size},{name:"min-zoomed-font-size",type:u.size},{name:"edge-text-rotation",type:u.textRotation},{name:"display",type:u.display},{name:"visibility",type:u.visibility},{name:"opacity",type:u.zeroOneNumber},{name:"z-index",type:u.nonNegativeInt},{name:"overlay-padding",type:u.size},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber},{name:"shadow-blur",type:u.size},{name:"shadow-color",type:u.color},{name:"shadow-opacity",type:u.zeroOneNumber},{name:"shadow-offset-x",type:u.number},{name:"shadow-offset-y",type:u.number},{name:"text-shadow-blur",type:u.size},{name:"text-shadow-color",type:u.color},{name:"text-shadow-opacity",type:u.zeroOneNumber},{name:"text-shadow-offset-x",type:u.number},{name:"text-shadow-offset-y",type:u.number},{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"height",type:u.autoSize},{name:"width",type:u.autoSize},{name:"shape",type:u.nodeShape},{name:"background-color",type:u.color},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size},{name:"border-style",type:u.borderStyle},{name:"background-image",type:u.url},{name:"background-image-opacity",type:u.zeroOneNumber},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"padding-left",type:u.size},{name:"padding-right",type:u.size},{name:"padding-top",type:u.size},{name:"padding-bottom",type:u.size},{name:"position",type:u.position},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels},{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"control-point-step-size",type:u.size},{name:"control-point-distance",type:u.number},{name:"control-point-weight",type:u.zeroOneNumber},{name:"curve-style",type:u.curveStyle},{name:"haystack-radius",type:u.zeroOneNumber},{name:"source-arrow-shape",type:u.arrowShape},{name:"target-arrow-shape",type:u.arrowShape},{name:"mid-source-arrow-shape",type:u.arrowShape},{name:"mid-target-arrow-shape",type:u.arrowShape},{name:"source-arrow-color",type:u.color},{name:"target-arrow-color",type:u.color},{name:"mid-source-arrow-color",type:u.color},{name:"mid-target-arrow-color",type:u.color},{name:"source-arrow-fill",type:u.arrowFill},{name:"target-arrow-fill",type:u.arrowFill},{name:"mid-source-arrow-fill",type:u.arrowFill},{name:"mid-target-arrow-fill",type:u.arrowFill},{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}];t.style.pieBackgroundN=16,l.push({name:"pie-size",type:u.bgSize});for(var c=1;c<=t.style.pieBackgroundN;c++)l.push({name:"pie-"+c+"-background-color",type:u.color}),l.push({name:"pie-"+c+"-background-size",type:u.percent}),l.push({name:"pie-"+c+"-background-opacity",type:u.zeroOneNumber});for(var c=0;c<l.length;c++){var h=l[c];l[h.name]=h}}(),t.styfn.addDefaultStylesheet=function(){var t="Helvetica",e="normal",r="normal",n="#000",i="none",o=16,a=9999;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:n,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":i,"text-wrap":"none","text-max-width":a,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":t,"font-style":e,"font-weight":r,"font-size":o,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.styfn.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},t.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},t.styfn.core=function(){return this._private.coreStyle},t.styfn.parse=function(e,r,n,i){e=t.util.camel2dash(e);var o=t.style.properties[e],a=r,s=t.style.types;if(!o)return null;if(void 0===r||null===r)return null;var u=t.is.string(r);u&&(r=t.util.trim(r));var l=o.type;if(!l)return null;if(n&&(""===r||null===r))return{name:e,value:r,bypass:!0,deleteBypass:!0};var c=e.match(/pie-(\d+)-background-size/);if(t.is.fn(r))return{name:e,value:r,strValue:"fn",mapped:s.fn,bypass:n,hasPie:c};var h,d,p,f,v,g;if(!u||i);else{if((h=new RegExp(s.data.regex).exec(r))||(p=new RegExp(s.layoutData.regex).exec(r))||(v=new RegExp(s.scratch.regex).exec(r))){if(n)return!1;var y;return y=h?s.data:p?s.layoutData:s.scratch,h=h||p||v,{name:e,value:h,strValue:""+r,mapped:y,field:h[1],bypass:n,hasPie:c}}if((d=new RegExp(s.mapData.regex).exec(r))||(f=new RegExp(s.mapLayoutData.regex).exec(r))||(g=new RegExp(s.mapScratch.regex).exec(r))){if(n)return!1;var y;if(y=d?s.mapData:f?s.mapLayoutData:s.mapScratch,d=d||f||g,!l.color&&!l.number)return!1;var m=this.parse(e,d[4]);if(!m||m.mapped)return!1;var b=this.parse(e,d[5]);if(!b||b.mapped)return!1;if(m.value===b.value)return!1;if(l.color){var w=m.value,x=b.value,_=!(w[0]!==x[0]||w[1]!==x[1]||w[2]!==x[2]||w[3]!==x[3]&&(null!=w[3]&&1!==w[3]||null!=x[3]&&1!==x[3]));if(_)return!1}return{name:e,value:d,strValue:""+r,mapped:y,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:m.value,valueMax:b.value,bypass:n,hasPie:c}}}if(l.number){var E,S="px";if(l.units&&(E=l.units),l.implicitUnits&&(S=l.implicitUnits),!l.unitless)if(u){var T="px|em"+(l.allowPercent?"|\\%":"");E&&(T=E);var k=r.match("^("+t.util.regex.number+")("+T+")?$");k&&(r=k[1],E=k[2]||S)}else(!E||l.implicitUnits)&&(E=S);if(r=parseFloat(r),isNaN(r)&&void 0===l.enums)return null;if(isNaN(r)&&void 0!==l.enums){r=a;for(var P=0;P<l.enums.length;P++){var C=l.enums[P];if(C===r)return{name:e,value:r,strValue:""+r,bypass:n}}return null}if(l.integer&&!t.is.integer(r))return null;if(void 0!==l.min&&r<l.min||void 0!==l.max&&r>l.max)return null;var D={name:e,value:r,strValue:""+r+(E?E:""),units:E,bypass:n,hasPie:c&&null!=r&&0!==r&&""!==r};return l.unitless||"px"!==E&&"em"!==E||(D.pxValue="px"!==E&&E?this.getEmSizeInPixels()*r:r),("ms"===E||"s"===E)&&(D.msValue="ms"===E?r:1e3*r),D}if(l.propList){var N=[],O=""+r;if("none"===O);else{for(var M=O.split(","),P=0;P<M.length;P++){var L=t.util.trim(M[P]);t.style.properties[L]&&N.push(L)}if(0===N.length)return null}return{name:e,value:N,strValue:0===N.length?"none":N.join(", "),bypass:n}}if(l.color){var I=t.util.color2tuple(r);return I?{name:e,value:I,strValue:""+r,bypass:n}:null}if(l.enums){for(var P=0;P<l.enums.length;P++){var C=l.enums[P];if(C===r)return{name:e,value:r,strValue:""+r,bypass:n}}return null}if(l.regex){var R=new RegExp(l.regex),B=R.exec(r);return B?{name:e,value:B,strValue:""+r,bypass:n}:null}return l.string?{name:e,value:r,strValue:""+r,bypass:n}:null},t.styfn.selector=function(e){var r="core"===e?null:new t.Selector(e),n=this.length++;return this[n]={selector:r,properties:[],mappedProperties:[],index:n},this},t.styfn.css=function(){
var e=arguments;switch(e.length){case 1:for(var r=e[0],n=0;n<t.style.properties.length;n++){var i=t.style.properties[n],o=r[i.name];void 0===o&&(o=r[t.util.dash2camel(i.name)]),void 0!==o&&this.cssRule(i.name,o)}break;case 2:this.cssRule(e[0],e[1])}return this},t.styfn.style=t.styfn.css,t.styfn.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.hasPie&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this}}(cytoscape),function(t){"use strict";t.styfn.apply=function(t){var e=this;e._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var r=0;r<t.length;r++){var n=t[r],i=e.getContextMeta(n),o=e.getContextStyle(i),a=e.applyContextStyle(i,o,n);e.updateTransitions(n,a.diffProps),e.updateStyleHints(n)}e._private.newStyle=!1},t.styfn.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=t+"-"+e,o=n[i];if(o)return o;for(var a=[],s={},u=0;u<r.length;u++){var l=r[u],c="t"===t[u],h="t"===e[u],d=c!==h,p=l.mappedProperties.length>0;if(d||p){var f;d&&p?f=l.properties:d?f=l.properties:p&&(f=l.mappedProperties);for(var v=0;v<f.length;v++){for(var g=f[v],y=g.name,m=!1,b=u+1;b<r.length;b++){var w=r[b],x="t"===e[b];if(x&&(m=null!=w.properties[g.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return n[i]=a,a},t.styfn.getContextMeta=function(t){var e,r=this,n="",i=t._private.styleCxtKey||"";r._private.newStyle&&(i="");for(var o=0;o<r.length;o++){var a=r[o],s=a.selector&&a.selector.matches(t);n+=s?"t":"f"}return e=r.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e}},t.styfn.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},o=0;o<r.length;o++){var a=r[o],s="t"===e[o];if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u],c=i[l.name]=l;c.context=a}}return n[e]=i,i},t.styfn.applyContextStyle=function(t,e,r){for(var n=this,i=t.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=e[s],l=r._private.style[s];if(u&&l!==u){var c=o[s]={prev:l};n.applyParsedProperty(r,u),c.next=r._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},t.styfn.updateStyleHints=function(e){var r=e._private,n=this,i=r.style,o=!1;if("nodes"===r.group&&n._private.hasPie)for(var a=1;a<=t.style.pieBackgroundN;a++){var s=r.style["pie-"+a+"-background-size"].value;if(s>0){o=!0;break}}r.hasPie=o;var u=i["text-transform"].strValue,l=i.content.strValue,c=i["font-style"].strValue,s=i["font-size"].pxValue+"px",h=i["font-family"].strValue,d=i["font-weight"].strValue,p=i["text-valign"].strValue,f=i["text-valign"].strValue,v=i["text-outline-width"].pxValue,g=i["text-wrap"].strValue,y=i["text-max-width"].pxValue;r.labelKey=c+"$"+s+"$"+h+"$"+d+"$"+l+"$"+u+"$"+p+"$"+f+"$"+v+"$"+g+"$"+y,r.fontKey=c+"$"+d+"$"+s+"$"+h;var m=i.width.pxValue,b=i.height.pxValue,w=i["border-width"].pxValue;if(r.boundingBoxKey=m+"$"+b+"$"+w,"edges"===e._private.group){var x=i["control-point-step-size"].pxValue,_=i["control-point-distance"]?i["control-point-distance"].pxValue:void 0,E=i["control-point-weight"].value,S=i["curve-style"].strValue;r.boundingBoxKey+="$"+x+"$"+_+"$"+E+"$"+S}r.styleKey=Date.now()},t.styfn.applyParsedProperty=function(e,r){var n,i,o=r,a=e._private.style,s=t.style.types,u=t.style.properties[o.name].type,l=o.bypass,c=a[o.name],h=c&&c.bypass,d=e._private;if(("height"===r.name||"width"===r.name)&&e.isNode()){if("auto"===r.value&&!e.isParent())return!1;"auto"!==r.value&&e.isParent()&&(o=r=this.parse(r.name,"auto",l))}if(l&&o.deleteBypass){var p=a[o.name];return p?p.bypass&&p.bypassed?(a[o.name]=p.bypassed,!0):!1:!0}var f=function(){t.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:case s.mapLayoutData:case s.mapScratch:var n,v=o.mapped===s.mapLayoutData,g=o.mapped===s.mapScratch,y=o.field.split(".");n=g||v?d.scratch:d.data;for(var m=0;m<y.length&&n;m++){var b=y[m];n=n[b]}var w;if(w=t.is.number(n)?(n-o.fieldMin)/(o.fieldMax-o.fieldMin):0,0>w?w=0:w>1&&(w=1),u.color){var x=o.valueMin[0],_=o.valueMax[0],E=o.valueMin[1],S=o.valueMax[1],T=o.valueMin[2],k=o.valueMax[2],P=null==o.valueMin[3]?1:o.valueMin[3],C=null==o.valueMax[3]?1:o.valueMax[3],D=[Math.round(x+(_-x)*w),Math.round(E+(S-E)*w),Math.round(T+(k-T)*w),Math.round(P+(C-P)*w)];i={bypass:o.bypass,name:o.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!u.number)return!1;var N=o.valueMin+(o.valueMax-o.valueMin)*w;i=this.parse(o.name,N,o.bypass,!0)}i||(i=this.parse(o.name,c.strValue,o.bypass,!0)),i||f(),i.mapping=o,o=i;break;case s.data:case s.layoutData:case s.scratch:var n,v=o.mapped===s.layoutData,g=o.mapped===s.scratch,y=o.field.split(".");if(n=g||v?d.scratch:d.data)for(var m=0;m<y.length;m++){var b=y[m];n=n[b]}if(i=this.parse(o.name,n,o.bypass,!0),!i){var O=c?c.strValue:"";i=this.parse(o.name,O,o.bypass,!0)}i||f(),i.mapping=o,o=i;break;case s.fn:var M=o.value,L=M(e);i=this.parse(o.name,L,o.bypass,!0),i.mapping=o,o=i;break;case void 0:break;default:return!1}return l?(o.bypassed=h?c.bypassed:c,a[o.name]=o):h?c.bypassed=o:a[o.name]=o,!0},t.styfn.update=function(){var t=this._private.cy,e=t.elements();e.updateStyle()},t.styfn.updateMappers=function(e){for(var r=0;r<e.length;r++){for(var n=e[r],i=n._private.style,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(n,u)}}this.updateStyleHints(n)}},t.styfn.updateTransitions=function(e,r,n){var i=this,o=e._private.style,a=o["transition-property"].value,s=o["transition-duration"].msValue,u=o["transition-delay"].msValue,l={};if(a.length>0&&s>0){for(var c=!1,h=0;h<a.length;h++){var d=a[h],p=o[d],f=r[d];if(f){var v=f.prev,g=v,y=null!=f.next?f.next:p,m=!1;g&&(t.is.number(g.pxValue)&&t.is.number(y.pxValue)?m=g.pxValue!==y.pxValue:t.is.number(g.value)&&t.is.number(y.value)?m=g.value!==y.value:t.is.array(g.value)&&t.is.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2]),m&&(l[d]=y.strValue,this.applyBypass(e,d,g.strValue),c=!0))}}if(!c)return;e._private.transitioning=!0,e.stop(),u>0&&e.delay(u),e.animate({css:l},{duration:s,queue:!1,complete:function(){n||i.removeBypasses(e,a),e._private.transitioning=!1}})}else e._private.transitioning&&(e.stop(),this.removeBypasses(e,a),e._private.transitioning=!1)}}(cytoscape),function(t){"use strict";t.styfn.applyBypass=function(e,r,n,i){var o=[],a=!0;if("*"===r||"**"===r){if(void 0!==n)for(var s=0;s<t.style.properties.length;s++){var u=t.style.properties[s],r=u.name,l=this.parse(r,n,!0);l&&o.push(l)}}else if(t.is.string(r)){var l=this.parse(r,n,!0);l&&o.push(l)}else{if(!t.is.plainObject(r))return!1;var c=r;i=n;for(var s=0;s<t.style.properties.length;s++){var u=t.style.properties[s],r=u.name,n=c[r];if(void 0===n&&(n=c[t.util.dash2camel(r)]),void 0!==n){var l=this.parse(r,n,!0);l&&o.push(l)}}}if(0===o.length)return!1;for(var h=!1,s=0;s<e.length;s++){for(var d,p=e[s],f=p._private.style,v={},g=0;g<o.length;g++){var u=o[g];if(i){var y=f[u.name];d=v[u.name]={prev:y}}h=this.applyParsedProperty(p,u)||h,i&&(d.next=f[u.name])}i&&this.updateTransitions(p,v,a)}return h},t.styfn.overrideBypass=function(e,r,n){for(var i=0;i<e.length;i++){var o=e[i],a=o._private.style[t.util.camel2dash(r)];a.bypass?(a.value=n,a.pxValue=n):this.applyBypass(o,r,n)}},t.styfn.removeAllBypasses=function(e,r){for(var n=!0,i=0;i<e.length;i++){for(var o=e[i],a={},s=o._private.style,u=0;u<t.style.properties.length;u++){var l=t.style.properties[u],c=l.name,h="",d=this.parse(c,h,!0),p=s[l.name],f=a[l.name]={prev:p};this.applyParsedProperty(o,d),f.next=s[l.name]}r&&this.updateTransitions(o,a,n)}},t.styfn.removeBypasses=function(e,r,n){for(var i=!0,o=0;o<e.length;o++){for(var a=e[o],s={},u=a._private.style,l=0;l<r.length;l++){var c=r[l],h=t.style.properties[c],d="",p=this.parse(c,d,!0),f=u[h.name],v=s[h.name]={prev:f};this.applyParsedProperty(a,p),v.next=u[h.name]}n&&this.updateTransitions(a,s,i)}}}(cytoscape),function(t,e){"use strict";t.styfn.getEmSizeInPixels=function(){var t=this._private.cy,r=t.container();if(e&&r&&e.getComputedStyle){var n=e.getComputedStyle(r).getPropertyValue("font-size"),i=parseFloat(n);return i}return 1},t.styfn.containerCss=function(t){var r=this._private.cy,n=r.container();return e&&n&&e.getComputedStyle?e.getComputedStyle(n).getPropertyValue(t):void 0},t.styfn.containerProperty=function(t){var e=this.containerCss(t),r=this.parse(t,e);return r},t.styfn.containerPropertyAsString=function(t){var e=this.containerProperty(t);return e?e.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.styfn.getRenderedStyle=function(e){var e=e[0];if(e){for(var r={},n=e._private.style,i=this._private.cy,o=i.zoom(),a=0;a<t.style.properties.length;a++){var s=t.style.properties[a],u=n[s.name];if(u){var l=u.unitless?u.strValue:u.pxValue*o+"px";r[s.name]=l,r[t.util.dash2camel(s.name)]=l}}return r}},t.styfn.getRawStyle=function(e){var e=e[0];if(e){for(var r={},n=e._private.style,i=0;i<t.style.properties.length;i++){var o=t.style.properties[i],a=n[o.name];a&&(r[o.name]=a.strValue,r[t.util.dash2camel(o.name)]=a.strValue)}return r}},t.styfn.getValueStyle=function(e,r){r=r||{};var n,i=r.array?[]:{};if(n=t.is.element(e)?e._private.style:e)for(var o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=n[a.name]||n[t.util.dash2camel(a.name)];void 0===s||t.is.plainObject(s)||(s=this.parse(a.name,s)),s&&(r.array?i.push(s):(i[a.name]=s,i[t.util.dash2camel(a.name)]=s))}return i}}(cytoscape),function(t){"use strict";t.style.applyFromJson=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.selector,o=n.style||n.css;t.selector(i);for(var a in o){var s=o[a];t.css(a,s)}}return t},t.style.fromJson=function(e,r){var n=new t.Style(e);return t.style.applyFromJson(n,r),n},t.styfn.fromJson=function(e){var r=this;return r.resetToDefault(),t.style.applyFromJson(r,e),r},t.styfn.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,i=r.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:o})}return t}}(cytoscape),function(t){"use strict";t.style.applyFromString=function(e,r){function n(){u=u.length>o.length?u.substr(o.length):""}function i(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=""+r;for(u=u.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var l=u.match(/^\s*$/);if(l)break;var c=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){t.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}o=c[0];var h=c[1];if("core"!==h){var d=new t.Selector(h);if(d._private.invalid){t.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),n();continue}}var p=c[2],f=!1;a=p;for(var v=[];;){var l=a.match(/^\s*$/);if(l)break;var g=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){t.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),f=!0;break}s=g[0];var y=g[1],m=g[2],b=t.style.properties[y];if(b){var w=e.parse(y,m);w?(v.push({name:y,val:m}),i()):(t.util.error("Skipping property: Invalid property definition in: "+s),i())}else t.util.error("Skipping property: Invalid property name in: "+s),i()}if(f){n();break}e.selector(h);for(var x=0;x<v.length;x++){var b=v[x];e.css(b.name,b.val)}n()}return e},t.style.fromString=function(e,r){var n=new t.Style(e);return t.style.applyFromString(n,r),n},t.styfn.fromString=function(e){var r=this;return r.resetToDefault(),t.style.applyFromString(r,e),r}}(cytoscape),function(t){"use strict";t.stylesheet=t.Stylesheet=function(){return this instanceof t.Stylesheet?void(this.length=0):new t.Stylesheet},t.sheetfn=t.Stylesheet.prototype,t.sheetfn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this},t.sheetfn.css=function(e,r){var n=this.length-1;if(t.is.string(e))this[n].properties.push({name:e,value:r});else if(t.is.plainObject(e))for(var i=e,o=0;o<t.style.properties.length;o++){var a=t.style.properties[o],s=i[a.name];if(void 0===s&&(s=i[t.util.dash2camel(a.name)]),void 0!==s){var e=a.name,r=s;this[n].properties.push({name:e,value:r})}}return this},t.sheetfn.style=t.sheetfn.css,t.sheetfn.generateStyle=function(e){for(var r=new t.Style(e),n=0;n<this.length;n++){var i=this[n],o=i.selector,a=i.properties;r.selector(o);for(var s=0;s<a.length;s++){var u=a[s];r.css(u.name,u.value)}}return r}}(cytoscape),function(t,e){"use strict";t.Thread=function(e){return this instanceof t.Thread?(this._private={requires:[],files:[],queue:null,pass:[]},void(e&&this.run(e))):new t.Thread(e)},t.thread=t.Thread,t.thdfn=t.Thread.prototype,t.fn.thread=function(e,r){for(var n in e){var i=e[n];t.Thread.prototype[n]=i}};var r=function(e){var r=t.is.fn(e)?e.toString():'JSON.parse("'+JSON.stringify(e)+'")';return r},n=function(e){var i,a;t.is.object(e)&&e.fn?(i=o(e.fn,e.name),a=e.name,e=e.fn):t.is.fn(e)?(i=e.toString(),a=e.name):t.is.string(e)?i=e:t.is.object(e)&&(i=e.proto?"":e.name+" = {};",a=e.name,e=e.obj),i+="\n";var s=function(t,e){if(t.prototype){var r=!1;for(var o in t.prototype){r=!0;break}r&&(i+=n({name:e,obj:t,proto:!0},t))}};if(e.prototype&&null!=a)for(var u in e.prototype){var l="",c=e.prototype[u],h=r(c),d=a+".prototype."+u;l+=d+" = "+h+";\n",l&&(i+=l),s(c,d)}if(!t.is.string(e))for(var u in e){var p="";if(e.hasOwnProperty(u)){var c=e[u],h=r(c),d=a+'["'+u+'"]';p+=d+" = "+h+";\n"}p&&(i+=p),s(c,d)}return i},i=function(e){return t.is.string(e)&&e.match(/\.js$/)};t.fn.thread({require:function(e,r){return i(e)?(this._private.files.push(e),this):(r&&(t.is.fn(e)?(r=r||e.name,e={name:r,fn:e}):e={name:r,obj:e}),this._private.requires.push(e),this)},pass:function(t){return this._private.pass.push(t),this},run:function(r,i){var o=this,a=this._private;if(i=i||a.pass.shift(),a.stopped)return void t.util.error("Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.");if(a.running)return a.queue=a.queue.then(function(){return o.run(r,i)});var s=null!=e,u="undefined"!=typeof module;o.trigger("run");var l=new t.Promise(function(l,c){a.running=!0;var h=a.ran,d=t.is.string(r)?r:r.toString(),p="\n"+a.requires.map(function(t){return n(t)}).concat(a.files.map(function(t){if(s){var r=function(t){return t.match(/^\.\//)||t.match(/^\.\./)?e.location.origin+e.location.pathname+t:t.match(/^\//)?e.location.origin+"/"+t:t};return'importScripts("'+r(t)+'");'}return u?'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );':void 0})).concat(["( function(){","var ret = ("+d+")("+JSON.stringify(i)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(a.requires=[],a.files=[],s){var f,v;if(!h){var g=p+"";p=["function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),p+=g,f=new Blob([p],{type:"application/javascript"}),v=e.URL.createObjectURL(f)}var y=a.webworker=a.webworker||new Worker(v);h&&y.postMessage({$$eval:p});var m;y.addEventListener("message",m=function(e){var r=t.is.object(e)&&t.is.object(e.data);r&&"$$resolve"in e.data?(y.removeEventListener("message",m),l(e.data.$$resolve)):r&&"$$reject"in e.data?(y.removeEventListener("message",m),c(e.data.$$reject)):o.trigger(new t.Event(e,{type:"message",message:e.data}))},!1),h||y.postMessage("$$start")}else if(u){var m,b=require("path"),w=require("child_process"),x=a.child=a.child||w.fork(b.join(__dirname,"thread-node-fork"));x.on("message",m=function(e){t.is.object(e)&&"$$resolve"in e?(x.removeListener("message",m),l(e.$$resolve)):t.is.object(e)&&"$$reject"in e?(x.removeListener("message",m),c(e.$$reject)):o.trigger(new t.Event({},{type:"message",message:e}))}),x.send({$$eval:p})}else t.error("Tried to create thread but no underlying tech found!")}).then(function(t){return a.running=!1,a.ran=!0,o.trigger("ran"),t});return null==a.queue&&(a.queue=l),l},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var o=function(t,e){var r=t.toString();return r=r.replace(/function.*\(/,"function "+e+"(")},a=function(t){return t=t||{},function(e,r){var n=o(e,"_$_$_"+t.name);return this.require(n),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(r):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};t.fn.thread({reduce:a({name:"reduce"}),reduceRight:a({name:"reduceRight"}),map:a({name:"map"})});var s=t.thdfn;s.promise=s.run,s.terminate=s.halt=s.stop,s.include=s.require,t.worker=t.Worker=t.Thread,t.fn.thread({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.thdfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.Fabric=function(e){if(!(this instanceof t.Fabric))return new t.Fabric(e);this._private={pass:[]};var r=4;t.is.number(e),e="undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:"undefined"!=typeof module?require("os").cpus().length:r;for(var n=0;e>n;n++)this[n]=t.Thread();this.length=e},t.fabric=t.Fabric,t.fabfn=t.Fabric.prototype,t.fn.fabric=function(e,r){for(var n in e){var i=e[n];t.Fabric.prototype[n]=i}},t.fn.fabric({require:function(t,e){for(var r=0;r<this.length;r++){var n=this[r];n.require(t,e)}return this},random:function(){var t=Math.round((this.length-1)*Math.random()),e=this[t];return e},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){var r=this[e];r.message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){var e=this[t];e.stop()}return this},pass:function(e){var r=this._private.pass;return t.is.array(e)?r.push(e):t.util.error("Only arrays or collections may be used with fabric.pass()"),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(e){for(var r=this,n=r._private,i=r.spreadSize(),o=n.pass.shift().concat([]),a=[],s=0;s<this.length;s++){var u=this[s],l=o.splice(0,i),c=u.pass(l).run(e);a.push(c);var h=0===o.length;if(h)break}return t.Promise.all(a).then(function(t){for(var e=[],r=0,n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++){var a=i[o];e[r++]=a}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],r=resolve;resolve=function(t){e.push(t)};for(var n=0;n<t.length;n++){var i=e.length,o=_$_$_fabmap(t[n]),a=i===e.length;a&&e.push(o)}return resolve=r,e})},filter:function(t){var e=this._private,r=e.pass[0];return this.map(t).then(function(t){for(var e=[],n=0;n<r.length;n++){var i=r[n],o=t[n];o&&e.push(i)}return e})},sort:function(t){var e=this,r=this._private.pass[0].length,n=this.spreadSize();return t=t||function(t,e){return e>t?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var i=function(n,i,o){i=Math.min(i,r),o=Math.min(o,r);for(var a=n,s=i,u=[],l=a;o>l;l++){var c=e[n],h=e[i];s>n&&(i>=o||t(c,h)<=0)?(u.push(c),n++):(u.push(h),i++)}for(var l=0;l<u.length;l++){var d=a+l;e[d]=u[l]}},o=n;r>o;o*=2)for(var a=0;r>a;a+=2*o)i(a,a+o,a+2*o);return e})}});var r=function(t){return t=t||{},function(e,r){var n=this._private.pass.shift();return this.random().pass(n)[t.threadFn](e,r)}};t.fn.fabric({randomMap:r({threadFn:"map"}),reduce:r({threadFn:"reduce"}),reduceRight:r({threadFn:"reduceRight"})});var n=t.fabfn;n.promise=n.run,n.terminate=n.halt=n.stop,n.include=n.require,t.fn.fabric({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.fabfn)}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";var r={},n=t.util.copy(r);t.defaults=function(e){r=t.util.extend({},n,e)},t.fn.core=function(e,r){for(var n in e){var i=e[n];t.Core.prototype[n]=i}},t.Core=function(n){if(!(this instanceof t.Core))return new t.Core(n);var i=this;n=t.util.extend({},r,n);var o=n.container,a=o?o._cyreg:null;if(a=a||{},a&&a.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);a.cy.notify({type:"destroy"}),a={}}var s=a.readies=a.readies||[];o&&(o._cyreg=a),a.cy=i;var u=void 0!==e&&void 0!==o&&!n.headless,l=n;l.layout=t.util.extend({name:u?"grid":"null"},l.layout),l.renderer=t.util.extend({name:u?"canvas":"null"},l.renderer);var c=function(t,e,r){return void 0!==e?e:void 0!==r?r:t},h=this._private={container:l.container,ready:!1,initrender:!1,options:l,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:t.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,l.zoomingEnabled),userZoomingEnabled:c(!0,l.userZoomingEnabled),panningEnabled:c(!0,l.panningEnabled),userPanningEnabled:c(!0,l.userPanningEnabled),boxSelectionEnabled:c(!1,l.boxSelectionEnabled),autolock:c(!1,l.autolock,l.autolockNodes),autoungrabify:c(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:c(!1,l.autounselectify),styleEnabled:void 0===l.styleEnabled?u:l.styleEnabled,zoom:t.is.number(l.zoom)?l.zoom:1,pan:{x:t.is.plainObject(l.pan)&&t.is.number(l.pan.x)?l.pan.x:0,y:t.is.plainObject(l.pan)&&t.is.number(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},d=l.selectionType;h.selectionType=void 0===d||"additive"!==d&&"single"!==d?"single":d,t.is.number(l.minZoom)&&t.is.number(l.maxZoom)&&l.minZoom<l.maxZoom?(h.minZoom=l.minZoom,h.maxZoom=l.maxZoom):t.is.number(l.minZoom)&&void 0===l.maxZoom?h.minZoom=l.minZoom:t.is.number(l.maxZoom)&&void 0===l.minZoom&&(h.maxZoom=l.maxZoom);var p=function(e){for(var r=!1,n=0;n<f.length;n++){var i=f[n];if(t.is.promise(i)){r=!0;break}}return r?t.Promise.all(f).then(e):void e(f)},f=[l.style,l.elements];p(function(e){var r=e[0],n=e[1];h.styleEnabled&&i.setStyle(r),i.initRenderer(t.util.extend({hideEdgesOnViewport:l.hideEdgesOnViewport,hideLabelsOnViewport:l.hideLabelsOnViewport,textureOnViewport:l.textureOnViewport,wheelSensitivity:t.is.number(l.wheelSensitivity)&&l.wheelSensitivity>0?l.wheelSensitivity:1,motionBlur:void 0===l.motionBlur?!0:l.motionBlur,motionBlurOpacity:void 0===l.motionBlurOpacity?.05:l.motionBlurOpacity,pixelRatio:t.is.number(l.pixelRatio)&&l.pixelRatio>0?l.pixelRatio:"auto"===l.pixelRatio?void 0:1,desktopTapThreshold:void 0===l.desktopTapThreshold?4:l.desktopTapThreshold,touchTapThreshold:void 0===l.touchTapThreshold?8:l.touchTapThreshold},l.renderer)),l.initrender&&(i.on("initrender",l.initrender),i.on("initrender",function(){i._private.initrender=!0})),i.load(n,function(){i.startAnimationLoop(),i._private.ready=!0,t.is.fn(l.ready)&&i.on("ready",l.ready);for(var e=0;e<s.length;e++){var r=s[e];i.on("ready",r)}a&&(a.readies=[]),i.trigger("ready")},l.done)})},t.corefn=t.Core.prototype,t.fn.core({isReady:function(){return this._private.ready},ready:function(t){this.isReady()?this.trigger("ready",[],t):this.on("ready",t)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var t=this.container(),e=t.parentNode;if(e)try{e.removeChild(t)}catch(r){}return this},getElementById:function(e){var r=this._private.id2index[e];return void 0!==r?this._private.elements[r]:new t.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){for(var e=this._private.elements,r=this._private.id2index,n=0;n<t.length;n++){var i=t[n],o=i._private.data.id,a=r[o],s=void 0!==a;s||(a=e.length,e.push(i),r[o]=a,i._private.index=a)}return this},removeFromPool:function(t){for(var e=this._private.elements,r=this._private.id2index,n=0;n<t.length;n++){var i=t[n],o=i._private.data.id,a=r[o],s=void 0!==a;if(s){this._private.id2index[o]=void 0,e.splice(a,1);for(var u=a;u<e.length;u++){var l=e[u]._private.data.id;r[l]--,e[u]._private.index--}}}},container:function(){return this._private.container},options:function(){return t.util.copy(this._private.options)},json:function(t){var e={},r=this;return e.elements={},r.elements().each(function(t,r){var n=r.group();e.elements[n]||(e.elements[n]=[]),e.elements[n].push(r.json())}),this._private.styleEnabled&&(e.style=r.style().json()),e.zoomingEnabled=r._private.zoomingEnabled,e.userZoomingEnabled=r._private.userZoomingEnabled,e.zoom=r._private.zoom,e.minZoom=r._private.minZoom,e.maxZoom=r._private.maxZoom,e.panningEnabled=r._private.panningEnabled,e.userPanningEnabled=r._private.userPanningEnabled,e.pan=r._private.pan,e.boxSelectionEnabled=r._private.boxSelectionEnabled,e.layout=r._private.options.layout,e.renderer=r._private.options.renderer,e.hideEdgesOnViewport=r._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=r._private.options.hideLabelsOnViewport,e.textureOnViewport=r._private.options.textureOnViewport,e.wheelSensitivity=r._private.options.wheelSensitivity,e.motionBlur=r._private.options.motionBlur,e},defer:function(t){var e=this,r=e._private,n=r.deferredExecQueue;n.push(t),r.deferredTimeout||(r.deferredTimeout=setTimeout(function(){for(;n.length>0;)n.shift()();r.deferredTimeout=null},0))}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";function r(t){var e=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?r:t;setTimeout(e,9,t)}t.fn.core({add:function(e){var r,n=this;if(t.is.elementOrCollection(e)){var i=e;if(i._private.cy===n)r=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}r=new t.Collection(n,o)}}else if(t.is.array(e)){var o=e;r=new t.Collection(n,o)}else if(t.is.plainObject(e)&&(t.is.array(e.nodes)||t.is.array(e.edges))){for(var u=e,o=[],l=["nodes","edges"],a=0,c=l.length;c>a;a++){var h=l[a],d=u[h];if(t.is.array(d))for(var p=0,f=d.length;f>p;p++){var v=d[p];v.group=h,o.push(v)}}r=new t.Collection(n,o)}else{var v=e;r=new t.Element(n,v).collection()}return r},remove:function(e){if(t.is.elementOrCollection(e))e=e;else if(t.is.string(e)){var r=e;e=this.$(r)}return e.remove()},load:function(n,i,o){function a(){s.one("layoutready",function(t){s.notifications(!0),s.trigger(t),s.notify({type:"load",collection:s.elements()}),s.one("load",i),s.trigger("load")}).one("layoutstop",function(){s.one("done",o),s.trigger("done")});var e=t.util.extend({},s._private.options.layout);e.eles=s.$(),s.layout(e)}var s=this;s.notifications(!1);var u=s.elements();return u.length>0&&u.remove(),null!=n&&(t.is.plainObject(n)||t.is.array(n))&&s.add(n),e?r(a):a(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(t,e){"use strict";t.fn.core({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},startAnimationLoop:function(){function r(){t.util.requestAnimationFrame(function(t){n(t),r()})}function n(e){function r(r,n){var s=r._private.animation.current,u=r._private.animation.queue,l=!1;if(0===s.length){var c=u.length>0?u.shift():null;c&&(c.callTime=e,s.push(c))}for(var h=[],d=s.length-1;d>=0;d--){var p=s[d];p.started||i(r,p),o(r,p,e,n),p.done&&(h.push(p),s.splice(d,1)),l=!0}for(var d=0;d<h.length;d++){var p=h[d],f=p.params.complete;t.is.fn(f)&&f.apply(r,[e])}return n||0!==s.length||0!==u.length||a.push(r),l}e=+new Date;for(var n=u._private.aniEles,a=[],s=0;s<n.length;s++){var l=n[s];r(l)}var c=r(u,!0);if(n.length>0||c){var h;if(n.length>0){var d=n.updateCompoundBounds();h=d.length>0?n.add(d):n}u.notify({type:"draw",collection:h})}n.unmerge(a)}function i(e,r){var n=t.is.core(e),i=!n,o=e,a=u._private.style;if(i)var s=o._private.position,l={x:s.x,y:s.y},c=a.getValueStyle(o);if(n)var h=u._private.pan,d={x:h.x,y:h.y},p=u._private.zoom;r.started=!0,r.startTime=Date.now(),r.startPosition=l,r.startStyle=c,r.startPan=d,r.startZoom=p}function o(e,r,n,i){var o,l=u._private.style,c=r.properties,h=r.params,d=r.startTime,p=!i;if(o=0===r.duration?1:Math.min(1,(n-d)/r.duration),0>o?o=0:o>1&&(o=1),null==c.delay){var f=r.startPosition,v=c.position,g=e._private.position;v&&p&&(a(f.x,v.x)&&(g.x=s(f.x,v.x,o)),a(f.y,v.y)&&(g.y=s(f.y,v.y,o)));var y=r.startPan,m=c.pan,b=e._private.pan,w=null!=m&&i;w&&(a(y.x,m.x)&&(b.x=s(y.x,m.x,o)),a(y.y,m.y)&&(b.y=s(y.y,m.y,o)),e.trigger("pan"));var x=r.startZoom,_=c.zoom,E=null!=_&&i;E&&(a(x,_)&&(e._private.zoom=s(x,_,o)),e.trigger("zoom")),(w||E)&&e.trigger("viewport");var S=c.style||c.css;if(S&&p)for(var T=0;T<S.length;T++){var k=S[T].name,P=S[T],C=P,D=r.startStyle[k],N=s(D,C,o);l.overrideBypass(e,k,N)}}return t.is.fn(h.step)&&h.step.apply(e,[n]),o>=1&&(r.done=!0),o}function a(e,r){return null==e||null==r?!1:t.is.number(e)&&t.is.number(r)?!0:e&&r?!0:!1}function s(e,r,n){0>n?n=0:n>1&&(n=1);var i,o;if(i=null!=e.pxValue||null!=e.value?null!=e.pxValue?e.pxValue:e.value:e,o=null!=r.pxValue||null!=r.value?null!=r.pxValue?r.pxValue:r.value:r,t.is.number(i)&&t.is.number(o))return i+(o-i)*n;if(t.is.number(i[0])&&t.is.number(o[0])){var a=i,s=o,u=function(t,e){var r=e-t,i=t;return Math.round(n*r+i)},l=u(a[0],s[0]),c=u(a[1],s[1]),h=u(a[2],s[2]);return[l,c,h]}return void 0}var u=this;u.styleEnabled()&&e&&r()}})}(cytoscape,"undefined"==typeof window?null:window),function(t){"use strict";t.fn.core({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:t.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:t.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(t){"use strict";t.fn.core({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger()}),t.define.eventAliasesOn(t.corefn)}(cytoscape),function(t){"use strict";t.fn.core({png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}}),t.corefn.jpeg=t.corefn.jpg}(cytoscape),function(t){"use strict";t.fn.core({layout:function(e){var r;return null==e&&(e=t.util.extend({},this._private.options.layout),e.eles=this.$()),r=this.initLayout(e),r.run(),this},makeLayout:function(t){return this.initLayout(t)},initLayout:function(e){if(null==e)return void t.util.error("Layout options must be specified to make a layout");if(null==e.name)return void t.util.error("A `name` must be specified to make a layout");var r=e.name,n=t.extension("layout",r);

if(null==n)return void t.util.error("Can not apply layout: No such layout `"+r+"` found; did you include its JS file?");e.eles=null!=e.eles?e.eles:this.$(),t.is.string(e.eles)&&(e.eles=this.$(e.eles));var i=new n(t.util.extend({},e,{cy:this}));return t.is.plainObject(i._private)||(i._private={}),i._private.cy=this,i._private.listeners=[],i}}),t.corefn.createLayout=t.corefn.makeLayout}(cytoscape),function(t){"use strict";t.fn.core({notify:function(t){if(this._private.batchingNotify){var e=this._private.batchNotifyEles,r=this._private.batchNotifyTypes;if(t.collection)for(var n=0;n<t.collection.length;n++){var i=t.collection[n];e.ids[i._private.id]||e.push(i)}return void(r.ids[t.type]||r.push(t.type))}if(this._private.notificationsEnabled){var o=this.renderer();o.notify(t)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:void(e.notificationsEnabled=t?!0:!1)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=[],t.batchNotifyEles=[],t.batchNotifyTypes=[],t.batchStyleEles.ids={},t.batchNotifyEles.ids={},t.batchNotifyTypes.ids={},this},endBatch:function(){var e=this._private;return e.batchingStyle=!1,new t.Collection(this,e.batchStyleEles).updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,collection:e.batchNotifyEles}),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var r in t){var n=t[r],i=e.getElementById(r);i.data(n)}})}})}(cytoscape),function(t){"use strict";t.fn.core({renderTo:function(t,e,r,n){var i=this._private.renderer;return i.renderTo(t,e,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(e){var r=this,n=t.extension("renderer",e.name);return null==n?void t.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name):void(this._private.renderer=new n(t.util.extend({},e,{cy:r,style:r._private.style})))},triggerOnRender:function(){for(var t=this._private.onRenders,e=0;e<t.length;e++){var r=t[e];r()}return this},onRender:function(t){return this._private.onRenders.push(t),this},offRender:function(t){var e=this._private.onRenders;if(null==t)return this._private.onRenders=[],this;for(var r=0;r<e.length;r++){var n=e[r];if(t===n){e.splice(r,1);break}}return this}})}(cytoscape),function(t){"use strict";t.fn.core({collection:function(e){return t.is.string(e)?this.$(e):t.is.elementOrCollection(e)?e.collection():t.is.array(e)?new t.Collection(this,e):new t.Collection(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(e){var r=new t.Collection(this,this._private.elements);return e?r.filter(e):r}}),t.corefn.elements=t.corefn.filter=t.corefn.$}(cytoscape),function(t){"use strict";t.fn.core({style:function(t){if(t){var e=this.setStyle(t);e.update()}return this._private.style},setStyle:function(e){var r=this._private;return r.style=t.is.stylesheet(e)?e.generateStyle(this):t.is.array(e)?t.style.fromJson(this,e):t.is.string(e)?t.style.fromString(this,e):new t.Style(this),r.style}})}(cytoscape),function(t){"use strict";t.fn.core({autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=t?!0:!1,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=t?!0:!1,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=t?!0:!1,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=t?!0:!1,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=t?!0:!1,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=t?!0:!1,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=t?!0:!1,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=t?!0:!1,this)},pan:function(){var e,r,n,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(t.is.string(a[0]))return e=a[0],s[e];if(t.is.plainObject(a[0])){if(!this._private.panningEnabled)return this;n=a[0],i=n.x,o=n.y,t.is.number(i)&&(s.x=i),t.is.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],r=a[1],"x"!==e&&"y"!==e||!t.is.number(r)||(s[e]=r),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e){var r,n,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:t.is.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,t.is.number(o)&&(u.x+=o),t.is.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:r=s[0],n=s[1],"x"!==r&&"y"!==r||!t.is.number(n)||(u[r]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var r=this.getFitViewport(t,e);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,r){if(t.is.number(e)&&void 0===r&&(r=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(t.is.string(e)){var i=e;e=this.$(i)}else if(t.is.boundingBox(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else t.is.elementOrCollection(e)||(e=this.elements());n=n||e.boundingBox();var a,s=this.width(),u=this.height();if(r=t.is.number(r)?r:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){a=Math.min((s-2*r)/n.w,(u-2*r)/n.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var l={x:(s-a*(n.x1+n.x2))/2,y:(u-a*(n.y1+n.y2))/2};return{zoom:a,pan:l}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(t.is.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(t.is.number(e)&&(this._private.maxZoom=e),this)},zoom:function(e){var r,n;if(void 0===e)return this._private.zoom;if(t.is.number(e))n=e;else if(t.is.plainObject(e)){if(n=e.level,e.position){var i=e.position,o=this._private.pan,a=this._private.zoom;r={x:i.x*a+o.x,y:i.y*a+o.y}}else e.renderedPosition&&(r=e.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!t.is.number(n)||r&&(!t.is.number(r.x)||!t.is.number(r.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,r){var s=this._private.pan,u=this._private.zoom,l=n,c={x:-l/u*(r.x-s.x)+r.x,y:-l/u*(r.y-s.y)+r.y};this._private.zoom=n,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(e){var r=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(t.is.number(e.zoom)||(n=!1),t.is.plainObject(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?a=!0:(r.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;t.is.number(l.x)&&(r.pan.x=l.x,s=!1),t.is.number(l.y)&&(r.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(t.is.string(e)){var n=e;e=this.elements(n)}else t.is.elementOrCollection(e)||(e=this.elements());var i=e.boundingBox(),o=this.width(),a=this.height();r=void 0===r?this._private.zoom:r;var s={x:(o-r*(i.x1+i.x2))/2,y:(a-r*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var t=this._private.container;return t?t.clientWidth:1},height:function(){var t=this._private.container;return t?t.clientHeight:1},extent:function(){var t=this._private.pan,e=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-t.x)/e,x2:(r.x2-t.x)/e,y1:(r.y1-t.y)/e,y2:(r.y2-t.y)/e};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}}),t.corefn.centre=t.corefn.center,t.corefn.autolockNodes=t.corefn.autolock,t.corefn.autoungrabifyNodes=t.corefn.autoungrabify}(cytoscape),function(t){"use strict";t.fn.collection=t.fn.eles=function(e,r){for(var n in e){var i=e[n];t.Collection.prototype[n]=i}};var e={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(e,r,n){var i=t.is.element(r)?r._private:r,o=i.group,a=null!=n?n:this.prefix[o]+this.id[o];if(e.getElementById(a).empty())this.id[o]++;else for(;!e.getElementById(a).empty();)a=this.prefix[o]+ ++this.id[o];return a}};t.Element=function(e,r,n){if(!(this instanceof t.Element))return new t.Element(e,r,n);var i=this;if(n=void 0===n||n?!0:!1,void 0===e||void 0===r||!t.is.core(e))return void t.util.error("An element must have a core reference and parameters set");if("nodes"!==r.group&&"edges"!==r.group)return void t.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");if(this.length=1,this[0]=this,this._private={cy:e,single:!0,data:r.data||{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:r.selected?!0:!1,selectable:void 0===r.selectable?!0:r.selectable?!0:!1,locked:r.locked?!0:!1,grabbed:!1,grabbable:void 0===r.grabbable?!0:r.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[]},r.renderedPosition){var o=r.renderedPosition,a=e.pan(),s=e.zoom();this._private.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}if(t.is.string(r.classes))for(var u=r.classes.split(/\s+/),l=0,c=u.length;c>l;l++){var h=u[l];h&&""!==h&&(i._private.classes[h]=!0)}r.css&&e.style().applyBypass(this,r.css),(void 0===n||n)&&this.restore()},t.Collection=function(r,n,i){if(!(this instanceof t.Collection))return new t.Collection(r,n);if(void 0===r||!t.is.core(r))return void t.util.error("A collection must have a reference to the core");var o={},a={},s=!1;if(n){if(n.length>0&&t.is.plainObject(n[0])&&!t.is.element(n[0])){s=!0;for(var u=[],l={},c=0,h=n.length;h>c;c++){var d=n[c];null==d.data&&(d.data={});var p=d.data;if(null==p.id)p.id=e.generate(r,d);else if(0!==r.getElementById(p.id).length||l[p.id])continue;var f=new t.Element(r,d,!1);u.push(f),l[p.id]=!0}n=u}}else n=[];this.length=0;for(var c=0,h=n.length;h>c;c++){var v=n[c];if(v){var g=v._private.data.id;(!i||i.unique&&!o[g])&&(o[g]=v,a[g]=this.length,this[this.length]=v,this.length++)}}this._private={cy:r,ids:o,indexes:a},s&&this.restore()},t.elefn=t.elesfn=t.Element.prototype=t.Collection.prototype,t.elesfn.cy=function(){return this._private.cy},t.elesfn.element=function(){return this[0]},t.elesfn.collection=function(){return t.is.collection(this)?this:new t.Collection(this._private.cy,[this])},t.elesfn.unique=function(){return new t.Collection(this._private.cy,this,{unique:!0})},t.elesfn.getElementById=function(e){var r=this._private.cy,n=this._private.ids[e];return n?n:t.Collection(r)},t.elesfn.json=function(){var e=this.element();if(null==e)return void 0;var r=e._private,n=t.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),i=[];for(var o in r.classes)r.classes[o]&&i.push(o);for(var a=0;a<i.length;a++){var o=i[a];n.classes+=o+(a<i.length-1?" ":"")}return n},t.elesfn.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t},t.elesfn.clone=function(){for(var e=this.cy(),r=[],n=0;n<this.length;n++){var i=this[n],o=i.json(),a=new t.Element(e,o,!1);r.push(a)}return new t.Collection(e,r)},t.elesfn.copy=t.elesfn.clone,t.elesfn.restore=function(r){var n=this,i=[],o=n.cy();void 0===r&&(r=!0);for(var a=[],s=[],u=[],l=0,c=0,h=0,d=n.length;d>h;h++){var p=n[h];p.isNode()?(s.push(p),l++):(u.push(p),c++)}a=s.concat(u);for(var h=0,d=a.length;d>h;h++){var p=a[h];if(p.removed()){var f=p._private,v=f.data;if(void 0===v.id)v.id=e.generate(o,p);else{if(t.is.emptyString(v.id)||!t.is.string(v.id)){t.util.error("Can not create element with invalid string ID `"+v.id+"`");continue}if(0!==o.getElementById(v.id).length){t.util.error("Can not create second element with ID `"+v.id+"`");continue}}var g=v.id;if(p.isEdge()){for(var y=p,m=["source","target"],b=m.length,w=!1,x=0;b>x;x++){var _=m[x],E=v[_];null==E||""===E?(t.util.error("Can not create edge `"+g+"` with unspecified "+_),w=!0):o.getElementById(E).empty()&&(t.util.error("Can not create edge `"+g+"` with nonexistant "+_+" `"+E+"`"),w=!0)}if(w)continue;var S=o.getElementById(v.source),T=o.getElementById(v.target);S._private.edges.push(y),T._private.edges.push(y),y._private.source=S,y._private.target=T}f.ids={},f.ids[g]=p,f.removed=!1,o.addToPool(p),i.push(p)}}for(var h=0;l>h;h++){var k=a[h],v=k._private.data,P=k._private.data.parent,C=null!=P;if(C){var D=o.getElementById(P);if(D.empty())v.parent=void 0;else{for(var N=!1,O=D;!O.empty();){if(k.same(O)){N=!0,v.parent=void 0;break}O=O.parent()}N||(D[0]._private.children.push(k),k._private.parent=D[0],o._private.hasCompoundNodes=!0)}}}if(i=new t.Collection(o,i),i.length>0){var M=i.add(i.connectedNodes()).add(i.parent());M.updateStyle(r),r?i.rtrigger("add"):i.trigger("add")}return n},t.elesfn.removed=function(){var t=this[0];return t&&t._private.removed},t.elesfn.inside=function(){var t=this[0];return t&&!t._private.removed},t.elesfn.remove=function(e){function r(t){for(var e=t._private.edges,r=0;r<e.length;r++)i(e[r])}function n(t){for(var e=t._private.children,r=0;r<e.length;r++)i(e[r])}function i(t){var e=c[t.id()];e||(c[t.id()]=!0,t.isNode()?(l.push(t),r(t),n(t)):l.unshift(t))}function o(t,e){for(var r=t._private.edges,n=0;n<r.length;n++){var i=r[n];if(e===i){r.splice(n,1);break}}}function a(t,e){e=e[0],t=t[0];for(var r=t._private.children,n=0;n<r.length;n++)if(r[n][0]===e[0]){r.splice(n,1);break}}var s=this,u=[],l=[],c={},h=s._private.cy;void 0===e&&(e=!0);for(var d=0,p=s.length;p>d;d++){var f=s[d];i(f)}for(var d=0;d<l.length;d++){var f=l[d];if(f._private.removed=!0,h.removeFromPool(f),u.push(f),f.isEdge()){var v=f.source()[0],g=f.target()[0];o(v,f),o(g,f)}else{var y=f.parent();0!==y.length&&a(y,f)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var f=m[d];if(f.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new t.Collection(this.cy(),u);b.size()>0&&(e&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var w={},d=0;d<l.length;d++){var f=l[d],x="nodes"===f._private.group,_=f._private.data.parent;if(x&&void 0!==_&&!w[_]){w[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this},t.elesfn.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var r=t.source,n=t.target,i=e.getElementById(r).length>0,o=e.getElementById(n).length>0;if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s];"edges"===u.group&&(i&&(u.data.source=r),o&&(u.data.target=n))}return e.add(a)}}else if(void 0!==t.parent){var l=t.parent,c=null===l||e.getElementById(l).length>0;if(c){var a=this.jsons(),h=this.descendants(),d=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var u=a[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return e.add(a).merge(d.restore())}return this}}(cytoscape),function(t){"use strict";t.fn.eles({stdBreadthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.breadthFirstSearch(e)},breadthFirstSearch:function(e,r,n){var i,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.roots,r=i.visit,n=i.directed,o=i.std,a=i.thisArg),n=2!==arguments.length||t.is.fn(r)?n:r,r=t.is.fn(r)?r:function(){};for(var s,u=this._private.cy,l=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},p={},f={},v=0,g=this.nodes(),y=this.edges(),m=0;m<l.length;m++)l[m].isNode()&&(c.unshift(l[m]),f[l[m].id()]=!0,h.push(l[m]),p[l[m].id()]=0);for(;0!==c.length;){var b,l=c.shift(),w=p[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?r.call(a,l,x,_,v++,w):r.call(l,v++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(n?function(){return this.data("source")===l.id()}:void 0).intersect(y),m=0;m<E.length;m++){var S=E[m],T=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(g);0===T.length||f[T.id()]||(T=T[0],c.push(T),f[T.id()]=!0,p[T.id()]=p[l.id()]+1,h.push(T),d[T.id()]=S)}}for(var k=[],m=0;m<h.length;m++){var P=h[m],C=d[P.id()];C&&k.push(C),k.push(P)}return{path:new t.Collection(u,k,{unique:!0}),found:new t.Collection(u,s,{unique:!0})}},stdDepthFirstSearch:function(e){return e=t.util.extend({},e,{std:!0}),this.depthFirstSearch(e)},depthFirstSearch:function(e,r,n){var i,o,a;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.roots,r=i.visit,n=i.directed,o=i.std,a=i.thisArg),n=2!==arguments.length||t.is.fn(r)?n:r,r=t.is.fn(r)?r:function(){};for(var s,u=this._private.cy,l=t.is.string(e)?this.filter(e):e,c=[],h=[],d={},p={},f={},v=0,g=this.edges(),y=this.nodes(),m=0;m<l.length;m++)l[m].isNode()&&(c.push(l[m]),h.push(l[m]),p[l[m].id()]=0);for(;0!==c.length;){var l=c.pop();if(!f[l.id()]){f[l.id()]=!0;var b,w=p[l.id()],x=d[l.id()],_=null==x?void 0:x.connectedNodes().not(l)[0];if(b=o?r.call(a,l,x,_,v++,w):r.call(l,v++,w,l,x,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(n?function(){return this.data("source")===l.id()}:void 0).intersect(g),m=0;m<E.length;m++){var S=E[m],T=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(y);0===T.length||f[T.id()]||(T=T[0],c.push(T),p[T.id()]=p[l.id()]+1,h.push(T),d[T.id()]=S)}}}for(var k=[],m=0;m<h.length;m++){var P=h[m],C=d[P.id()];C&&k.push(C),k.push(P)}return{path:new t.Collection(u,k,{unique:!0}),found:new t.Collection(u,s,{unique:!0})}},kruskal:function(e){function r(t){for(var e=0;e<i.length;e++){var r=i[e];if(r.anySame(t))return{eles:r,index:e}}}e=t.is.fn(e)?e:function(){return 1};for(var n=new t.Collection(this._private.cy,[]),i=[],o=this.nodes(),a=0;a<o.length;a++)i.push(o[a].collection());for(var s=this.edges(),u=s.toArray().sort(function(t,r){var n=e.call(t,t),i=e.call(r,r);return n-i}),a=0;a<u.length;a++){var l=u[a],c=l.source()[0],h=l.target()[0],d=r(c),p=r(h);d.index!==p.index&&(n=n.add(l),i[d.index]=d.eles.add(p.eles),i.splice(p.index,1))}return o.add(n)},dijkstra:function(e,r,n){var i;t.is.plainObject(e)&&!t.is.elementOrCollection(e)&&(i=e,e=i.root,r=i.weight,n=i.directed);var o=this._private.cy;r=t.is.fn(r)?r:function(){return 1};for(var a=t.is.string(e)?this.filter(e)[0]:e[0],s={},u={},l={},c=this.edges().filter(function(){return!this.isLoop()}),h=this.nodes(),d=[],p=0;p<h.length;p++)s[h[p].id()]=h[p].same(a)?0:1/0,d.push(h[p]);var f=function(t){return s[t.id()]};d=new t.Collection(o,d);for(var v=t.Minheap(o,d,f),g=function(t,e){for(var i,o=(n?t.edgesTo(e):t.edgesWith(e)).intersect(c),a=1/0,s=0;s<o.length;s++){var u=o[s],l=r.apply(u,[u]);(a>l||!i)&&(a=l,i=u)}return{edge:i,dist:a}};v.size()>0;){var y=v.pop(),m=y.value,b=y.id,w=o.getElementById(b);if(l[b]=m,m===Math.Infinite)break;for(var x=w.neighborhood().intersect(h),p=0;p<x.length;p++){var _=x[p],E=_.id(),S=g(w,_),T=m+S.dist;T<v.getValueById(E)&&(v.edit(E,T),u[E]={node:w,edge:S.edge})}}return{distanceTo:function(e){var r=t.is.string(e)?h.filter(e)[0]:e[0];return l[r.id()]},pathTo:function(e){var r=t.is.string(e)?h.filter(e)[0]:e[0],n=[],i=r;if(r.length>0)for(n.unshift(r);u[i.id()];){var a=u[i.id()];n.unshift(a.edge),n.unshift(a.node),i=a.node}return new t.Collection(o,n)}}}}),t.elesfn.bfs=t.elesfn.breadthFirstSearch,t.elesfn.dfs=t.elesfn.depthFirstSearch,t.elesfn.stdBfs=t.elesfn.stdBreadthFirstSearch,t.elesfn.stdDfs=t.elesfn.stdDepthFirstSearch}(cytoscape),function(t){"use strict";t.fn.eles({aStar:function(e){e=e||{};var r=function(t,e,n,o){if(t==e)return o.push(i.getElementById(e)),o;if(e in n){var a=n[e],s=p[e];return o.push(i.getElementById(e)),o.push(i.getElementById(s)),r(t,a,n,o)}return void 0},n=function(t,e){if(0===t.length)return void 0;for(var r=0,n=e[t[0]],i=1;i<t.length;i++){var o=e[t[i]];n>o&&(n=o,r=i)}return r},i=this._private.cy;if(null==e||null==e.root)return void 0;var o=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null==e.goal)return void 0;var a=t.is.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&t.is.fn(e.heuristic))var s=e.heuristic;else var s=function(){return 0};if(null!=e.weight&&t.is.fn(e.weight))var u=e.weight;else var u=function(t){return 1};if(null!=e.directed)var l=e.directed;else var l=!1;var c=[],h=[o.id()],d={},p={},f={},v={};f[o.id()]=0,v[o.id()]=s(o);for(var g=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),m=0;h.length>0;){var b=n(h,v),w=i.getElementById(h[b]);if(m++,w.id()==a.id()){var x=r(o.id(),a.id(),d,[]);return x.reverse(),{found:!0,distance:f[w.id()],path:new t.Collection(i,x),steps:m}}c.push(w.id()),h.splice(b,1);var _=w.connectedEdges();l&&(_=_.stdFilter(function(t){return t.data("source")===w.id()})),_=_.intersect(g);for(var E=0;E<_.length;E++){var S=_[E],T=S.connectedNodes().stdFilter(function(t){return t.id()!==w.id()}).intersect(y);if(-1==c.indexOf(T.id())){var k=f[w.id()]+u.apply(S,[S]);-1!=h.indexOf(T.id())?k<f[T.id()]&&(f[T.id()]=k,v[T.id()]=k+s(T),d[T.id()]=w.id()):(f[T.id()]=k,v[T.id()]=k+s(T),h.push(T.id()),d[T.id()]=w.id(),p[T.id()]=S.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}},floydWarshall:function(e){e=e||{};var r=this._private.cy;if(null!=e.weight&&t.is.fn(e.weight))var n=e.weight;else var n=function(t){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;s>l;l++)u[a[l].id()]=l;for(var c=[],l=0;s>l;l++){for(var h=new Array(s),d=0;s>d;d++)h[d]=l==d?0:1/0;c.push(h)}var p=[],f=[],v=function(t){for(var e=0;s>e;e++){for(var r=new Array(s),n=0;s>n;n++)r[n]=void 0;t.push(r)}};v(p),v(f);for(var l=0;l<o.length;l++){var g=u[o[l].source().id()],y=u[o[l].target().id()],m=n.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,p[g][y]=y,f[g][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var g=u[o[l].target().id()],y=u[o[l].source().id()],m=n.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,p[g][y]=y,f[g][y]=o[l])}for(var b=0;s>b;b++)for(var l=0;s>l;l++)for(var d=0;s>d;d++)c[l][b]+c[b][d]<c[l][d]&&(c[l][d]=c[l][b]+c[b][d],p[l][d]=p[l][b]);for(var w=[],l=0;s>l;l++)w.push(a[l].id());var x={distance:function(e,n){if(t.is.string(e))var i=r.filter(e)[0].id();else var i=e.id();if(t.is.string(n))var o=r.filter(n)[0].id();else var o=n.id();return c[u[i]][u[o]]},path:function(e,n){var i=function(t,e,n,i,o){if(t===e)return r.getElementById(i[t]);if(void 0===n[t][e])return void 0;for(var a=[r.getElementById(i[t])],s=t;t!==e;){s=t,t=n[t][e];var u=o[s][t];a.push(u),a.push(r.getElementById(i[t]))}return a};if(t.is.string(e))var o=r.filter(e)[0].id();else var o=e.id();if(t.is.string(n))var a=r.filter(n)[0].id();else var a=n.id();var s=i(u[o],u[a],p,w,f);return new t.Collection(r,s)}};return x},bellmanFord:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var r=e.weight;else var r=function(t){return 1};if(null!=e.directed)var n=e.directed;else var n=!1;if(null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var i=this.filter(e.root)[0];else var i=e.root[0];for(var o=this._private.cy,a=this.edges().stdFilter(function(t){return!t.isLoop()}),s=this.nodes(),u=s.length,l={},c=0;u>c;c++)l[s[c].id()]=c;for(var h=[],d=[],p=[],c=0;u>c;c++)h[c]=s[c].id()===i.id()?0:1/0,d[c]=void 0;for(var f=!1,c=1;u>c;c++){f=!1;for(var v=0;v<a.length;v++){var g=l[a[v].source().id()],y=l[a[v].target().id()],m=r.apply(a[v],[a[v]]),b=h[g]+m;if(b<h[y]&&(h[y]=b,d[y]=g,p[y]=a[v],f=!0),!n){var b=h[y]+m;b<h[g]&&(h[g]=b,d[g]=y,p[g]=a[v],f=!0)}}if(!f)break}if(f)for(var v=0;v<a.length;v++){var g=l[a[v].source().id()],y=l[a[v].target().id()],m=r.apply(a[v],[a[v]]);if(h[g]+m<h[y])return t.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var w=[],c=0;u>c;c++)w.push(s[c].id());var x={distanceTo:function(e){if(t.is.string(e))var r=o.filter(e)[0].id();else var r=e.id();return h[l[r]]},pathTo:function(e){var r=function(t,e,r,n,i,a){for(;;){if(i.push(o.getElementById(n[r])),i.push(a[r]),e===r)return i;var s=t[r];if("undefined"==typeof s)return void 0;r=s}};if(t.is.string(e))var n=o.filter(e)[0].id();else var n=e.id();var a=[],s=r(d,l[i.id()],l[n],w,a,p);return null!=s&&s.reverse(),new t.Collection(o,s)},hasNegativeWeightCycle:!1};return x},kargerStein:function(e){e=e||{};var r=function(t,e,r){for(var n=r[t],i=n[1],o=n[2],a=e[i],s=e[o],u=r.filter(function(t){return e[t[1]]===a&&e[t[2]]===s?!1:e[t[1]]===s&&e[t[2]]===a?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<e.length;l++)e[l]===s&&(e[l]=a);return u},n=function(t,e,i,o){if(o>=i)return e;var a=Math.floor(Math.random()*e.length),s=r(a,t,e);return n(t,s,i-1,o)},i=this._private.cy,o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u=o.length,l=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),c=Math.floor(s/Math.sqrt(2));if(2>s)return void t.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var h={},d=0;s>d;d++)h[a[d].id()]=d;for(var p=[],d=0;u>d;d++){var f=o[d];p.push([d,h[f.source().id()],h[f.target().id()]])}for(var v,g=1/0,y=[],d=0;s>d;d++)y.push(d);for(var m=0;l>=m;m++){var b=y.slice(0),w=n(b,p,s,c),x=b.slice(0),_=n(b,w,c,2),E=n(x,w,c,2);_.length<=E.length&&_.length<g?(g=_.length,v=[_,b]):E.length<=_.length&&E.length<g&&(g=E.length,v=[E,x])}for(var S=v[0].map(function(t){return o[t[0]]}),T=[],k=[],P=v[1][0],d=0;d<v[1].length;d++){var C=v[1][d];C===P?T.push(a[d]):k.push(a[d])}var D={cut:new t.Collection(i,S),partition1:new t.Collection(i,T),partition2:new t.Collection(i,k)};return D},pageRank:function(e){e=e||{};var r=function(t){for(var e=t.length,r=0,n=0;e>n;n++)r+=t[n];for(var n=0;e>n;n++)t[n]=t[n]/r};if(null!=e&&null!=e.dampingfactor)var n=e.dampingFactor;else var n=.8;if(null!=e&&null!=e.precision)var i=e.precision;else var i=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else var o=200;if(null!=e&&null!=e.weight&&t.is.fn(e.weight))var a=e.weight;else var a=function(t){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(t){return!t.isLoop()}),l=this.nodes(),c=l.length,h=u.length,d={},p=0;c>p;p++)d[l[p].id()]=p;for(var f=[],v=[],g=(1-n)/c,p=0;c>p;p++){for(var y=[],m=0;c>m;m++)y.push(0);f.push(y),v.push(0)}for(var p=0;h>p;p++){var b=u[p],w=d[b.source().id()],x=d[b.target().id()],_=a.apply(b,[b]);f[x][w]+=_,v[w]+=_}for(var E=1/c+g,m=0;c>m;m++)if(0===v[m])for(var p=0;c>p;p++)f[p][m]=E;else for(var p=0;c>p;p++)f[p][m]=f[p][m]/v[m]+g;for(var S,T=[],k=[],p=0;c>p;p++)T.push(1),k.push(0);for(var P=0;o>P;P++){for(var C=k.slice(0),p=0;c>p;p++)for(var m=0;c>m;m++)C[p]+=f[p][m]*T[m];r(C),S=T,T=C;for(var D=0,p=0;c>p;p++)D+=Math.pow(S[p]-T[p],2);if(i>D)break}var N={rank:function(e){if(t.is.string(e))var r=s.filter(e)[0].id();else var r=e.id();return T[d[r]]}};return N},degreeCentralityNormalized:function(e){if(e=e||{},null!=e.directed)var r=e.directed;else var r=!1;var n=this.nodes(),i=n.length;if(r){for(var o={},a={},s=0,u=0,l=0;i>l;l++){var c=n[l],h=this.degreeCentrality(t.util.extend({},e,{root:c}));s<h.indegree&&(s=h.indegree),u<h.outdegree&&(u=h.outdegree),o[c.id()]=h.indegree,a[c.id()]=h.outdegree}return{indegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return o[e]/s},outdegree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return a[e]/u}}}for(var d={},p=0,l=0;i>l;l++){var c=n[l],h=this.degreeCentrality(t.util.extend({},e,{root:c}));p<h.degree&&(p=h.degree),d[c.id()]=h.degree}return{degree:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return d[e]/p}}},degreeCentrality:function(e){e=e||{};var r=this;if(null==e||null==e.root)return void 0;var n=t.is.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var i=e.weight;else var i=function(t){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.alpha&&t.is.number(e.alpha))var a=e.alpha;else a=0;if(o){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(r),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(r),l=s.length,c=u.length,h=0,d=0,p=0;p<s.length;p++){var f=s[p];h+=i.apply(f,[f])}for(var p=0;p<u.length;p++){var f=u[p];d+=i.apply(f,[f])}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var v=n.connectedEdges().intersection(r),g=v.length,y=0,p=0;p<v.length;p++){var f=v[p];y+=i.apply(f,[f])}return{degree:Math.pow(g,1-a)*Math.pow(y,a)}},closenessCentralityNormalized:function(e){e=e||{};var r=e.harmonic;void 0===r&&(r=!0);for(var n={},i=0,o=this.nodes(),a=this.floydWarshall({weight:e.weight,directed:e.directed}),s=0;s<o.length;s++){for(var u=0,l=0;l<o.length;l++)if(s!=l){var c=a.distance(o[s],o[l]);u+=r?1/c:c}r||(u=1/u),u>i&&(i=u),n[o[s].id()]=u}return{closeness:function(e){if(t.is.string(e))var e=cy.filter(e)[0].id();else var e=e.id();return n[e]/i}}},closenessCentrality:function(e){if(e=e||{},null==e.root)return void t.util.error("options.root required");if(t.is.string(e.root))var r=this.filter(e.root)[0];else var r=e.root[0];if(null!=e.weight&&t.is.fn(e.weight))var n=e.weight;else var n=function(){return 1};if(null!=e.directed&&t.is.bool(e.directed))var i=e.directed;else var i=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:r,weight:n,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=r.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s},betweennessCentrality:function(e){if(e=e||{},null!=e.weight&&t.is.fn(e.weight))var r=e.weight,n=!0;else var n=!1;if(null!=e.directed&&t.is.bool(e.directed))var i=e.directed;else var i=!1;for(var o=function(t,e){t.unshift(e);for(var r=0;v[t[r]]<v[t[r+1]]&&r<t.length-1;r++){var n=t[r];t[r]=t[r+1],t[r+1]=n}},a=this._private.cy,s=this.nodes(),u={},l={},c=0;c<s.length;c++)u[s[c].id()]=i?s[c].outgoers("node"):s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)l[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var d=[],p={},f={},v={},g=[],c=0;c<s.length;c++)p[s[c].id()]=[],f[s[c].id()]=0,v[s[c].id()]=Number.POSITIVE_INFINITY;for(f[s[h].id()]=1,v[s[h].id()]=0,g.unshift(s[h].id());g.length>0;){var y=g.pop();d.push(y),u[y].forEach(n?function(t){if(a.$("#"+y).edgesTo(t).length>0)var e=a.$("#"+y).edgesTo(t)[0];else var e=t.edgesTo("#"+y)[0];var n=r.apply(e,[e]);v[t.id()]>v[y]+n&&(v[t.id()]=v[y]+n,g.indexOf(t.id())<0?o(g,t.id()):(g.splice(g.indexOf(t.id()),1),o(g,t.id())),f[t.id()]=0,p[t.id()]=[]),v[t.id()]==v[y]+n&&(f[t.id()]=f[t.id()]+f[y],p[t.id()].push(y))}:function(t){v[t.id()]==Number.POSITIVE_INFINITY&&(g.unshift(t.id()),v[t.id()]=v[y]+1),v[t.id()]==v[y]+1&&(f[t.id()]=f[t.id()]+f[y],p[t.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;d.length>0;){var b=d.pop();p[b].forEach(function(t){
m[t]=m[t]+f[t]/f[b]*(1+m[b]),b!=s[h].id()&&(l[b]=l[b]+m[b])})}}var w=0;for(var x in l)w<l[x]&&(w=l[x]);var _={betweenness:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]},betweennessNormalized:function(e){if(t.is.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]/w}};return _.betweennessNormalised=_.betweennessNormalized,_}}),t.elesfn.dc=t.elesfn.degreeCentrality,t.elesfn.dcn=t.elesfn.degreeCentralityNormalised=t.elesfn.degreeCentralityNormalized,t.elesfn.cc=t.elesfn.closenessCentrality,t.elesfn.ccn=t.elesfn.closenessCentralityNormalised=t.elesfn.closenessCentralityNormalized,t.elesfn.bc=t.elesfn.betweennessCentrality}(cytoscape),function(t){"use strict";t.fn.eles({animated:t.define.animated(),clearQueue:t.define.clearQueue(),delay:t.define.delay(),animate:t.define.animate(),stop:t.define.stop()})}(cytoscape),function(t){"use strict";t.fn.eles({addClass:function(e){e=e.split(/\s+/);for(var r=this,n=[],i=0;i<e.length;i++){var o=e[i];if(!t.is.emptyString(o))for(var a=0;a<r.length;a++){var s=r[a],u=s._private.classes[o];s._private.classes[o]=!0,u||n.push(s)}}return n.length>0&&new t.Collection(this._private.cy,n).updateStyle().trigger("class"),r},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes[t]?!0:!1},toggleClass:function(e,r){for(var n=e.split(/\s+/),i=this,o=[],a=0,s=i.length;s>a;a++)for(var u=i[a],l=0;l<n.length;l++){var c=n[l];if(!t.is.emptyString(c)){var h=u._private.classes[c],d=r||void 0===r&&!h;d?(u._private.classes[c]=!0,h||o.push(u)):(u._private.classes[c]=!1,h&&o.push(u))}}return o.length>0&&new t.Collection(this._private.cy,o).updateStyle().trigger("class"),i},removeClass:function(e){e=e.split(/\s+/);for(var r=this,n=[],i=0;i<r.length;i++)for(var o=r[i],a=0;a<e.length;a++){var s=e[a];if(s&&""!==s){var u=o._private.classes[s];o._private.classes[s]=void 0,u&&n.push(o)}}return n.length>0&&new t.Collection(r._private.cy,n).updateStyle(),r.trigger("class"),r},flashClass:function(t,e){var r=this;if(null==e)e=250;else if(0===e)return r;return r.addClass(t),setTimeout(function(){r.removeClass(t)},e),r}})}(cytoscape),function(t){"use strict";t.fn.eles({allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var r=0;r<this.length;r++){var n=e?t.apply(e,[this[r],r,this]):t(this[r],r,this);if(n)return!0}return!1},every:function(t,e){for(var r=0;r<this.length;r++){var n=e?t.apply(e,[this[r],r,this]):t(this[r],r,this);if(!n)return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length!==t.length?!1:this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}}),t.elesfn.allAreNeighbours=t.elesfn.allAreNeighbors}(cytoscape),function(t){"use strict";t.fn.eles({parent:function(e){for(var r=[],n=this._private.cy,i=0;i<this.length;i++){var o=this[i],a=n.getElementById(o._private.data.parent);a.size()>0&&r.push(a)}return new t.Collection(n,r,{unique:!0}).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];r.push(o)}n=n.parent()}return new t.Collection(this.cy(),r,{unique:!0}).filter(e)},commonAncestors:function(t){for(var e,r=0;r<this.length;r++){var n=this[r],i=n.parents();e=e||i,e=e.intersect(i)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(e){for(var r=[],n=0;n<this.length;n++){var i=this[n];r=r.concat(i._private.children)}return new t.Collection(this.cy(),r,{unique:!0}).filter(e)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];return t?0!==t._private.children.length:void 0},isChild:function(){var t=this[0];return t?void 0!==t._private.data.parent&&0!==t.parent().length:void 0},descendants:function(e){function r(t){for(var e=0;e<t.length;e++){var i=t[e];n.push(i),i.children().nonempty()&&r(i.children())}}var n=[];return r(this.children()),new t.Collection(this.cy(),n,{unique:!0}).filter(e)}}),t.elesfn.ancestors=t.elesfn.parents}(cytoscape),function(t){"use strict";var e=1,r=0;t.fn.eles({data:t.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:t.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:t.define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:t.define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:t.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:t.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];return t?t._private.data.id:void 0},position:t.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){var e=t.updateCompoundBounds();e.rtrigger("position")},canSet:function(t){return!t.locked()}}),silentPosition:t.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()}}),positions:function(e,r){if(t.is.plainObject(e))this.position(e);else if(t.is.fn(e)){for(var n=e,i=0;i<this.length;i++){var o=this[i],e=n.apply(o,[i,o]);if(e&&!o.locked()){var a=o._private.position;a.x=e.x,a.y=e.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;r?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},updateCompoundBounds:function(){function e(t){var e=t.children(),r=t._private.style,i="include"===r["compound-sizing-wrt-labels"].value,o=e.boundingBox({includeLabels:i,includeEdges:!0}),a={top:r["padding-top"].pxValue,bottom:r["padding-bottom"].pxValue,left:r["padding-left"].pxValue,right:r["padding-right"].pxValue},s=t._private.position,u=!1;"auto"===r.width.value&&(t._private.autoWidth=o.w+a.left+a.right,s.x=(o.x1+o.x2-a.left+a.right)/2,u=!0),"auto"===r.height.value&&(t._private.autoHeight=o.h+a.top+a.bottom,s.y=(o.y1+o.y2-a.top+a.bottom)/2,u=!0),u&&n.push(t)}var r=this.cy();if(!r.styleEnabled()||!r.hasCompoundNodes())return r.collection();for(var n=[],i=this.parent();i.nonempty();){for(var o=0;o<i.length;o++){var a=i[o];e(a)}i=i.parent()}return new t.Collection(r,n)},renderedPosition:function(e,r){var n=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=t.is.plainObject(e)?e:void 0,u=void 0!==s||void 0!==r&&t.is.string(e);if(n&&n.isNode()){if(!u){var l=n._private.position;return s={x:l.x*o+a.x,y:l.y*o+a.y},void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==r?n._private.position[e]=(r-a[e])/o:void 0!==s&&(n._private.position={x:(s.x-a.x)/o,y:(s.y-a.y)/o})}this.rtrigger("position")}else if(!u)return void 0;return this},relativePosition:function(e,r){var n=this[0],i=this.cy(),o=t.is.plainObject(e)?e:void 0,a=void 0!==o||void 0!==r&&t.is.string(e),s=i.hasCompoundNodes();if(n&&n.isNode()){if(!a){var u=n._private.position,l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};return o={x:u.x-d.x,y:u.y-d.y},void 0===e?o:o[e]}for(var p=0;p<this.length;p++){var n=this[p],l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};void 0!==r?n._private.position[e]=r+d[e]:void 0!==o&&(n._private.position={x:o.x+d.x,y:o.y+d.y})}this.rtrigger("position")}else if(!a)return void 0;return this},width:function(){var t=this[0],e=t._private.cy,r=e._private.styleEnabled;if(t){if(r){var n=t._private.style.width;return"auto"===n.strValue?t._private.autoWidth:n.pxValue}return 1}},outerWidth:function(){var t=this[0],n=t._private.cy,i=n._private.styleEnabled;if(t){if(i){var o=t._private.style,a="auto"===o.width.strValue?t._private.autoWidth:o.width.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+r:0;return a+s}return 1}},renderedWidth:function(){var t=this[0];if(t){var e=t.width();return e*this.cy().zoom()}},renderedOuterWidth:function(){var t=this[0];if(t){var e=t.outerWidth();return e*this.cy().zoom()}},height:function(){var t=this[0],e=t._private.cy,r=e._private.styleEnabled;if(t&&"nodes"===t._private.group){if(r){var n=t._private.style.height;return"auto"===n.strValue?t._private.autoHeight:n.pxValue}return 1}},outerHeight:function(){var t=this[0],n=t._private.cy,i=n._private.styleEnabled;if(t&&"nodes"===t._private.group){if(!i)return 1;var o=t._private.style,a="auto"===o.height.strValue?t._private.autoHeight:o.height.pxValue,s=o["border-width"]?o["border-width"].pxValue*e+r:0;return a+s}},renderedHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.height();return e*this.cy().zoom()}},renderedOuterHeight:function(){var t=this[0];if(t&&"nodes"===t._private.group){var e=t.outerHeight();return e*this.cy().zoom()}},renderedBoundingBox:function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),i=r.pan(),o=e.x1*n+i.x,a=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},boundingBox:function(t){var e=this,r=e._private.cy,n=r._private,i=n.styleEnabled;t=t||{};var o=void 0===t.includeNodes?!0:t.includeNodes,a=void 0===t.includeEdges?!0:t.includeEdges,s=void 0===t.includeLabels?!0:t.includeLabels;i&&n.renderer.recalculateRenderedStyle(this);for(var u=1/0,l=-(1/0),c=1/0,h=-(1/0),d=0;d<e.length;d++){var p,f,v,g,y,m,b=e[d],w=b._private,x=w.style,_=i?w.style.display.value:"element",E="nodes"===w.group,S=!1;if("none"!==_){if(E&&o){S=!0;var T=w.position;y=T.x,m=T.y;var k=b.outerWidth(),P=k/2,C=b.outerHeight(),D=C/2;p=y-P,f=y+P,v=m-D,g=m+D,u=u>p?p:u,l=f>l?f:l,c=c>v?v:c,h=g>h?g:h}else if(b.isEdge()&&a){S=!0;var N=w.source,O=N._private,M=O.position,L=w.target,I=L._private,R=I.position,B=w.rstyle||{};if(p=M.x,f=R.x,v=M.y,g=R.y,p>f){var A=p;p=f,f=A}if(v>g){var A=v;v=g,g=A}if(u=u>p?p:u,l=f>l?f:l,c=c>v?v:c,h=g>h?g:h,i)for(var j=B.bezierPts||[],k=x.width.pxValue,q=k/2,z=0;z<j.length;z++){var V=j[z];p=V.x-q,f=V.x+q,v=V.y-q,g=V.y+q,u=u>p?p:u,l=f>l?f:l,c=c>v?v:c,h=g>h?g:h}if(i&&"haystack"===x["curve-style"].strValue){var F=w.rscratch.haystackPts;if(p=F[0],v=F[1],f=F[2],g=F[3],p>f){var A=p;p=f,f=A}if(v>g){var A=v;v=g,g=A}u=u>p?p:u,l=f>l?f:l,c=c>v?v:c,h=g>h?g:h}}if(i){var x=b._private.style,B=b._private.rstyle,X=x.content.strValue,Y=x["font-size"],U=x["text-halign"],W=x["text-valign"],H=B.labelWidth,$=B.labelHeight,G=B.labelX,Z=B.labelY;if(S&&s&&X&&Y&&null!=$&&null!=H&&null!=G&&null!=Z&&U&&W){var K,J,Q,tt,et=$,rt=H;if(b.isEdge())K=G-rt/2,J=G+rt/2,Q=Z-et/2,tt=Z+et/2;else{switch(U.value){case"left":K=G-rt,J=G;break;case"center":K=G-rt/2,J=G+rt/2;break;case"right":K=G,J=G+rt}switch(W.value){case"top":Q=Z-et,tt=Z;break;case"center":Q=Z-et/2,tt=Z+et/2;break;case"bottom":Q=Z,tt=Z+et}}u=u>K?K:u,l=J>l?J:l,c=c>Q?Q:c,h=tt>h?tt:h}}}}var nt=function(t){return t===1/0||t===-(1/0)?0:t};return u=nt(u),l=nt(l),c=nt(c),h=nt(h),{x1:u,x2:l,y1:c,y2:h,w:l-u,h:h-c}}});var n=t.elesfn;n.attr=n.data,n.removeAttr=n.removeData,n.modelPosition=n.point=n.position,n.modelPositions=n.points=n.positions,n.renderedPoint=n.renderedPosition,n.relativePoint=n.relativePosition,n.boundingbox=n.boundingBox,n.renderedBoundingbox=n.renderedBoundingBox}(cytoscape),function(t){"use strict";function e(t){return function(e){var r=this;if(void 0===e&&(e=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var n=0,i=r[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];(e||!s.isLoop())&&(n+=t(i,s))}return n}}}function r(t,e){return function(r){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](r);void 0===s||void 0!==n&&!e(s,n)||(n=s)}return n}}t.fn.eles({degree:e(function(t,e){return e.source().same(e.target())?2:1}),indegree:e(function(t,e){return e.target().same(t)?1:0}),outdegree:e(function(t,e){return e.source().same(t)?1:0})}),t.fn.eles({minDegree:r("degree",function(t,e){return e>t}),maxDegree:r("degree",function(t,e){return t>e}),minIndegree:r("indegree",function(t,e){return e>t}),maxIndegree:r("indegree",function(t,e){return t>e}),minOutdegree:r("outdegree",function(t,e){return e>t}),maxOutdegree:r("outdegree",function(t,e){return t>e})}),t.fn.eles({totalDegree:function(t){for(var e=0,r=this.nodes(),n=0;n<r.length;n++)e+=r[n].degree(t);return e}})}(cytoscape),function(t){"use strict";t.fn.eles({on:t.define.on(),one:t.define.on({unbindSelfOnTrigger:!0}),once:t.define.on({unbindAllBindersOnTrigger:!0}),off:t.define.off(),trigger:t.define.trigger(),rtrigger:function(t,e){return 0!==this.length?(this.cy().notify({type:t,collection:this}),this.trigger(t,e),this):void 0}}),t.define.eventAliasesOn(t.elesfn)}(cytoscape),function(t){"use strict";t.fn.eles({nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(e){var r=this._private.cy;if(t.is.fn(e)){for(var n=[],i=0;i<this.length;i++){var o=this[i];e.apply(o,[i,o])&&n.push(o)}return new t.Collection(r,n)}return t.is.string(e)||t.is.elementOrCollection(e)?new t.Selector(e).filter(this):void 0===e?this:new t.Collection(r)},not:function(e){var r=this._private.cy;if(e){t.is.string(e)&&(e=this.filter(e));for(var n=[],i=0;i<this.length;i++){var o=this[i],a=e._private.ids[o.id()];a||n.push(o)}return new t.Collection(r,n)}return this},absoluteComplement:function(){var t=this._private.cy;return t.elements().not(this)},intersect:function(e){var r=this._private.cy;if(t.is.string(e)){var n=e;return this.filter(n)}for(var i=[],o=this,a=e,s=this.length<e.length,u=s?a._private.ids:o._private.ids,l=s?o:a,c=0;c<l.length;c++){var h=l[c]._private.data.id,d=u[h];d&&i.push(d)}return new t.Collection(r,i)},xor:function(e){var r=this._private.cy;t.is.string(e)&&(e=r.$(e));var n=[],i=this,o=e,a=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id,a=e._private.ids[o];a||n.push(i)}};return a(i,o),a(o,i),new t.Collection(r,n)},diff:function(e){var r=this._private.cy;t.is.string(e)&&(e=r.$(e));var n=[],i=[],o=[],a=this,s=e,u=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n],a=i._private.data.id,s=e._private.ids[a];s?o.push(i):r.push(i)}};return u(a,s,n),u(s,a,i),{left:new t.Collection(r,n,{unique:!0}),right:new t.Collection(r,i,{unique:!0}),both:new t.Collection(r,o,{unique:!0})}},add:function(e){var r=this._private.cy;if(!e)return this;if(t.is.string(e)){var n=e;e=r.elements(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<e.length;o++){var a=!this._private.ids[e[o].id()];a&&i.push(e[o])}return new t.Collection(r,i)},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(t.is.string(e)){var i=e;e=n.elements(i)}for(var o=0;o<e.length;o++){var a=e[o],s=a.id(),u=!r.ids[s];if(u){var l=this.length++;this[l]=a,r.ids[s]=a,r.indexes[s]=l}}return this},unmergeOne:function(t){t=t[0];var e=this._private,r=t.id(),n=e.indexes[r];if(null==n)return this;this[n]=void 0,e.ids[r]=void 0,e.indexes[r]=void 0;var i=n===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o];this[o]=void 0,this[n]=a,e.indexes[a.id()]=n}return this.length--,this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(t.is.string(e)){var n=e;e=r.elements(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(t,e){for(var r=[],n=this,i=0;i<n.length;i++){var o=n[i],a=e?t.apply(e,[o,i,n]):t(o,i,n);r.push(a)}return r},stdFilter:function(e,r){for(var n=[],i=this,o=this._private.cy,a=0;a<i.length;a++){var s=i[a],u=r?e.apply(r,[s,a,i]):e(s,a,i);u&&n.push(s)}return new t.Collection(o,n)},max:function(t,e){for(var r,n=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>n&&(n=s,r=a)}return{value:n,ele:r}},min:function(t,e){for(var r,n=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);n>s&&(n=s,r=a)}return{value:n,ele:r}}});var e=t.elesfn;e.u=e["|"]=e["+"]=e.union=e.or=e.add,e["\\"]=e["!"]=e["-"]=e.difference=e.relativeComplement=e.not,e.n=e["&"]=e["."]=e.and=e.intersection=e.intersect,e["^"]=e["(+)"]=e["(-)"]=e.symmetricDifference=e.symdiff=e.xor,e.fnFilter=e.filterFn=e.stdFilter,e.complement=e.abscomp=e.absoluteComplement}(cytoscape),function(t){"use strict";t.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];return t?t._private.group:void 0}})}(cytoscape),function(t){"use strict";t.fn.eles({each:function(e){if(t.is.fn(e))for(var r=0;r<this.length;r++){var n=this[r],i=e.apply(n,[r,n]);if(i===!1)break}return this},forEach:function(e,r){if(t.is.fn(e))for(var n=0;n<this.length;n++){var i=this[n],o=r?e.apply(r,[i,n,this]):e(i,n,this);if(o===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(e,r){var n=[],i=this.length;null==r&&(r=i),null==e&&(e=0),0>e&&(e=i+e),0>r&&(r=i+r);for(var o=e;o>=0&&r>o&&i>o;o++)n.push(this[o]);return new t.Collection(this.cy(),n)},size:function(){return this.length},eq:function(e){return this[e]||new t.Collection(this.cy())},first:function(){return this[0]||new t.Collection(this.cy())},last:function(){return this[this.length-1]||new t.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!t.is.fn(e))return this;var r=this.cy(),n=this.toArray().sort(e);return new t.Collection(r,n)},sortByZIndex:function(){return this.sort(t.Collection.zIndexSort)},zDepth:function(){var t=this[0];if(!t)return void 0;var e=t._private,r=e.group;if("nodes"===r){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Number.MAX_VALUE}var i=e.source,o=e.target,a=i.zDepth(),s=o.zDepth();return Math.max(a,s,0)}}),t.Collection.zIndexSort=function(t,e){var r=t.cy(),n=t._private,i=e._private,o=n.style["z-index"].value-i.style["z-index"].value,a=0,s=0,u=r.hasCompoundNodes(),l="nodes"===n.group,c="edges"===n.group,h="nodes"===i.group,d="edges"===i.group;u&&(a=t.zDepth(),s=e.zDepth());var p=a-s,f=0===p;return f?l&&d?1:c&&h?-1:0===o?n.index-i.index:o:p}}(cytoscape),function(t){"use strict";t.fn.eles({layoutPositions:function(e,r,n){var i=this.nodes(),o=this.cy();if(e.trigger({type:"layoutstart",layout:e}),r.animate){for(var a=0;a<i.length;a++){var s=i[a],u=a===i.length-1,l=n.call(s,a,s),c=s.position();t.is.number(c.x)&&t.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:l},{duration:r.animationDuration,step:u?function(){r.fit&&o.fit(r.eles,r.padding)}:void 0,complete:u?function(){null!=r.zoom&&o.zoom(r.zoom),r.pan&&o.pan(r.pan),r.fit&&o.fit(r.eles,r.padding),e.one("layoutstop",r.stop),e.trigger({type:"layoutstop",layout:e})}:void 0})}e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e})}else i.positions(n),r.fit&&o.fit(r.eles,r.padding),null!=r.zoom&&o.zoom(r.zoom),r.pan&&o.pan(r.pan),e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.trigger({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.layout(t.util.extend({},e,{eles:this})),this},makeLayout:function(e){var r=this.cy();return r.makeLayout(t.util.extend({},e,{eles:this}))}}),t.elesfn.createLayout=t.elesfn.makeLayout}(cytoscape),function(t){"use strict";t.fn.eles({updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){for(var r=e._private.batchStyleEles,n=0;n<this.length;n++){var i=this[n];r.ids[i._private.id]||r.push(i)}return this}var o=e.style();t=t||void 0===t?!0:!1,o.apply(this);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;return t?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,r=e.style();if(t=t||void 0===t?!0:!1,!e.styleEnabled())return this;r.updateMappers(this);var n=this.updateCompoundBounds(),i=n.length>0?this.add(n):this;return t?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var r=this[0];if(r){var n=r.cy().style().getRenderedStyle(r);return void 0===t?n:n[t]}},css:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(t.is.plainObject(e)){var a=e;o.applyBypass(this,a,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(t.is.string(e)){if(void 0===r){var l=this[0];return l?l._private.style[e].strValue:void 0}o.applyBypass(this,e,r,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===e){var l=this[0];return l?o.getRawStyle(l):void 0}return this},removeCss:function(t){var e=this.cy();if(!e.styleEnabled())return this;var r=!1,n=e.style(),i=this;if(void 0===t)for(var o=0;o<i.length;o++){var a=i[o];n.removeAllBypasses(a,r)}else{t=t.split(/\s+/);for(var o=0;o<i.length;o++){var a=i[o];n.removeBypasses(a,t,r)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],r=t.hasCompoundNodes();if(e){var n=e._private.style;if("visible"!==n.visibility.value||"element"!==n.display.value)return!1;if("nodes"===e._private.group){if(!r)return!0;var i=e._private.data.parent?e.parents():null;if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a._private.style,u=s.visibility.value,l=s.display.value;if("visible"!==u||"element"!==l)return!1}return!0}var c=e._private.source,h=e._private.target;return c.visible()&&h.visible()}},hidden:function(){var t=this[0];return t?!t.visible():void 0},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=n.style.opacity.value;if(!e)return i;var o=n.data.parent?r.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0],r=e.cy().hasCompoundNodes();return e?r?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];if(e){var r="auto"===e._private.style.width.value,n="auto"===e._private.style.height.value;return e.isParent()&&r&&n}},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var e=this[0];return e._private.backgrounding?!0:!1}}),t.elesfn.bypass=t.elesfn.style=t.elesfn.css,t.elesfn.renderedStyle=t.elesfn.renderedCss,t.elesfn.removeBypass=t.elesfn.removeStyle=t.elesfn.removeCss}(cytoscape),function(t){"use strict";function e(e){return function(){var r=arguments,n=[];if(2===r.length){var i=r[0],o=r[1];this.bind(e.event,i,o)}else if(1===r.length){var o=r[0];this.bind(e.event,o)}else if(0===r.length){for(var a=0;a<this.length;a++){var s=this[a],u=!e.ableField||s._private[e.ableField],l=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(u=c,!c))return this}u&&(s._private[e.field]=e.value,l&&n.push(s))}var h=t.Collection(this.cy(),n);h.updateStyle(),h.trigger(e.event)}return this}}function r(r){t.elesfn[r.field]=function(){var t=this[0];if(t){if(r.overrideField){var e=r.overrideField(t);if(void 0!==e)return e}return t._private[r.field]}},t.elesfn[r.on]=e({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),t.elesfn[r.off]=e({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}r({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),r({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),r({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),r({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),t.elesfn.deselect=t.elesfn.unselect,t.elesfn.grabbed=function(){var t=this[0];return t?t._private.grabbed:void 0},r({field:"active",on:"activate",off:"unactivate"}),t.elesfn.inactive=function(){var t=this[0];return t?!t._private.active:void 0}}(cytoscape),function(t){"use strict";function e(e){return function(r){for(var n=[],i=this._private.cy,o=0;o<this.length;o++){var a=this[o],s=a._private[e.attr];s&&n.push(s)}return new t.Collection(i,n,{unique:!0}).filter(r)}}function r(e){return function(r){var n=[],i=this._private.cy,o=e||{};t.is.string(r)&&(r=i.$(r));for(var a=this._private.ids,s=r._private.ids,u=0;u<r.length;u++)for(var l=r[u]._private.edges,c=0;c<l.length;c++){var h=l[c],d=h._private.data,p=a[d.source]&&s[d.target],f=s[d.source]&&a[d.target],v=p||f;if(v){if(o.thisIs){if("source"===o.thisIs&&!p)continue;if("target"===o.thisIs&&!f)continue}n.push(h)}}return new t.Collection(i,n,{unique:!0})}}function n(e){var r={codirected:!1};return e=t.util.extend({},r,e),function(r){for(var n=this._private.cy,i=[],o=this.edges(),a=e,s=0;s<o.length;s++)for(var u=o[s],l=u.source()[0],c=l.id(),h=u.target()[0],d=h.id(),p=l._private.edges,f=0;f<p.length;f++){var v=p[f],g=v._private.data,y=g.target,m=g.source,b=y===d&&m===c,w=c===y&&d===m;(a.codirected&&b||!a.codirected&&(b||w))&&i.push(v)}return new t.Collection(n,i,{unique:!0}).filter(r)}}t.fn.eles({roots:function(e){for(var r=this,n=[],i=0;i<r.length;i++){var o=r[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("target")===o.id()&&this.data("source")!==o.id()}).length>0;a||n.push(o)}}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)},leaves:function(e){for(var r=this,n=[],i=0;i<r.length;i++){var o=r[i];if(o.isNode()){var a=o.connectedEdges(function(){return this.data("source")===o.id()&&this.data("target")!==o.id()}).length>0;a||n.push(o)}}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)},outgoers:function(e){for(var r=this,n=[],i=0;i<r.length;i++){var o=r[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;c===a&&h!==a&&(n.push(l),n.push(l.target()[0]))}}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)},successors:function(e){for(var r=this,n=[],i={};;){var o=r.outgoers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,n.push(u),a=!0)}if(!a)break;r=o}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)},incomers:function(e){for(var r=this,n=[],i=0;i<r.length;i++){var o=r[i],a=o.id();if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,h=l._private.data.target;h===a&&c!==a&&(n.push(l),n.push(l.source()[0]))}}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)},predecessors:function(e){for(var r=this,n=[],i={};;){var o=r.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,n.push(u),a=!0)}if(!a)break;r=o}return new t.Collection(this._private.cy,n,{unique:!0}).filter(e)}}),t.fn.eles({neighborhood:function(e){for(var r=[],n=this._private.cy,i=this.nodes(),o=0;o<i.length;o++)for(var a=i[o],s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.connectedNodes().not(a);c.length>0&&r.push(c[0]),r.push(l[0])}return new t.Collection(n,r,{unique:!0}).filter(e)},closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),t.elesfn.neighbourhood=t.elesfn.neighborhood,t.elesfn.closedNeighbourhood=t.elesfn.closedNeighborhood,t.elesfn.openNeighbourhood=t.elesfn.openNeighborhood,t.fn.eles({source:function(t){var e,r=this[0];return r&&(e=r._private.source),e&&t?e.filter(t):e},target:function(t){var e,r=this[0];return r&&(e=r._private.target),e&&t?e.filter(t):e},sources:e({attr:"source"}),targets:e({attr:"target"})}),t.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})}),t.fn.eles({connectedEdges:function(e){for(var r=[],n=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];if(a.isNode())for(var s=a._private.edges,u=0;u<s.length;u++){var l=s[u];r.push(l)}}return new t.Collection(n,r,{unique:!0}).filter(e)},connectedNodes:function(e){for(var r=[],n=this._private.cy,i=this,o=0;o<i.length;o++){var a=i[o];a.isEdge()&&(r.push(a.source()[0]),r.push(a.target()[0]))}return new t.Collection(n,r,{unique:!0}).filter(e)},parallelEdges:n(),codirectedEdges:n({codirected:!0})})}(cytoscape),function(t){"use strict";t.fn.eles({fit:function(){},center:function(){}})}(cytoscape),function(t){"use strict";t.Minheap=function(e,r,n){return new t.Heap(e,r,t.Heap.minHeapComparator,n)},t.Maxheap=function(e,r,n){return new t.Heap(e,r,t.Heap.maxHeapComparator,n)},t.Heap=function(e,r,n,i){if("undefined"!=typeof n&&"undefined"!=typeof r){"undefined"==typeof i&&(i=t.Heap.idFn);var o,a,s,u=[],l={},c=[],h=0;for(r=this.getArgumentAsCollection(r,e),s=r.length,h=0;s>h;h+=1){if(u.push(i.call(e,r[h],h,r)),o=r[h].id(),l.hasOwnProperty(o))throw"ERROR: Multiple items with the same id found: "+o;l[o]=h,c.push(o)}for(this._private={cy:e,heap:u,pointers:l,elements:c,comparator:n,extractor:i,length:s},h=Math.floor(s/2);h>=0;h-=1)a=this.heapify(h);return a}},t.Heap.idFn=function(t){return t.id()},t.Heap.minHeapComparator=function(t,e){return t>=e},t.Heap.maxHeapComparator=function(t,e){return e>=t},t.fn.heap=function(e,r){for(var n in e){var i=e[n];t.Heap.prototype[n]=i}},t.heapfn=t.Heap.prototype,t.heapfn.size=function(){return this._private.length},t.heapfn.getArgumentAsCollection=function(e,r){var n;if("undefined"==typeof r&&(r=this._private.cy),t.is.elementOrCollection(e))n=e;else{for(var i=[],o=[].concat.apply([],[e]),a=0;a<o.length;a++){var s=o[a],u=r.getElementById(s);u.length>0&&i.push(u)}n=new t.Collection(r,i)}return n},t.heapfn.isHeap=function(){var t,e,r,n,i,o=this._private.heap,a=o.length,s=this._private.comparator;for(t=0;a>t;t+=1)if(e=2*t+1,r=e+1,n=a>e?s(o[e],o[t]):!0,i=a>r?s(o[r],o[t]):!0,!n||!i)return!1;return!0},t.heapfn.heapSwap=function(t,e){var r=this._private.heap,n=this._private.pointers,i=this._private.elements,o=r[t],a=i[t],s=i[t],u=i[e];r[t]=r[e],i[t]=i[e],n[s]=e,n[u]=t,r[e]=o,i[e]=a},t.heapfn.heapify=function(t,e){var r,n,i,o,a,s,u,l=0,c=!1;for("undefined"==typeof e&&(e=!0),r=this._private.heap,l=r.length,s=this._private.comparator,n=t;!c;)e?(i=2*n+1,o=i+1,a=n,l>i&&!s(r[i],r[a])&&(a=i),l>o&&!s(r[o],r[a])&&(a=o),c=a===n,c||(this.heapSwap(a,n),n=a)):(u=Math.floor((n-1)/2),a=n,c=0>u||s(r[a],r[u]),c||(this.heapSwap(a,u),n=u))},t.heapfn.insert=function(t){var e,r,n,i,o,a=this.getArgumentAsCollection(t),s=a.length;for(o=0;s>o;o+=1){if(e=a[o],r=this._private.heap.length,n=this._private.extractor(e),i=e.id(),this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(n),this._private.elements.push(i),this._private.pointers[i]=r,this.heapify(r,!1)}this._private.length=this._private.heap.length},t.heapfn.getValueById=function(t){if(this._private.pointers.hasOwnProperty(t)){var e=this._private.pointers[t];

return this._private.heap[e]}},t.heapfn.contains=function(t){for(var e=this.getArgumentAsCollection(t),r=0;r<e.length;r+=1){var n=e[r].id();if(!this._private.pointers.hasOwnProperty(n))return!1}return!0},t.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},t.heapfn.pop=function(){if(this._private.length>0){var t,e,r,n=this.top(),i=this._private.length-1;return this.heapSwap(0,i),t=this._private.elements[i],e=this._private.heap[i],r=t,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[r]=void 0,this.heapify(0),n}},t.heapfn.findDirectionHeapify=function(t){var e=Math.floor((t-1)/2),r=this._private.heap,n=0>e||this._private.comparator(r[t],r[e]);this.heapify(t,n)},t.heapfn.edit=function(e,r){for(var n=this.getArgumentAsCollection(e),i=0;i<n.length;i+=1){var o=n[i].id(),a=this._private.pointers[o],s=this._private.heap[a];t.is.number(r)?this._private.heap[a]=r:t.is.fn(r)&&(this._private.heap[a]=r.call(this._private.cy,s,a)),this.findDirectionHeapify(a)}},t.heapfn.remove=function(t){for(var e=this.getArgumentAsCollection(t),r=0;r<e.length;r+=1){var n,i,o,a=e[r].id(),s=this._private.pointers[a],u=this._private.length-1;s!==u&&this.heapSwap(s,u),n=this._private.elements[u],i=this._private.heap[u],o=n,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[o]=void 0,this.findDirectionHeapify(s)}return i}}(cytoscape),function(t){"use strict";function e(t){this.options=t,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:t.cy,container:t.cy.container(),canvases:new Array(e.CANVAS_LAYERS),contexts:new Array(e.CANVAS_LAYERS),canvasNeedsRedraw:new Array(e.CANVAS_LAYERS),bufferCanvases:new Array(e.BUFFER_COUNT),bufferContexts:new Array(e.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=t.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var r=this.data.canvasContainer.style;r.position="absolute",r.zIndex="0",r.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var n=0;n<e.CANVAS_LAYERS;n++)this.data.canvases[n]=document.createElement("canvas"),this.data.contexts[n]=this.data.canvases[n].getContext("2d"),this.data.canvases[n].style.position="absolute",this.data.canvases[n].setAttribute("data-id","layer"+n),this.data.canvases[n].style.zIndex=String(e.CANVAS_LAYERS-n),this.data.canvasContainer.appendChild(this.data.canvases[n]),this.data.canvasNeedsRedraw[n]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[e.NODE].setAttribute("data-id","layer"+e.NODE+"-node"),this.data.canvases[e.SELECT_BOX].setAttribute("data-id","layer"+e.SELECT_BOX+"-selectbox"),this.data.canvases[e.DRAG].setAttribute("data-id","layer"+e.DRAG+"-drag");for(var n=0;n<e.BUFFER_COUNT;n++)this.data.bufferCanvases[n]=document.createElement("canvas"),this.data.bufferContexts[n]=this.data.bufferCanvases[n].getContext("2d"),this.data.bufferCanvases[n].style.position="absolute",this.data.bufferCanvases[n].setAttribute("data-id","buffer"+n),this.data.bufferCanvases[n].style.zIndex=String(-n-1),this.data.bufferCanvases[n].style.visibility="hidden";this.hideEdgesOnViewport=t.hideEdgesOnViewport,this.hideLabelsOnViewport=t.hideLabelsOnViewport,this.textureOnViewport=t.textureOnViewport,this.wheelSensitivity=t.wheelSensitivity,this.motionBlurEnabled=t.motionBlur,this.forcedPixelRatio=t.pixelRatio,this.motionBlur=!0,this.motionBlurOpacity=t.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=t.desktopTapThreshold,this.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,this.touchTapThreshold=t.touchTapThreshold,this.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,this.tapholdDuration=500,this.load()}e.CANVAS_LAYERS=3,e.SELECT_BOX=0,e.DRAG=1,e.NODE=2,e.BUFFER_COUNT=3,e.TEXTURE_BUFFER=0,e.MOTIONBLUR_BUFFER_NODE=1,e.MOTIONBLUR_BUFFER_DRAG=2,e.panOrBoxSelectDelay=400;var r="undefined"!=typeof Path2D;e.usePaths=function(){return r},e.prototype.notify=function(r){var n;n=t.is.array(r.type)?r.type:[r.type];for(var i=0;i<n.length;i++){var o=n[i];switch(o){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[e.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===o||"resize"===o)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[e.NODE]=!0,this.data.canvasNeedsRedraw[e.DRAG]=!0,this.redraw()},e.prototype.destroy=function(){this.destroyed=!0;for(var t=0;t<this.bindings.length;t++){var e=this.bindings[t],r=e;r.target.removeEventListener(r.event,r.handler,r.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(n){}};for(var n in t.math)e.prototype[n]=t.math[n];t("renderer","canvas",e)}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype,n=e.arrowShapes={};e.arrowShapeHeight=.3;var i=function(t,e,r,n,i,o,a,s){var u=r-i/2,l=r+i/2,c=n-o/2,h=n+o/2;return t>=u&&l>=t&&e>=c&&h>=e},o=function(t,e,r,n,i){n=-n;var o=t*Math.cos(n)-e*Math.sin(n),a=t*Math.sin(n)+e*Math.cos(n),s=o*r,u=a*r,l=s+i.x,c=u+i.y;return{x:l,y:c}};n.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(e,r,i,o,a,s,u,l){var c=n.arrow._points;return t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,r,i){for(var a=n.arrow._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,r,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},n.triangle=n.arrow,n["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(e,r,i,o,a,s,u,l){var c=n.triangle._points;return t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,r,i){for(var a,s=n.triangle._points,u=0;u<s.length/2;u++){var l=o(s[2*u],s[2*u+1],e,r,i);0===u&&(a=l),t.lineTo(l.x,l.y)}var c=this._ctrlPt,h=o(c[0],c[1],e,r,i);t.quadraticCurveTo(h.x,h.y,a.x,a.y)},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},n["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,r,i,o,a,s,u,l){var c=n["triangle-tee"]._points,h=n["triangle-tee"]._pointsTee,d=t.math.pointInsidePolygon(e,r,h,i,o,a,s,u,l)||t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l);return d},roughCollide:i,draw:function(t,e,r,i){for(var a=n["triangle-tee"]._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,r,i);t.lineTo(u.x,u.y)}var l=n["triangle-tee"]._pointsTee,c=o(l[0],l[1],e,r,i);t.moveTo(c.x,c.y);for(var s=0;s<l.length/2;s++){var u=o(l[2*s],l[2*s+1],e,r,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},n["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(e,r,n,i,o,a,s,u){var l=this._points;return t.math.pointInsidePolygon(e,r,l,n,i,o,a,s,u)},roughCollide:i,draw:function(t,e,r,n){for(var i=this._points,a=0;a<i.length/2;a++){var s=o(i[2*a],i[2*a+1],e,r,n);t.lineTo(s.x,s.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},n.none={collide:function(t,e,r,n,i,o,a,s){return!1},roughCollide:function(t,e,r,n,i,o,a,s){return!1},draw:function(t){},spacing:function(t){return 0},gap:function(t){return 0}},n.circle={_baseRadius:.15,collide:function(t,e,r,i,o,a,s,u){if(o!=a){var l=(a+u)/(o+u);return e/=l,i/=l,Math.pow(r-t,2)+Math.pow(i-e,2)<=Math.pow((o+u)*n.circle._baseRadius,2)}return Math.pow(r-t,2)+Math.pow(i-e,2)<=Math.pow((o+u)*n.circle._baseRadius,2)},roughCollide:i,draw:function(t,e,r,i){t.arc(i.x,i.y,n.circle._baseRadius*e,0,2*Math.PI,!1)},spacing:function(t){return r.getArrowWidth(t._private.style.width.pxValue)*n.circle._baseRadius},gap:function(t){return 2*t._private.style.width.pxValue}},n.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(e,r,i,o,a,s,u,l){var c=n.inhibitor._points;return t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,r,i){for(var a=n.inhibitor._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,r,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 1},gap:function(t){return 1}},n.tee=n.inhibitor,n.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(e,r,i,o,a,s,u,l){var c=n.square._points;return t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,r,i){for(var a=n.square._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,r,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return 2*t._private.style.width.pxValue}},n.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(e,r,i,o,a,s,u,l){var c=n.diamond._points;return t.math.pointInsidePolygon(e,r,c,i,o,a,s,u,l)},roughCollide:i,draw:function(t,e,r,i){for(var a=n.diamond._points,s=0;s<a.length/2;s++){var u=o(a[2*s],a[2*s+1],e,r,i);t.lineTo(u.x,u.y)}},spacing:function(t){return 0},gap:function(t){return t._private.style.width.pxValue}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.getCachedNodes=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedNodes&&(t.cache.cachedNodes=e.nodes()),t.cache.cachedNodes},r.updateNodesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedNodes=e.nodes()},r.getCachedEdges=function(){var t=this.data,e=this.data.cy;return null==t.cache&&(t.cache={}),null==t.cache.cachedEdges&&(t.cache.cachedEdges=e.edges()),t.cache.cachedEdges},r.updateEdgesCache=function(){var t=this.data,e=this.data.cy;null==t.cache&&(t.cache={}),t.cache.cachedEdges=e.edges()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.projectIntoViewport=function(t,e){var r=this.findContainerClientCoords(),n=r[0],i=r[1],o=t-n,a=e-i;return o-=this.data.cy.pan().x,a-=this.data.cy.pan().y,o/=this.data.cy.zoom(),a/=this.data.cy.zoom(),[o,a]},r.findContainerClientCoords=function(){var t=this.data.container,e=this.containerBB=this.containerBB||t.getBoundingClientRect();return[e.left,e.top,e.right-e.left,e.bottom-e.top]},r.invalidateContainerClientCoordsCache=function(){this.containerBB=null},r.findNearestElement=function(r,n,i,o){function a(t){var o=t.outerWidth()+2*f,a=t.outerHeight()+2*f,s=o/2,l=a/2,h=t._private.position;if(h.x-s<=r&&r<=h.x+s&&h.y-l<=n&&n<=h.y+l){var d=!i||t.visible()&&!t.transparent();if(i&&!d)return;{var p=e.nodeShapes[u.getNodeShape(t)];t._private.style["border-width"].pxValue/2}p.checkPoint(r,n,0,o,a,h.x,h.y)&&c.push(t)}}function s(o){var s,l,h=o._private.rscratch,f=o._private.style,v=f.width.pxValue/2+p,g=v*v,y=2*v,m=o._private.source,b=o._private.target,w=!1,x=function(){if(void 0!==l)return l;if(!i)return l=!0,!0;var t=o.visible()&&!o.transparent();return t?(l=!0,!0):(l=!1,!1)};if("self"===h.edgeType||"compound"===h.edgeType)((w=t.math.inBezierVicinity(r,n,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(r,n,h.startX,h.startY,h.cp2ax,h.cp2ay,h.selfEdgeMidX,h.selfEdgeMidY))||(w=t.math.inBezierVicinity(r,n,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(r,n,h.selfEdgeMidX,h.selfEdgeMidY,h.cp2cx,h.cp2cy,h.endX,h.endY)))&&c.push(o);else if("haystack"===h.edgeType){var _=f["haystack-radius"].value,E=_/2,S=b._private.position,T=b.width(),k=b.height(),P=m._private.position,C=m.width(),D=m.height(),N=P.x+h.source.x*C*E,O=P.y+h.source.y*D*E,M=S.x+h.target.x*T*E,L=S.y+h.target.y*k*E;(w=t.math.inLineVicinity(r,n,N,O,M,L,y))&&x()&&g>(s=t.math.sqDistanceToFiniteLine(r,n,N,O,M,L))&&c.push(o)}else"straight"===h.edgeType?(w=t.math.inLineVicinity(r,n,h.startX,h.startY,h.endX,h.endY,y))&&x()&&g>(s=t.math.sqDistanceToFiniteLine(r,n,h.startX,h.startY,h.endX,h.endY))&&c.push(o):"bezier"===h.edgeType&&(w=t.math.inBezierVicinity(r,n,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY,g))&&x()&&g>(s=t.math.sqDistanceToQuadraticBezier(r,n,h.startX,h.startY,h.cp2x,h.cp2y,h.endX,h.endY))&&c.push(o);if(w&&x()&&0===c.length||c[c.length-1]!==o){var I=e.arrowShapes[f["source-arrow-shape"].value],R=e.arrowShapes[f["target-arrow-shape"].value],m=m||o._private.source,b=b||o._private.target,S=b._private.position,P=m._private.position,B=u.getArrowWidth(f.width.pxValue),A=u.getArrowHeight(f.width.pxValue),j=B,q=A;(I.roughCollide(r,n,h.arrowStartX,h.arrowStartY,B,A,[h.arrowStartX-P.x,h.arrowStartY-P.y],p)&&I.collide(r,n,h.arrowStartX,h.arrowStartY,B,A,[h.arrowStartX-P.x,h.arrowStartY-P.y],p)||R.roughCollide(r,n,h.arrowEndX,h.arrowEndY,j,q,[h.arrowEndX-S.x,h.arrowEndY-S.y],p)&&R.collide(r,n,h.arrowEndX,h.arrowEndY,j,q,[h.arrowEndX-S.x,h.arrowEndY-S.y],p))&&c.push(o)}d&&c.length>0&&c[c.length-1]===o&&(a(m),a(b))}for(var u=this,l=this.getCachedZSortedEles(),c=[],h=this.data.cy.zoom(),d=this.data.cy.hasCompoundNodes(),p=(o?24:8)/h,f=(o?8:2)/h,v=l.length-1;v>=0;v--){var g=l[v];if(c.length>0)break;"nodes"===g._private.group?a(l[v]):s(l[v])}return c.length>0?c[c.length-1]:null},r.getAllInBox=function(r,n,i,o){var a=this.getCachedNodes(),s=this.getCachedEdges(),u=[],l=Math.min(r,i),c=Math.max(r,i),h=Math.min(n,o),d=Math.max(n,o);r=l,i=c,n=h,o=d;for(var p,f=0;f<a.length;f++){var v=a[f]._private.position,g=this.getNodeShape(a[f]),y=this.getNodeWidth(a[f]),m=this.getNodeHeight(a[f]),b=a[f]._private.style["border-width"].pxValue/2,w=e.nodeShapes[g];w.intersectBox(r,n,i,o,y,m,v.x,v.y,b)&&u.push(a[f])}for(var f=0;f<s.length;f++){var x=s[f]._private.rscratch;if("self"==s[f]._private.rscratch.edgeType&&((p=t.math.boxInBezierVicinity(r,n,i,o,x.startX,x.startY,x.cp2ax,x.cp2ay,x.endX,x.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(r,n,i,o,x.startX,x.startY,x.cp2ax,x.cp2ay,x.endX,x.endY,s[f]._private.style.width.pxValue))||(p=t.math.boxInBezierVicinity(r,n,i,o,x.startX,x.startY,x.cp2cx,x.cp2cy,x.endX,x.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(r,n,i,o,x.startX,x.startY,x.cp2cx,x.cp2cy,x.endX,x.endY,s[f]._private.style.width.pxValue)))&&u.push(s[f]),"bezier"==x.edgeType&&(p=t.math.boxInBezierVicinity(r,n,i,o,x.startX,x.startY,x.cp2x,x.cp2y,x.endX,x.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkBezierInBox(r,n,i,o,x.startX,x.startY,x.cp2x,x.cp2y,x.endX,x.endY,s[f]._private.style.width.pxValue))&&u.push(s[f]),"straight"==x.edgeType&&(p=t.math.boxInBezierVicinity(r,n,i,o,x.startX,x.startY,.5*x.startX+.5*x.endX,.5*x.startY+.5*x.endY,x.endX,x.endY,s[f]._private.style.width.pxValue))&&(2==p||1==p&&t.math.checkStraightEdgeInBox(r,n,i,o,x.startX,x.startY,x.endX,x.endY,s[f]._private.style.width.pxValue))&&u.push(s[f]),"haystack"==x.edgeType){var _=s[f].target()[0],E=_.position(),S=s[f].source()[0],T=S.position(),k=T.x+x.source.x,P=T.y+x.source.y,C=E.x+x.target.x,D=E.y+x.target.y,N=k>=r&&i>=k&&P>=n&&o>=P,O=C>=r&&i>=C&&D>=n&&o>=D;N&&O&&u.push(s[f])}}return u},r.getNodeWidth=function(t){return t.width()},r.getNodeHeight=function(t){return t.height()},r.getNodeShape=function(t){var e=t._private.style.shape.value;return t.isParent()?"rectangle"===e||"roundrectangle"===e?e:"rectangle":e},r.getNodePadding=function(t){var e=t._private.style["padding-left"].pxValue,r=t._private.style["padding-right"].pxValue,n=t._private.style["padding-top"].pxValue,i=t._private.style["padding-bottom"].pxValue;return isNaN(e)&&(e=0),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(i)&&(i=0),{left:e,right:r,top:n,bottom:i}},r.zOrderSort=t.Collection.zIndexSort,r.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},r.getCachedZSortedEles=function(t){var e=this.lastZOrderCachedNodes,r=this.lastZOrderCachedEdges,n=this.getCachedNodes(),i=this.getCachedEdges(),o=[];if(!t&&e&&r&&e===n&&r===i)o=this.cachedZSortedEles;else{for(var a=0;a<n.length;a++)n[a].visible()&&!n[a].transparent()&&o.push(n[a]);for(var a=0;a<i.length;a++)i[a].visible()&&!i[a].transparent()&&o.push(i[a]);o.sort(this.zOrderSort),this.cachedZSortedEles=o}return this.lastZOrderCachedNodes=n,this.lastZOrderCachedEdges=i,o},r.projectBezier=function(e){function r(t){o.push({x:n(t[0],t[2],t[4],.05),y:n(t[1],t[3],t[5],.05)}),o.push({x:n(t[0],t[2],t[4],.25),y:n(t[1],t[3],t[5],.25)}),o.push({x:n(t[0],t[2],t[4],.4),y:n(t[1],t[3],t[5],.4)});var e={x:n(t[0],t[2],t[4],.5),y:n(t[1],t[3],t[5],.5)};o.push(e),"self"===i.edgeType||"compound"===i.edgeType?(i.midX=i.selfEdgeMidX,i.midY=i.selfEdgeMidY):(i.midX=e.x,i.midY=e.y),o.push({x:n(t[0],t[2],t[4],.6),y:n(t[1],t[3],t[5],.6)}),o.push({x:n(t[0],t[2],t[4],.75),y:n(t[1],t[3],t[5],.75)}),o.push({x:n(t[0],t[2],t[4],.95),y:n(t[1],t[3],t[5],.95)})}var n=t.math.qbezierAt,i=e._private.rscratch,o=e._private.rstyle.bezierPts=[];"self"===i.edgeType?(r([i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY]),r([i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY])):"bezier"===i.edgeType&&r([i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY])},r.recalculateNodeLabelProjection=function(t){var e=t._private.style.content.strValue;if(e&&!e.match(/^\s+$/)){var r,n,i=t.outerWidth(),o=t.outerHeight(),a=t._private.position,s=t._private.style["text-halign"].strValue,u=t._private.style["text-valign"].strValue,l=t._private.rscratch,c=t._private.rstyle;switch(s){case"left":r=a.x-i/2;break;case"right":r=a.x+i/2;break;default:r=a.x}switch(u){case"top":n=a.y-o/2;break;case"bottom":n=a.y+o/2;break;default:n=a.y}l.labelX=r,l.labelY=n,c.labelX=r,c.labelY=n,this.applyLabelDimensions(t)}},r.recalculateEdgeLabelProjection=function(e){var r=e._private.style.content.strValue;if(r&&!r.match(/^\s+$/)){var n,i,o,a,s=e._private,u=s.rscratch,l=s.rstyle;if("self"==u.edgeType)o=u.selfEdgeMidX,a=u.selfEdgeMidY;else if("straight"==u.edgeType)o=(u.startX+u.endX)/2,a=(u.startY+u.endY)/2;else if("bezier"==u.edgeType)o=t.math.qbezierAt(u.startX,u.cp2x,u.endX,.5),a=t.math.qbezierAt(u.startY,u.cp2y,u.endY,.5);else if("haystack"==u.edgeType){var c=u.haystackPts;o=(c[0]+c[2])/2,a=(c[1]+c[3])/2}n=o,i=a,u.labelX=n,u.labelY=i,l.labelX=n,l.labelY=i,this.applyLabelDimensions(e)}},r.applyLabelDimensions=function(t){var e=t._private.rscratch,r=t._private.rstyle,n=this.getLabelText(t),i=this.calculateLabelDimensions(t,n);r.labelWidth=i.width,e.labelWidth=i.width,r.labelHeight=i.height,e.labelHeight=i.height},r.getLabelText=function(t){var e=t._private.style,r=t._private.style.content.strValue,n=e["text-transform"].value,i=t._private.rscratch;if("none"==n||("uppercase"==n?r=r.toUpperCase():"lowercase"==n&&(r=r.toLowerCase())),"wrap"===e["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var o=r.split("\n"),a=e["text-max-width"].pxValue,s=[],u=0;u<o.length;u++){var l=o[u],c=this.calculateLabelDimensions(t,l,"line="+l),h=c.width;if(h>a){for(var d=l.split(/\s+/),p="",f=0;f<d.length;f++){var v=d[f],g=0===p.length?v:p+" "+v,y=this.calculateLabelDimensions(t,g,"testLine="+g),m=y.width;a>=m?p+=v+" ":(s.push(p),p=v+" ")}p.match(/^\s+$/)||s.push(p)}else s.push(l)}i.labelWrapCachedLines=s,i.labelWrapCachedText=r=s.join("\n"),i.labelWrapKey=i.labelKey}return r},r.calculateLabelDimensions=function(t,e,r){var n=this,i=t._private.style,o=i["font-style"].strValue,a=i["font-size"].pxValue+"px",s=i["font-family"].strValue,u=i["font-weight"].strValue,l=t._private.labelKey;r&&(l+="$@$"+r);var c=n.labelDimCache||(n.labelDimCache={});if(c[l])return c[l];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var d=h.style;return d.fontFamily=s,d.fontStyle=o,d.fontSize=a,d.fontWeight=u,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",d.whiteSpace="wrap"===i["text-wrap"].value?"pre":"normal",h.textContent=e,c[l]={width:h.clientWidth,height:h.clientHeight},c[l]},r.recalculateRenderedStyle=function(t){for(var e=[],r=[],n={},i=0;i<t.length;i++){var o=t[i],a=o._private,s=a.style,u=a.rscratch,l=a.rstyle,c=a.data.id,h=null!=u.boundingBoxKey&&a.boundingBoxKey===u.boundingBoxKey,d=null!=u.labelKey&&a.labelKey===u.labelKey,p=h&&d;if("nodes"===o._private.group){var f=a.position,v=null!=l.nodeX&&null!=l.nodeY&&f.x===l.nodeX&&f.y===l.nodeY,g=null!=l.nodeW&&l.nodeW===s.width.pxValue,y=null!=l.nodeH&&l.nodeH===s.height.pxValue;v&&p&&g&&y||r.push(o),l.nodeX=f.x,l.nodeY=f.y,l.nodeW=s.width.pxValue,l.nodeH=s.height.pxValue}else{var m=o._private.source._private.position,b=o._private.target._private.position,w=null!=l.srcX&&null!=l.srcY&&m.x===l.srcX&&m.y===l.srcY,x=null!=l.tgtX&&null!=l.tgtY&&b.x===l.tgtX&&b.y===l.tgtY,_=w&&x;if(!_||!p){var E=a.style["curve-style"].value;if("bezier"===E){if(!n[c]){e.push(o),n[c]=!0;for(var S=o.parallelEdges(),i=0;i<S.length;i++){var T=S[i],k=T._private.data.id;n[k]||(e.push(T),n[k]=!0)}}}else e.push(o)}l.srcX=m.x,l.srcY=m.y,l.tgtX=b.x,l.tgtY=b.y}u.boundingBoxKey=a.boundingBoxKey,u.labelKey=a.labelKey}this.recalculateEdgeProjections(e),this.recalculateLabelProjections(r,e)},r.recalculateLabelProjections=function(t,e){for(var r=0;r<t.length;r++)this.recalculateNodeLabelProjection(t[r]);for(var r=0;r<e.length;r++)this.recalculateEdgeLabelProjection(e[r])},r.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},r.findEdgeControlPoints=function(r){if(r&&0!==r.length){for(var n,i=this.data.cy,o=i.hasCompoundNodes(),a={},s=[],u=[],l=0;l<r.length;l++){var c=r[l],h=c._private.style,d="unbundled-bezier"===h["curve-style"].value;if("none"!==h.display.value)if("haystack"!==h["curve-style"].value){var p=c._private.data.source,f=c._private.data.target;n=p>f?f+"-"+p:p+"-"+f,d&&(n="unbundled"+c._private.data.id),null==a[n]&&(a[n]=[],s.push(n)),a[n].push(c),d&&(a[n].hasUnbundled=!0)}else u.push(c)}for(var v,g,y,m,b,w,x,_,E,S,T,k,P,C,D=0;D<s.length;D++){n=s[D];var N=a[n];if(N.sort(function(t,e){return t._private.index-e._private.index}),v=N[0]._private.source,g=N[0]._private.target,v._private.data.id>g._private.data.id){var O=v;v=g,g=O}if(y=v._private.position,m=g._private.position,b=this.getNodeWidth(v),w=this.getNodeHeight(v),x=this.getNodeWidth(g),_=this.getNodeHeight(g),E=e.nodeShapes[this.getNodeShape(v)],S=e.nodeShapes[this.getNodeShape(g)],T=v._private.style["border-width"].pxValue,k=g._private.style["border-width"].pxValue,C=!1,N.length>1&&v!==g||N.hasUnbundled){var M=E.intersectLine(y.x,y.y,b,w,m.x,m.y,T/2),L=S.intersectLine(m.x,m.y,x,_,y.x,y.y,k/2),I={x1:M[0],x2:L[0],y1:M[1],y2:L[1]},R=L[1]-M[1],B=L[0]-M[0],A=Math.sqrt(B*B+R*R),j={x:B,y:R},q={x:j.x/A,y:j.y/A};P={x:-q.y,y:q.x},(S.checkPoint(M[0],M[1],k/2,x,_,m.x,m.y)||E.checkPoint(L[0],L[1],T/2,b,w,y.x,y.y))&&(P={},C=!0)}for(var c,z,l=0;l<N.length;l++){c=N[l],z=c._private.rscratch;var V=z.lastEdgeIndex,F=l,X=z.lastNumEdges,Y=N.length,U=c._private.style,W=U["control-point-step-size"].pxValue,H=void 0!==U["control-point-distance"]?U["control-point-distance"].pxValue:void 0,$=U["control-point-weight"].value,d="unbundled-bezier"===U["curve-style"].value,G=c._private.source!==v;G&&d&&(H*=-1);var Z=z.lastSrcCtlPtX,K=y.x,J=z.lastSrcCtlPtY,Q=y.y,tt=z.lastSrcCtlPtW,et=v.outerWidth(),rt=z.lastSrcCtlPtH,nt=v.outerHeight(),it=z.lastTgtCtlPtX,ot=m.x,at=z.lastTgtCtlPtY,st=m.y,ut=z.lastTgtCtlPtW,lt=g.outerWidth(),ct=z.lastTgtCtlPtH,ht=g.outerHeight(),dt=z.lastW,pt=U["control-point-step-size"].pxValue;if(z.badBezier=C?!0:!1,Z!==K||J!==Q||tt!==et||rt!==nt||it!==ot||at!==st||ut!==lt||ct!==ht||dt!==pt||!(V===F&&X===Y||d)){if(z.lastSrcCtlPtX=K,z.lastSrcCtlPtY=Q,z.lastSrcCtlPtW=et,z.lastSrcCtlPtH=nt,z.lastTgtCtlPtX=ot,z.lastTgtCtlPtY=st,z.lastTgtCtlPtW=lt,z.lastTgtCtlPtH=ht,z.lastEdgeIndex=F,z.lastNumEdges=Y,z.lastWidth=pt,v===g){z.edgeType="self";var ft=l,vt=W;d&&(ft=0,vt=H),z.cp2ax=y.x,z.cp2ay=y.y-(1+Math.pow(w,1.12)/100)*vt*(ft/3+1),z.cp2cx=y.x-(1+Math.pow(b,1.12)/100)*vt*(ft/3+1),z.cp2cy=y.y,z.selfEdgeMidX=(z.cp2ax+z.cp2cx)/2,z.selfEdgeMidY=(z.cp2ay+z.cp2cy)/2}else if(o&&(v.isParent()||v.isChild()||g.isParent()||g.isChild())&&(v.parents().anySame(g)||g.parents().anySame(v))){z.edgeType="compound",z.badBezier=!1;var ft=l,vt=W;d&&(ft=0,vt=H);var gt=50,yt={x:y.x-b/2,y:y.y-w/2},mt={x:m.x-x/2,y:m.y-_/2},bt=1;z.cp2ax=yt.x,z.compoundStretchA=Math.max(bt,Math.log(.01*b)),z.cp2ay=yt.y-(1+Math.pow(gt,1.12)/100)*vt*(ft/3+1)*z.compoundStretchA,z.compoundStretchB=Math.max(bt,Math.log(.01*x)),z.cp2cx=mt.x-(1+Math.pow(gt,1.12)/100)*vt*(ft/3+1)*z.compoundStretchB,z.cp2cy=mt.y,z.selfEdgeMidX=(z.cp2ax+z.cp2cx)/2,z.selfEdgeMidY=(z.cp2ay+z.cp2cy)/2}else if(N.length%2!==1||l!==Math.floor(N.length/2)||d){var wt,xt=(.5-N.length/2+l)*W,_t=t.math.signum(xt);wt=d?H:void 0!==H?_t*H:void 0;var Et=void 0!==wt?wt:xt,St=1-$,Tt=$;G&&(St=$,Tt=1-$);var kt={x:I.x1*St+I.x2*Tt,y:I.y1*St+I.y2*Tt};z.edgeType="bezier",z.cp2x=kt.x+P.x*Et,z.cp2y=kt.y+P.y*Et}else z.edgeType="straight";this.findEndpoints(c);var Pt=!t.is.number(z.startX)||!t.is.number(z.startY),Ct=!t.is.number(z.arrowStartX)||!t.is.number(z.arrowStartY),Dt=!t.is.number(z.endX)||!t.is.number(z.endY),Nt=!t.is.number(z.arrowEndX)||!t.is.number(z.arrowEndY),Ot=3,Mt=this.getArrowWidth(c._private.style.width.pxValue)*e.arrowShapeHeight,Lt=Ot*Mt,It=t.math.distance({x:z.cp2x,y:z.cp2y},{x:z.startX,y:z.startY}),Rt=Lt>It,Bt=t.math.distance({x:z.cp2x,y:z.cp2y},{x:z.endX,y:z.endY}),At=Lt>Bt;if("bezier"===z.edgeType){var jt=!1;if(Pt||Ct||Rt){jt=!0;var qt={x:z.cp2x-y.x,y:z.cp2y-y.y},zt=Math.sqrt(qt.x*qt.x+qt.y*qt.y),Vt={x:qt.x/zt,y:qt.y/zt},Ft=Math.max(b,w),Xt={x:z.cp2x+2*Vt.x*Ft,y:z.cp2y+2*Vt.y*Ft},Yt=E.intersectLine(y.x,y.y,b,w,Xt.x,Xt.y,T/2);Rt?(z.cp2x=z.cp2x+Vt.x*(Lt-It),z.cp2y=z.cp2y+Vt.y*(Lt-It)):(z.cp2x=Yt[0]+Vt.x*Lt,z.cp2y=Yt[1]+Vt.y*Lt)}if(Dt||Nt||At){jt=!0;var qt={x:z.cp2x-m.x,y:z.cp2y-m.y},zt=Math.sqrt(qt.x*qt.x+qt.y*qt.y),Vt={x:qt.x/zt,y:qt.y/zt},Ft=Math.max(b,w),Xt={x:z.cp2x+2*Vt.x*Ft,y:z.cp2y+2*Vt.y*Ft},Ut=S.intersectLine(m.x,m.y,x,_,Xt.x,Xt.y,k/2);At?(z.cp2x=z.cp2x+Vt.x*(Lt-Bt),z.cp2y=z.cp2y+Vt.y*(Lt-Bt)):(z.cp2x=Ut[0]+Vt.x*Lt,z.cp2y=Ut[1]+Vt.y*Lt)}jt&&this.findEndpoints(c)}else"straight"===z.edgeType&&(z.midX=(K+ot)/2,z.midY=(Q+st)/2);this.projectBezier(c),this.recalculateEdgeLabelProjection(c)}}}for(var l=0;l<u.length;l++){var c=u[l],Wt=c._private,Ht=Wt.rscratch,z=Ht;if(!Ht.haystack){var $t=2*Math.random()*Math.PI;Ht.source={x:Math.cos($t),y:Math.sin($t)};var $t=2*Math.random()*Math.PI;Ht.target={x:Math.cos($t),y:Math.sin($t)}}var v=Wt.source,g=Wt.target,y=v._private.position,m=g._private.position,b=v.width(),x=g.width(),w=v.height(),_=g.height(),Ft=h["haystack-radius"].value,Gt=Ft/2;z.haystackPts=[z.source.x*b*Gt+y.x,z.source.y*w*Gt+y.y,z.target.x*x*Gt+m.x,z.target.y*_*Gt+m.y],Ht.edgeType="haystack",Ht.haystack=!0,this.recalculateEdgeLabelProjection(c)}return a}},r.findEndpoints=function(r){var n,i=r.source()[0],o=r.target()[0],a=r._private.style["target-arrow-shape"].value,s=r._private.style["source-arrow-shape"].value,u=o._private.style["border-width"].pxValue,l=i._private.style["border-width"].pxValue,c=r._private.rscratch;if("self"==c.edgeType||"compound"==c.edgeType){var h=[c.cp2cx,c.cp2cy];n=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],u/2);var d=t.math.shortenIntersection(n,h,e.arrowShapes[a].spacing(r)),p=t.math.shortenIntersection(n,h,e.arrowShapes[a].gap(r));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1];var h=[c.cp2ax,c.cp2ay];n=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),h[0],h[1],l/2);var f=t.math.shortenIntersection(n,h,e.arrowShapes[s].spacing(r)),v=t.math.shortenIntersection(n,h,e.arrowShapes[s].gap(r));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if("straight"==c.edgeType){n=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),i.position().x,i.position().y,u/2),c.noArrowPlacement=0===n.length?!0:!1;var d=t.math.shortenIntersection(n,[i.position().x,i.position().y],e.arrowShapes[a].spacing(r)),p=t.math.shortenIntersection(n,[i.position().x,i.position().y],e.arrowShapes[a].gap(r));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1],n=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),o.position().x,o.position().y,l/2),c.noArrowPlacement=0===n.length?!0:!1;var f=t.math.shortenIntersection(n,[o.position().x,o.position().y],e.arrowShapes[s].spacing(r)),v=t.math.shortenIntersection(n,[o.position().x,o.position().y],e.arrowShapes[s].gap(r));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1],c.badLine=t.is.number(c.startX)&&t.is.number(c.startY)&&t.is.number(c.endX)&&t.is.number(c.endY)?!1:!0}else if("bezier"==c.edgeType){var h=[c.cp2x,c.cp2y];n=e.nodeShapes[this.getNodeShape(o)].intersectLine(o._private.position.x,o._private.position.y,this.getNodeWidth(o),this.getNodeHeight(o),h[0],h[1],u/2);var d=t.math.shortenIntersection(n,h,e.arrowShapes[a].spacing(r)),p=t.math.shortenIntersection(n,h,e.arrowShapes[a].gap(r));c.endX=p[0],c.endY=p[1],c.arrowEndX=d[0],c.arrowEndY=d[1],n=e.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),h[0],h[1],l/2);var f=t.math.shortenIntersection(n,h,e.arrowShapes[s].spacing(r)),v=t.math.shortenIntersection(n,h,e.arrowShapes[s].gap(r));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if(c.isArcEdge)return},r.findEdges=function(t){for(var e=this.getCachedEdges(),r={},n=[],i=0;i<t.length;i++)r[t[i]._private.data.id]=t[i];for(var i=0;i<e.length;i++)(r[e[i]._private.data.source]||r[e[i]._private.data.target])&&n.push(e[i]);return n},r.getArrowWidth=r.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},r=e[t];return r?r:(r=Math.max(Math.pow(13.37*t,.9),29),e[t]=r,r)}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.drawEdge=function(t,r,n){var i=r._private.rscratch,o=e.usePaths();if(!i.badBezier&&("bezier"!==i.edgeType&&"straight"!==i.edgeType||!isNaN(i.startX))){var a=r._private.style;if(!(a.width.pxValue<=0)){var s=a["overlay-padding"].pxValue,u=a["overlay-opacity"].value,l=a["overlay-color"].value;if(n){if(0===u)return;this.strokeStyle(t,l[0],l[1],l[2],u),t.lineCap="round","self"!=r._private.rscratch.edgeType||o||(t.lineCap="butt")}else{var c=a["line-color"].value;this.strokeStyle(t,c[0],c[1],c[2],a.opacity.value),t.lineCap="butt"}var h,d,p,f;p=h=r._private.source,f=d=r._private.target;var v=a.width.pxValue+(n?2*s:0),g=n?"solid":a["line-style"].value;t.lineWidth=v;var y=a["shadow-blur"].pxValue,m=a["shadow-opacity"].value,b=a["shadow-color"].value,w=a["shadow-offset-x"].pxValue,x=a["shadow-offset-y"].pxValue;if(this.shadowStyle(t,b,n?0:m,y,w,x),"haystack"===i.edgeType)this.drawStyledEdge(r,t,i.haystackPts,g,v);else if("self"===i.edgeType||"compound"===i.edgeType){var _=r._private.rscratch,E=[_.startX,_.startY,_.cp2ax,_.cp2ay,_.selfEdgeMidX,_.selfEdgeMidY,_.selfEdgeMidX,_.selfEdgeMidY,_.cp2cx,_.cp2cy,_.endX,_.endY];this.drawStyledEdge(r,t,E,g,v)}else if("straight"===i.edgeType){var S=d._private.position.x-h._private.position.x,T=d._private.position.y-h._private.position.y,k=i.endX-i.startX,P=i.endY-i.startY;

if(0>S*k+T*P)i.straightEdgeTooShort=!0;else{var _=i;this.drawStyledEdge(r,t,[_.startX,_.startY,_.endX,_.endY],g,v),i.straightEdgeTooShort=!1}}else{var _=i;this.drawStyledEdge(r,t,[_.startX,_.startY,_.cp2x,_.cp2y,_.endX,_.endY],g,v)}"haystack"===i.edgeType?this.drawArrowheads(t,r,n):i.noArrowPlacement!==!0&&void 0!==i.startX&&this.drawArrowheads(t,r,n),this.shadowStyle(t,"transparent",0)}}},r.drawStyledEdge=function(t,r,n,i,o){var a,s=t._private.rscratch,u=r,l=!1,c=e.usePaths();if(c){for(var h=n,d=s.pathCacheKey&&h.length===s.pathCacheKey.length,p=d,f=0;p&&f<h.length;f++)s.pathCacheKey[f]!==h[f]&&(p=!1);p?(a=r=s.pathCache,l=!0):(a=r=new Path2D,s.pathCacheKey=h,s.pathCache=a)}if(u.setLineDash)switch(i){case"dotted":u.setLineDash([1,1]);break;case"dashed":u.setLineDash([6,3]);break;case"solid":u.setLineDash([])}l||(r.beginPath&&r.beginPath(),r.moveTo(n[0],n[1]),6!==n.length||s.badBezier?12!==n.length||s.badBezier?4!==n.length||s.badLine||r.lineTo(n[2],n[3]):(r.quadraticCurveTo(n[2],n[3],n[4],n[5]),r.quadraticCurveTo(n[8],n[9],n[10],n[11])):r.quadraticCurveTo(n[2],n[3],n[4],n[5])),r=u,c?r.stroke(a):r.stroke(),r.setLineDash&&r.setLineDash([])},r.drawArrowheads=function(t,e,r){function n(r,n,i,o,a){var s=v[r+"-arrow-shape"].value;if("none"!==s){var u=t.globalCompositeOperation,l="hollow"===v[r+"-arrow-fill"].value?"both":"filled",c=v[r+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",l="hollow"),(1!==v.opacity.value||"hollow"===c)&&(t.globalCompositeOperation="destination-out",h.fillStyle(t,255,255,255,1),h.strokeStyle(t,255,255,255,1),h.drawArrowShape(e,r,t,l,v.width.pxValue,v[r+"-arrow-shape"].value,n,i,o,a),t.globalCompositeOperation=u);var d=v[r+"-arrow-color"].value;h.fillStyle(t,d[0],d[1],d[2],v.opacity.value),h.strokeStyle(t,d[0],d[1],d[2],v.opacity.value),h.drawArrowShape(e,r,t,c,v.width.pxValue,v[r+"-arrow-shape"].value,n,i,o,a)}}if(!r){var i,o,a,s,u,l,c=e._private.rscratch,h=this,d="haystack"===c.edgeType,p=e.source().position(),f=e.target().position();d?(a=c.haystackPts[0],s=c.haystackPts[1],u=c.haystackPts[2],l=c.haystackPts[3]):(a=c.arrowStartX,s=c.arrowStartY,u=c.arrowEndX,l=c.arrowEndY);var v=e._private.style;i=a-p.x,o=s-p.y,d||isNaN(a)||isNaN(s)||isNaN(i)||isNaN(o)||n("source",a,s,i,o);var g=c.midX,y=c.midY;d&&(g=(a+u)/2,y=(s+l)/2),i=a-u,o=s-l,"self"===c.edgeType&&(i=1,o=-1),isNaN(g)||isNaN(y)||n("mid-target",g,y,i,o),i*=-1,o*=-1,isNaN(g)||isNaN(y)||n("mid-source",g,y,i,o),i=u-f.x,o=l-f.y,d||isNaN(u)||isNaN(l)||isNaN(i)||isNaN(o)||n("target",u,l,i,o)}},r.drawArrowShape=function(t,r,n,i,o,a,s,u,l,c){var h,d=e.usePaths(),p=t._private.rscratch,f=!1,v=n,g={x:s,y:u},y=Math.asin(c/Math.sqrt(l*l+c*c));0>l?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(o),b=e.arrowShapes[a];if(d){var w=m+"$"+a+"$"+y+"$"+s+"$"+u;p.arrowPathCacheKey=p.arrowPathCacheKey||{},p.arrowPathCache=p.arrowPathCache||{};var x=p.arrowPathCacheKey[r]===w;x?(h=n=p.arrowPathCache[r],f=!0):(h=n=new Path2D,p.arrowPathCacheKey[r]=w,p.arrowPathCache[r]=h)}n.beginPath&&n.beginPath(),f||b.draw(n,m,y,g),!b.leavePathOpen&&n.closePath&&n.closePath(),n=v,("filled"===i||"both"===i)&&(d?n.fill(h):n.fill()),("hollow"===i||"both"===i)&&(n.lineWidth=b.matchEdgeWidth?o:1,n.lineJoin="miter",d?n.stroke(h):n.stroke())}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.getCachedImage=function(t,e){var r=this,n=r.imageCache=r.imageCache||{};if(n[t]&&n[t].image)return n[t].image;var i=n[t]=n[t]||{},o=i.image=new Image;return o.addEventListener("load",e),o.src=t,o},r.safeDrawImage=function(t,r,n,i,o,a,s,u,l,c){var h=this;try{t.drawImage(r,n,i,o,a,s,u,l,c)}catch(d){h.data.canvasNeedsRedraw[e.NODE]=!0,h.data.canvasNeedsRedraw[e.DRAG]=!0,h.drawingImage=!0,h.redraw()}},r.drawInscribedImage=function(t,r,n){var i=this,o=n._private.position.x,a=n._private.position.y,s=n._private.style,u=s["background-fit"].value,l=s["background-position-x"],c=s["background-position-y"],h=s["background-repeat"].value,d=n.width(),p=n.height(),f=n._private.rscratch,v=s["background-clip"].value,g="node"===v,y=s["background-image-opacity"].value,m=r.width,b=r.height;if(0!==m&&0!==b){var w=s["background-width"];"auto"!==w.value&&(m="%"===w.units?w.value/100*d:w.pxValue);var x=s["background-height"];if("auto"!==x.value&&(b="%"===x.units?x.value/100*p:x.pxValue),0!==m&&0!==b){if("contain"===u){var _=Math.min(d/m,p/b);m*=_,b*=_}else if("cover"===u){var _=Math.max(d/m,p/b);m*=_,b*=_}var E=o-d/2;E+="%"===l.units?(d-m)*l.value/100:l.pxValue;var S=a-p/2;S+="%"===c.units?(p-b)*c.value/100:c.pxValue,f.pathCache&&(E-=o,S-=a,o=0,a=0);var T=t.globalAlpha;if(t.globalAlpha=y,"no-repeat"===h)g&&(t.save(),f.pathCache?t.clip(f.pathCache):(e.nodeShapes[i.getNodeShape(n)].drawPath(t,o,a,d,p),t.clip())),i.safeDrawImage(t,r,0,0,r.width,r.height,E,S,m,b),g&&t.restore();else{var k=t.createPattern(r,h);t.fillStyle=k,e.nodeShapes[i.getNodeShape(n)].drawPath(t,o,a,d,p),t.translate(E,S),t.fill(),t.translate(-E,-S)}t.globalAlpha=T}}}}(cytoscape),function(t){"use strict";function e(t,e,r,n,i,o){var o=o||5;t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+n-o,r),t.quadraticCurveTo(e+n,r,e+n,r+o),t.lineTo(e+n,r+i-o),t.quadraticCurveTo(e+n,r+i,e+n-o,r+i),t.lineTo(e+o,r+i),t.quadraticCurveTo(e,r+i,e,r+i-o),t.lineTo(e,r+o),t.quadraticCurveTo(e,r,e+o,r),t.closePath(),t.fill()}var r=t("renderer","canvas"),n=r.prototype;n.drawEdgeText=function(e,r){var n=r._private.style.content.strValue;if(!(!n||n.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var i=r._private.style["font-size"].pxValue*r.cy().zoom(),o=r._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){e.textAlign="center",e.textBaseline="middle";var a=r._private.rscratch;if(t.is.number(a.labelX)&&t.is.number(a.labelY)){var s,u,l,c=r._private.style,h="autorotate"===c["edge-text-rotation"].strValue;if(h){switch(a.edgeType){case"haystack":u=a.haystackPts[2]-a.haystackPts[0],l=a.haystackPts[3]-a.haystackPts[1];break;default:u=a.endX-a.startX,l=a.endY-a.startY}s=Math.atan(l/u),e.translate(a.labelX,a.labelY),e.rotate(s),this.drawText(e,r,0,0),e.rotate(-s),e.translate(-a.labelX,-a.labelY)}else this.drawText(e,r,a.labelX,a.labelY)}}}},n.drawNodeText=function(e,r){var n=r._private.style.content.strValue;if(n&&!n.match(/^\s+$/)){var i=r._private.style["font-size"].pxValue*r.cy().zoom(),o=r._private.style["min-zoomed-font-size"].pxValue;if(!(o>i)){var a=r._private.style["text-halign"].strValue,s=r._private.style["text-valign"].strValue,u=r._private.rscratch;if(t.is.number(u.labelX)&&t.is.number(u.labelY)){switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(s){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,r,u.labelX,u.labelY)}}}},n.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},n.setupTextStyle=function(t,e){var r=e.effectiveOpacity(),n=e._private.style,i=n["font-style"].strValue,o=n["font-size"].pxValue+"px",a=n["font-family"].strValue,s=n["font-weight"].strValue,u=n["text-opacity"].value*n.opacity.value*r,l=n["text-outline-opacity"].value*u,c=n.color.value,h=n["text-outline-color"].value,d=n["text-shadow-blur"].pxValue,p=n["text-shadow-opacity"].value,f=n["text-shadow-color"].value,v=n["text-shadow-offset-x"].pxValue,g=n["text-shadow-offset-y"].pxValue,y=e._private.fontKey,m=this.getFontCache(t);m.key!==y&&(t.font=i+" "+s+" "+o+" "+a,m.key=y);var b=this.getLabelText(e);return t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],u),this.strokeStyle(t,h[0],h[1],h[2],l),this.shadowStyle(t,f,p,d,v,g),b},n.drawText=function(t,r,n,i){var o=r._private,a=o.style,s=o.rstyle,u=o.rscratch,l=r.effectiveOpacity();if(0!==l&&0!==a["text-opacity"].value){var c=this.setupTextStyle(t,r),h=a["text-halign"].value,d=a["text-valign"].value;if(r.isEdge()&&(h="center",d="center"),null!=c&&!isNaN(n)&&!isNaN(i)){var p=a["text-background-opacity"].value,f=a["text-border-opacity"].value,v=a["text-border-width"].pxValue;if(p>0||v>0&&f>0){var g=4+v/2;r.isNode()&&("top"===d?i-=g:"bottom"===d&&(i+=g),"left"===h?n-=g:"right"===h&&(n+=g));var y=s.labelWidth,m=s.labelHeight,b=n;h&&("center"==h?b-=y/2:"left"==h&&(b-=y));var w=i;if(r.isNode()?"top"==d?w-=m:"center"==d&&(w-=m/2):w-=m/2,"autorotate"===a["edge-text-rotation"].strValue?(i=0,y+=4,b=n-y/2,w=i-m/2):(b-=g,w-=g,m+=2*g,y+=2*g),p>0){var x=t.fillStyle,_=a["text-background-color"].value;t.fillStyle="rgba("+_[0]+","+_[1]+","+_[2]+","+p*l+")";var E=a["text-background-shape"].strValue;"roundrectangle"==E?e(t,b,w,y,m,2):t.fillRect(b,w,y,m),t.fillStyle=x}if(v>0&&f>0){var S=t.strokeStyle,T=t.lineWidth,k=a["text-border-color"].value,P=a["text-border-style"].value;if(t.strokeStyle="rgba("+k[0]+","+k[1]+","+k[2]+","+f*l+")",t.lineWidth=v,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=v/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(b,w,y,m),"double"===P){var C=v/2;t.strokeRect(b+C,w+C,y-2*C,m-2*C)}t.setLineDash&&t.setLineDash([]),t.lineWidth=T,t.strokeStyle=S}}var D=2*a["text-outline-width"].pxValue;if(D>0&&(t.lineWidth=D),"wrap"===a["text-wrap"].value){var N=u.labelWrapCachedLines,O=s.labelHeight/N.length;switch(d){case"top":i-=(N.length-1)*O;break;case"bottom":break;default:case"center":i-=(N.length-1)*O/2}for(var M=0;M<N.length;M++)D>0&&t.strokeText(N[M],n,i),t.fillText(N[M],n,i),i+=O}else D>0&&t.strokeText(c,n,i),t.fillText(c,n,i);this.shadowStyle(t,"transparent",0)}}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.drawNode=function(t,r,n){var i,o,a,s=this,u=r._private.style,l=r._private.rscratch,c=r._private,h=e.usePaths(),d=t,p=!1,f=u["overlay-padding"].pxValue,v=u["overlay-opacity"].value,g=u["overlay-color"].value;if(!n||0!==v){var y=r.effectiveOpacity();if(0!==y)if(i=this.getNodeWidth(r),o=this.getNodeHeight(r),t.lineWidth=u["border-width"].pxValue,void 0!==n&&n)v>0&&(this.fillStyle(t,g[0],g[1],g[2],v),e.nodeShapes.roundrectangle.drawPath(t,r._private.position.x,r._private.position.y,i+2*f,o+2*f),t.fill());else{var m,b=u["background-image"].value[2]||u["background-image"].value[1];if(void 0!==b){m=this.getCachedImage(b,function(){s.data.canvasNeedsRedraw[e.NODE]=!0,s.data.canvasNeedsRedraw[e.DRAG]=!0,s.drawingImage=!0,s.redraw()});var w=c.backgrounding;c.backgrounding=!m.complete,w!==c.backgrounding&&r.updateStyle(!1)}var x=u["background-color"].value,_=u["border-color"].value,E=u["border-style"].value;this.fillStyle(t,x[0],x[1],x[2],u["background-opacity"].value*y),this.strokeStyle(t,_[0],_[1],_[2],u["border-opacity"].value*y);var S=u["shadow-blur"].pxValue,T=u["shadow-opacity"].value,k=u["shadow-color"].value,P=u["shadow-offset-x"].pxValue,C=u["shadow-offset-y"].pxValue;if(this.shadowStyle(t,k,T,S,P,C),t.lineJoin="miter",t.setLineDash)switch(E){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var D=u.shape.strValue,N=r._private.position;if(h){var O=D+"$"+i+"$"+o;t.translate(N.x,N.y),l.pathCacheKey===O?(a=t=l.pathCache,p=!0):(a=t=new Path2D,l.pathCacheKey=O,l.pathCache=a)}if(!p){var M=N;h&&(M={x:0,y:0}),e.nodeShapes[this.getNodeShape(r)].drawPath(t,M.x,M.y,i,o)}t=d,h?t.fill(a):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==b&&m.complete&&this.drawInscribedImage(t,m,r);var L=u["background-blacken"].value,I=u["border-width"].pxValue;if(this.hasPie(r)&&(this.drawPie(t,r,y),(0!==L||0!==I)&&(h||e.nodeShapes[this.getNodeShape(r)].drawPath(t,N.x,N.y,i,o))),L>0?(this.fillStyle(t,0,0,0,L),h?t.fill(a):t.fill()):0>L&&(this.fillStyle(t,255,255,255,-L),h?t.fill(a):t.fill()),I>0&&(h?t.stroke(a):t.stroke(),"double"===E)){t.lineWidth=u["border-width"].pxValue/3;var R=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(a):t.stroke(),t.globalCompositeOperation=R}h&&t.translate(-N.x,-N.y),t.setLineDash&&t.setLineDash([])}}},r.hasPie=function(t){return t=t[0],t._private.hasPie},r.drawPie=function(r,n,i){n=n[0];var o=n._private,a=o.style,s=a["pie-size"],u=this.getNodeWidth(n),l=this.getNodeHeight(n),c=o.position.x,h=o.position.y,d=Math.min(u,l)/2,p=0,f=e.usePaths();f&&(c=0,h=0),"%"===s.units?d=d*s.value/100:void 0!==s.pxValue&&(d=s.pxValue/2);for(var v=1;v<=t.style.pieBackgroundN;v++){var g=a["pie-"+v+"-background-size"].value,y=a["pie-"+v+"-background-color"].value,m=a["pie-"+v+"-background-opacity"].value*i,b=g/100,w=1.5*Math.PI+2*Math.PI*p,x=2*Math.PI*b,_=w+x;0===g||p>=1||p+b>1||(r.beginPath(),r.moveTo(c,h),r.arc(c,h,d,w,_),r.closePath(),this.fillStyle(r,y[0],y[1],y[2],m),r.fill(),p+=b)}}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e,n=e.prototype;n.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},n.paintCache=function(t){for(var e,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if(e=r[i],e.context===t){n=!1;break}return n&&(e={context:t},r.push(e)),e},n.fillStyle=function(t,e,r,n,i){t.fillStyle="rgba("+e+","+r+","+n+","+i+")"},n.strokeStyle=function(t,e,r,n,i){t.strokeStyle="rgba("+e+","+r+","+n+","+i+")"},n.shadowStyle=function(t,e,r,n,i,o){var a=this.data.cy.zoom(),s=this.paintCache(t);(0!==s.shadowOpacity||0!==r)&&(s.shadowOpacity=r,r>0?(t.shadowBlur=n*a,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+r+")",t.shadowOffsetX=i*a,t.shadowOffsetY=o*a):(t.shadowBlur=0,t.shadowColor="transparent"))},n.matchCanvasSize=function(t){var n=this.data,i=t.clientWidth,o=t.clientHeight,a=this.getPixelRatio(),s=this.motionBlurPxRatio;(t===this.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE]||t===this.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u,l=i*a,c=o*a;if(l!==this.canvasWidth||c!==this.canvasHeight){this.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)u=n.canvases[d],(u.width!==l||u.height!==c)&&(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");for(var d=0;d<e.BUFFER_COUNT;d++)u=n.bufferCanvases[d],(u.width!==l||u.height!==c)&&(u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px");this.textureMult=1,1>=a&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],this.textureMult=2,u.width=l*this.textureMult,u.height=c*this.textureMult),this.canvasWidth=l,this.canvasHeight=c}},n.renderTo=function(t,e,r,n){this.redraw({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},n.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},e.minRedrawLimit=1e3/60,e.maxRedrawLimit=1e3,e.motionBlurDelay=100,n.redraw=function(n){function i(){function n(t,e,r,n,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c.fillStyle(t,255,255,255,c.motionBlurTransparency),t.fillRect(e,r,n,i),t.globalCompositeOperation=o}function i(t,e){var i,s,h,d;c.clearingMotionBlur||t!==p.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]&&t!==p.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]?(i=P,s=T,h=c.canvasWidth,d=c.canvasHeight):(i={x:k.x*y,y:k.y*y},s=S*y,h=c.canvasWidth*y,d=c.canvasHeight*y),t.setTransform(1,0,0,1,0,0),"motionBlur"===e?n(t,0,0,h,d):o||void 0!==e&&!e||t.clearRect(0,0,h,d),a||(t.translate(i.x,i.y),t.scale(s,s)),l&&t.translate(l.x,l.y),u&&t.scale(u,u)}function w(t,e){for(var r=t.eles,n=0;n<r.length;n++){var i=r[n];i.isNode()?(c.drawNode(e,i),V||c.drawNodeText(e,i),c.drawNode(e,i,!0)):z||(c.drawEdge(e,i),V||c.drawEdgeText(e,i),c.drawEdge(e,i,!0))}}c.textureDrawLastFrame&&!v&&(f[r.NODE]=!0,f[r.SELECT_BOX]=!0);var _=c.getCachedEdges(),E=d.style()._private.coreStyle,S=d.zoom(),T=void 0!==u?u:S,k=d.pan(),P={x:k.x,y:k.y},D={zoom:S,pan:{x:k.x,y:k.y}},N=c.prevViewport,O=void 0===N||D.zoom!==N.zoom||D.pan.x!==N.pan.x||D.pan.y!==N.pan.y;O||b&&!m||(c.motionBlurPxRatio=1),l&&(P=l),T*=h,P.x*=h,P.y*=h;var M={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(v||(c.textureDrawLastFrame=!1),v){c.textureDrawLastFrame=!0;var L;if(!c.textureCache){c.textureCache={},L=c.textureCache.bb=d.elements().boundingBox(),c.textureCache.texture=c.data.bufferCanvases[e.TEXTURE_BUFFER];var I=c.data.bufferContexts[e.TEXTURE_BUFFER];I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.redraw({forcedContext:I,drawOnlyNodeLayer:!0,forcedPxRatio:h*c.textureMult});var D=c.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:c.canvasWidth,height:c.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}f[r.DRAG]=!1,f[r.NODE]=!1;var R=p.contexts[r.NODE],B=c.textureCache.texture,D=c.textureCache.viewport;L=c.textureCache.bb,R.setTransform(1,0,0,1,0,0),g?n(R,0,0,D.width,D.height):R.clearRect(0,0,D.width,D.height);var A=E["outside-texture-bg-color"].value,j=E["outside-texture-bg-opacity"].value;c.fillStyle(R,A[0],A[1],A[2],j),R.fillRect(0,0,D.width,D.height);var S=d.zoom();i(R,!1),R.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/h,D.height/D.zoom/h),R.drawImage(B,D.mpan.x,D.mpan.y,D.width/D.zoom/h,D.height/D.zoom/h)}else c.textureOnViewport&&!o&&(c.textureCache=null);var q=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,z=c.hideEdgesOnViewport&&q,V=c.hideLabelsOnViewport&&q;if(f[r.DRAG]||f[r.NODE]||a||s){z||c.findEdgeControlPoints(_);for(var F=c.getCachedZSortedEles(),X=d.extent(),Y=0;Y<F.length;Y++){var U,W=F[Y],L=o?null:W.boundingBox(),H=o?!0:t.math.boundingBoxesIntersect(X,L);H&&(U=W._private.rscratch.inDragLayer?M.drag:M.nondrag,U.eles.push(W))}}var $=[];if($[r.NODE]=!f[r.NODE]&&g&&!c.clearedForMotionBlur[r.NODE]||c.clearingMotionBlur,$[r.NODE]&&(c.clearedForMotionBlur[r.NODE]=!0),$[r.DRAG]=!f[r.DRAG]&&g&&!c.clearedForMotionBlur[r.DRAG]||c.clearingMotionBlur,$[r.DRAG]&&(c.clearedForMotionBlur[r.DRAG]=!0),f[r.NODE]||a||s||$[r.NODE]){var G=g&&!$[r.NODE]&&1!==y,R=o||(G?c.data.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]:p.contexts[r.NODE]),Z=g&&!G?"motionBlur":void 0;i(R,Z),w(M.nondrag,R),a||g||(f[r.NODE]=!1)}if(!s&&(f[r.DRAG]||a||$[r.DRAG])){var G=g&&!$[r.DRAG]&&1!==y,R=o||(G?c.data.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]:p.contexts[r.DRAG]);i(R,g&&!G?"motionBlur":void 0),w(M.drag,R),a||g||(f[r.DRAG]=!1)}if(c.showFps||!s&&f[r.SELECT_BOX]&&!a){var R=o||p.contexts[r.SELECT_BOX];if(i(R),1==p.select[4]&&(c.hoverData.selecting||c.touchData.selecting)){var S=p.cy.zoom(),K=E["selection-box-border-width"].value/S;R.lineWidth=K,R.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",R.fillRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]),K>0&&(R.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",R.strokeRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]))}if(p.bgActivePosistion&&!c.hoverData.selecting){var S=p.cy.zoom(),J=p.bgActivePosistion;R.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",R.beginPath(),R.arc(J.x,J.y,E["active-bg-size"].pxValue/S,0,2*Math.PI),R.fill()}var Q=c.averageRedrawTime;if(c.showFps&&Q){Q=Math.round(Q);var tt=Math.round(1e3/Q);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+Q+" ms = "+tt+" fps",0,20);var et=60;R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(tt/et,1),20)}a||(f[r.SELECT_BOX]=!1)}if(g&&1!==y){var rt=p.contexts[r.NODE],nt=c.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE],it=p.contexts[r.DRAG],ot=c.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG],at=function(t,e,r){t.setTransform(1,0,0,1,0,0),r||!x?t.clearRect(0,0,c.canvasWidth,c.canvasHeight):n(t,0,0,c.canvasWidth,c.canvasHeight);var i=y;t.drawImage(e,0,0,c.canvasWidth*i,c.canvasHeight*i,0,0,c.canvasWidth,c.canvasHeight)};(f[r.NODE]||$[r.NODE])&&(at(rt,nt,$[r.NODE]),f[r.NODE]=!1),(f[r.DRAG]||$[r.DRAG])&&(at(it,ot,$[r.DRAG]),f[r.DRAG]=!1)}var st=Date.now();void 0===c.averageRedrawTime&&(c.averageRedrawTime=st-C),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0),c.redrawTotalTime+=st-C,c.lastRedrawTime=st-C,c.averageRedrawTime=c.averageRedrawTime/2+(st-C)/2,c.currentlyDrawing=!1,c.prevViewport=D,c.clearingMotionBlur&&(c.clearingMotionBlur=!1,c.motionBlurCleared=!0,c.motionBlur=!0),g&&(c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null,c.clearedForMotionBlur[r.NODE]=!1,c.clearedForMotionBlur[r.DRAG]=!1,c.motionBlur=!1,c.clearingMotionBlur=!v,c.mbFrames=0,f[r.NODE]=!0,f[r.DRAG]=!0,c.redraw()},e.motionBlurDelay)),c.drawingImage=!1}n=n||{};var o=n.forcedContext,a=n.drawAllLayers,s=n.drawOnlyNodeLayer,u=n.forcedZoom,l=n.forcedPan,c=this,h=void 0===n.forcedPxRatio?this.getPixelRatio():n.forcedPxRatio,d=c.data.cy,p=c.data,f=p.canvasNeedsRedraw,v=c.textureOnViewport&&!o&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming),g=void 0!==n.motionBlur?n.motionBlur:c.motionBlur,y=c.motionBlurPxRatio,m=d.hasCompoundNodes(),b=c.hoverData.draggingEles,w=c.hoverData.selecting||c.touchData.selecting?!0:!1;g=g&&!o&&c.motionBlurEnabled&&!w;var x=g;!o&&c.motionBlurTimeout&&clearTimeout(c.motionBlurTimeout),!o&&this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var _=e.minRedrawLimit,E=e.maxRedrawLimit,S=this.averageRedrawTime;S=_>S?_:S,S=E>S?S:E,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var T=Date.now(),k=T-this.lastDrawTime,P=k>=S;if(!o&&!c.clearingMotionBlur){if(!P||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){c.redraw()},S));this.lastDrawTime=T,this.currentlyDrawing=!0}g&&(null==c.mbFrames&&(c.mbFrames=0),c.drawingImage||c.mbFrames++,c.mbFrames<3&&(x=!1),c.mbFrames>c.minMbLowQualFrames&&(c.motionBlurPxRatio=c.mbPxRBlurry)),c.clearingMotionBlur&&(c.motionBlurPxRatio=1);var C=Date.now();o?i():t.util.requestAnimationFrame(i),o||c.initrender||(c.initrender=!0,d.trigger("initrender")),o||d.triggerOnRender()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.drawPolygonPath=function(t,e,r,n,i,o){var a=n/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],r+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],r+s*o[2*u+1]);t.closePath()},r.drawPolygon=function(t,e,r,n,i,o){this.drawPolygonPath(t,e,r,n,i,o),t.fill()},r.drawRoundRectanglePath=function(e,r,n,i,o,a){var s=i/2,u=o/2,l=t.math.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(r,n-u),e.arcTo(r+s,n-u,r+s,n,l),e.arcTo(r+s,n+u,r,n+u,l),e.arcTo(r-s,n+u,r-s,n,l),e.arcTo(r-s,n-u,r,n-u,l),e.lineTo(r,n-u),e.closePath()},r.drawRoundRectangle=function(t,e,r,n,i,o){this.drawRoundRectanglePath(t,e,r,n,i,o),t.fill()}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e.prototype;r.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]},r.bufferCanvasImage=function(e){var r=this.data,n=r.cy,i=n.elements().boundingBox(),o=e.full?Math.ceil(i.w):this.data.container.clientWidth,a=e.full?Math.ceil(i.h):this.data.container.clientHeight,s=1;if(void 0!==e.scale)o*=e.scale,a*=e.scale,s=e.scale;else if(t.is.number(e.maxWidth)||t.is.number(e.maxHeight)){var u=1/0,l=1/0;t.is.number(e.maxWidth)&&(u=s*e.maxWidth/o),t.is.number(e.maxHeight)&&(l=s*e.maxHeight/a),s=Math.min(u,l),o*=s,a*=s}var c=document.createElement("canvas");c.width=o,c.height=a,c.style.width=o+"px",c.style.height=a+"px";var h=c.getContext("2d");if(o>0&&a>0)if(h.clearRect(0,0,o,a),e.bg&&(h.fillStyle=e.bg,h.rect(0,0,o,a),h.fill()),h.globalCompositeOperation="source-over",e.full)this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:s,forcedPan:{x:-i.x1*s,y:-i.y1*s},forcedPxRatio:1});else{var d=n.pan(),p={x:d.x*s,y:d.y*s},f=n.zoom()*s;this.redraw({forcedContext:h,drawAllLayers:!0,forcedZoom:f,forcedPan:p,forcedPxRatio:1})}return c},r.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},r.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")}}(cytoscape),function(t){"use strict";var e=t("renderer","canvas"),r=e,n=r.prototype;n.registerBinding=function(t,e,r,n){this.bindings.push({target:t,event:e,handler:r,useCapture:n}),t.addEventListener(e,r,n)},n.nodeIsDraggable=function(t){return 0!==t._private.style.opacity.value&&"visible"==t._private.style.visibility.value&&"element"==t._private.style.display.value&&!t.locked()&&t.grabbable()?!0:!1},n.load=function(){var e=this,n=function(t){var r;if(t.addToList&&e.data.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var n=0;n<t.addToList.length;n++){var i=t.addToList[n];t.addToList.hasId[i.id()]=!0}}r=t.addToList.hasId}return r||{}},i=function(t,e){if(t._private.cy.hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList))for(var r=n(e),i=t.descendants(),o=0;o<i.size();o++){var a=i[o],s=a._private;e.inDragLayer&&(s.rscratch.inDragLayer=!0),e.addToList&&!r[a.id()]&&(e.addToList.push(a),r[a.id()]=!0,s.grabbed=!0);for(var u=s.edges,l=0;e.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},o=function(t,e){var r=t._private,o=n(e);e.inDragLayer&&(r.rscratch.inDragLayer=!0),e.addToList&&!o[t.id()]&&(e.addToList.push(t),o[t.id()]=!0,r.grabbed=!0);for(var a=r.edges,u=0;e.inDragLayer&&u<a.length;u++)a[u]._private.rscratch.inDragLayer=!0;i(t,e),s(t,{inDragLayer:e.inDragLayer})},a=function(t){if(t)for(var e=0;e<t.length;e++){var r=t[e]._private;if("nodes"===r.group){r.rscratch.inDragLayer=!1,r.grabbed=!1;for(var n=r.edges,i=0;i<n.length;i++)n[i]._private.rscratch.inDragLayer=!1;s(t[e],{inDragLayer:!1})}else"edges"===r.group&&(r.rscratch.inDragLayer=!1)}},s=function(t,e){if(null!=e.inDragLayer||null!=e.addToList){var r=t;if(t._private.cy.hasCompoundNodes()){for(;r.parent().nonempty();)r=r.parent()[0];if(r!=t){for(var i=r.descendants().merge(r).unmerge(t).unmerge(t.descendants()),o=i.connectedEdges(),a=n(e),s=0;s<i.size();s++)void 0!==e.inDragLayer&&(i[s]._private.rscratch.inDragLayer=e.inDragLayer),e.addToList&&!a[i[s].id()]&&(e.addToList.push(i[s]),a[i[s].id()]=!0,i[s]._private.grabbed=!0);for(var u=0;void 0!==e.inDragLayer&&u<o.length;u++)o[u]._private.rscratch.inDragLayer=e.inDragLayer}}}};"undefined"!=typeof MutationObserver?(e.removeObserver=new MutationObserver(function(t){for(var r=0;r<t.length;r++){var n=t[r],i=n.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===e.data.container){e.destroy();break}}}}),e.removeObserver.observe(e.data.container.parentNode,{childList:!0})):e.registerBinding(e.data.container,"DOMNodeRemoved",function(t){e.destroy()}),e.registerBinding(window,"resize",t.util.debounce(function(t){e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.data.container),e.data.canvasNeedsRedraw[r.NODE]=!0,e.redraw()},100));for(var u=function(t){e.registerBinding(t,"scroll",function(t){e.invalidateContainerClientCoordsCache()})},l=e.data.cy.container();u(l),l.parentNode;)l=l.parentNode;e.registerBinding(e.data.container,"contextmenu",function(t){t.preventDefault()});var c=function(){return 0!==e.data.select[4]};e.registerBinding(e.data.container,"mousedown",function(n){n.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=n.which;var i=e.data.cy,a=e.projectIntoViewport(n.clientX,n.clientY),s=e.data.select,u=e.findNearestElement(a[0],a[1],!0,!1),l=e.dragData.possibleDragElements;e.hoverData.mdownPos=a;var c=e.data.canvasNeedsRedraw,h=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var r=e.hoverData.down;r?r.trigger(new t.Event(n,{type:"taphold",cyPosition:{x:a[0],y:a[1]}})):i.trigger(new t.Event(n,{type:"taphold",cyPosition:{x:a[0],y:a[1]}}))}},e.tapholdDuration)};if(3==n.which){e.hoverData.cxtStarted=!0;var d=new t.Event(n,{type:"cxttapstart",cyPosition:{x:a[0],y:a[1]}});u?(u.activate(),u.trigger(d),e.hoverData.down=u):i.trigger(d),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==n.which){if(u&&u.activate(),null!=u){if(e.nodeIsDraggable(u)){var p=new t.Event(n,{type:"grab",cyPosition:{x:a[0],y:a[1]}});if(u.isNode()&&!u.selected())l=e.dragData.possibleDragElements=[],o(u,{addToList:l}),u.trigger(p);else if(u.isNode()&&u.selected()){l=e.dragData.possibleDragElements=[];for(var f=i.$(function(){return this.isNode()&&this.selected()}),v=0;v<f.length;v++)e.nodeIsDraggable(f[v])&&o(f[v],{addToList:l});u.trigger(p)}c[r.NODE]=!0,c[r.DRAG]=!0}u.trigger(new t.Event(n,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(n,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(n,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}))}else null==u&&i.trigger(new t.Event(n,{type:"mousedown",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(n,{type:"tapstart",cyPosition:{x:a[0],y:a[1]}})).trigger(new t.Event(n,{type:"vmousedown",cyPosition:{x:a[0],y:a[1]}}));if(e.hoverData.down=u,e.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){s[4]=1;var g=Math.max(0,r.panOrBoxSelectDelay-(+new Date-e.hoverData.downTime));clearTimeout(e.bgActiveTimeout),i.boxSelectionEnabled()||u&&u.isEdge()?e.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),e.data.bgActivePosistion={x:a[0],y:a[1]},e.hoverData.dragging=!0,c[r.SELECT_BOX]=!0,e.redraw()},g):(e.data.bgActivePosistion={x:a[0],y:a[1]},c[r.SELECT_BOX]=!0,e.redraw())}h()}s[0]=s[2]=a[0],s[1]=s[3]=a[1]},!1),e.registerBinding(window,"mousemove",t.util.throttle(function(n){var i=!1,a=e.hoverData.capture;if(!a){var s=e.findContainerClientCoords();if(!(n.clientX>s[0]&&n.clientX<s[0]+e.canvasWidth&&n.clientY>s[1]&&n.clientY<s[1]+e.canvasHeight))return;for(var u=e.data.container,l=n.target,c=l.parentNode,h=!1;c;){if(c===u){h=!0;break}c=c.parentNode}if(!h)return}var d=e.data.cy,p=d.zoom(),f=e.projectIntoViewport(n.clientX,n.clientY),v=e.data.select,g=e.data.canvasNeedsRedraw,y=null;e.hoverData.draggingEles||(y=e.findNearestElement(f[0],f[1],!0,!1));var m=e.hoverData.last,b=e.hoverData.down,w=[f[0]-v[2],f[1]-v[3]],x=e.dragData.possibleDragElements,_=v[2]-v[0],E=_*_,S=v[3]-v[1],T=S*S,k=E+T,P=k*p*p;e.hoverData.tapholdCancelled=!0;var C=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(w[0]),t.push(w[1])):(t[0]+=w[0],t[1]+=w[1])};if(i=!0,null!=y?y.trigger(new t.Event(n,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(n,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(n,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})):null==y&&d.trigger(new t.Event(n,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(n,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new t.Event(n,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})),3===e.hoverData.which){var D=new t.Event(n,{type:"cxtdrag",cyPosition:{x:f[0],y:f[1]}});b?b.trigger(D):d.trigger(D),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&y===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.trigger(new t.Event(n,{type:"cxtdragout",cyPosition:{x:f[0],y:f[1]}})),e.hoverData.cxtOver=y,y&&y.trigger(new t.Event(n,{type:"cxtdragover",cyPosition:{x:f[0],y:f[1]}})))}else if(e.hoverData.dragging){if(i=!0,d.panningEnabled()&&d.userPanningEnabled()){var N;if(e.hoverData.justStartedPan){var O=e.hoverData.mdownPos;N={x:(f[0]-O[0])*p,y:(f[1]-O[1])*p},e.hoverData.justStartedPan=!1}else N={x:w[0]*p,y:w[1]*p};d.panBy(N),
e.hoverData.dragged=!0}f=e.projectIntoViewport(n.clientX,n.clientY)}else if(1==v[4]&&(null==b||b.isEdge())&&(!d.boxSelectionEnabled()||+new Date-e.hoverData.downTime>=r.panOrBoxSelectDelay)&&!e.hoverData.selecting&&P>=e.desktopTapThreshold2&&d.panningEnabled()&&d.userPanningEnabled())e.hoverData.dragging=!0,e.hoverData.selecting=!1,e.hoverData.justStartedPan=!0,v[4]=0;else{if(d.boxSelectionEnabled()&&!e.hoverData.dragging&&Math.pow(v[2]-v[0],2)+Math.pow(v[3]-v[1],2)>7&&v[4]&&(clearTimeout(e.bgActiveTimeout),e.data.bgActivePosistion=void 0,e.hoverData.selecting=!0,g[r.SELECT_BOX]=!0,e.redraw()),b&&b.isEdge()&&b.active()&&b.unactivate(),y!=m&&(m&&(m.trigger(new t.Event(n,{type:"mouseout",cyPosition:{x:f[0],y:f[1]}})),m.trigger(new t.Event(n,{type:"tapdragout",cyPosition:{x:f[0],y:f[1]}}))),y&&(y.trigger(new t.Event(n,{type:"mouseover",cyPosition:{x:f[0],y:f[1]}})),y.trigger(new t.Event(n,{type:"tapdragover",cyPosition:{x:f[0],y:f[1]}}))),e.hoverData.last=y),b&&b.isNode()&&e.nodeIsDraggable(b))if(P>=e.desktopTapThreshold2){var M=!e.dragData.didDrag;M&&(g[r.NODE]=!0),e.dragData.didDrag=!0;for(var L=[],I=0;I<x.length;I++){var R=x[I];if(e.hoverData.draggingEles||o(R,{inDragLayer:!0}),R.isNode()&&e.nodeIsDraggable(R)&&R.grabbed()){var B=R._private.position;if(L.push(R),t.is.number(w[0])&&t.is.number(w[1])&&(B.x+=w[0],B.y+=w[1],M)){var A=e.hoverData.dragDelta;t.is.number(A[0])&&t.is.number(A[1])&&(B.x+=A[0],B.y+=A[1])}}}e.hoverData.draggingEles=!0;var j=new t.Collection(d,L);j.updateCompoundBounds(),j.trigger("position drag"),g[r.DRAG]=!0,e.redraw()}else C();i=!0}return v[2]=f[0],v[3]=f[1],i?(n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"mouseup",function(n){var i=e.hoverData.capture;if(i){e.hoverData.capture=!1;var o=e.data.cy,s=e.projectIntoViewport(n.clientX,n.clientY),u=e.data.select,l=e.findNearestElement(s[0],s[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,d=n.shiftKey,p=e.data.canvasNeedsRedraw;if(e.data.bgActivePosistion&&(p[r.SELECT_BOX]=!0,e.redraw()),e.data.bgActivePosistion=void 0,clearTimeout(e.bgActiveTimeout),h&&h.unactivate(),3===e.hoverData.which){var f=new t.Event(n,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(h?h.trigger(f):o.trigger(f),!e.hoverData.cxtDragged){var v=new t.Event(n,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});h?h.trigger(v):o.trigger(v)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else{if(null!=h||e.dragData.didDrag||e.hoverData.dragged||(o.$(function(){return this.selected()}).unselect(),c.length>0&&(p[r.NODE]=!0),e.dragData.possibleDragElements=c=[]),null!=l?l.trigger(new t.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==l&&o.trigger(new t.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),e.dragData.didDrag||e.hoverData.dragged||(null!=l?l.trigger(new t.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==l&&o.trigger(new t.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new t.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),l!=h||e.dragData.didDrag||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect():l.select():d||(o.$(":selected").unmerge(l).unselect(),l.select())),p[r.NODE]=!0),e.hoverData.selecting&&o.boxSelectionEnabled()&&Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)>7&&u[4]){var g=[],y=e.getAllInBox(u[0],u[1],u[2],u[3]);p[r.SELECT_BOX]=!0,y.length>0&&(p[r.NODE]=!0);for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=new t.Collection(o,g);"additive"===o.selectionType()?b.select():(d||o.$(":selected").unmerge(b).unselect(),b.select()),e.redraw()}e.hoverData.dragging&&(e.hoverData.dragging=!1,p[r.SELECT_BOX]=!0,p[r.NODE]=!0,e.redraw()),u[4]||(p[r.DRAG]=!0,p[r.NODE]=!0,a(c),h&&h.trigger("free"))}u[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[]}},!1);var h=function(t){if(!e.scrollingPage){var n=e.data.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=[i[0]*n.zoom()+n.pan().x,i[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||c())return void t.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.data.canvasNeedsRedraw[r.NODE]=!0,e.redraw()},150);var a=t.deltaY/-250||t.wheelDeltaY/1e3||t.wheelDelta/1e3;a*=e.wheelSensitivity;var s=1===t.deltaMode;s&&(a*=33),n.zoom({level:n.zoom()*Math.pow(10,a),renderedPosition:{x:o[0],y:o[1]}})}}};e.registerBinding(e.data.container,"wheel",h,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.data.container,"mouseout",function(r){var n=e.projectIntoViewport(r.clientX,r.clientY);e.data.cy.trigger(new t.Event(r,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),e.registerBinding(e.data.container,"mouseover",function(r){var n=e.projectIntoViewport(r.clientX,r.clientY);e.data.cy.trigger(new t.Event(r,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var d,p,f,v,g,y,m,b,w,x,_,E,S,T=function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))},k=function(t,e,r,n){return(r-t)*(r-t)+(n-e)*(n-e)};e.registerBinding(e.data.container,"touchstart",function(n){clearTimeout(this.threeFingerSelectTimeout),n.target!==e.data.link&&n.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var i=e.data.cy,a=e.getCachedNodes(),s=e.getCachedEdges(),u=e.touchData.now,l=e.touchData.earlier,c=e.data.canvasNeedsRedraw;if(n.touches[0]){var h=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=h[0],u[1]=h[1]}if(n.touches[1]){var h=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=h[0],u[3]=h[1]}if(n.touches[2]){var h=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=h[0],u[5]=h[1]}if(n.touches[1]){var P=function(t){for(var e=0;e<t.length;e++)t[e]._private.grabbed=!1,t[e]._private.rscratch.inDragLayer=!1,t[e].active()&&t[e].unactivate()};P(a),P(s);var C=e.findContainerClientCoords();w=C[0],x=C[1],_=C[2],E=C[3],d=n.touches[0].clientX-w,p=n.touches[0].clientY-x,f=n.touches[1].clientX-w,v=n.touches[1].clientY-x,S=d>=0&&_>=d&&f>=0&&_>=f&&p>=0&&E>=p&&v>=0&&E>=v;var D=i.pan(),N=i.zoom();g=T(d,p,f,v),y=k(d,p,f,v),m=[(d+f)/2,(p+v)/2],b=[(m[0]-D.x)/N,(m[1]-D.y)/N];var O=200,M=O*O;if(M>y&&!n.touches[2]){var L=e.findNearestElement(u[0],u[1],!0,!0),I=e.findNearestElement(u[2],u[3],!0,!0);return L&&L.isNode()?(L.activate().trigger(new t.Event(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=L):I&&I.isNode()?(I.activate().trigger(new t.Event(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=I):(i.trigger(new t.Event(n,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var R=e.findNearestElement(u[0],u[1],!0,!0);if(null!=R){if(R.activate(),e.touchData.start=R,R.isNode()&&e.nodeIsDraggable(R)){var B=e.dragData.touchDragEles=[];if(c[r.NODE]=!0,c[r.DRAG]=!0,R.selected())for(var A=i.$(function(){return this.isNode()&&this.selected()}),j=0;j<A.length;j++){var q=A[j];e.nodeIsDraggable(q)&&o(q,{addToList:B})}else o(R,{addToList:B});R.trigger(new t.Event(n,{type:"grab",cyPosition:{x:u[0],y:u[1]}}))}R.trigger(new t.Event(n,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(n,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(n,{type:"vmousdown",cyPosition:{x:u[0],y:u[1]}}))}null==R&&(i.trigger(new t.Event(n,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(n,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new t.Event(n,{type:"vmousedown",cyPosition:{x:u[0],y:u[1]}})),e.data.bgActivePosistion={x:h[0],y:h[1]},c[r.SELECT_BOX]=!0,e.redraw());for(var z=0;z<u.length;z++)l[z]=u[z],e.touchData.startPosition[z]=u[z];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||(e.touchData.start?e.touchData.start.trigger(new t.Event(n,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})):(e.data.cy.trigger(new t.Event(n,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})),i.$(":selected").unselect()))},e.tapholdDuration)}},!1),e.registerBinding(window,"touchmove",t.util.throttle(function(n){var i=e.data.select,a=e.touchData.capture;a&&n.preventDefault();var s=e.data.cy,u=e.touchData.now,l=e.touchData.earlier,c=s.zoom(),h=e.data.canvasNeedsRedraw;if(n.touches[0]){var m=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=m[0],u[1]=m[1]}if(n.touches[1]){var m=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=m[0],u[3]=m[1]}if(n.touches[2]){var m=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=m[0],u[5]=m[1]}for(var _=[],E=0;E<u.length;E++)_[E]=u[E]-l[E];var P=e.touchData.startPosition,C=u[0]-P[0],D=C*C,N=u[1]-P[1],O=N*N,M=D+O,L=M*c*c;if(a&&e.touchData.cxt){var I=n.touches[0].clientX-w,R=n.touches[0].clientY-x,B=n.touches[1].clientX-w,A=n.touches[1].clientY-x,j=k(I,R,B,A),q=j/y,z=150,V=z*z,F=1.5,X=F*F;if(q>=X||j>=V){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,h[r.SELECT_BOX]=!0;var Y=new t.Event(n,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});e.touchData.start?e.touchData.start.trigger(Y):s.trigger(Y)}}if(a&&e.touchData.cxt){var Y=new t.Event(n,{type:"cxtdrag",cyPosition:{x:u[0],y:u[1]}});e.data.bgActivePosistion=void 0,h[r.SELECT_BOX]=!0,e.touchData.start?e.touchData.start.trigger(Y):s.trigger(Y),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var U=e.findNearestElement(u[0],u[1],!0,!0);e.touchData.cxtOver&&U===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.trigger(new t.Event(n,{type:"cxtdragout",cyPosition:{x:u[0],y:u[1]}})),e.touchData.cxtOver=U,U&&U.trigger(new t.Event(n,{type:"cxtdragover",cyPosition:{x:u[0],y:u[1]}})))}else if(a&&n.touches[2]&&s.boxSelectionEnabled())e.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,e.touchData.selecting=!0,h[r.SELECT_BOX]=!0,i&&0!==i.length&&void 0!==i[0]?(i[2]=(u[0]+u[2]+u[4])/3,i[3]=(u[1]+u[3]+u[5])/3):(i[0]=(u[0]+u[2]+u[4])/3,i[1]=(u[1]+u[3]+u[5])/3,i[2]=(u[0]+u[2]+u[4])/3+1,i[3]=(u[1]+u[3]+u[5])/3+1),i[4]=1,e.touchData.selecting=!0,e.redraw();else if(a&&n.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){e.data.bgActivePosistion=void 0,h[r.SELECT_BOX]=!0;var W=e.dragData.touchDragEles;if(W){h[r.DRAG]=!0;for(var H=0;H<W.length;H++)W[H]._private.grabbed=!1,W[H]._private.rscratch.inDragLayer=!1}var I=n.touches[0].clientX-w,R=n.touches[0].clientY-x,B=n.touches[1].clientX-w,A=n.touches[1].clientY-x,$=T(I,R,B,A),G=$/g;if(1!=G&&S){var Z=I-d,K=R-p,J=B-f,Q=A-v,tt=(Z+J)/2,et=(K+Q)/2,rt=s.zoom(),nt=rt*G,it=s.pan(),ot=b[0]*rt+it.x,at=b[1]*rt+it.y,st={x:-nt/rt*(ot-it.x-tt)+ot,y:-nt/rt*(at-it.y-et)+at};if(e.touchData.start){var W=e.dragData.touchDragEles;if(W)for(var H=0;H<W.length;H++){var ut=W[H]._private;ut.grabbed=!1,ut.rscratch.inDragLayer=!1}var lt=e.touchData.start._private;lt.active=!1,lt.grabbed=!1,lt.rscratch.inDragLayer=!1,h[r.DRAG]=!0,e.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:nt,pan:st,cancelOnFailedZoom:!0}),g=$,d=I,p=R,f=B,v=A,e.pinching=!0}if(n.touches[0]){var m=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=m[0],u[1]=m[1]}if(n.touches[1]){var m=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=m[0],u[3]=m[1]}if(n.touches[2]){var m=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=m[0],u[5]=m[1]}}else if(n.touches[0]){var ct=e.touchData.start,ht=e.touchData.last,U=U||e.findNearestElement(u[0],u[1],!0,!0);if(null!=ct&&"nodes"==ct._private.group&&e.nodeIsDraggable(ct))if(L>=e.touchTapThreshold2){for(var W=e.dragData.touchDragEles,dt=0;dt<W.length;dt++){var pt=W[dt];if(e.nodeIsDraggable(pt)&&pt.isNode()&&pt.grabbed()){e.dragData.didDrag=!0;var ft=pt._private.position,vt=!e.hoverData.draggingEles;if(t.is.number(_[0])&&t.is.number(_[1])&&(ft.x+=_[0],ft.y+=_[1]),vt){o(pt,{inDragLayer:!0}),h[r.NODE]=!0;var gt=e.touchData.dragDelta;t.is.number(gt[0])&&t.is.number(gt[1])&&(ft.x+=gt[0],ft.y+=gt[1])}}}var yt=new t.Collection(s,pt);yt.updateCompoundBounds(),yt.trigger("position drag"),e.hoverData.draggingEles=!0,h[r.DRAG]=!0,e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&(h[r.NODE]=!0),e.redraw()}else{var gt=e.touchData.dragDelta=e.touchData.dragDelta||[];0===gt.length?(gt.push(_[0]),gt.push(_[1])):(gt[0]+=_[0],gt[1]+=_[1])}null!=ct&&(ct.trigger(new t.Event(n,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),ct.trigger(new t.Event(n,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),ct.trigger(new t.Event(n,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==ct&&(null!=U&&(U.trigger(new t.Event(n,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),U.trigger(new t.Event(n,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),U.trigger(new t.Event(n,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==U&&(s.trigger(new t.Event(n,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new t.Event(n,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new t.Event(n,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}})))),U!=ht&&(ht&&ht.trigger(new t.Event(n,{type:"tapdragout",cyPosition:{x:u[0],y:u[1]}})),U&&U.trigger(new t.Event(n,{type:"tapdragover",cyPosition:{x:u[0],y:u[1]}}))),e.touchData.last=U;for(var H=0;H<u.length;H++)u[H]&&e.touchData.startPosition[H]&&Math.abs(u[H]-e.touchData.startPosition[H])>4&&(e.touchData.singleTouchMoved=!0);if(a&&(null==ct||ct.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){e.swipePanning?s.panBy({x:_[0]*c,y:_[1]*c}):L>=e.touchTapThreshold2&&(e.swipePanning=!0,s.panBy({x:C*c,y:N*c})),ct&&(ct.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:u[0],y:u[1]}),h[r.SELECT_BOX]=!0,e.touchData.start=null);var m=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=m[0],u[1]=m[1]}}for(var E=0;E<u.length;E++)l[E]=u[E]},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"touchcancel",function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),e.registerBinding(window,"touchend",function(n){var i=e.touchData.start,o=e.touchData.capture;if(o){e.touchData.capture=!1,n.preventDefault();var s=e.data.select;e.swipePanning=!1,e.hoverData.draggingEles=!1;var u=e.data.cy,l=u.zoom(),c=e.touchData.now,h=e.touchData.earlier,d=e.data.canvasNeedsRedraw;if(n.touches[0]){var p=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(n.touches[1]){var p=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(n.touches[2]){var p=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=p[0],c[5]=p[1]}i&&i.unactivate();var f;if(e.touchData.cxt){if(f=new t.Event(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),i?i.trigger(f):u.trigger(f),!e.touchData.cxtDragged){var v=new t.Event(n,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(v):u.trigger(v)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&u.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1,clearTimeout(this.threeFingerSelectTimeout);var g=[],y=e.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,d[r.SELECT_BOX]=!0;for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=new t.Collection(u,g);"single"===u.selectionType()&&u.$(":selected").unmerge(b).unselect(),b.select(),b.length>0?d[r.NODE]=!0:e.redraw()}var w=!1;if(null!=i&&(i._private.active=!1,w=!0,i.unactivate()),n.touches[2])e.data.bgActivePosistion=void 0,d[r.SELECT_BOX]=!0;else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,d[r.SELECT_BOX]=!0;var x=e.dragData.touchDragEles;if(null!=i){var _=i._private.grabbed;a(x),d[r.DRAG]=!0,d[r.NODE]=!0,_&&i.trigger("free"),i.trigger(new t.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),i.unactivate(),e.touchData.start=null}else{var E=e.findNearestElement(c[0],c[1],!0,!0);null!=E&&E.trigger(new t.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==E&&u.trigger(new t.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var S=e.touchData.startPosition[0]-c[0],T=S*S,k=e.touchData.startPosition[1]-c[1],P=k*k,C=T+P,D=C*l*l;null!=i&&!e.dragData.didDrag&&i._private.selectable&&D<e.touchTapThreshold2&&!e.pinching&&("single"===u.selectionType()?(u.$(":selected").unmerge(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),w=!0,d[r.NODE]=!0),e.touchData.singleTouchMoved===!1&&(i?i.trigger(new t.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):u.trigger(new t.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new t.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),e.touchData.singleTouchMoved=!0}for(var N=0;N<c.length;N++)h[N]=c[N];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[]),w&&i&&i.updateStyle(!1),n.touches.length<2&&(e.pinching=!1,d[r.NODE]=!0,e.redraw())}},!1)}}(cytoscape),function(t){"use strict";function e(e,r){o[e]={points:r,draw:function(t,r,i,a,s){n.drawPolygon(t,r,i,a,s,o[e].points)},drawPath:function(t,r,i,a,s){n.drawPolygonPath(t,r,i,a,s,o[e].points)},intersectLine:function(r,n,i,a,s,u,l){return t.math.polygonIntersectLine(s,u,o[e].points,r,n,i/2,a/2,l)},intersectBox:function(r,n,i,a,s,u,l,c,h){var d=o[e].points;return t.math.boxIntersectPolygon(r,n,i,a,d,s,u,l,c,[0,-1],h)},checkPoint:function(r,n,i,a,s,u,l){return t.math.pointInsidePolygon(r,n,o[e].points,u,l,a,s,[0,-1],i)}}}for(var r=t("renderer","canvas"),n=r.prototype,i=r.usePaths(),o=r.nodeShapes={},a=Math.sin(0),s=Math.cos(0),u={},l={},c=.1,h=0*Math.PI;h<2*Math.PI;h+=c)u[h]=Math.sin(h),l[h]=Math.cos(h);o.ellipse={draw:function(t,e,r,n,i){o.ellipse.drawPath(t,e,r,n,i),t.fill()},drawPath:function(t,e,r,n,o){if(i){t.beginPath&&t.beginPath();for(var h,d,p=n/2,f=o/2,v=0*Math.PI;v<2*Math.PI;v+=c)h=e-p*u[v]*a+p*l[v]*s,d=r+f*l[v]*a+f*u[v]*s,0===v?t.moveTo(h,d):t.lineTo(h,d);t.closePath()}else t.beginPath&&t.beginPath(),t.translate(e,r),t.scale(n/2,o/2),t.arc(0,0,1,0,2*Math.PI*.999,!1),t.closePath(),t.scale(2/n,2/o),t.translate(-e,-r)},intersectLine:function(e,r,n,i,o,a,s){var u=t.math.intersectLineEllipse(o,a,e,r,n/2+s,i/2+s);return u},intersectBox:function(e,r,n,i,o,a,s,u,l){return t.math.boxIntersectEllipse(e,r,n,i,l,o,a,s,u)},checkPoint:function(t,e,r,n,i,o,a){return t-=o,e-=a,t/=n/2+r,e/=i/2+r,Math.pow(t,2)+Math.pow(e,2)<=1}},e("triangle",t.math.generateUnitNgonPointsFitToSquare(3,0)),e("square",t.math.generateUnitNgonPointsFitToSquare(4,0)),o.rectangle=o.square,o.roundrectangle={points:t.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,r,i,o){n.drawRoundRectangle(t,e,r,i,o,10)},drawPath:function(t,e,r,i,o){n.drawRoundRectanglePath(t,e,r,i,o,10)},intersectLine:function(e,r,n,i,o,a,s){return t.math.roundRectangleIntersectLine(o,a,e,r,n,i,s)},intersectBox:function(e,r,n,i,o,a,s,u,l){return t.math.roundRectangleIntersectBox(e,r,n,i,o,a,s,u,l)},checkPoint:function(e,r,n,i,a,s,u){var l=t.math.getRoundRectangleRadius(i,a);if(t.math.pointInsidePolygon(e,r,o.roundrectangle.points,s,u,i,a-2*l,[0,-1],n))return!0;if(t.math.pointInsidePolygon(e,r,o.roundrectangle.points,s,u,i-2*l,a,[0,-1],n))return!0;var c=function(t,e,r,n,i,o,a){return t-=r,e-=n,t/=i/2+a,e/=o/2+a,Math.pow(t,2)+Math.pow(e,2)<=1};return c(e,r,s-i/2+l,u-a/2+l,2*l,2*l,n)?!0:c(e,r,s+i/2-l,u-a/2+l,2*l,2*l,n)?!0:c(e,r,s+i/2-l,u+a/2-l,2*l,2*l,n)?!0:c(e,r,s-i/2+l,u+a/2-l,2*l,2*l,n)?!0:!1}},e("diamond",[0,1,1,0,0,-1,-1,0]),e("pentagon",t.math.generateUnitNgonPointsFitToSquare(5,0)),e("hexagon",t.math.generateUnitNgonPointsFitToSquare(6,0)),e("heptagon",t.math.generateUnitNgonPointsFitToSquare(7,0)),e("octagon",t.math.generateUnitNgonPointsFitToSquare(8,0));var d=new Array(20),p=t.math.generateUnitNgonPoints(5,0),f=t.math.generateUnitNgonPoints(5,Math.PI/5),v=.5*(3-Math.sqrt(5));v*=1.57;for(var h=0;h<f.length/2;h++)f[2*h]*=v,f[2*h+1]*=v;for(var h=0;5>h;h++)d[4*h]=p[2*h],d[4*h+1]=p[2*h+1],d[4*h+2]=f[2*h],d[4*h+3]=f[2*h+1];d=t.math.fitPolygonToSquare(d),e("star",d),e("vee",[-1,-1,0,-.333,1,-1,0,1]),e("rhomboid",[-1,-1,.333,-1,1,1,-.333,1])}(cytoscape),function(t){"use strict";function e(e){this._private={},this._private.options=t.util.extend({},r,e)}var r={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(t){var e=t;return e.max<=.5||e.mean<=.3},infinite:!1};e.prototype.run=function(){var e=this,r=this._private.options;return t.util.require("arbor",function(n){function i(t,e){return null==e?void 0:"function"==typeof e?e.apply(t,[t._private.data,{nodes:l.length,edges:c.length,element:t}]):e}function o(t){if(!t.isFullAutoParent()){var e=t._private.data.id,n=i(t,r.nodeMass),o=t._private.locked,a=t.position(),s=p.fromScreen({x:a.x,y:a.y});t.scratch().arbor=p.addNode(e,{element:t,mass:n,fixed:o,x:o?s.x:void 0,y:o?s.y:void 0})}}function a(t){var e=t.source().id(),n=t.target().id(),o=i(t,r.edgeLength);t.scratch().arbor=p.addEdge(e,n,{length:o})}var s=r.cy,u=r.eles,l=u.nodes().not(":parent"),c=u.edges(),h=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),d=!1;if(e.trigger({type:"layoutstart",layout:e}),void 0!==r.liveUpdate&&(r.animate=r.liveUpdate),u.nodes().size()<=1)return r.fit&&s.reset(),u.nodes().position({x:Math.round((h.x1+h.x2)/2),y:Math.round((h.y1+h.y2)/2)}),e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),void e.trigger({type:"layoutstop",layout:e});var p=e._private.system=n.ParticleSystem();p.parameters({repulsion:r.repulsion,stiffness:r.stiffness,friction:r.friction,gravity:r.gravity,fps:r.fps,dt:r.dt,precision:r.precision}),r.animate&&r.fit&&s.fit(h,r.padding);var f,v=250,g=!1,y=+new Date,m={init:function(t){},redraw:function(){var t=p.energy();if(!r.infinite&&null!=r.stableEnergy&&null!=t&&t.n>0&&r.stableEnergy(t))return void e.stop();r.infinite||v==1/0||(clearTimeout(f),f=setTimeout(T,v));var n=s.collection();p.eachNode(function(t,e){var r=t.data,i=r.element;null!=i&&(i.locked()||i.grabbed()||(i.silentPosition({x:h.x1+e.x,y:h.y1+e.y}),n.merge(i)))}),r.animate&&n.length>0&&(d=!0,n.rtrigger("position"),r.fit&&s.fit(r.padding),y=+new Date,d=!1),g||(g=!0,e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e}))}};p.renderer=m,p.screenSize(h.w,h.h),p.screenPadding(r.padding,r.padding,r.padding,r.padding),p.screenStep(r.stepSize);var b;l.on("grab free position",b=function(t){if(!d){var e=this.position(),i=p.fromScreen(e);if(i){var o=n.Point(i.x,i.y),a=r.padding;switch(h.x1+a<=e.x&&e.x<=h.x2-a&&h.y1+a<=e.y&&e.y<=h.y2-a&&(this.scratch().arbor.p=o),t.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var w;l.on("lock unlock",w=function(t){node.scratch().arbor.fixed=node.locked()});var x;u.on("remove",x=function(t){});var _;s.on("add","*",_=function(){});var E;s.on("resize",E=function(){if(null==r.boundingBox&&null!=e._private.system){var t=s.width(),n=s.height();p.screenSize(t,n)}}),l.each(function(t,e){o(e)}),c.each(function(t,e){a(e)});var S=l.filter(":grabbable");r.ungrabifyWhileSimulating&&S.ungrabify();var T=e._private.doneHandler=function(){e._private.doneHandler=null,r.animate||(r.fit&&s.reset(),l.rtrigger("position")),l.off("grab free position",b),l.off("lock unlock",w),u.off("remove",x),s.off("add","*",_),s.off("resize",E),r.ungrabifyWhileSimulating&&S.grabify(),e.one("layoutstop",r.stop),e.trigger({type:"layoutstop",layout:e})};p.start(),!r.infinite&&null!=r.maxSimulationTime&&r.maxSimulationTime>0&&r.maxSimulationTime!==1/0&&setTimeout(function(){e.stop()},r.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},t("layout","arbor",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},r,e)}var r={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e,r=this.options,n=r,i=r.cy,o=n.eles,a=o.nodes().not(":parent"),s=o,u=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(t.is.elementOrCollection(n.roots))e=n.roots;else if(t.is.array(n.roots)){for(var l=[],c=0;c<n.roots.length;c++){var h=n.roots[c],d=i.getElementById(h);l.push(d)}e=new t.Collection(i,l)}else if(t.is.string(n.roots))e=i.$(n.roots);else if(n.directed)e=a.roots();else{for(var p=[],f=a;f.length>0;){var v=i.collection();o.bfs({roots:f[0],visit:function(t,e,r,n,i){v=v.add(r)},directed:!1}),f=f.not(v),p.push(v)}e=i.collection();for(var c=0;c<p.length;c++){var g=p[c],y=g.maxDegree(!1),m=g.filter(function(){return this.degree(!1)===y});e=e.add(m)}}var b=[],w={},x={},_={},E={},S={};s.bfs({roots:e,directed:n.directed,visit:function(t,e,r,n,i){var o=this[0],a=o.id();if(b[e]||(b[e]=[]),b[e].push(o),w[a]=!0,x[a]=e,_[a]=i,E[a]=n,i){var s=i.id(),u=S[s]=S[s]||[];u.push(r)}}});for(var T=[],c=0;c<a.length;c++){var d=a[c];w[d.id()]||T.push(d)}for(var k=3*T.length,P=0;0!==T.length&&k>P;){for(var C=T.shift(),D=C.neighborhood().nodes(),N=!1,c=0;c<D.length;c++){var O=x[D[c].id()];if(void 0!==O){b[O].push(C),N=!0;break}}N||T.push(C),P++}for(;0!==T.length;){var C=T.shift(),N=!1;N||(0===b.length&&b.push([]),b[0].push(C))}var M=function(){for(var t=0;t<b.length;t++)for(var e=b[t],r=0;r<e.length;r++){var n=e[r];n._private.scratch.breadthfirst={depth:t,index:r}}};M();for(var L=function(t){for(var e,r=t.connectedEdges(function(){return this.data("target")===t.id()}),n=t._private.scratch.breadthfirst,i=0,o=0;o<r.length;o++){var a=r[o],s=a.source()[0],u=s._private.scratch.breadthfirst;n.depth<=u.depth&&i<u.depth&&(i=u.depth,e=s)}return e},I=0;I<n.maximalAdjustments;I++){for(var R=b.length,B=[],c=0;R>c;c++)for(var O=b[c],A=O.length,j=0;A>j;j++){var d=O[j],q=d._private.scratch.breadthfirst,z=L(d);z&&(q.intEle=z,B.push(d))}for(var c=0;c<B.length;c++){var d=B[c],q=d._private.scratch.breadthfirst,z=q.intEle,V=z._private.scratch.breadthfirst;b[q.depth].splice(q.index,1);for(var F=V.depth+1;F>b.length-1;)b.push([]);b[F].push(d),q.depth=F,q.index=b[F].length-1}M()}var X=0;if(n.avoidOverlap){for(var c=0;c<a.length;c++){var Y=a[c].outerWidth(),U=a[c].outerHeight();X=Math.max(X,Y,U)}X*=n.spacingFactor}for(var W={},H=function(t){if(W[t.id()])return W[t.id()];for(var e=t._private.scratch.breadthfirst.depth,r=t.neighborhood().nodes().not(":parent"),n=0,i=0,o=0;o<r.length;o++){var a=r[o],s=a._private.scratch.breadthfirst,u=s.index,l=s.depth,c=b[l].length;(e>l||0===e)&&(n+=u/c,i++)}return i=Math.max(1,i),n/=i,0===i&&(n=void 0),W[t.id()]=n,n},$=function(t,e){var r=H(t),n=H(e);return r-n},G=0;3>G;G++){for(var c=0;c<b.length;c++)b[c]=b[c].sort($);M()}for(var Z=0,c=0;c<b.length;c++)Z=Math.max(b[c].length,Z);for(var K={x:u.x1+u.w/2,y:u.x1+u.h/2},J=function(t,e){var r=t._private.scratch.breadthfirst,i=r.depth,o=r.index,a=b[i].length,s=Math.max(u.w/(a+1),X),l=Math.max(u.h/(b.length+1),X),c=Math.min(u.w/2/b.length,u.h/2/b.length);if(c=Math.max(c,X),n.circle){if(n.circle){var h=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),d=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:K.x+h*Math.cos(d),y:K.y+h*Math.sin(d)}}return{x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l}}var p={x:K.x+(o+1-(a+1)/2)*s,y:(i+1)*l};return e?p:p},Q={},c=b.length-1;c>=0;c--)for(var O=b[c],j=0;j<O.length;j++){var C=O[j];Q[C.id()]=J(C,c===b.length-1)}return a.layoutPositions(this,n,function(){return Q[this.id()]}),this},t("layout","breadthfirst",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},r,e)}var r={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,r=e,n=e.cy,i=r.eles,o=i.nodes().not(":parent");r.sort&&(o=o.sort(r.sort));for(var a,s=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=r.startAngle,c=2*Math.PI/o.length,h=0,d=0;d<o.length;d++){var p=o[d].outerWidth(),f=o[d].outerHeight();h=Math.max(h,p,f)}if(a=t.is.number(r.radius)?r.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&r.avoidOverlap){h*=1.75;var c=2*Math.PI/o.length,v=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(h*h/(v*v+g*g));a=Math.max(y,a)}var m=function(t,e){var n=a*Math.cos(l),i=a*Math.sin(l),o={x:u.x+n,y:u.y+i};return l=r.counterclockwise?l-c:l+c,o};return o.layoutPositions(this,r,m),this},t("layout","circle",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};e.prototype.run=function(){var e=this,r=this.options;return e.manuallyStopped=!1,t.util.require("cola",function(n){var i=r.cy,o=r.eles,a=o.nodes(),s=o.edges(),u=!1,l=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),c=function(e,r){if(t.is.fn(e)){var n=e;return n.apply(r,[r])}return e},h=function(){for(var e={min:1/0,max:-(1/0)},n={min:1/0,max:-(1/0)},o=0;o<a.length;o++){var s=a[o],h=s._private.scratch.cola;if(e.min=Math.min(e.min,h.x||0),e.max=Math.max(e.max,h.x||0),n.min=Math.min(n.min,h.y||0),n.max=Math.max(n.max,h.y||0),!h.updatedDims){var d=s.boundingBox(),f=c(r.nodeSpacing,s);h.width=d.w+2*f,h.height=d.h+2*f}}a.positions(function(r,i){var o,a=i._private.scratch.cola;return i.grabbed()||i.isParent()||(o={x:l.x1+a.x-e.min,y:l.y1+a.y-n.min},t.is.number(o.x)&&t.is.number(o.y)||(o=void 0)),o}),a.updateCompoundBounds(),u||(p(),u=!0),r.fit&&i.fit(r.padding)},d=function(){
r.ungrabifyWhileSimulating&&y.grabify(),a.off("grab free position",m),a.off("lock unlock",b),e.one("layoutstop",r.stop),e.trigger({type:"layoutstop",layout:e})},p=function(){e.one("layoutready",r.ready),e.trigger({type:"layoutready",layout:e})},f=r.refresh,v=1;r.refresh<0?(v=Math.abs(r.refresh),f=1):f=Math.max(1,f);var g=e.adaptor=n.adaptor({trigger:function(t){var e=n.EventType?n.EventType.tick:null,i=n.EventType?n.EventType.end:null;switch(t.type){case"tick":case e:r.animate&&h();break;case"end":case i:h(),r.infinite||d()}},kick:function(){var n=function(){if(e.manuallyStopped)return d(),!0;var t=g.tick();return t&&r.infinite&&g.resume(),t},i=function(){for(var t,e=0;f>e&&!t;e++)t=t||n();return t};if(r.animate){var o=function(){i()||t.util.requestAnimationFrame(o)};t.util.requestAnimationFrame(o)}else for(;!n(););},on:function(t,e){},drag:function(){}});e.adaptor=g;var y=a.filter(":grabbable");r.ungrabifyWhileSimulating&&y.ungrabify();var m;a.on("grab free position",m=function(e){var r=this,n=r._private.scratch.cola,i=r._private.position;switch(r.grabbed()?(n.x=i.x-l.x1,n.y=i.y-l.y1,g.dragstart(n)):t.is.number(n.x)&&t.is.number(n.y)&&(i.x=n.x+l.x1,i.y=n.y+l.y1),e.type){case"grab":g.dragstart(n),g.resume();break;case"free":g.dragend(n)}});var b;a.on("lock unlock",b=function(t){var e=this,r=e._private.scratch.cola;e.locked()?g.dragstart(r):g.dragend(r)});var w=a.stdFilter(function(t){return!t.isParent()});if(g.nodes(w.map(function(t,e){var n=c(r.nodeSpacing,t),i=t.position(),o=t.boundingBox(),a=t._private.scratch.cola={x:r.randomize||void 0===i.x?Math.round(Math.random()*l.w):i.x,y:r.randomize||void 0===i.y?Math.round(Math.random()*l.h):i.y,width:o.w+2*n,height:o.h+2*n,index:e};return a})),r.alignment){var x=[],_=[];w.forEach(function(t){var e=c(r.alignment,t),n=t._private.scratch.cola,i=n.index;e&&(null!=e.x&&x.push({node:i,offset:e.x}),null!=e.y&&_.push({node:i,offset:e.y}))});var E=[];x.length>0&&E.push({type:"alignment",axis:"x",offsets:x}),_.length>0&&E.push({type:"alignment",axis:"y",offsets:_}),g.constraints(E)}g.groups(a.stdFilter(function(t){return t.isParent()}).map(function(t,e){var n=t._private.style,i=c(r.nodeSpacing,t),o=n["padding-left"].pxValue+i,a=n["padding-right"].pxValue+i,s=n["padding-top"].pxValue+i,u=n["padding-bottom"].pxValue+i;return t._private.scratch.cola={index:e,padding:Math.max(o,a,s,u),leaves:t.descendants().stdFilter(function(t){return!t.isParent()}).map(function(t){return t[0]._private.scratch.cola.index})},t}).map(function(t){return t._private.scratch.cola.groups=t.descendants().stdFilter(function(t){return t.isParent()}).map(function(t){return t._private.scratch.cola.index}),t._private.scratch.cola}));var S,T;null!=r.edgeLength?(S=r.edgeLength,T="linkDistance"):null!=r.edgeSymDiffLength?(S=r.edgeSymDiffLength,T="symmetricDiffLinkLengths"):null!=r.edgeJaccardLength?(S=r.edgeJaccardLength,T="jaccardLinkLengths"):(S=100,T="linkDistance");var k=function(t){return t.calcLength};if(g.links(s.stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}).map(function(t,e){var r=t._private.scratch.cola={source:t.source()[0]._private.scratch.cola.index,target:t.target()[0]._private.scratch.cola.index};return null!=S&&(r.calcLength=c(S,t)),r})),g.size([l.w,l.h]),null!=S&&g[T](k),r.flow){var P,C="y",D=50;t.is.string(r.flow)?P={axis:r.flow,minSeparation:D}:t.is.number(r.flow)?P={axis:C,minSeparation:r.flow}:t.is.plainObject(r.flow)?(P=r.flow,P.axis=P.axis||C,P.minSeparation=null!=P.minSeparation?P.minSeparation:D):P={axis:C,minSeparation:D},g.flowLayout(P.axis,P.minSeparation)}e.trigger({type:"layoutstart",layout:e}),g.avoidOverlaps(r.avoidOverlap).handleDisconnected(r.handleDisconnected).start(r.unconstrIter,r.userConstIter,r.allConstIter),r.infinite||setTimeout(function(){e.manuallyStopped||g.stop()},r.maxSimulationTime)}),this},e.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t("layout","cola",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},r,e)}var r={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){for(var e=this.options,r=e,n=e.cy,i=r.eles,o=i.nodes().not(":parent"),a=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=r.startAngle,c=0,h=0;h<o.length;h++){var d,p=o[h];d=r.concentric.apply(p,[p]),u.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h];c=Math.max(c,p.outerWidth(),p.outerHeight())}u.sort(function(t,e){return e.value-t.value});for(var f=r.levelWidth(o),v=[[]],g=v[0],h=0;h<u.length;h++){var y=u[h];if(g.length>0){var m=Math.abs(g[0].value-y.value);m>=f&&(g=[],v.push(g))}g.push(y)}var b={},w=0,x=c+r.minNodeSpacing;if(!r.avoidOverlap){var _=v.length>0&&v[0].length>1,E=Math.min(a.w,a.h)/2-x,S=E/(v.length+_?1:0);x=Math.min(x,S)}for(var h=0;h<v.length;h++){var T=v[h],k=2*Math.PI/T.length;if(T.length>1&&r.avoidOverlap){var P=Math.cos(k)-Math.cos(0),C=Math.sin(k)-Math.sin(0),D=Math.sqrt(x*x/(P*P+C*C));w=Math.max(D,w)}for(var N=0;N<T.length;N++){var y=T[N],l=r.startAngle+(r.counterclockwise?-1:1)*k*N,O={x:s.x+w*Math.cos(l),y:s.y+w*Math.sin(l)};b[y.node.id()]=O}w+=x}return o.layoutPositions(this,r,function(){var t=this.id();return b[t]}),this},t("layout","concentric",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},n,e)}var r,n={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};e.prototype.run=function(){var e=this.options,n=e.cy,o=this;o.stopped=!1,o.trigger({type:"layoutstart",layout:o}),r=!0===e.debug?!0:!1;var a=new Date,h=i(n,o,e);r&&s(h),!0===e.randomize&&u(h,n),m(h,n,e);var d=function(t){return o.stopped?!1:(c(h,n,e,t),h.temperature=h.temperature*e.coolingFactor,h.temperature<e.minTemp?!1:!0)},p=function(){l(h,n,e),!0===e.fit&&n.fit(e.padding);var t=new Date;console.info("Layout took "+(t-a)+" ms"),o.one("layoutstop",e.stop),o.trigger({type:"layoutstop",layout:o})};if(e.animate){var f=0,v=function(){for(var r,i=0;i<e.refresh&&f<e.numIter;){var r=d(f);if(r===!1)break;i++,f++}l(h,n,e),e.fit&&n.fit(e.padding),r!==!1&&f+1<e.numIter?t.util.requestAnimationFrame(v):p()};t.util.requestAnimationFrame(v)}else{for(var f=0;f<e.numIter&&d(f)!==!1;f++);p()}return this},e.prototype.stop=function(){return this.stopped=!0,this};var i=function(e,r,n){for(var i=n.eles.edges(),a=n.eles.nodes(),s={layout:r,layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},u=0;u<s.nodeSize;u++){var l={};l.id=a[u].data("id"),l.parentId=a[u].data("parent"),l.children=[],l.positionX=a[u].position("x"),l.positionY=a[u].position("y"),l.offsetX=0,l.offsetY=0,l.height=a[u].height(),l.width=a[u].width(),l.maxX=l.positionX+l.width/2,l.minX=l.positionX-l.width/2,l.maxY=l.positionY+l.height/2,l.minY=l.positionY-l.height/2,l.padLeft=a[u]._private.style["padding-left"].pxValue,l.padRight=a[u]._private.style["padding-right"].pxValue,l.padTop=a[u]._private.style["padding-top"].pxValue,l.padBottom=a[u]._private.style["padding-bottom"].pxValue,s.layoutNodes.push(l),s.idToIndex[l.id]=u}for(var c=[],h=0,d=-1,p=[],u=0;u<s.nodeSize;u++){var f=s.layoutNodes[u],v=f.parentId;null!=v?s.layoutNodes[s.idToIndex[v]].children.push(f.id):(c[++d]=f.id,p.push(f.id))}for(s.graphSet.push(p);d>=h;){var g=c[h++],y=s.idToIndex[g],m=s.layoutNodes[y],b=m.children;if(b.length>0){s.graphSet.push(b);for(var u=0;u<b.length;u++)c[++d]=b[u]}}for(var u=0;u<s.graphSet.length;u++)for(var w=s.graphSet[u],x=0;x<w.length;x++){var _=s.idToIndex[w[x]];s.indexToGraph[_]=u}for(var u=0;u<s.edgeSize;u++){var E=i[u],S={};S.id=E.data("id"),S.sourceId=E.data("source"),S.targetId=E.data("target");var T=n.idealEdgeLength,k=s.idToIndex[S.sourceId],P=s.idToIndex[S.targetId],C=s.indexToGraph[k],D=s.indexToGraph[P];if(C!=D){for(var N=o(S.sourceId,S.targetId,s),O=s.graphSet[N],M=0,l=s.layoutNodes[k];-1===$.inArray(l.id,O);)l=s.layoutNodes[s.idToIndex[l.parentId]],M++;for(l=s.layoutNodes[P];-1===$.inArray(l.id,O);)l=s.layoutNodes[s.idToIndex[l.parentId]],M++;T*=M*n.nestingFactor}S.idealLength=T,s.layoutEdges.push(S)}return s},o=function(t,e,r){var n=a(t,e,0,r);return 2>n.count?0:n.graph},a=function(t,e,r,n){var i=n.graphSet[r];if(-1<$.inArray(t,i)&&-1<$.inArray(e,i))return{count:2,graph:r};for(var o=0,s=0;s<i.length;s++){var u=i[s],l=n.idToIndex[u],c=n.layoutNodes[l].children;if(0!==c.length){var h=n.indexToGraph[n.idToIndex[c[0]]],d=a(t,e,h,n);if(0!==d.count){if(1!==d.count)return d;if(o++,2===o)break}}}return{count:o,graph:r}},s=function(t){if(r){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var n=t.layoutNodes[e],i="\nindex: "+e+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(i)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var o=t.graphSet,e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(var i="IndexToGraph",e=0;e<t.indexToGraph.length;e++)i+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(i),i="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];i+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(i),i="nodeSize: "+t.nodeSize,i+="\nedgeSize: "+t.edgeSize,i+="\ntemperature: "+t.temperature,console.debug(i)}},u=function(t,e){for(var r=t.clientWidth,n=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];o.positionX=Math.random()*r,o.positionY=Math.random()*n}},l=function(t,e,r){var n=t.layout,i=r.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};r.boundingBox&&(i.forEach(function(e){var r=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,r.positionX),a.x2=Math.max(a.x2,r.positionX),a.y1=Math.min(a.y1,r.positionY),a.y2=Math.max(a.y2,r.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,n){var i=t.layoutNodes[t.idToIndex[n.data("id")]];if(r.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,n.one("layoutready",r.ready),n.trigger({type:"layoutready",layout:this}))},c=function(t,e,r,n){h(t,e,r),v(t,e,r),g(t,e,r),y(t,e,r),m(t,e,r)},h=function(t,e,r){for(var n=0;n<t.graphSet.length;n++)for(var i=t.graphSet[n],o=i.length,a=0;o>a;a++)for(var s=t.layoutNodes[t.idToIndex[i[a]]],u=a+1;o>u;u++){var l=t.layoutNodes[t.idToIndex[i[u]]];d(s,l,t,e,r)}},d=function(t,e,r,n,i){var o=e.positionX-t.positionX,a=e.positionY-t.positionY;if(0!==o||0!==a){var s=f(t,e,o,a);if(s>0)var u=i.nodeOverlap*s,l=Math.sqrt(o*o+a*a),c=u*o/l,h=u*a/l;else var d=p(t,o,a),v=p(e,-1*o,-1*a),g=v.x-d.x,y=v.y-d.y,m=g*g+y*y,l=Math.sqrt(m),u=i.nodeRepulsion/m,c=u*g/l,h=u*y/l;t.offsetX-=c,t.offsetY-=h,e.offsetX+=c,e.offsetY+=h}},p=function(t,e,r){var n=t.positionX,i=t.positionY,o=t.height,a=t.width,s=r/e,u=o/a,l={};do{if(0===e&&r>0){l.x=n,l.y=i+o/2;break}if(0===e&&0>r){l.x=n,l.y=i+o/2;break}if(e>0&&s>=-1*u&&u>=s){l.x=n+a/2,l.y=i+a*r/2/e;break}if(0>e&&s>=-1*u&&u>=s){l.x=n-a/2,l.y=i-a*r/2/e;break}if(r>0&&(-1*u>=s||s>=u)){l.x=n+o*e/2/r,l.y=i+o/2;break}if(0>r&&(-1*u>=s||s>=u)){l.x=n-o*e/2/r,l.y=i-o/2;break}}while(!1);return l},f=function(t,e,r,n){if(r>0)var i=t.maxX-e.minX;else var i=e.maxX-t.minX;if(n>0)var o=t.maxY-e.minY;else var o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},v=function(t,e,r){for(var n=0;n<t.edgeSize;n++){var i=t.layoutEdges[n],o=t.idToIndex[i.sourceId],a=t.layoutNodes[o],s=t.idToIndex[i.targetId],u=t.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(0===l&&0===c)return;var h=p(a,l,c),d=p(u,-1*l,-1*c),f=d.x-h.x,v=d.y-h.y,g=Math.sqrt(f*f+v*v),y=Math.pow(i.idealLength-g,2)/r.edgeElasticity;if(0!==g)var m=y*f/g,b=y*v/g;else var m=0,b=0;a.offsetX+=m,a.offsetY+=b,u.offsetX-=m,u.offsetY-=b}},g=function(t,e,r){for(var n=0;n<t.graphSet.length;n++){var i=t.graphSet[n],o=i.length;if(0===n)var a=t.clientHeight/2,s=t.clientWidth/2;else var u=t.layoutNodes[t.idToIndex[i[0]]],l=t.layoutNodes[t.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;o>c;c++){var h=t.layoutNodes[t.idToIndex[i[c]]],d=a-h.positionX,p=s-h.positionY,f=Math.sqrt(d*d+p*p);if(f>1){var v=r.gravity*d/f,g=r.gravity*p/f;h.offsetX+=v,h.offsetY+=g}}}},y=function(t,e,r){var n=[],i=0,o=-1;for(n.push.apply(n,t.graphSet[0]),o+=t.graphSet[0].length;o>=i;){var a=n[i++],s=t.idToIndex[a],u=t.layoutNodes[s],l=u.children;if(0<l.length){for(var c=u.offsetX,h=u.offsetY,d=0;d<l.length;d++){var p=t.layoutNodes[t.idToIndex[l[d]]];p.offsetX+=c,p.offsetY+=h,n[++o]=l[d]}u.offsetX=0,u.offsetY=0}}},m=function(t,e,r){for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];if(!(0<i.children.length)){var o=b(i.offsetX,i.offsetY,t.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,w(i,t)}}for(var n=0;n<t.nodeSize;n++){var i=t.layoutNodes[n];0<i.children.length&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},b=function(t,e,r){var n=Math.sqrt(t*t+e*e);if(n>r)var i={x:r*t/n,y:r*e/n};else var i={x:t,y:e};return i},w=function(t,e){var r=t.parentId;if(null!=r){var n=e.layoutNodes[e.idToIndex[r]],i=!1;return(null==n.maxX||t.maxX+n.padRight>n.maxX)&&(n.maxX=t.maxX+n.padRight,i=!0),(null==n.minX||t.minX-n.padLeft<n.minX)&&(n.minX=t.minX-n.padLeft,i=!0),(null==n.maxY||t.maxY+n.padBottom>n.maxY)&&(n.maxY=t.maxY+n.padBottom,i=!0),(null==n.minY||t.minY-n.padTop<n.minY)&&(n.minY=t.minY-n.padTop,i=!0),i?w(n,e):void 0}};t("layout","cose",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};e.prototype.run=function(){var e=this.options,r=this;return t.util.require("dagre",function(n){var i=e.cy,o=e.eles,a=function(e,r){return t.is.fn(r)?r.apply(e,[e]):r},s=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u=new n.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",e.nodeSep),c("edgesep",e.edgeSep),c("ranksep",e.rankSep),c("rankdir",e.rankDir),u.setGraph(l),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var p=h[d];u.setNode(p.id(),{width:p.width(),height:p.height(),name:p.id()})}for(var d=0;d<h.length;d++){var p=h[d];p.isChild()&&u.setParent(p.id(),p.parent().id())}for(var f=o.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),d=0;d<f.length;d++){var v=f[d];u.setEdge(v.source().id(),v.target().id(),{minlen:a(v,e.minLen),weight:a(v,e.edgeWeight),name:v.id()},v.id())}n.layout(u);for(var g=u.nodes(),d=0;d<g.length;d++){var y=g[d],m=u.node(y);i.getElementById(y).scratch().dagre=m}var b;e.boundingBox?(b={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(t){var e=t.scratch().dagre;b.x1=Math.min(b.x1,e.x),b.x2=Math.max(b.x2,e.x),b.y1=Math.min(b.y1,e.y),b.y2=Math.max(b.y2,e.y)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1):b=s;var w=function(t){if(e.boundingBox){var r=(t.x-b.x1)/b.w,n=(t.y-b.y1)/b.h;return{x:s.x1+r*s.w,y:s.y1+n*s.h}}return t};h.layoutPositions(r,e,function(){var t=this.scratch().dagre;return w({x:t.x,y:t.y})})}),this},t("layout","dagre",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend({},r,e)}var r={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,r=e,n=e.cy,i=r.eles,o=i.nodes().not(":parent");r.sort&&(o=o.sort(r.sort));var a=t.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)o.layoutPositions(this,r,function(){return{x:a.x1,y:a.y1}});else{var s=o.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(t){if(null==t)return Math.min(l,c);var e=Math.min(l,c);e==l?l=t:c=t},d=function(t){if(null==t)return Math.max(l,c);var e=Math.max(l,c);e==l?l=t:c=t};if(null!=r.rows&&null!=r.columns)l=r.rows,c=r.columns;else if(null!=r.rows&&null==r.columns)l=r.rows,c=Math.ceil(s/l);else if(null==r.rows&&null!=r.columns)c=r.columns,l=Math.ceil(s/c);else if(c*l>s){var p=h(),f=d();(p-1)*f>=s?h(p-1):(f-1)*p>=s&&d(f-1)}else for(;s>c*l;){var p=h(),f=d();(f+1)*p>=s?d(f+1):h(p+1)}var v=a.w/c,g=a.h/l;if(r.avoidOverlap)for(var y=0;y<o.length;y++){var m=o[y],b=m.outerWidth(),w=m.outerHeight();v=Math.max(v,b),g=Math.max(g,w)}for(var x={},_=function(t,e){return x["c-"+t+"-"+e]?!0:!1},E=function(t,e){x["c-"+t+"-"+e]=!0},S=0,T=0,k=function(){T++,T>=c&&(T=0,S++)},P={},y=0;y<o.length;y++){var m=o[y],C=r.position(m);if(C&&(void 0!==C.row||void 0!==C.col)){var D={row:C.row,col:C.col};if(void 0===D.col)for(D.col=0;_(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;_(D.row,D.col);)D.row++;P[m.id()]=D,E(D.row,D.col)}}var N=function(t,e){var r,n;if(e.locked()||e.isFullAutoParent())return!1;var i=P[e.id()];if(i)r=i.col*v+v/2+a.x1,n=i.row*g+g/2+a.y1;else{for(;_(S,T);)k();r=T*v+v/2+a.x1,n=S*g+g/2+a.y1,E(S,T),k()}return{x:r,y:n}};o.layoutPositions(this,r,N)}return this},t("layout","grid",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={ready:function(){},stop:function(){}};e.prototype.run=function(){{var t=this.options,e=t.eles,r=this;t.cy}return r.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.trigger("layoutready"),r.one("layoutstop",t.stop),r.trigger("layoutstop"),this},e.prototype.stop=function(){return this},t("layout","null",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){function e(t){if(null==r.positions)return null;if(o)return r.positions.apply(t,[t]);var e=r.positions[t._private.data.id];return null==e?null:e}var r=this.options,n=r.eles,i=n.nodes(),o=t.is.fn(r.positions);return i.layoutPositions(this,r,function(t,r){var n=e(r);return r.locked()||null==n?!1:n}),this},t("layout","preset",e)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};e.prototype.run=function(){var e=this.options,r=e.cy,n=e.eles,i=n.nodes().not(":parent"),o=t.util.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),a=function(t,e){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}};return i.layoutPositions(this,e,a),this},t("layout","random",e)}(cytoscape),function($$){"use strict";function SpreadLayout(t){this.options=$$.util.extend({},defaults,t)}function cellCentroid(t){for(var e,r,n,i=t.halfedges,o=0,a=0,s=0,u=0;u<i.length;++u)e=i[u].getEndpoint(),r=i[u].getStartpoint(),o+=e.x*r.y,o-=e.y*r.x,n=e.x*r.y-r.x*e.y,a+=(e.x+r.x)*n,s+=(e.y+r.y)*n;return o/=2,n=6*o,{x:a/n,y:s/n}}function sitesDistance(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}var defaults={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0};SpreadLayout.prototype.run=function(){var layout=this,options=this.options;return $$.util.requires(["foograph","Voronoi"],function(foograph,Voronoi){function setPositions(t){for(var e=t.vertices,r=[],n=0;n<e.length;++n){var i=e[n];r[i.id]={x:i.x,y:i.y}}nodes.positions(function(t,e){var n=e._private.data.id,i=r[n];return{x:Math.round(simBB.x1+i.x),y:Math.round(simBB.y1+i.y)}}),options.fit&&cy.fit(options.padding),cy.nodes().rtrigger("position")}var cy=options.cy,nodes=cy.nodes(),edges=cy.edges(),cWidth=cy.width(),cHeight=cy.height(),simulationBounds=options.boundingBox?$$.util.makeBoundingBox(options.boundingBox):null,padding=options.padding,simBBFactor=Math.max(1,.8*Math.log(nodes.length));nodes.length<100&&(simBBFactor/=2),layout.trigger({type:"layoutstart",layout:layout});var simBB={x1:0,y1:0,x2:cWidth*simBBFactor,y2:cHeight*simBBFactor};simulationBounds&&(simBB.x1=simulationBounds.x1,simBB.y1=simulationBounds.y1,simBB.x2=simulationBounds.x2,simBB.y2=simulationBounds.y2),simBB.x1+=padding,simBB.y1+=padding,simBB.x2-=padding,simBB.y2-=padding;var width=simBB.x2-simBB.x1,height=simBB.y2-simBB.y1,startTime=Date.now();if(nodes.size()<=1){nodes.positions({x:Math.round((simBB.x1+simBB.x2)/2),y:Math.round((simBB.y1+simBB.y2)/2)}),options.fit&&cy.fit(options.padding);var endTime=Date.now();return console.info("Layout on "+nodes.size()+" nodes took "+(endTime-startTime)+" ms"),layout.one("layoutready",options.ready),layout.trigger("layoutready"),layout.one("layoutstop",options.stop),void layout.trigger("layoutstop")}var pData={width:width,height:height,minDist:options.minDist,expFact:options.expandingFactor,expIt:0,maxExpIt:options.maxExpandIterations,vertices:[],edges:[],startTime:startTime,maxFruchtermanReingoldIterations:options.maxFruchtermanReingoldIterations};nodes.each(function(t,e){var r=this._private.data.id;pData.vertices.push({id:r,x:0,y:0})}),edges.each(function(){var t=this.source().id(),e=this.target().id();pData.edges.push({src:t,tgt:e})});var t1=$$.Thread();t1.require(foograph,"foograph"),t1.require(Voronoi),t1.require(sitesDistance),t1.require(cellCentroid);var didLayoutReady=!1;t1.on("message",function(t){var e=t.message;options.animate&&(setPositions(e),didLayoutReady||(layout.trigger("layoutready"),didLayoutReady=!0))}),layout.one("layoutready",options.ready),t1.pass(pData).run(function(pData){function checkMinDist(t){for(var e=0,r=0;r<t.length;++r){var n=t[r];null!=n.lSite&&null!=n.rSite&&sitesDistance(n.lSite,n.rSite)<lMinDist&&++e}return e}foograph=eval("foograph"),Voronoi=eval("Voronoi");for(var lWidth=pData.width,lHeight=pData.height,lMinDist=pData.minDist,lExpFact=pData.expFact,lMaxExpIt=pData.maxExpIt,lMaxFruchtermanReingoldIterations=pData.maxFruchtermanReingoldIterations,savePositions=function(){pData.width=lWidth,pData.height=lHeight,pData.expIt=expandIteration,pData.expFact=lExpFact,pData.vertices=[];for(var t=0;t<fv.length;++t)pData.vertices.push({id:fv[t].label,x:fv[t].x,y:fv[t].y})},messagePositions=function(){broadcast(pData)},frg=new foograph.Graph("FRgraph",!1),frgNodes={},dataVertices=pData.vertices,ni=0;ni<dataVertices.length;++ni){var id=dataVertices[ni].id,v=new foograph.Vertex(id,Math.round(Math.random()*lHeight),Math.round(Math.random()*lHeight));frgNodes[id]=v,frg.insertVertex(v)}for(var dataEdges=pData.edges,ei=0;ei<dataEdges.length;++ei){var srcNodeId=dataEdges[ei].src,tgtNodeId=dataEdges[ei].tgt;frg.insertEdge("",1,frgNodes[srcNodeId],frgNodes[tgtNodeId])}var fv=frg.vertices,iterations=lMaxFruchtermanReingoldIterations,frLayoutManager=new foograph.ForceDirectedVertexLayout(lWidth,lHeight,iterations,!1,lMinDist);frLayoutManager.callback=function(){savePositions(),messagePositions()},frLayoutManager.layout(frg),savePositions(),messagePositions();for(var voronoi=new Voronoi,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},vSites=[],i=0;i<fv.length;++i)vSites[fv[i].label]=fv[i];for(var diagram=voronoi.compute(fv,bbox),cells=diagram.cells,i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}0>lExpFact&&(lExpFact=Math.max(.05,Math.min(.1,lMinDist/Math.sqrt(lWidth*lHeight/fv.length)*.5)));for(var prevInfractions=checkMinDist(diagram.edges),bStop=0>=prevInfractions,voronoiIteration=0,expandIteration=0;!bStop;){++voronoiIteration;for(var it=0;4>=it;++it){voronoi.recycle(diagram),diagram=voronoi.compute(fv,bbox),cells=diagram.cells;for(var i=0;i<cells.length;++i){var cell=cells[i],site=cell.site,centroid=cellCentroid(cell),currv=vSites[site.label];currv.x=centroid.x,currv.y=centroid.y}}var currInfractions=checkMinDist(diagram.edges);0>=currInfractions?bStop=!0:(currInfractions>=prevInfractions||voronoiIteration>=4)&&(expandIteration>=lMaxExpIt?bStop=!0:(lWidth+=lWidth*lExpFact,lHeight+=lHeight*lExpFact,bbox={xl:0,xr:lWidth,yt:0,yb:lHeight},++expandIteration,voronoiIteration=0)),prevInfractions=currInfractions,savePositions(),messagePositions()}return savePositions(),pData}).then(function(t){var e=t.vertices;setPositions(t);var r=t.startTime,n=new Date;console.info("Layout on "+e.length+" nodes took "+(n-r)+" ms"),layout.one("layoutstop",options.stop),options.animate||layout.trigger("layoutready"),layout.trigger("layoutstop"),t1.stop()})}),this},SpreadLayout.prototype.stop=function(){},$$("layout","spread",SpreadLayout)}(cytoscape),function(t){"use strict";function e(e){this.options=t.util.extend(!0,{},r,e)}var r={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};e.prototype.run=function(){var e=this,r=this,n=this.options;return t.util.require("Springy",function(i){function o(t){var e=t.scratch("springy").model.id,r=x.layout.nodePoints[e].p,n=t.position(),i=null!=n.x&&null!=n.y?y(t.position()):{x:4*Math.random()-2,y:4*Math.random()-2};r.x=i.x,r.y=i.y}function a(){r.stopped=!1,n.ungrabifyWhileSimulating&&E.ungrabify(),x.start()}var s=!1,u=n.cy;e.trigger({type:"layoutstart",layout:e});var l=n.eles,c=l.nodes().not(":parent"),h=l.edges(),d=t.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()}),p=new i.Graph;c.each(function(t,e){e.scratch("springy",{model:p.newNode({element:e})})}),h.each(function(t,e){var r=e.source().scratch("springy").model,n=e.target().scratch("springy").model;e.scratch("springy",{model:p.newEdge(r,n,{element:e})})});var f=window.sim=new i.Layout.ForceDirected(p,n.stiffness,n.repulsion,n.damping);n.infinite&&(f.minEnergyThreshold=-(1/0));var v=f.getBoundingBox(),g=function(t){v=f.getBoundingBox();var e=v.topright.subtract(v.bottomleft),r=t.subtract(v.bottomleft).divide(e.x).x*d.w+d.x1,n=t.subtract(v.bottomleft).divide(e.y).y*d.h+d.x1;return new i.Vector(r,n)},y=function(t){v=f.getBoundingBox();var e=v.topright.subtract(v.bottomleft),r=(t.x-d.x1)/d.w*e.x+v.bottomleft.x,n=(t.y-d.y1)/d.h*e.y+v.bottomleft.y;return new i.Vector(r,n)},m=u.collection(),b=u.nodes().size(),w=1,x=new i.Renderer(f,function(){r.stopped||m.length>0&&n.animate&&(s=!0,m.rtrigger("position"),n.fit&&u.fit(n.padding),m=u.collection(),s=!1)},function(t,e,r){},function(t,i){if(!r.stopped){var o=g(i),a=t.data.element;a.locked()||a.grabbed()||(a._private.position={x:o.x,y:o.y},m.merge(a)),w==b&&(e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})),w++}});c.each(function(t,e){n.random||o(e)});var _;c.on("position",_=function(){s||o(this)});var E=c.filter(":grabbable");r.stopSystem=function(){r.stopped=!0,p.filterNodes(function(){return!1}),n.ungrabifyWhileSimulating&&E.grabify(),n.fit&&u.fit(n.padding),c.off("drag position",_),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e}),r.stopSystem=null},a(),n.infinite||setTimeout(function(){r.stop()},n.maxSimulationTime)}),this},e.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},t("layout","springy",e)}(cytoscape),function(t){"use strict";function e(t){this.options=t}e.prototype.recalculateRenderedStyle=function(){},e.prototype.notify=function(){},t("renderer","null",e)}(cytoscape)}).call(this,require("_process"),"/bower_components/cytoscape/dist")},{_process:9,child_process:6,os:7,path:8}],2:[function(t,e,r){(function(n){!function(i){!function(t){if("object"==typeof r&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof n?i=n:"undefined"!=typeof self&&(i=self),i.imjs=t()}}(function(){var e;return function r(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof t&&t;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return o(r?r:t)},h,h.exports,r,e,n,i)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,r){(function(){r.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],2:[function(t,r,o){(function(n){(function(){var o,a,s;t("./shiv"),r.exports=a=t("./service"),s=a.utils.merge,o=function(t,r){return"function"==typeof e&&e.amd?e(t,[],r):n[t]=r},o("imjs",a),"undefined"==typeof i?o("intermine",a):o("intermine",s(i,a))}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":10,"./shiv":12}],3:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g,y,m,b,w;o=t("url"),n=t("JSONStream"),p=t("http"),e=t("./constants").ACCEPT_HEADER,u=t("./version").VERSION,w=b=t("./util"),h=w.error,c=w.defer,v=w.merge,f=w.invoke,s="node-http/imjs-"+u,i=/,\s*$/,a="application/x-www-form-urlencoded",r.supports=function(){return!0},m=function(t,e,r){return function(t){var i,o;return null==t.pipe?r(new Error("response is not a stream")):(t.on("error",r),null!=t.statusCode&&200!==t.statusCode?(i=n.parse("error"),i.pause(),t.pipe(i),r([t.statusCode,i])):(o=n.parse("results.*"),o.pause(),t.pipe(o),e(o)))}},d=function(t,e,r,n){var i,o;return i=t.type,o=t.url,"Could not parse response to "+i+" "+o+': "'+e+'" ('+n+": "+r+")"},l=function(t,e,r){return function(n){var i;return i="",n.on("data",function(t){return i+=t}),n.on("error",r),n.on("end",function(){var o,a,s,u,l,c,h;if(o=n.headers["content-type"],"application/json"!==o&&!/json/.test(t.dataType)&&!/json/.test(t.data.format))return(l=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?r(new Error(l[2])):(u=200<=(h=n.statusCode)&&400>h?e:r)(i);if(""===i&&200===n.statusCode)return e();try{return c=JSON.parse(i),(s=c.error)?r(new Error(s)):e(c)}catch(p){return a=p,r(n.statusCode>=400?new Error(n.statusCode):new Error(d(t,i,a,n.statusCode)))}})}},r.iterReq=function(t,e,r){
return function(n,i,o,a,s){var u,l,c,d,p;return null==i&&(i={}),null==o&&(o=function(){}),null==a&&(a=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(p=[{},i,o,a],i=p[0],o=p[1],a=p[2],s=p[3]),d=v({format:r},i,{query:n.toXML()}),u=function(t){return t.on("data",o),t.on("error",a),t.on("end",s),setTimeout(function(){return null!=t.resume?t.resume():void 0},3),t},c=function(t){var e,r;return r=t[0],e=t[1],e.on("data",a),e.on("error",a),e.on("end",s),null!=e.resume&&e.resume(),h(r)},l=this.makeRequest(t,e,d,null,!0),l.then(u,c),l}},y=function(t,e,r){var n;return n=setTimeout(function(){return e("Request timed out.")},t),r.then(function(){return cancelTimeout(n)})},g=function(t){var r,n,i,u,l,c,h,d;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(c=t.type)||"DELETE"===c)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=b.querystring(t.data);if(n=o.parse(t.url,!0),n.withCredentials=!1,n.method=t.type||"GET",null!=t.port&&(n.port=t.port),n.headers={"User-Agent":s,Accept:e[t.dataType]},("GET"===(h=n.method)||"DELETE"===h)&&(null!=i?i.length:void 0)?(u=/\?/.test(n.path)?"&":"?",n.path+=u+i,i=null):(n.headers["Content-Type"]=(t.contentType||a)+"; charset=UTF-8",n.headers["Content-Length"]=i.length),null!=t.headers){d=t.headers;for(r in d)l=d[r],n.headers[r]=l}return null!=t.auth&&(n.auth=t.auth),[n,i]},r.doReq=function(t,e){var r,n,i,o,a,s,u,h,d,f,v;f=c(),o=f.promise,u=f.resolve,a=f.reject,o.then(null,t.error);try{v=g(t),d=v[0],i=v[1],n=(e?m:l)(t,u,a),s=p.request(d,n),s.on("error",function(e){return a(new Error("Error: "+d.method+" "+t.url+": "+e))}),null!=i&&s.write(i),s.end(),h=t.timeout,h>0&&y(h,a,o)}catch(b){r=b,a(r)}return o}}).call(this)},{"./constants":1,"./util":15,"./version":16,JSONStream:18,http:50,url:47}],4:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g={}.hasOwnProperty,y=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},m=function(t,e){return function(){return t.apply(e,arguments)}};c=t("./util"),p=r,f=c.uniqBy,u=c.difference,s=c.defer,v=c.withCB,d=c.id,h=c.get,l=c.fold,a=c.concatMap,o=6e4,e=function(){function t(t){var e,r;for(e in t)g.call(t,e)&&(r=t[e],this[e]=r)}var e;return t.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},e=a(h("matches")),t.prototype.getMatches=function(t){var r;return"MATCH"===t?this.matches[t]:null!=(r=e(this.matches[t]))?r:[]},t.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(h("id")):this.allMatchIds()},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){var t;return(t=l(function(t){return function(e,r){return e.concat(t.getMatchIds(r))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},t}(),i=function(){function t(t){var e,r;for(e in t)g.call(t,e)&&(r=t[e],this[e]=r)}var e,r,n,i;return i=f(d),e=a(d),r=function(t){var r,n;return e(function(){var e,i;e=t.identifiers,i=[];for(r in e)n=e[r],i.push(n);return i}())},n=function(t,e){return null==e||y.call(r(t),e)>=0},t.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},t.prototype.getIdentifierStats=function(){var t,r,n,o,a,s;return s=function(t){var r,n;return i(e(function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)n=t[e],o.push(function(){var t;t=[];for(r in null!=n?n.identifiers:void 0)t.push(r);return t}());return o}()))},o=s(this.getMatches("MATCH")),r=s(this.getMatches()),a=o.length,t=r.length,n=u(r,o).length,{matches:a,all:t,issues:n}},t.prototype.getObjectStats=function(){var t,e,n,i;return i=this.goodMatchIds().length,t=this.allMatchIds().length,e=function(){var t;t=[];for(d in this)g.call(this,d)&&(n=this[d],y.call(r(n),"MATCH")<0&&t.push(d));return t}.call(this).length,{matches:i,all:t,issues:e}},t.prototype.getMatches=function(t){var e,r;r=[];for(d in this)g.call(this,d)&&(e=this[d],n(e,t)&&r.push(e));return r},t.prototype.getMatchIds=function(t){var e,r;r=[];for(d in this)g.call(this,d)&&(e=this[d],n(e,t)&&r.push(d));return r},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){return this.getMatchIds()},t}(),n=function(){function t(t,e){this.uid=t,this.service=e,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return t.prototype.fetchStatus=function(t){return v(t,this.service.get("ids/"+this.uid+"/status").then(h("status")))},t.prototype.fetchErrorMessage=function(t){return v(t,this.service.get("ids/"+this.uid+"/status").then(h("message")))},t.prototype.fetchResults=function(t){var r,n;return r=this.service.get("ids/"+this.uid+"/result").then(h("results")),n=this.service.fetchVersion(),n.then(function(t){return r.then(function(r){return t>=16?new e(r):new i(r)})})},t.prototype.del=function(t){return v(t,this.service.makeRequest("DELETE","ids/"+this.uid))},t.prototype.decay=50,t.prototype.poll=function(t,e,r){var n,i,a,u,l,c,h;return h=s(),a=h.promise,l=h.resolve,u=h.reject,a.then(t,e),i=null!=r?r:function(){},c=this.fetchStatus(),c.then(null,u),n=this.decay,this.decay=Math.min(o,1.25*n),c.then(function(t){return function(e){switch(i(e),e){case"SUCCESS":return t.fetchResults().then(l,u);case"ERROR":return t.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return t.poll(l,u,i)},n)}}}(this)),a},t}(),n.prototype.wait=n.prototype.poll,n.create=function(t){return function(e){return new n(e,t)}},p.IDResolutionJob=n,p.CategoryResults=e,p.IdResults=i}).call(this)},{"./util":15}],5:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g,y=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};v=t("./util"),c=r,p=v.merge,g=v.withCB,u=v.get,h=v.invoke,i=v.REQUIRES_VERSION,f=v.set,s=v.dejoin,a="list/tags",o="lists/shares",e="lists/invitations",d=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},l=function(t){return t.substr(t.indexOf(":")+1)},n=function(){function t(t,e){var r,n;this.service=e,this._updateTags=y(this._updateTags,this),this.hasTag=y(this.hasTag,this);for(r in t)m.call(t,r)&&(n=t[r],this[r]=n);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(d).map(l)}var r;return t.prototype.hasTag=function(t){return b.call(this.tags,t)>=0},t.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},t.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},r=function(t){var e;return e=t.tags},t.prototype._updateTags=function(t,e){return null==t?(this.tags=e.slice(),this.folders=this.tags.filter(d).map(l)):void 0},t.prototype.fetchTags=function(t){return g(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(r))},t.prototype.addTags=function(t,e){var n;return n={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("POST","list/tags",n).then(r))},t.prototype.removeTags=function(t,e){var n;return n={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",n).then(r))},t.prototype.contents=function(t){return g(t,this.query().then(s).then(h("records")))},t.prototype.rename=function(t,e){var r;return r=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(u("listName")).then(function(t){return function(e){return t.name=e}}(this)).then(this.service.fetchList),g(e,r)},t.prototype.copy=function(t,e){var r,n,i,o,a,s,l;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&v.isFunction(t)&&(a=[{},t],t=a[0],e=a[1]),"string"==typeof t&&(t={name:t}),n=r=null!=(s=t.name)?s:""+this.name+"_copy",o=this.tags.concat(null!=(l=t.tags)?l:[]),i=this.query(["id"]),g(e,this.service.fetchLists().then(h("map",u("name"))).then(function(t){return function(e){var a;for(a=1;b.call(e,n)>=0;)n=""+r+"-"+a++;return i.then(h("saveAsList",{name:n,tags:o,description:t.description}))}}(this)))},t.prototype.enrichment=function(t,e){return this.service.enrichment(p({list:this.name},t),e)},t.prototype.shareWithUser=function(t,e){return g(e,this.service.post(o,{list:this.name,"with":t}))},t.prototype.inviteUserToShare=function(t,r,n){return null==r&&(r=!0),null==n&&(n=function(){}),g(n,this.service.post(e,{list:this.name,to:t,notify:!!r}))},t}(),c.List=n}).call(this)},{"./util":15}],6:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d=function(t,e){return function(){return t.apply(e,arguments)}},p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("./table").Table,i=t("./path").PathInfo,h=t("./util"),u=h.flatten,s=h.find,a=h.error,c=h.omap,l=r,e=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),n=function(){function t(t){var r,n;this.name=t.name,r=t.classes,this.findCommonType=d(this.findCommonType,this),this.findSharedAncestor=d(this.findSharedAncestor,this),this.getAncestorsOf=d(this.getAncestorsOf,this),this.getSubclassesOf=d(this.getSubclassesOf,this),this.getPathInfo=d(this.getPathInfo,this),n=c(function(t){return function(e,r){return[e,new o(r,t)]}}(this)),this.classes=n(r),this.classes["java.lang.Object"]=e}return t.prototype.getPathInfo=function(t,e){return i.parse(this,t,e)},t.prototype.getSubclassesOf=function(t){var e,r,n,i,o,a;if(r=t&&t.name?t:this.classes[t],null==r)throw new Error(""+t+" is not a table");n=[r.name],o=this.classes;for(i in o)e=o[i],a=r.name,p.call(e.parents(),a)>=0&&(n=n.concat(this.getSubclassesOf(e)));return n},t.prototype.getAncestorsOf=function(t){var e,r;if(e=t&&t.name?t:this.classes[t],null==e)throw new Error(""+t+" is not a table");return r=e.parents(),r.filter(function(t){return function(e){return t.classes[e]}}(this)).reduce(function(t){return function(e,r){return e.concat(t.getAncestorsOf(r))}}(this),r)},t.prototype.findSharedAncestor=function(t,e){var r,n,i;return null===e||null===t?null:t===e?t:(r=this.getAncestorsOf(t),p.call(r,e)>=0?e:(n=this.getAncestorsOf(e),p.call(n,t)>=0?t:i=s(r,function(t){return p.call(n,t)>=0})))},t.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},t}(),n.prototype.makePath=n.prototype.getPathInfo,n.prototype.findCommonTypeOfMultipleClasses=n.prototype.findCommonType,n.load=function(t){var e;try{return new n(t)}catch(r){throw e=r,new Error("Error loading model: "+e)}},n.INTEGRAL_TYPES=["int","Integer","long","Long"],n.FRACTIONAL_TYPES=["double","Double","float","Float"],n.NUMERIC_TYPES=n.INTEGRAL_TYPES.concat(n.FRACTIONAL_TYPES),n.BOOLEAN_TYPES=["boolean","Boolean"],l.Model=n}).call(this)},{"./path":7,"./table":13,"./util":15}],7:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g=function(t,e){return function(){return t.apply(e,arguments)}},y=[].slice,m=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};c=r,f=t("./util"),v=f.withCB,a=f.concatMap,l=f.get,o=f.any,d=f.set,s=f.copy,p=f.success,u=f.error,e={},n={},h=function(t,e,r){var n,i,o;return""+(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(o=t.service)?o.root:void 0)+"|"+e+":"+function(){var t;t=[];for(n in r)i=r[n],t.push(""+n+"="+i);return t}()},i=function(){function t(t){var e,r;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),r=this.descriptors,this.mid=2<=r.length?y.call(r,0,e=r.length-1):(e=0,[]),this.end=r[e++],null==this.ident&&(this.ident=h(this.model,this,this.subclasses))}return t.prototype.isRoot=function(){return 0===this.descriptors.length},t.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},t.prototype.isClass=function(){return this.isRoot()||this.isReference()},t.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},t.prototype.isReverseReference=function(){var t,e,r,n,i;return this.isReference()&&this.mid.length>0?(i=this.end,n=i.reverseReference,r=i.referencedType,e=this.getParent(),t=e.getParent(),null!=r&&t.isa(r)&&e.end.name===n):!1},t.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)?t:!1},t.prototype.containsCollection=function(){return o(this.descriptors,function(t){return t.isCollection})},t.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},t.prototype.getParent=function(){var e;if(this.isRoot())throw new Error("Root paths do not have parents");return e={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new t(e)},t.prototype.append=function(e){var r,n;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(n="string"==typeof e?this.getType().fields[e]:e,null==n)throw new Error(""+e+" is not a field of "+this.getType());return r={root:this.root,model:this.model,descriptors:this.descriptors.concat([n]),subclasses:this.subclasses},new t(r)},t.prototype.isa=function(t){var e,r;return null==t?!1:this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t,r=this.getType(),e===r.name||m.call(this.model.getAncestorsOf(r),e)>=0)},t.prototype.getDisplayName=function(t){var r,n,i,o;return(n=this.displayName)?p(n):(null==this.namePromise&&(this.namePromise=(r=e[this.ident])?p(r):this.isRoot()&&this.root.displayName?p(this.root.displayName):null==this.model.service?u("No service"):(o="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),i=d({format:"json"})(s(this.subclasses)),this.model.service.get(o,i).then(l("display")).then(function(t){return function(r){var n;return null!=e[n=t.ident]?e[n]:e[n]=r}}(this)))),v(t,this.namePromise))},t.prototype.getChildNodes=function(){var t,e,r,n,i;n=(null!=(r=this.getEndClass())?r.fields:void 0)||{},i=[];for(e in n)t=n[e],i.push(this.append(t));return i},t.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},t.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},t.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},t.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},t}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(t,e,r){var o,a,s,u,l,c,d,p,f;return null==r&&(r={}),l=h(t,e,r),(o=n[l])?o:(p=(e+"").split("."),f=a=t.classes[p.shift()],c=f.name,s=function(){var n,i,o,s;for(s=[],n=0,i=p.length;i>n;n++){if(d=p[n],u=(null!=a?a.fields[d]:void 0)||(null!=(o=a=t.classes[r[c]])?o.fields[d]:void 0),!u)throw new Error("Could not find "+d+" in "+a+" when parsing "+e);c+="."+d,a=t.classes[u.type||u.referencedType],s.push(u)}return s}(),n[l]=new i({root:f,model:t,descriptors:s,subclasses:r,ident:l}))},i.flushCache=function(){return n={},e={}},c.PathInfo=i}).call(this)},{"./util":15}],8:[function(t,e,r){(function(){var r;r=t("es6-promise").Promise,e.exports=r}).call(this)},{"es6-promise":22}],9:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g,y,m,b,w,x,_,E,S,T,k,P,C,D,N,O,M,L,I,R,B,A,j,q,z,V,F,X,Y,U,W,H,$,G,Z,K,J,Q=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},tt=function(t,e){return function(){return t.apply(e,arguments)}},et=[].slice,rt={}.hasOwnProperty;i=t("backbone-events-standalone"),P=r,P.xml=t("./xml"),Y=t("./util"),s=Y.REQUIRES_VERSION,U=Y.withCB,O=Y.merge,w=Y.filter,B=Y.partition,x=Y.fold,v=Y.concatMap,T=Y.id,_=Y.get,N=Y.invoke,V=Y.querystring,E=function(t){var e;if(e=null!=(null!=t?t.toLowerCase:void 0)?a.OP_DICT[t.toLowerCase()]:null,!e)throw new Error("Illegal constraint operator: "+t);return e},e=["path","op","code"],l=e.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(t){return Y.compose(t.fetchList,_("listName"))},n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},f=function(t){return null!=t?"<value>"+Y.escape(t)+"</value>":"<nullValue/>"},h=function(t,e){var r,n;return function(){var i;i=[];for(r in t)n=t[r],Q.call(e,r)>=0&&i.push(""+r+'="'+Y.escape(n)+'" ');return i}().join("")},R=function(t){return"<constraint "+h(t,e)+"/>"},F=function(t){return"<constraint "+h(t,["path","type"])+"/>"},j=function(t){return"<constraint "+h(t,l)+"/>"},L=function(t){return"<constraint "+h(t,e)+">"+v(f)(t.values)+"</constraint>"},k=function(t){return"<constraint "+h(t,e)+'ids="'+t.ids.join(",")+'"/>'},d=function(t){var e;return null!=t.values?L(t):null!=t.ids?k(t):null==t.op?F(t):(e=t.op,Q.call(a.NULL_OPS,e)>=0?R(t):j(t))},S=function(t){return t.replace(/^[^\.]+\./,"")},g=function(t){var e,r,n,i,o,a,s,u,l,c,h;return a=t.path,l=t.type,o=t.op,c=t.value,h=t.values,n=t.extraValue,i=t.ids,e=t.code,r=t.editable,u=t.switched,s=t.switchable,i=null!=i?i.slice():void 0,h=null!=h?h.slice():void 0,I({path:a,type:l,op:o,value:c,values:h,extraValue:n,ids:i,code:e,editable:r,switched:u,switchable:s})},p=function(t){var e;return e=g(t),e.path=S(e.path),e},I=function(t){var e,r;for(e in t)r=t[e],null==r&&delete t[e];return t},m=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},D=function(t,e){var r,n,i,o,s,u,l;if(r={path:t},null===e)r.op="IS NULL";else if(Y.isArray(e))r.op="ONE OF",r.values=e;else if("string"==(u=typeof e)||"number"===u||"boolean"===u)l="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,l)>=0?r.op=e:(r.op="=",r.value=e);else if(i=function(){var t;t=[];for(n in e)s=e[n],t.push(n);return t}(),Q.call(i,"isa")>=0)Y.isArray(e.isa)?(r.op=n,r.values=e.isa):r.type=e.isa;else{Q.call(i,"extraValue")>=0&&(r.extraValue=e.extraValue);for(n in e)o=e[n],"extraValue"!==n&&(r.op=n,Y.isArray(o)?r.values=o:r.value=o)}return r},C=function(t){var e,r,n,i;return t=t.slice(),r={path:t.shift()},1===t.length?(e=t[0],i="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,i)>=0?r.op=e:r.type=e):t.length>=2&&(r.op=t[0],n=t[1],Y.isArray(n)?r.values=n:r.value=n,3===t.length&&(r.extraValue=t[2])),r},z=function(t){var e;return function(){var r,n,i;for(i=[],r=0,n=t.length;n>r;r++)e=t[r],i.push(""+e.path+" "+e.direction);return i}().join(" ")},q=function(t){var e,r,n,i,o,a,s;if(null==t)return[];for(r=t.split(/\s+/),n=function(){var t,e,n;for(n=[],i=t=0,e=r.length/2;e>=0?e>t:t>e;i=e>=0?++t:--t)n.push(2*i);return n}(),s=[],o=0,a=n.length;a>o;o++)e=n[o],s.push([r[e],r[e+1]]);return s},A=function(){var t,e;return e=this.sortOrder,this.sortOrder=function(){var r,n,i;for(i=[],r=0,n=e.length;n>r;r++)t=e[r],this.isRelevant(t.path)&&i.push(t);return i}.call(this),e.length!==this.sortOrder.length?this.trigger("change:sortorder change:orderby",this.sortOrder.slice()):void 0},a=function(){function t(t,e,r){var n,i,o,a,s,u,l,c,h,d,p,f,v,g,y,m;for(u=null!=r?r:{},n=u.model,o=u.summaryFields,this.addConstraint=tt(this.addConstraint,this),this.expandStar=tt(this.expandStar,this),this.adjustPath=tt(this.adjustPath,this),this.select=tt(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=Y.copy(null!=(l=null!=(h=t.displayNames)?h:t.aliases)?l:{}),d=["name","title","comment","description","type"],a=0,s=d.length;s>a;a++)i=d[a],null!=t[i]&&(this[i]=t[i]);this.service=null!=e?e:{},this.model=null!=(p=null!=n?n:t.model)?p:{},this.summaryFields=null!=(f=null!=o?o:t.summaryFields)?f:{},this.root=null!=(v=t.root)?v:t.from,this.maxRows=null!=(g=null!=(y=t.size)?y:t.limit)?g:t.maxRows,this.start=null!=(m=null!=(c=t.start)?c:t.offset)?m:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",A,this)}var e,r,i,a,u,l,c,f,b;return t.JOIN_STYLES=["INNER","OUTER"],t.BIO_FORMATS=["gff3","fasta","bed"],t.NULL_OPS=["IS NULL","IS NOT NULL"],t.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],t.MULTIVALUE_OPS=["ONE OF","NONE OF"],t.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],t.TERNARY_OPS=["LOOKUP"],t.LOOP_OPS=["=","!="],t.LIST_OPS=["IN","NOT IN"],t.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],r=["path","type","op","code","value","ids"],c=function(t,e){var r,n,i,o;for(o=[],n=0,i=e.length;i>n;n++)r=e[n],t.hasAttribute(r)&&o.push([r,t.getAttribute(r)]);return o},i=function(t,e){var r,n,i,o,a;for(o=t.getElementsByTagName(e),a=[],n=0,i=o.length;i>n;n++)r=o[n],a.push(r);return a},b=function(t){return function(e){return e.getAttribute(t)}},t.fromXML=function(t){var e,n,o,a,s,l,h;if(n=P.xml.parse(t),l=i(n,"query")[0]||i(n,"template")[0],!l)throw new Error("no query in xml");return a=b("path"),h=b("style"),s=Y.pairsToObj(c(l,u)),s.view=s.view.split(/\s+/),s.sortOrder=q(s.sortOrder),s.joins=function(){var t,e,r,n;for(r=i(l,"join"),n=[],t=0,e=r.length;e>t;t++)o=r[t],"OUTER"===h(o)&&n.push(a(o));return n}(),s.constraints=function(){var t,n,o,a;for(o=i(l,"constraint"),a=[],t=0,n=o.length;n>t;t++)e=o[t],a.push(function(t){var e,n,o,a,s;return e=Y.pairsToObj(c(t,r)),null!=e.ids&&(e.ids=function(){var t,r,n,i;for(n=e.ids.split(","),i=[],t=0,r=n.length;r>t;t++)s=n[t],i.push(parseInt(s,10));return i}()),a=i(t,"value"),a.length&&(e.values=function(){var t,e,r;for(r=[],t=0,e=a.length;e>t;t++)o=a[t],r.push(function(){var t,e,r,i;for(r=o.childNodes,i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(n.data);return i}().join(""));return r}()),e}(e));return a}(),s},t.prototype.constraints=[],t.prototype.views=[],t.prototype.joins={},t.prototype.constraintLogic="",t.prototype.sortOrder="",t.prototype.name=null,t.prototype.title=null,t.prototype.comment=null,t.prototype.description=null,t.prototype.removeFromSelect=function(t){var e,r,n,i;return null==t&&(t=[]),t=Y.stringList(t),e=Y.compose(this.expandStar,this.adjustPath),t=Y.flatten(function(){var r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],o.push(e(n));return o}()),this.sortOrder=function(){var e,n,i,o,a;for(i=this.sortOrder,a=[],e=0,n=i.length;n>e;e++)r=i[e],o=r.path,Q.call(t,o)>=0||a.push(r);return a}.call(this),this.views=function(){var e,r,n,o;for(n=this.views,o=[],e=0,r=n.length;r>e;e++)i=n[e],Q.call(t,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",t),this.trigger("change:views",this.views),this.trigger("change",this.views)},t.prototype.removeConstraint=function(t,e){var r,n,i,o;if(null==e&&(e=!1),i=this.constraints,n="string"==typeof t?function(e){return e.code===t}:function(e){var r,n;return e.path===t.path&&e.op===t.op&&e.value===t.value&&e.extraValue===t.extraValue&&t.type===e.type&&(null!=(r=e.values)?r.join("%%"):void 0)===(null!=(n=t.values)?n.join("%%"):void 0)},o=function(){var t,e,o;for(o=[],t=0,e=i.length;e>t;t++)r=i[t],n(r)||o.push(r);return o}(),o.length!==i.length-1)throw new Error(m(i,o));return this.constraints=o,e?void 0:(this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",Y.find(i,n)))},t.prototype.addToSelect=function(t,e){var r,n,i,o,a,s,u,l;if(null==t&&(t=[]),null==e&&(e={}),t=Y.stringList(t),n=Y.compose(this.expandStar,this.adjustPath),o=Y.flatten(function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)a=t[e],i.push(n(a));return i}()),r=function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)i=o[t],Q.call(this.views,i)>=0&&r.push(i);return r}.call(this),r.length)throw new Error(""+r+" already in the select list");if(r=function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)i=o[t],function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)s=o[t],s===i&&r.push(s);return r}().length>1&&r.push(i);return r}(),r.length)throw new Error(""+r+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),e.silent?e.events=(null!=(l=e.events)?l:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},t.prototype.select=function(t,e){var r,n;n=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(i){r=i,this.views=n,Y.error(r)}return this},t.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},t.prototype.getPossiblePaths=function(t,e,r){var n,i,o,a,s;return null==t&&(t=3),null==e&&(e=!0),null==r&&(r=null),a="string"==typeof r?function(t){return t[r]()}:r,n=function(t){return function(r,i){var o,a,s,u,l,c;return l=t.getPathInfo(r),!e&&l.isReverseReference()?[]:l.isAttribute()?[l]:(o=l.getType(),c=v(function(t){return n(""+r+"."+t.name,i-1)}),u=o&&i>0?c(function(){var t,e;t=o.fields,e=[];for(s in t)a=t[s],e.push(a);return e}()):[],[l].concat(u))}}(this),i=""+t+"-"+e,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=n(this.root,t)).slice(),null!=a?o.filter(a):o},t.prototype.getPathInfo=function(t){var e,r,n;return e=this.adjustPath(t),r=null!=(n=this.model)&&"function"==typeof n.getPathInfo?n.getPathInfo(e,this.getSubclasses()):void 0,r&&e in this.displayNames&&(r.displayName=this.displayNames[e]),r},t.prototype.makePath=t.prototype.getPathInfo,f=function(t){return[t.path,t.type]},l=Y.compose(Y.pairsToObj,Y.map(f),w(_("type"))),t.prototype.getSubclasses=function(){return l(this.constraints)},t.prototype.getType=function(t){return this.getPathInfo(t).getType()},t.prototype.getViewNodes=function(){var t,e;return e=function(t){return function(e){return t.getPathInfo(e).getParent()}}(this),Y.uniqBy(String,function(){var r,n,i,o;for(i=this.views,o=[],r=0,n=i.length;n>r;r++)t=i[r],o.push(e(t));return o}.call(this))},t.prototype.isInView=function(t){var e,r,n;if(e=this.getPathInfo(t),!e)throw new Error("Invalid path: "+t);return e.isAttribute()?(n=e.toString(),Q.call(this.views,n)>=0):(r=e.toString(),Y.any(this.getViewNodes(),function(t){return t.toString()===r}))},t.prototype.isConstrained=function(t,e){var r,n;if(null==e&&(e=!1),r=this.getPathInfo(t),!r)throw new Error("Invalid path: "+t);return n=function(t){return null!=t.op&&t.path===r.toString()},!r.isAttribute()&&e&&(n=function(t){return function(e){return null!=e.op&&(e.path===r.toString()||r.equals(t.getPathInfo(e.path).getParent()))}}(this)),Y.any(this.constraints,n)},t.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},t.prototype.getQueryNodes=function(){var t,e,r,n;return n=this.getViewNodes(),e=function(){var e,n,i,o;for(i=this.constraints,o=[],e=0,n=i.length;n>e;e++)t=i[e],null==t.type&&(r=this.getPathInfo(t.path),o.push(r.isAttribute()?r.getParent():r));return o}.call(this),Y.uniqBy(String,n.concat(e))},t.prototype.isInQuery=function(t){var e,r,n,i,o,a;if(r=this.getPathInfo(t)){for(n=r.toPathString(),a=this.views.concat(function(){var t,r,n,i;for(n=this.constraints,i=[],t=0,r=n.length;r>t;t++)e=n[t],null==e.type&&i.push(e.path);return i}.call(this)),i=0,o=a.length;o>i;i++)if(t=a[i],0===t.indexOf(n))return!0;return!1}return!0},t.prototype.isRelevant=function(t){var e,r,n;return r=this.getPathInfo(t),r.isAttribute()&&(r=r.getParent()),n=r.toString(),e=this.getViewNodes(),Y.any(e,function(t){return t.toPathString()===n})},t.prototype.expandStar=function(t){var e,r,n,i,o,a,s,u;if(/\*$/.test(t))if(s=t.substr(0,t.lastIndexOf(".")),n=function(t){return s+t},r=this.getType(s),/\.\*$/.test(t)){if(r&&this.summaryFields[r.name])return i=Y.compose(n,y),function(){var t,e,n,a;for(n=this.summaryFields[r.name],a=[],t=0,e=n.length;e>t;t++)o=n[t],this.hasView(o)||a.push(i(o));return a}.call(this)}else if(/\.\*\*$/.test(t))return u=this.expandStar(s+".*"),e=function(){var t;t=[];for(a in r.attributes)t.push(n("."+a));return t}(),Y.uniqBy(T,u.concat(e));return t},t.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},t.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),Q.call(this.views,e)>=0)},t.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},t.prototype.appendToList=function(t,e){var r,n,i,a,s;return(null!=t?t.name:void 0)?(r=t.name,s=function(e,r){return null==e?t.size=r.size:void 0}):(r=String(t),s=null),a=this.makeListQuery(),i={listName:r,query:a.toXML()},n=o(this.service),U(s,e,this.service.post("query/append/tolist",i).then(n))},t.prototype.selectPreservingImpliedConstraints=function(t){var e,r,n,i,o;for(null==t&&(t=[]),r=this.clone(),r.select(t),o=this.getViewNodes(),n=0,i=o.length;i>n;n++)e=o[n],this.isOuterJoined(e)||r.isInView(e||r.isConstrained(e))||null==e.getEndClass().fields.id||r.addConstraint([e.append("id"),"IS NOT NULL"]);return r},t.prototype.makeListQuery=function(){var t,e;return t=this.views.slice(),1===t.length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},t.prototype.saveAsList=function(t,e){var r,n;return n=this.makeListQuery(),r=Y.copy(t),r.listName=r.listName||r.name,r.query=n.toXML(),t.tags&&(r.tags=t.tags.join(";")),U(e,this.service.post("query/tolist",r).then(o(this.service)))},t.prototype.summarise=function(t,e,r){return this.filterSummary(t,"",e,r)},t.prototype.summarize=function(){var t;return t=1<=arguments.length?et.call(arguments,0):[],this.summarise.apply(this,t)},a=function(t){var e,r,n,i,o,a,s;for(e=null!=(null!=(a=t.results[0])?a.max:void 0),s=t.results,i=0,o=s.length;o>i;i++)r=s[i],r.count=parseInt(r.count,10);return n={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(n=O(n,t.results[0])),t.stats=n,t},t.prototype.filterSummary=function(t,e,r,n){var i,o,s;return null==n&&(n=function(){}),Y.isFunction(r)&&(s=[r,null],n=s[0],r=s[1]),t=this.adjustPath(t),o=this.clone(),Q.call(o.views,t)<0&&o.views.push(t),i={query:o.toXML(),summaryPath:t,format:"jsonrows"},r&&(i.size=r),e&&(i.filterTerm=e),U(n,this.service.post("query/results",i).then(a))},t.prototype.clone=function(e){var r,n,i,o;if(r=new t(this,this.service),null==r._callbacks&&(r._callbacks={}),e){o=this._callbacks;for(n in o)rt.call(o,n)&&(i=o[n],
r._callbacks[n]=i);r.off("change:views",A,this)}return r},t.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},t.prototype.previous=function(){var t;return t=this.clone(),t.start=this.maxRows?this.start-this.maxRows:0,t},t.prototype.getSortDirection=function(t){var e,r;if(e=this.adjustPath(t),!this.isInQuery(e)&&!this.isRelevant(e))throw new Error(""+t+" is not in the query");return r=Y.find(this.sortOrder,function(t){var r;return r=t.path,e===r}),null!=r?r.direction:void 0},t.prototype.isOuterJoined=function(t){var e,r,n;t=this.adjustPath(t),n=this.joins;for(r in n)if(e=n[r],"OUTER"===e&&0===t.indexOf(r))return!0;return!1},t.prototype.getOuterJoin=function(t){var e,r;return t=this.adjustPath(t),e=function(){var t;t=[];for(r in this.joins)t.push(r);return t}.call(this).sort(function(t,e){return e.length-t.length}),Y.find(e,function(e){return function(r){return"OUTER"===e.joins[r]&&0===t.indexOf(r)}}(this))},t.prototype._parse_sort_order=function(t){var e,r,n,i,o,a;if(null==t)throw new Error("No input");if("string"==typeof t)i={path:t,direction:"ASC"};else if(Y.isArray(t))n=t[0],e=t[1],i={path:n,direction:e};else if(null==t.path){for(r in t)o=t[r],a=[r,o],n=a[0],e=a[1];i={path:n,direction:e}}else n=t.path,e=t.direction,i={path:n,direction:e};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},t.prototype.addOrSetSortOrder=function(t){var e,r;return t=this._parse_sort_order(t),e=this.getSortDirection(t.path),null==e?this.addSortOrder(t):e!==t.direction&&(r=Y.find(this.sortOrder,function(e){var r;return r=e.path,r===t.path}),r.direction=t.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},t.prototype.addSortOrder=function(t,e){var r;return r=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),r?void 0:(this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change"))},t.prototype.orderBy=function(t,e){var r,n,i,o,a,s,u,l;for(null==e&&(e={}),o=this.sortOrder.slice(),this.sortOrder=[],s=0,u=t.length;u>s;s++)i=t[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return r=function(){var t,e,r,i,o;for(r=this.sortOrder,o=[],t=0,e=r.length;e>t;t++)i=r[t],a=i.path,n=i.direction,o.push({path:a,direction:n});return o}.call(this),this.trigger("set:sortorder",r),z(o)!==this.getSorting()&&(e.silent?e.events=(null!=(l=e.events)?l:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",r),this.trigger("change"))),this},t.prototype.addJoins=function(t){var e,r,n,i,o,a,s;if(Y.isArray(t)){for(a=[],i=0,o=t.length;o>i;i++)e=t[i],a.push(this.addJoin(e));return a}s=[];for(r in t)n=t[r],s.push(this.addJoin({path:r,style:n}));return s},t.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},t.prototype.setJoinStyle=function(e,r){if(null==r&&(r="OUTER"),e=this.adjustPath(e),r=r.toUpperCase(),Q.call(t.JOIN_STYLES,r)<0)throw new Error("Invalid join style: "+r);return this.joins[e]!==r&&(this.joins[e]=r,this.trigger("change:joins",{path:e,style:r}),this.trigger("change")),this},t.prototype.addConstraints=function(t,e){var r,n,i,o,a,s,u;if(null==e&&(e="and"),this.__silent__=!0,i=this.constraintLogic,Y.isArray(t))for(s=0,u=t.length;u>s;s++)r=t[s],this.addConstraint(r,e);else{a=function(t){return function(r,n){return t.addConstraint(D(r,n),e)}}(this);for(o in t)n=t[o],a(o,n)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},t.prototype.addConstraint=function(t,e){var r,i,o,a,s,u,l;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return t=Y.isArray(t)?C(t):g(t),"OFF"===t.switched?this:(t.path=this.adjustPath(t.path),null==t.type&&(t.op=E(t.op)),this.constraints.push(t),o="or"===e||(null!=(l=this.constraintLogic)?l.length:void 0)>0,a=this.constraints.length,u=this.constraintLogic,o&&(s=2===a?""+n[0]+" "+e+" "+n[1]:(i=this.constraintLogic,i||(i=function(){var t,e,i;for(i=[],r=t=0,e=a-2;e>=0?e>=t:t>=e;r=e>=0?++t:--t)i.push(n[r]);return i}().join(" and ")),"("+i+") "+e+" "+n[a-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},t.prototype.getSorting=function(){return z(this.sortOrder)},t.prototype.getConstraintXML=function(){var t,e;return e=function(){var e,r,n,i;for(n=this.constraints,i=[],e=0,r=n.length;r>e;e++)t=n[e],(null==t.type||this.isInQuery(t.path))&&i.push(t);return i}.call(this),e.length?v(d)(v(T)(B(function(t){return null!=t.type})(e))):""},t.prototype.getJoinXML=function(){var t,e,r;return r=function(){var r,n;r=this.joins,n=[];for(t in r)e=r[t],this.isInQuery(t)&&"OUTER"===e&&n.push('<join path="'+t+'" style="OUTER"/>');return n}.call(this),r.join("")},t.prototype.toXML=function(){var t,e,r,n;return t={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(t.name=this.name),e=function(){var e;e=[];for(r in t)n=t[r],n&&e.push(r+'="'+n+'"');return e}().join(" "),"<query "+e+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},t.prototype.toJSON=function(){var t,e,r,n,i;return I({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,r,n;for(r=this.views,n=[],t=0,e=r.length;e>t;t++)i=r[t],n.push(S(i));return n}.call(this),orderBy:function(){var t,n,i,o,a;for(i=this.sortOrder,a=[],t=0,n=i.length;n>t;t++)o=i[t],r=o.path,e=o.direction,a.push({path:S(r),direction:e});return a}.call(this),joins:function(){var t,e;t=this.joins,e=[];for(r in t)n=t[r],"OUTER"===n&&e.push(S(r));return e}.call(this),where:function(){var e,r,n,i;for(n=this.constraints,i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(p(t));return i}.call(this)})},t.prototype.fetchCode=function(t,e){var r;return r={query:this.toXML(),lang:t},U(e,this.service.post("query/code",r).then(this.service.VERIFIER).then(_("code")))},t.prototype.setName=function(t){this.name=t},t.prototype.save=function(t,e){return s(this.service,16,function(r){return function(){var n,i;return Y.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&r.setName(t),n={type:"PUT",path:"user/queries",data:r.toXML(),contentType:"application/xml",dataType:"json"},U(e,r.service.authorise(n)).then(function(t){return r.service.doReq(t)}).then(function(t){return t.queries})}}(this))},t.prototype.store=function(t,e){return s(this.service,16,function(r){return function(){var n,i,o,a;return Y.isFunction(t)&&(a=[null,t],t=a[0],e=a[1]),null!=t&&r.setName(t),o=function(t,e){return null==t?r.setName(e):void 0},n=Y.compose(_(r.name),_("queries")),i={type:"POST",path:"user/queries",data:r.toXML(),contentType:"application/xml",dataType:"json"},U(e,o,r.service.authorise(i)).then(function(t){return r.service.doReq(t)}).then(n)}}(this))},t.prototype.saveAsTemplate=function(t,e){return s(this.service,16,function(r){return function(){var n,i;if(Y.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&r.setName(t),!r.name)throw new Error("Templates must have a name");return n={type:"POST",path:"templates",data:"<template "+h(r,["name","title","comment"])+">"+r.toXML()+"</template>",contentType:"application/xml",dataType:"json"},U(e,r.service.authorise(n).then(function(t){return r.service.doReq(t)}))}}(this))},t.prototype.getCodeURI=function(t){var e,r;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(r=this.service)?r.token:void 0)&&(e.token=this.service.token),""+this.service.root+"query/code?"+V(e)},t.prototype.getExportURI=function(e,r){var n,i;return null==e&&(e="tab"),null==r&&(r={}),Q.call(t.BIO_FORMATS,e)>=0?this["get"+e.toUpperCase()+"URI"](r):(n=O(r,{query:this.toXML(),format:e}),null!=(null!=(i=this.service)?i.token:void 0)&&(n.token=this.service.token),""+this.service.root+"query/results?"+V(n))},t.prototype.needsAuthentication=function(){return Y.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},t.prototype.fetchQID=function(t){return U(t,this.service.post("queries",{query:this.toXML()}).then(_("id")))},e=function(t){return t.append("primaryIdentifier").toString()},t.prototype.__bio_req=function(t,r){var n,i;return i=this.makeListQuery(),n=function(e){return Y.any(t,function(t){return e.isa(t)})},i.views=Y.take(r)(function(){var t,i,o,a;for(o=this.getViewNodes(),a=[],t=0,i=o.length;i>t;t++)r=o[t],n(r)&&a.push(e(r));return a}.call(this)),{query:i.toXML(),format:"text"}},t.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},t.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},t.prototype._bed_req=t.prototype._gff3_req,t}(),X=x(function(t,e){return t.concat(e)}),a.prototype.toString=a.prototype.toXML,a.ATTRIBUTE_OPS=X([a.ATTRIBUTE_VALUE_OPS,a.MULTIVALUE_OPS,a.NULL_OPS]),a.REFERENCE_OPS=X([a.TERNARY_OPS,a.LOOP_OPS,a.LIST_OPS]),c=function(t,e){return function(r,n){var i,o,a,s,u;return null==r&&(r={}),null==n&&(n=function(){}),Y.isFunction(r)&&(u=[{},r],r=u[0],n=u[1]),i=function(t){return function(e){var r;return r=t.getPathInfo(e),r.isAttribute()?r:r.append("id")}}(this),null!=(null!=r?r.view:void 0)&&(r.view=function(){var t,e,n,i;for(n=r.view,i=[],t=0,e=n.length;e>t;t++)s=n[t],i.push(this.getPathInfo(s).toString());return i}.call(this)),o=null!=r["export"]?this.selectPreservingImpliedConstraints(r["export"].map(i)):this,a=O(o[t](),r),e.call(o,a,n)}},J=a.BIO_FORMATS,W=function(t){var e,r,n;return r="_"+t+"_req",e="get"+t.toUpperCase(),n=e+"URI",a.prototype[e]=c(r,function(e,r){return U(r,this.service.post("query/results/"+t,e))}),a.prototype[n]=c(r,function(e,r){return null!=this.service.token&&(e.token=this.service.token),""+this.service.root+"query/results/"+t+"?"+V(e)})};for($=0,Z=J.length;Z>$;$++)b=J[$],W(b);for(H=function(t){return function(){var e,r,n,i;if(r=arguments[0],e=2<=arguments.length?et.call(arguments,1):[],this.service[t])return null==r?r={}:Y.isFunction(r)&&(r={},e=function(){var t,e,r;for(r=[],t=0,e=arguments.length;e>t;t++)n=arguments[t],r.push(n);return r}.apply(this,arguments)),r=I(O({start:this.start,size:this.maxRows},r)),(i=this.service)[t].apply(i,[this,r].concat(et.call(e)));throw new Error("Service does not provide '"+t+"'.")}},G=0,K=u.length;K>G;G++)M=u[G],a.prototype[M]=H(M);i.mixin(a.prototype),a.prototype.emit=a.prototype.trigger,a.prototype.bind=a.prototype.on,P.Query=a}).call(this)},{"./util":15,"./xml":17,"backbone-events-standalone":21}],10:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g,y,m,b,w,x,_,E,S,T,k,P,C,D,N,O,M,L,I,R,B,A,j,q,z,V,F,X,Y,U,W,H,$,G,Z,K,J,Q,tt,et,rt,nt,it,ot,at,st,ut,lt,ct,ht,dt,pt,ft=function(t,e){return function(){return t.apply(e,arguments)}},vt={}.hasOwnProperty,gt=[].slice;for(E=t("./promise"),m=t("./model").Model,k=t("./query").Query,v=t("./lists").List,q=t("./user").User,c=t("./id-resolution-job").IDResolutionJob,ot=t("./version"),it=t("./util"),Z=t("./http"),nt=it.querystring,at=it.withCB,J=it.map,Q=it.merge,$=it.get,et=it.set,K=it.invoke,rt=it.success,H=it.error,D=it.REQUIRES_VERSION,W=it.dejoin,z={},n={},P={},g={},L={},X={},a="http://",V="version",B="templates",C="version/release",i="classkeys",d="lists",y="model",M="summaryfields",S="query/results",T="search",Y="widgets",s="list/enrichment",U="listswithobject",p={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},N="lists/subtract",F="user/whoami",R=S+"/tablerows",_="user/preferences",x="path/values",j="user/tokens",h="ids",w={},dt=[V,C,i,Y,y,M,T,x],ut=0,ct=dt.length;ct>ut;ut++)tt=dt[ut],w[tt]=!0;for(e={},pt=[F,_,p,N,U,s,B,j],lt=0,ht=pt.length;ht>lt;lt++)tt=pt[lt],e[tt]=!0;b=function(t,r){return w[t]?!1:e[t]?!0:(null!=r?r.needsAuthentication:void 0)?r.needsAuthentication():!0},u=/^https?:\/\//i,l=/service\/?$/i,O="/service/",o=function(t){var e,r;return(e=null!=(r=console.error)?r:console.log)(t)},st=function(t,e,r,n,i){var o,a,s,u,l;return s=this.root,u=this.useCache,a=null!=this[t]?this[t]:this[t]=u&&(l=e[s])?rt(l):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(Q(o,{url:this.root+r})).then(function(t){return e[s]=t[n]})),at(i,a)},G=function(t){return function(e){return new E(function(r,n){var i;return(i=it.find(e,function(e){return e.name===t}))?r(i):n('List "'+t+'" not found among: '+e.map($("name")))})}},f=function(t,e){return null==e&&(e="listName"),it.compose(t.fetchList,$(e))},A=function(t){var e,r,n,i,o,a;for(null==t&&(t=[]),i=it.isArray(t)?t:[t],a=[],r=0,n=i.length;n>r;r++)e=i[r],a.push(null!=(o=e.name)?o:e);return a},I=function(){function t(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.connectAs=ft(this.connectAs,this),this.createList=ft(this.createList,this),this.resolveIds=ft(this.resolveIds,this),this.templateQuery=ft(this.templateQuery,this),this.savedQuery=ft(this.savedQuery,this),this.query=ft(this.query,this),this.fetchRelease=ft(this.fetchRelease,this),this.fetchClassKeys=ft(this.fetchClassKeys,this),this.fetchVersion=ft(this.fetchVersion,this),this.fetchSummaryFields=ft(this.fetchSummaryFields,this),this.fetchModel=ft(this.fetchModel,this),this.fetchWidgetMap=ft(this.fetchWidgetMap,this),this.fetchWidgets=ft(this.fetchWidgets,this),this.complement=ft(this.complement,this),this.fetchListsContaining=ft(this.fetchListsContaining,this),this.fetchList=ft(this.fetchList,this),this.findLists=ft(this.findLists,this),this.fetchLists=ft(this.fetchLists,this),this.fetchTemplates=ft(this.fetchTemplates,this),this.tableRows=ft(this.tableRows,this),this.values=ft(this.values,this),this.rows=ft(this.rows,this),this.records=ft(this.records,this),this.table=ft(this.table,this),this.pathValues=ft(this.pathValues,this),this.fetchUser=ft(this.fetchUser,this),this.whoami=ft(this.whoami,this),this.findById=ft(this.findById,this),this.count=ft(this.count,this),this.enrichment=ft(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=a+this.root),l.test(this.root)||(this.root=this.root+O),this.root=this.root.replace(/ice$/,"ice/"),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return function(t){return null==t&&(t="json"),t}}(this)}var e,r,w,E,I,j;return t.prototype.doReq=Z.doReq,t.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},t.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},t.prototype.makeRequest=function(t,e,r,n,i){var o,a,s,u,l,c,h;return null==t&&(t="GET"),null==e&&(e=""),null==r&&(r={}),null==n&&(n=function(){}),null==i&&(i=!1),it.isArray(n)&&(l=n,n=l[0],a=l[1]),it.isArray(r)&&(r=it.pairsToObj(r)),null==a&&(a=this.errorHandler),r=it.copy(r),o=this.getFormat(r.format),Z.supports(t)||(c=[t,Z.getMethod(t)],r.method=c[0],t=c[1]),s={data:r,dataType:o,success:n,error:a,path:e,type:t},null!=r.auth&&(s.auth=r.auth,delete s.data.auth),null!=r.headers&&(s.headers=it.copy(r.headers),delete s.data.headers),(u=null!=(h=r.timeout)?h:this.timeout)&&(s.timeout=u,delete r.timeout),this.authorise(s).then(function(t){return function(e){return t.doReq(e,i)}}(this))},t.prototype.authorise=function(t){return this.fetchVersion().then(function(e){return function(r){var n,i,o;return n=it.copy(t),null==n.headers&&(n.headers={}),n.url=e.root+n.path,i=[],14>r&&("string"==typeof n.data?i.push(["format",n.dataType]):n.data.format=n.dataType),null!=e.token&&b(t.path,null!=(o=n.data)?o.query:void 0)&&(r>=14?n.headers.Authorization="Token "+e.token:"string"==typeof n.data?i.push(["token",e.token]):n.data.token=e.token),i.length&&(n.url+="?"+nt(i)),n}}(this))},t.prototype.enrichment=function(t,e){return D(this,8,function(r){return function(){var n;return n=Q({maxp:.05,correction:"Holm-Bonferroni"},t),at(e,r.get(s,n).then($("results")))}}(this))},t.prototype.search=function(t,e){return null==t&&(t={}),null==e&&(e=function(){}),D(this,9,function(r){return function(){var n,i,o,a;if(it.isFunction(t)&&(a=[t,{}],e=a[0],t=a[1]),"string"==typeof t)i={q:t};else{i={q:t.q};for(n in t)vt.call(t,n)&&(o=t[n],"q"!==n&&(i["facet_"+n]=o))}return at(e,r.post(T,i))}}(this))},t.prototype.makePath=function(t,e,r){return null==e&&(e={}),null==r&&(r=function(){}),at(r,this.fetchModel().then(function(r){return r.makePath(t,e)}))},t.prototype.count=function(t,e){var r,n;return null==e&&(e=function(){}),r=t?null!=t.toPathString?(tt=t.isClass()?t.append("id"):t,this.pathValues(tt,"count")):null!=t.toXML?(n={query:t,format:"jsoncount"},this.post(S,n).then($("count"))):"string"==typeof t?this.fetchModel().then(function(e){return function(r){var n;try{return e.count(r.makePath(t))}catch(i){return n=i,e.query({select:[t]}).then(e.count)}}}(this)):this.query(t).then(this.count):H("Not enough arguments"),at(e,r)},t.prototype.findById=function(t,e,r,n){var i,o;return null==r&&(r=["**"]),null==n&&(n=function(){}),it.isFunction(r)&&(o=[["**"],r],r=o[0],n=o[1]),i=this.query({from:t,select:r,where:{id:e}}).then(W).then(K("records")).then($(0)),at(n,i)},t.prototype.lookup=function(t,e,r,n){var i,o;return it.isFunction(r)&&(o=[null,r],r=o[0],n=o[1]),i=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,r]]}).then(W).then(K("records")),at(n,i)},t.prototype.find=function(t,e,r,n){var i;return it.isFunction(r)&&(i=[null,r],r=i[0],n=i[1]),at(n,this.lookup(t,e,r).then(function(t){return null==t||0===t.length?H("Nothing found"):t.length>1?H("Multiple items found: "+t.slice(0,3)+"..."):rt(t[0])}))},t.prototype.whoami=function(t){return D(this,9,function(e){return function(){return at(t,e.get(F).then($("user")).then(function(t){return new q(e,t)}))}}(this))},t.prototype.fetchUser=function(){var t;return t=1<=arguments.length?gt.call(arguments,0):[],this.whoami.apply(this,t)},I=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},t.prototype.pathValues=function(t,e,r){return null==e&&(e={}),D(this,6,function(n){return function(){var i,o,a,s,u;return"string"==typeof e&&(s=e,e={}),it.isFunction(e)&&(u=[r,e],e=u[0],r=u[1]),"count"!==s&&(s="results"),o="count"===s?"jsoncount":"json",a=function(){var r;try{return this.fetchModel().then(K("makePath",t,null!=(r=t.subclasses)?r:e)).then(function(t){return I(o,t)}).then(function(t){return function(e){return t.post(x,e)}}(this)).then($(s))}catch(n){return i=n,H(i)}}.call(n),at(r,a)}}(this))},t.prototype.doPagedRequest=function(t,e,r,n,i){var o,a;return null==r&&(r={}),null==i&&(i=function(){}),null!=t.toXML?(it.isFunction(r)&&(a=[r,{}],i=a[0],r=a[1]),o=Q(r,{query:t,format:n}),at(i,this.post(e,o).then($("results")))):this.query(t).then(function(t){return function(o){return t.doPagedRequest(o,e,r,n,i)}}(this))},t.prototype.table=function(t,e,r){return this.doPagedRequest(t,S,e,"jsontable",r)},t.prototype.records=function(t,e,r){return this.doPagedRequest(t,S,e,"jsonobjects",r)},t.prototype.rows=function(t,e,r){return this.doPagedRequest(t,S,e,"json",r)},t.prototype.values=function(t,e,r){var n,i;return it.isFunction(e)&&(i=[e,r],r=i[0],e=i[1]),n=null==t?H("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(J($("value"))):null!=t.toXML?1!==t.views.length?H("Expected one column, got "+t.views.length):this.rows(t,e).then(J($(0))):this.query(t).then(function(t){return function(r){return t.values(r,e)}}(this)),at(r,n)},t.prototype.tableRows=function(t,e,r){return this.doPagedRequest(t,R,e,"json",r)},t.prototype.fetchTemplates=function(t){return at(t,this.get(B).then($("templates")))},t.prototype.fetchLists=function(t){return this.findLists("",t)},t.prototype.findLists=function(t,e){return null==t&&(t=""),null==e&&(e=function(){}),this.fetchVersion().then(function(r){return function(n){var i;return at(e,t&&13>n?H("Finding lists by name on the server requires version 13. This is only "+n):(i=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(new v(e,r));return o},r.get(d,{name:t}).then($("lists")).then(i)))}}(this))},t.prototype.fetchList=function(t,e){return this.fetchVersion().then(function(r){return function(n){return at(e,13>n?r.findLists().then(G(t)):r.findLists(t).then($(0)))}}(this))},t.prototype.fetchListsContaining=function(t,e){var r;return r=function(t){return function(e){var r,n,i,o;for(o=[],n=0,i=e.length;i>n;n++)r=e[n],o.push(new v(r,t));return o}}(this),at(e,this.get(U,t).then($("lists")).then(r))},t.prototype.combineLists=function(t,e,r){var n,i,o,a,s,u;return u=Q({lists:[],tags:[]},e),o=u.name,i=u.lists,s=u.tags,n=u.description,a={name:o,description:n},null==a.description&&(a.description=""+t+" of "+i.join(", ")),a.tags=s.join(";"),a.lists=i.join(";"),at(r,this.get(p[t],a).then(f(this)))},t.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(gt.call(arguments)))},t.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(gt.call(arguments)))},t.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(gt.call(arguments)))},t.prototype.complement=function(t,e){var r,n,i,o,a,s,u,l,c;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,i=t.exclude,s=t.name,n=t.description,c=t.tags,r=function(){return"Relative complement of "+a.join(" and ")+" in "+u.join(" and ")},u=A(o),a=A(i),null==s&&(s=r()),null==n&&(n=r()),null==c&&(c=[]),l={name:s,description:n,tags:c,lists:a,references:u},at(e,this.post(N,l).then(f(this)))},t.prototype.fetchWidgets=function(t){return D(this,8,function(e){return function(){return st.call(e,"widgets",X,Y,"widgets",t)}}(this))},j=it.omap(function(t){return[t.name,t]}),t.prototype.fetchWidgetMap=function(t){return D(this,8,function(e){return function(){return at(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(j))}}(this))},t.prototype.fetchModel=function(t){var e;return e=st.call(this,"model",g,y,"model").then(m.load).then(et({service:this})),at(t,e)},t.prototype.fetchSummaryFields=function(t){return st.call(this,"summaryFields",L,M,"classes",t)},t.prototype.fetchVersion=function(t){return st.call(this,"version",z,V,"version",t)},t.prototype.fetchClassKeys=function(t){return st.call(this,"classkeys",n,i,"classes",t)},t.prototype.fetchRelease=function(t){return st.call(this,"release",P,C,"version",t)},t.prototype.query=function(t,e){var r;return r=function(e){return function(r){var n,i;return n=r[0],i=r[1],new k(t,e,{model:n,summaryFields:i})}}(this),at(e,it.parallel(this.fetchModel(),this.fetchSummaryFields()).then(r))},E=function(t,e){return function(r){return r?t.query(r):H("No query found called "+e)}},r=function(t){return t?"string"==typeof t?rt():H("Name must be a string"):H("Name not provided")},t.prototype.savedQuery=function(t,e){return D(this,16,function(n){return function(){return r(t).then(function(){return at(e,n.get("user/queries",{filter:t}).then(function(e){return e.queries[t]}).then(E(n,t)))})}}(this))},t.prototype.templateQuery=function(t,e){return r(t).then(function(r){return function(){return at(e,r.fetchTemplates().then($(t)).then(et("type","TEMPLATE")).then(E(r,t)))}}(this))},t.prototype.manageUserPreferences=function(t,e,r){return D(this,11,function(n){return function(){return at(r,n.makeRequest(t,_,e).then($("preferences")))}}(this))},t.prototype.resolveIds=function(t,e){return D(this,10,function(r){return function(){var n;return n={type:"POST",url:r.root+h,contentType:"application/json",data:JSON.stringify(t),dataType:"json"},at(e,r.doReq(n).then($("uid")).then(c.create(r)))}}(this))},t.prototype.resolutionJob=function(t){return c.create(this)(t)},t.prototype.createList=function(t,e,r){var n,i;return null==t&&(t={}),null==e&&(e=""),null==r&&(r=function(){}),n=function(e){return function(r){return Q(r,{token:e.token,tags:t.tags||[]})}}(this),i={data:it.isArray(e)?e.map(function(t){return'"'+t+'"'}).join("\n"):e,dataType:"json",url:""+this.root+"lists?"+nt(n(t)),type:"POST",contentType:"text/plain"},at(r,this.doReq(i).then(f(this)))},w=function(t){return t.user.temporaryToken},t.prototype.connectAs=function(e){return t.connect(Q(this,{token:e,noCache:!this.useCache}))},t.prototype.register=function(t,e,r){return D(this,9,function(n){return function(){return at(r,n.post("users",{name:t,password:e}).then(w).then(n.connectAs))}}(this))},e=300,t.prototype.getDeregistrationToken=function(t,r){return null==t&&(t=e),D(this,16,function(e){return function(){var n;return n=null!=e.token?e.post("user/deregistration",{validity:t}).then($("token")):H("Not registered"),at(r,n)}}(this))},t.prototype.deregister=function(t,e){return D(this,16,function(r){return function(){return at(e,r.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}}(this))},t.prototype.login=function(t,e,r){return D(this,9,function(n){return function(){var i;return i=""+t+":"+e,at(r,n.logout().then(function(t){return t.get("user/token",{auth:i})})).then($("token")).then(n.connectAs)}}(this))},t.prototype.logout=function(t){return at(t,rt(this.connectAs()))},t}(),I.prototype.rowByRow=function(){var t,e,r;return r=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Z.iterReq("POST",S,"json"),null!=r.toXML?e.apply(this,arguments):this.query(r).then(function(e){return function(r){return e.rowByRow.apply(e,[r].concat(gt.call(t)))}}(this))},I.prototype.eachRow=I.prototype.rowByRow,I.prototype.recordByRecord=function(){var t,e,r;return r=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Z.iterReq("POST",S,"jsonobjects"),null!=r.toXML?e.apply(this,arguments):this.query(r).then(function(e){return function(r){return e.recordByRecord.apply(e,[r].concat(gt.call(t)))}}(this))},I.prototype.eachRecord=I.prototype.recordByRecord,I.prototype.union=I.prototype.merge,I.prototype.difference=I.prototype.diff,I.prototype.symmetricDifference=I.prototype.diff,I.prototype.relativeComplement=I.prototype.complement,I.prototype.subtract=I.prototype.complement,I.flushCaches=function(){return g={},z={},P={},n={},L={},X={}},I.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new I(t)},r.Service=I,r.Model=m,r.Query=k,r.utils=it,r.VERSION=ot.VERSION,r.imjs=ot}).call(this)},{"./http":3,"./id-resolution-job":4,"./lists":5,"./model":6,"./promise":8,"./query":9,"./user":14,"./util":15,"./version":16}],11:[function(t,e,r){(function(t){(function(){var e;r.DOMParser=null!=t.DOMParser?t.DOMParser:e=function(){function t(){throw new Error("DOMParser is not available")}return t}()}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,r){(function(){var t,e,r,n,i,o,a,s,u,l,c,h;if(t="undefined"!=typeof console,e="undefined"!=typeof JSON,r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e||(s=document.createElement("script"),s.src="http://cdn.intermine.org/js/json3/3.2.2/json3.min.js",s.type="text/javascript",o=document.getElementsByTagName("head")[0],o.appendChild(s)),null==Object.keys&&(i=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),Object.keys=function(t){var e,o,a,s,u;if("object"!=typeof t&&""!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");if(e=function(){var e;e=[];for(o in t)i.call(t,o)&&e.push(o);return e}(),n)for(s=0,u=r.length;u>s;s++)a=r[s],i.call(t,a)&&e.push(a);return e}),null==Array.prototype.map&&(Array.prototype.map=function(t){var e,r,n,i;for(i=[],r=0,n=this.length;n>r;r++)e=this[r],i.push(t(e));return i}),null==Array.prototype.filter&&(Array.prototype.filter=function(t){var e,r,n,i;for(i=[],r=0,n=this.length;n>r;r++)e=this[r],t(e)&&i.push(e);return i}),null==Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var r,n,i,o,a;for(i=this.slice(),r=arguments.length<2?i.pop():e,o=0,a=i.length;a>o;o++)n=i[o],r=t(r,n);return r}),null==Array.prototype.forEach&&(Array.prototype.forEach=function(t,e){var r,n,i,o,a;if(!t)throw new Error("No function provided");for(a=[],r=i=0,o=this.length;o>i;r=++i)n=this[r],a.push(t.call(null!=e?e:this,n,r,this));return a}),t||(this.console={log:function(){},error:function(){},debug:function(){}},"undefined"!=typeof window&&null!==window&&(window.console=this.console)),null==console.log&&(console.log=function(){}),null==console.error&&(console.error=function(){}),null==console.debug&&(console.debug=function(){}),null==console.log.apply)for(console.log("Your console needs patching."),h=["log","error","debug"],u=function(t){var e;return e=console[t],console[t]=function(t){return e(t)}},l=0,c=h.length;c>l;l++)a=h[l],u(a)}).call(this)},{}],13:[function(t,e,r){(function(){var e,n,i,o=function(t,e){return function(){return t.apply(e,arguments)}};n=function(t,e){var r,n,i;i=[];for(r in t)n=t[r],i.push(e[r]=n);return i},e=t("./promise"),i=["attributes","references","collections"],r.Table=function(){function t(t,e){var r,a,s,u,l,c,h;for(this.model=e,this.getDisplayName=o(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(c=t["extends"])?c:[],u=0,l=i.length;l>u;u++){if(a=i[u],null==this[a])throw new Error("Bad model data: missing "+a);n(this[a],this.fields)}h=this.collections;for(s in h)r=h[s],r.isCollection=!0}return t.prototype.toString=function(){var t,e;return"[Table name="+this.name+", fields=["+function(){var r,n;r=this.fields,n=[];for(t in r)e=r[t],n.push(t);return n}.call(this)+"]]"},t.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},t.prototype.getDisplayName=function(){return new e(function(t){return function(e,r){return null!=t.model?e(t.model.makePath(t.name).getDisplayName()):r(new Error("model not set - cannot make path"))}}(this))},t}()}).call(this)},{"./promise":8}],14:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l=function(t,e){return function(){return t.apply(e,arguments)}};u=t("./util"),s=u.withCB,o=u.get,a=u.isFunction,e=u.any,i=u.error,n=function(t,e,r,n){return t.service.manageUserPreferences(r,e,n).then(function(e){return t.preferences=e})},r.User=function(){function t(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=l(this.refresh,this),this.clearPreferences=l(this.clearPreferences,this),this.clearPreference=l(this.clearPreference,this),this.setPreferences=l(this.setPreferences,this),this.setPreference=l(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return t.prototype.setPreference=function(t,e,r){var n,o;if(a(e)&&(o=[null,e],e=o[0],r=o[1]),"string"==typeof t)n={},n[t]=e;else{if(null!=e)return s(r,i("Incorrect arguments to setPreference"));n=t}return this.setPreferences(n,r)},t.prototype.setPreferences=function(t,e){return n(this,t,"POST",e)},t.prototype.clearPreference=function(t,e){return n(this,{key:t},"DELETE",e)},t.prototype.clearPreferences=function(t){return n(this,{},"DELETE",t)},t.prototype.refresh=function(t){return n(this,{},"GET",t)},t.prototype.createToken=function(t,r,n){var i,u;return null==t&&(t="day"),null==n&&e([t,r],a)&&(a(t)?(i=[null,null,t],t=i[0],r=i[1],n=i[2]):a(r)&&(u=[null,r],r=u[0],n=u[1])),s(n,this.service.post("user/tokens",{type:t,message:r}).then(o("token")))},t.prototype.fetchCurrentTokens=function(t){return s(t,this.service.get("user/tokens").then(o("tokens")))},t.prototype.revokeAllTokens=function(t){return s(t,this.service.makeRequest("DELETE","user/tokens"))},t.prototype.revokeToken=function(t,e){return s(e,this.service.makeRequest("DELETE","user/tokens/"+t))},t}()}).call(this);

},{"./util":15}],15:[function(t,e,r){(function(){var e,n,i,o,a,s,u,l,c,h,d,p,f,v,g,y,m,b,w,x,_=[].slice,E=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},S={}.hasOwnProperty;e=t("./promise"),m=r,m.defer=function(){var t;return t={},t.promise=new e(function(e,r){return t.resolve=e,t.reject=r}),t},a=function(t){return encodeURIComponent(String(t))},y=function(t){var e;return function(){var r,n,i;for(i=[],r=0,n=t.length;n>r;r++)e=t[r],i.push(e.map(a).join("="));return i}().join("&")},m.querystring=function(t){var e,r,n,i,o,a;if(!t)return"";if(f(t))n=t.slice();else{n=[];for(e in t)a=t[e],f(a)?(i=function(){var t,r,n;for(n=[],t=0,r=a.length;r>t;t++)o=a[t],n.push([e,o]);return n}(),n=n.concat(i)):n.push([e,a])}return y(function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)r=n[t],null!=r[1]&&i.push(r);return i}())},m.curry=o=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],function(){var r;return r=1<=arguments.length?_.call(arguments,0):[],e.apply(null,t.concat(r))}},m.error=u=function(t){return new e(function(e,r){return r(new Error(t))})},m.success=b=function(t){return new e(function(e,r){return e(t)})},m.parallel=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],e.all(1===t.length&&!t[0].then&&t[0].length?t[0]:t)},m.withCB=function(){var t,e,r,n,i,a,s,u;for(e=2<=arguments.length?_.call(arguments,0,a=arguments.length-1):(a=0,[]),i=arguments[a++],s=0,u=e.length;u>s;s++)t=e[s],null!=t&&(n=o(t,null),r=t,i.then(n,r));return i},m.fold=c=function(t){return function(e,r){var n,i,o;if(1===arguments.length&&(r=(null!=e?e.slice():void 0)||e,e=(null!=r?r.shift():void 0)||{}),null==r)throw new Error("xs is null");if(null!=r.reduce)return r.reduce(t,e);i=e;for(n in r)o=r[n],i=null!=i?t(i,n,o):{k:o};return i}},m.take=function(t){return function(e){return null!=t?e.slice(0,+(t-1)+1||9e9):e.slice()}},m.filter=function(t){return function(e){var r,n,i,o;for(o=[],n=0,i=e.length;i>n;n++)r=e[n],t(r)&&o.push(r);return o}},m.uniqBy=function(t,e){var r,n,i,a,s,u;if(1===arguments.length)return o(m.uniqBy,t);if(n=[],i=[],null==e)return i;for(s=0,u=e.length;u>s;s++)a=e[s],r=t(a),E.call(n,r)<0&&(n.push(r),i.push(a));return i},m.find=function(t,e){var r,n,i;if(1===arguments.length)return e=t,function(t){return m.find(t,e)};for(n=0,i=t.length;i>n;n++)if(r=t[n],e(r))return r;return null},f=null!=(x=Array.isArray)?x:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},m.isArray=f,m.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(t){var e,r,n,i,o,a;if(null==t)return"";for(i=String(t).replace(/[&<>"']/g,function(t){return s[t]}),n=[],r=o=0,a=i.length;a>=0?a>=o:o>=a;r=a>=0?++o:--o)e=i.charCodeAt(r),n.push(e>256?"&#"+e+";":i.charAt(r));return n.join("")},m.omap=function(t){var e;return e=c(function(e,r,n){var i,o,a;return a=t(r,n),i=a[0],o=a[1],f(o)&&(o=o.slice()),e[i]=o,e}),function(t){return e({},t)}},m.copy=m.omap(function(t,e){return[t,e]}),m.partition=function(t){return function(e){var r;return(r=c(function(e,r){var n,i;return i=e[0],n=e[1],t(r)?[i.concat([r]),n]:[i,n.concat([r])]}))([[],[]],e)}},m.id=h=function(t){return t},m.concatMap=function(t){return function(e){var r,n,i,o,a;for(n=void 0,o=0,a=e.length;a>o;o++)i=e[o],r=t(i),n=void 0===n?r:"number"==typeof n?n+r:null!=n.concat?n.concat(r):v(n,r);return n}},m.map=function(t){return d("map",t)},i=c(function(t,e){return function(){var r;return r=1<=arguments.length?_.call(arguments,0):[],t(e.apply(null,r))}}),m.compose=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],i(t)},m.flatMap=m.concatMap,m.difference=function(t,e){var r,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)r=t[n],E.call(e,r)<0&&o.push(r);return o},m.stringList=function(t){return"string"==typeof t?[t]:t},m.flatten=l=function(){var t,e,r,n,i,o,a,s,u;for(r=1<=arguments.length?_.call(arguments,0):[],t=[],i=0,a=r.length;a>i;i++)if(e=r[i],f(e))for(u=l.apply(null,e),o=0,s=u.length;s>o;o++)n=u[o],t.push(n);else t.push(e);return t},m.sum=m.concatMap(h),m.merge=v=function(){var t,e,r,n,i,o,a;for(n=1<=arguments.length?_.call(arguments,0):[],e={},o=0,a=n.length;a>o;o++){r=n[o];for(t in r)S.call(r,t)&&(i=r[t],e[t]=i)}return e},m.any=function(t,e){var r,n,i;for(null==e&&(e=h),n=0,i=t.length;i>n;n++)if(r=t[n],e(r))return!0;return!1},m.invoke=d=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],p(e,t)},m.invokeWith=p=function(t,e,r){return null==e&&(e=[]),null==r&&(r=null),function(n){if(null==n)throw new Error('Cannot call method "'+t+'" of null');if(n[t])return n[t].apply(r||n,e);throw new Error('Cannot call undefined method "'+t+" of "+n)}},m.get=function(t){return function(e){return e[t]}},m.set=function(t,e){return function(r){var n,i;if(2===arguments.length)r[t]=e;else for(n in t)S.call(t,n)&&(i=t[n],r[n]=i);return r}},n=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},m.REQUIRES_VERSION=function(t,e,r){return t.fetchVersion().then(function(t){return t>=e?r():u(n(e,t))})},m.dejoin=function(t){var e,r,n,i,o;for(o=t.views,n=0,i=o.length;i>n;n++)r=o[n],e=r.split("."),e.length>2&&t.addJoin(e.slice(1,-1).join("."));return t},w=c(function(t,e){return t.then(e)}),m.sequence=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],w(b(),t)},g=c(function(t,e){var r,n;if(r=e[0],n=e[1],null!=t[r])throw new Error("Duplicate key: "+r);return t[r]=n,t}),m.pairsToObj=function(t){return g({},t)}}).call(this)},{"./promise":8}],16:[function(t,e,r){(function(){r.VERSION="3.13.0"}).call(this)},{}],17:[function(t,e,r){(function(){var e,n;e=t("xmldom").DOMParser,n=function(t){return t=t.replace(/^\s*/g,""),t=t.replace(/\s$/g,""),0===t.length?t:">"!==t[t.length-1]?t+">":t},r.parse=function(t){var r,i;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(t=n(t),!t)throw new Error("Expected content - got empty string");if(r=function(){try{return i=new e,i.parseFromString(t,"text/xml")}catch(r){}}(),!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return r}}).call(this)},{xmldom:11}],18:[function(t,e,r){(function(n,i){function o(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t?t(e):!1}var a=t("jsonparse"),s=t("through");r.parse=function(t,e){var r=new a,n=s(function(t){"string"==typeof t&&(t=new i(t)),r.write(t)},function(t){t&&n.write(t),n.queue(null)});"string"==typeof t&&(t=t.split(".").map(function(t){return"*"===t?!0:""===t?{recurse:!0}:t}));var u=0;return t&&t.length||(t=null),r.onValue=function(r){if(this.root||(n.root=r),t){for(var i=0,a=0;i<t.length;){var s,l=t[i];if(a++,l&&!l.recurse){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(!o(l,s.key))return;i++}else{i++;var c=t[i];if(!c)return;for(;;){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(o(c,s.key)){i++;break}a++}}}if(a===this.stack.length){u++;var h=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),d=this.value[this.key];null!=d&&null!=(d=e?e(d,h):d)&&n.queue(d),delete this.value[this.key]}}},r._onToken=r.onToken,r.onToken=function(e,i){r._onToken(e,i),0===this.stack.length&&n.root&&(t||n.queue(n.root),n.emit("root",n.root,u),u=0,n.root=null)},r.onError=function(t){n.emit("error",t)},n},r.stringify=function(t,e,r,n){n=n||0,t===!1?(t="",e="\n",r=""):null==t&&(t="[\n",e="\n,\n",r="\n]\n");var i,o=!0,a=!1;return i=s(function(r){a=!0;var s=JSON.stringify(r,null,n);o?(o=!1,i.queue(t+s)):i.queue(e+s)},function(e){a||i.queue(t),i.queue(r),i.queue(null)})},r.stringifyObject=function(t,e,r,n){n=n||0,t===!1?(t="",e="\n",r=""):null==t&&(t="{\n",e="\n,\n",r="\n}\n");var i=!0,o=!1;return stream=s(function(r){o=!0;var a=JSON.stringify(r[0])+":"+JSON.stringify(r[1],null,n);i?(i=!1,this.queue(t+a)):this.queue(e+a)},function(e){o||this.queue(t),this.queue(r),this.queue(null)}),stream},e.parent||"browser"===n.title||n.stdin.pipe(r.parse(n.argv[2])).pipe(r.stringify("[",",\n","]\n",2)).pipe(n.stdout)}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),t("buffer").Buffer)},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,jsonparse:19,through:56}],19:[function(t,e,r){(function(t){function r(t){for(var e=Object.keys(i),r=0,n=e.length;n>r;r++){var o=e[r];if(i[o]===t)return o}return t&&"0x"+t.toString(16)}function n(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=V,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)}}var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,l=i.COLON=5,c=i.COMMA=6,h=i.TRUE=7,d=i.FALSE=8,p=i.NULL=9,f=i.STRING=10,v=i.NUMBER=11,g=i.START=17,y=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,x=i.FALSE2=50,_=i.FALSE3=51,E=i.FALSE4=52,S=i.NULL1=65,T=i.NULL3=66,k=i.NULL2=67,P=i.NUMBER1=81,C=i.NUMBER2=82,D=i.NUMBER3=83,N=i.NUMBER4=84,O=i.NUMBER5=85,M=i.NUMBER6=86,L=i.NUMBER7=87,I=i.NUMBER8=88,R=i.STRING1=97,B=i.STRING2=98,A=i.STRING3=99,j=i.STRING4=100,q=i.STRING5=101,z=i.STRING6=102,V=i.VALUE=113,F=i.KEY=114,X=i.OBJECT=129,Y=i.ARRAY=130,U=n.prototype;U.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+r(this.tState)))},U.onError=function(t){throw t},U.write=function(e){"string"==typeof e&&(e=new t(e));for(var r,n=0,i=e.length;i>n;n++)if(this.tState===g)r=e[n],123===r?this.onToken(o,"{"):125===r?this.onToken(a,"}"):91===r?this.onToken(s,"["):93===r?this.onToken(u,"]"):58===r?this.onToken(l,":"):44===r?this.onToken(c,","):116===r?this.tState=y:102===r?this.tState=w:110===r?this.tState=S:34===r?(this.string="",this.tState=R):45===r?(this.negative=!0,this.tState=P):48===r?(this.magnatude=0,this.tState=C):r>48&&64>r?(this.magnatude=r-48,this.tState=D):32===r||9===r||10===r||13===r||this.charError(e,n);else if(this.tState===R)if(r=e[n],this.bytes_remaining>0){for(var V=0;V<this.bytes_remaining;V++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+V]=e[V];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,n=n+V-1}else if(0===this.bytes_remaining&&r>=128)if(r>=194&&223>=r&&(this.bytes_in_sequence=2),r>=224&&239>=r&&(this.bytes_in_sequence=3),r>=240&&244>=r&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>e.length){for(var F=0;F<=e.length-1-n;F++)this.temp_buffs[this.bytes_in_sequence][F]=e[n+F];this.bytes_remaining=n+this.bytes_in_sequence-e.length,n=e.length-1}else this.string+=e.slice(n,n+this.bytes_in_sequence).toString(),n=n+this.bytes_in_sequence-1;else 34===r?(this.tState=g,this.onToken(f,this.string),this.string=void 0):92===r?this.tState=B:r>=32?this.string+=String.fromCharCode(r):this.charError(e,n);else this.tState===B?(r=e[n],34===r?(this.string+='"',this.tState=R):92===r?(this.string+="\\",this.tState=R):47===r?(this.string+="/",this.tState=R):98===r?(this.string+="\b",this.tState=R):102===r?(this.string+="\f",this.tState=R):110===r?(this.string+="\n",this.tState=R):114===r?(this.string+="\r",this.tState=R):116===r?(this.string+="	",this.tState=R):117===r?(this.unicode="",this.tState=A):this.charError(e,n)):this.tState===A||this.tState===j||this.tState===q||this.tState===z?(r=e[n],r>=48&&64>r||r>64&&70>=r||r>96&&102>=r?(this.unicode+=String.fromCharCode(r),this.tState++===z&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=R)):this.charError(e,n)):this.tState===P?(r=e[n],48===r?(this.magnatude=0,this.tState=C):r>48&&64>r?(this.magnatude=r-48,this.tState=D):this.charError(e,n)):this.tState===C?(r=e[n],46===r?(this.position=.1,this.tState=N):101===r||69===r?(this.exponent=0,this.tState=M):(this.tState=g,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,n--)):this.tState===D?(r=e[n],46===r?(this.position=.1,this.tState=N):101===r||69===r?(this.exponent=0,this.tState=M):r>=48&&64>r?this.magnatude=10*this.magnatude+r-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,n--)):this.tState===N?(r=e[n],r>=48&&64>r?(this.magnatude+=this.position*(r-48),this.position/=10,this.tState=O):this.charError(e,n)):this.tState===O?(r=e[n],r>=48&&64>r?(this.magnatude+=this.position*(r-48),this.position/=10):101===r||69===r?(this.exponent=0,this.tState=M):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,n--)):this.tState===M?(r=e[n],43===r||45===r?(45===r&&(this.negativeExponent=!0),this.tState=L):r>=48&&64>r?(this.exponent=10*this.exponent+(r-48),this.tState=I):this.charError(e,n)):this.tState===L?(r=e[n],r>=48&&64>r?(this.exponent=10*this.exponent+(r-48),this.tState=I):this.charError(e,n)):this.tState===I?(r=e[n],r>=48&&64>r?this.exponent=10*this.exponent+(r-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(v,this.magnatude),this.magnatude=void 0,n--)):this.tState===y?114===e[n]?this.tState=m:this.charError(e,n):this.tState===m?117===e[n]?this.tState=b:this.charError(e,n):this.tState===b?101===e[n]?(this.tState=g,this.onToken(h,!0)):this.charError(e,n):this.tState===w?97===e[n]?this.tState=x:this.charError(e,n):this.tState===x?108===e[n]?this.tState=_:this.charError(e,n):this.tState===_?115===e[n]?this.tState=E:this.charError(e,n):this.tState===E?101===e[n]?(this.tState=g,this.onToken(d,!1)):this.charError(e,n):this.tState===S?117===e[n]?this.tState=T:this.charError(e,n):this.tState===T?108===e[n]?this.tState=k:this.charError(e,n):this.tState===k&&(108===e[n]?(this.tState=g,this.onToken(p,null)):this.charError(e,n))},U.onToken=function(t,e){},U.parseError=function(t,e){this.onError(new Error("Unexpected "+r(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+r(this.state)))},U.onError=function(t){throw t},U.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},U.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=V)},U.emit=function(t){this.mode&&(this.state=c),this.onValue(t)},U.onValue=function(t){},U.onToken=function(t,e){this.state===V?t===f||t===v||t===h||t===d||t===p?(this.value&&(this.value[this.key]=e),this.emit(e)):t===o?(this.push(),this.value=this.value?this.value[this.key]={}:{},this.key=void 0,this.state=F,this.mode=X):t===s?(this.push(),this.value=this.value?this.value[this.key]=[]:[],this.key=0,this.mode=Y,this.state=V):t===a?this.mode===X?this.pop():this.parseError(t,e):t===u&&this.mode===Y?this.pop():this.parseError(t,e):this.state===F?t===f?(this.key=e,this.state=l):t===a?this.pop():this.parseError(t,e):this.state===l?t===l?this.state=V:this.parseError(t,e):this.state===c?t===c?this.mode===Y?(this.key++,this.state=V):this.mode===X&&(this.state=F):t===u&&this.mode===Y||t===a&&this.mode===X?this.pop():this.parseError(t,e):this.parseError(t,e)},e.exports=n}).call(this,t("buffer").Buffer)},{buffer:23}],20:[function(t,r,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,r=[];for(e in t)t.hasOwnProperty(e)&&(r[r.length]=e);return r},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return u.call(t,e)},each:function(t,e,r){if(null!=t)if(s&&t.forEach===s)t.forEach(e,r);else if(t.length===+t.length){for(var n=0,i=t.length;i>n;n++)if(e.call(r,t[n],n,t)===a)return}else for(var o in t)if(this.has(t,o)&&e.call(r,t[o],o,t)===a)return},once:function(t){var e,r=!1;return function(){return r?e:(r=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,o=this,a={},s=Array.prototype.forEach,u=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=0,h=t();i={on:function(t,e,r){if(!p(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!p(this,"once",t,[e,r])||!e)return this;var n=this,i=h.once(function(){n.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,r)},off:function(t,e,r){var n,i,o,a,s,u,l,c;if(!this._events||!p(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(a=t?[t]:h.keys(this._events),s=0,u=a.length;u>s;s++)if(t=a[s],o=this._events[t]){if(this._events[t]=n=[],e||r)for(l=0,c=o.length;c>l;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=l.call(arguments,1);if(!p(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&f(r,e),n&&f(n,arguments),this},stopListening:function(t,e,r){var n=this._listeners;if(!n)return this;var i=!e&&!r;"object"==typeof e&&(r=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,r,this),i&&delete this._listeners[o];return this}};var d=/\s+/,p=function(t,e,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)t[e].apply(t,[i,r[i]].concat(n));return!1}if(d.test(r)){for(var o=r.split(d),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(n));return!1}return!0},f=function(t,e){var r,n=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,a);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,a,s);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}},v={listenTo:"on",listenToOnce:"once"};h.each(v,function(t,e){i[e]=function(e,r,n){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=h.uniqueId("l"));return i[o]=e,"object"==typeof r&&(n=this),e[t](r,n,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return h.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof e?e(function(){return i}):"undefined"!=typeof n?("undefined"!=typeof r&&r.exports&&(n=r.exports=i),n.BackboneEvents=i):o.BackboneEvents=i}(this)},{}],21:[function(t,e,r){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":20}],22:[function(t,r,i){(function(t,n){(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(){}function u(){return function(){t.nextTick(d)}}function l(){var t=0,e=new V(d),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=d,function(){t.port2.postMessage(0)}}function h(){return function(){setTimeout(d,1)}}function d(){for(var t=0;j>t;t+=2){var e=X[t],r=X[t+1];e(r),X[t]=void 0,X[t+1]=void 0}j=0}function p(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(e){return H.error=e,H}}function y(t,e,r,n){try{t.call(e,r,n)}catch(i){return i}}function m(t,e,r){q(function(t){var n=!1,i=y(r,e,function(r){n||(n=!0,e!==r?x(t,r):E(t,r))},function(e){n||(n=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,S(t,i))},t)}function b(t,e){e._state===U?E(t,e._result):t._state===W?S(t,e._result):T(e,void 0,function(e){x(t,e)},function(e){S(t,e)})}function w(t,e){if(e.constructor===t.constructor)b(t,e);else{var r=g(e);r===H?S(t,H.error):void 0===r?E(t,e):o(r)?m(t,e,r):E(t,e)}}function x(t,e){t===e?S(t,f()):i(e)?w(t,e):E(t,e)}function _(t){t._onerror&&t._onerror(t._result),k(t)}function E(t,e){t._state===Y&&(t._result=e,t._state=U,0===t._subscribers.length||q(k,t))}function S(t,e){t._state===Y&&(t._state=W,t._result=e,q(_,t))}function T(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+U]=r,i[o+W]=n,0===o&&t._state&&q(k,t)}function k(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n,i,o=t._result,a=0;a<e.length;a+=3)n=e[a],i=e[a+r],n?D(r,n,i,o):i(o);t._subscribers.length=0}}function P(){this.error=null}function C(t,e){try{return t(e)}catch(r){return $.error=r,$}}function D(t,e,r,n){var i,a,s,u,l=o(r);if(l){if(i=C(r,n),i===$?(u=!0,a=i.error,i=null):s=!0,e===i)return void S(e,v())}else i=n,s=!0;e._state!==Y||(l&&s?x(e,i):u?S(e,a):t===U?E(e,i):t===W&&S(e,i))}function N(t,e){try{e(function(e){x(t,e)},function(e){S(t,e)})}catch(r){S(t,r)}}function O(t,e,r,n){this._instanceConstructor=t,this.promise=new t(p,n),this._abortOnReject=r,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):S(this.promise,this._validationError())}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(t){this._id=tt++,this._state=void 0,this._result=void 0,this._subscribers=[],p!==t&&(o(t)||M(),this instanceof I||L(),N(this,t))}var R;R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B,A=R,j=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return s.prototype=t,new s},0),q=function(t,e){X[j]=t,X[j+1]=e,j+=2,2===j&&B()},z="undefined"!=typeof window?window:{},V=z.MutationObserver||z.WebKitMutationObserver,F="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3);B="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?u():V?l():F?c():h();var Y=void 0,U=1,W=2,H=new P,$=new P;O.prototype._validateInput=function(t){return A(t)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)};var G=O;O.prototype._enumerate=function(){for(var t=this.length,e=this.promise,r=this._input,n=0;e._state===Y&&t>n;n++)this._eachEntry(r[n],n)},O.prototype._eachEntry=function(t,e){var r=this._instanceConstructor;a(t)?t.constructor===r&&t._state!==Y?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(r.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(U,e,t))},O.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===Y&&(this._remaining--,this._abortOnReject&&t===W?S(n,r):this._result[e]=this._makeResult(t,e,r)),0===this._remaining&&E(n,this._result)},O.prototype._makeResult=function(t,e,r){return r},O.prototype._willSettleAt=function(t,e){var r=this;T(t,void 0,function(t){r._settledAt(U,e,t)},function(t){r._settledAt(W,e,t)})};var Z=function(t,e){return new G(this,t,!0,e).promise},K=function(t,e){function r(t){x(o,t)}function n(t){S(o,t)}var i=this,o=new i(p,e);if(!A(t))return S(o,new TypeError("You must pass an array to race.")),o;for(var a=t.length,s=0;o._state===Y&&a>s;s++)T(i.resolve(t[s]),void 0,r,n);return o},J=function(t,e){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var n=new r(p,e);return x(n,t),n},Q=function(t,e){var r=this,n=new r(p,e);return S(n,t),n},tt=0,et=I;I.all=Z,I.race=K,I.resolve=J,I.reject=Q,I.prototype={constructor:I,then:function(t,e){var r=this,n=r._state;if(n===U&&!t||n===W&&!e)return this;var i=new this.constructor(p),o=r._result;if(n){var a=arguments[n-1];q(function(){D(n,i,a,o)})}else T(r,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var rt=function(){var t;t="undefined"!=typeof n?n:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),o(e)}();e||(t.Promise=et)},nt={Promise:et,polyfill:rt};"function"==typeof e&&e.amd?e(function(){return nt}):"undefined"!=typeof r&&r.exports?r.exports=nt:"undefined"!=typeof this&&(this.ES6Promise=nt)}).call(this)}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55}],23:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)"base64"===e&&(t=E(t)),i=n.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&R(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(this.length>B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");var a;n.TYPED_ARRAY_SUPPORT?a=n._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)a._set(t);else if(T(t))if(n.isBuffer(t))for(s=0;i>s;s++)a[s]=t.readUInt8(s);else for(s=0;i>s;s++)a[s]=(t[s]%256+256)%256;else if("string"===o)a.write(t,0,e);else if("number"===o&&!n.TYPED_ARRAY_SUPPORT&&!r)for(s=0;i>s;s++)a[s]=0;return a}function i(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;n>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[r+a]=s}return a}function o(t,e,r,n){var i=O(P(e),t,r,n);return i}function a(t,e,r,n){var i=O(C(e),t,r,n);return i}function s(t,e,r,n){return a(t,e,r,n)}function u(t,e,r,n){var i=O(N(e),t,r,n);return i}function l(t,e,r,n){var i=O(D(e),t,r,n,2);return i}function c(t,e,r){return L.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function h(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=M(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+M(i)}function d(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function p(t,e,r){return d(t,e,r)}function f(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=k(t[o]);return i}function v(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function g(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,r,i,o,a){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new TypeError("value is out of bounds");if(r+i>t.length)throw new TypeError("index out of range")}function m(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function b(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function w(t,e,r,n,i,o){if(e>i||o>e)throw new TypeError("value is out of bounds");if(r+n>t.length)throw new TypeError("index out of range")}function x(t,e,r,n,i){return i||w(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),I.write(t,e,r,n,23,4),r+4}function _(t,e,r,n,i){return i||w(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),I.write(t,e,r,n,52,8),r+8}function E(t){for(t=S(t).replace(j,"");t.length%4!==0;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function T(t){return R(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function k(t){return 16>t?"0"+t.toString(16):t.toString(16)}function P(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var o=encodeURIComponent(t.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function C(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function D(t){for(var e,r,n,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),r=e>>8,n=e%256,i.push(n),i.push(r);return i}function N(t){return L.toByteArray(t)}function O(t,e,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function M(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var L=t("base64-js"),I=t("ieee754"),R=t("is-array");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var B=1073741823;n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,i=e.length,o=0,a=Math.min(r,i);a>o&&t[o]===e[o];o++);return o!==a&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!R(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(i,o),o+=a.length}return i},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=P(t).length;break;case"base64":r=N(t).length;break;default:r=t.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||r===1/0?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return f(this,e,r);case"utf8":case"utf-8":return h(this,e,r);case"ascii":return d(this,e,r);case"binary":return p(this,e,r);case"base64":return c(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return n.compare(this,t);

},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var c=n;n=e,e=r,r=c}e=Number(e)||0;var h=this.length-e;r?(r=Number(r),r>h&&(r=h)):r=h,n=String(n||"utf8").toLowerCase();var d;switch(n){case"hex":d=i(this,t,e,r);break;case"utf8":case"utf-8":d=o(this,t,e,r);break;case"ascii":d=a(this,t,e,r);break;case"binary":d=s(this,t,e,r);break;case"base64":d=u(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=l(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return d},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;if(t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t),n.TYPED_ARRAY_SUPPORT)return n._augment(this.subarray(t,e));for(var i=e-t,o=new n(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+t];return o},n.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readInt8=function(t,e){return e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),I.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),I.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),I.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),I.read(this,t,!1,52,8)},n.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):b(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},n.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):m(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):m(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):b(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||y(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return _(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return _(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),e||(e=0),i!==r&&0!==t.length&&0!==o.length){if(r>i)throw new TypeError("sourceEnd < sourceStart");if(0>e||e>=t.length)throw new TypeError("targetStart out of bounds");if(0>r||r>=o.length)throw new TypeError("sourceStart out of bounds");if(0>i||i>o.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var a=i-r;if(1e3>a||!n.TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+a),e)}},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new TypeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new TypeError("start out of bounds");if(0>r||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=P(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var A=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=A.get,t.set=A.set,t.write=A.write,t.toString=A.toString,t.toLocaleString=A.toString,t.toJSON=A.toJSON,t.equals=A.equals,t.compare=A.compare,t.copy=A.copy,t.slice=A.slice,t.readUInt8=A.readUInt8,t.readUInt16LE=A.readUInt16LE,t.readUInt16BE=A.readUInt16BE,t.readUInt32LE=A.readUInt32LE,t.readUInt32BE=A.readUInt32BE,t.readInt8=A.readInt8,t.readInt16LE=A.readInt16LE,t.readInt16BE=A.readInt16BE,t.readInt32LE=A.readInt32LE,t.readInt32BE=A.readInt32BE,t.readFloatLE=A.readFloatLE,t.readFloatBE=A.readFloatBE,t.readDoubleLE=A.readDoubleLE,t.readDoubleBE=A.readDoubleBE,t.writeUInt8=A.writeUInt8,t.writeUInt16LE=A.writeUInt16LE,t.writeUInt16BE=A.writeUInt16BE,t.writeUInt32LE=A.writeUInt32LE,t.writeUInt32BE=A.writeUInt32BE,t.writeInt8=A.writeInt8,t.writeInt16LE=A.writeInt16LE,t.writeInt16BE=A.writeInt16BE,t.writeInt32LE=A.writeInt32LE,t.writeInt32BE=A.writeInt32BE,t.writeFloatLE=A.writeFloatLE,t.writeFloatBE=A.writeFloatBE,t.writeDoubleLE=A.writeDoubleLE,t.writeDoubleBE=A.writeDoubleBE,t.fill=A.fill,t.inspect=A.inspect,t.toArrayBuffer=A.toArrayBuffer,t};var j=/[^+\/0-9A-z]/g},{"base64-js":24,ieee754:25,"is-array":26}],24:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a?62:e===s?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function r(t){function r(t){l[h++]=t}var n,i,a,s,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var h=0;for(n=0,i=0;a>n;n+=4,i+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),l}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],25:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,d=r?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?d/u:d*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=f,a/=256,l-=8);t[r+p-f]|=128*v}},{}],26:[function(t,e,r){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],27:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];r.apply(this,o)}else if(a(r)){for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];for(l=r.slice(),n=l.length,u=0;n>u;u++)l[u].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-->0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],28:[function(t,e,r){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],29:[function(t,e,r){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],30:[function(t,r,i){(function(t){!function(n){function o(t){throw RangeError(I[t])}function a(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function s(t,e){return a(t.split(L),e).join(".")}function u(t){for(var e,r,n=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function l(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=A(t>>>10&1023|55296),t=56320|1023&t),e+=A(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:E}function h(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,r){var n=0;for(t=r?B(t/P):t>>1,t+=B(t/e);t>R*T>>1;n+=E)t=B(t/R);return B(n+(R+1)*t/(t+k))}function p(t){var e,r,n,i,a,s,u,h,p,f,v=[],g=t.length,y=0,m=D,b=C;for(r=t.lastIndexOf(N),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&o("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;g>i;){for(a=y,s=1,u=E;i>=g&&o("invalid-input"),h=c(t.charCodeAt(i++)),(h>=E||h>B((_-y)/s))&&o("overflow"),y+=h*s,p=b>=u?S:u>=b+T?T:u-b,!(p>h);u+=E)f=E-p,s>B(_/f)&&o("overflow"),s*=f;e=v.length+1,b=d(y-a,e,0==a),B(y/e)>_-m&&o("overflow"),m+=B(y/e),y%=e,v.splice(y++,0,m)}return l(v)}function f(t){var e,r,n,i,a,s,l,c,p,f,v,g,y,m,b,w=[];for(t=u(t),g=t.length,e=D,r=0,a=C,s=0;g>s;++s)v=t[s],128>v&&w.push(A(v));for(n=i=w.length,i&&w.push(N);g>n;){for(l=_,s=0;g>s;++s)v=t[s],v>=e&&l>v&&(l=v);for(y=n+1,l-e>B((_-r)/y)&&o("overflow"),r+=(l-e)*y,e=l,s=0;g>s;++s)if(v=t[s],e>v&&++r>_&&o("overflow"),v==e){for(c=r,p=E;f=a>=p?S:p>=a+T?T:p-a,!(f>c);p+=E)b=c-f,m=E-f,w.push(A(h(f+b%m,0))),c=B(b/m);w.push(A(h(c,0))),a=d(r,y,n==i),r=0,++n}++r,++e}return w.join("")}function v(t){return s(t,function(t){return O.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return M.test(t)?"xn--"+f(t):t})}var y="object"==typeof i&&i,m="object"==typeof r&&r&&r.exports==y&&r,b="object"==typeof t&&t;(b.global===b||b.window===b)&&(n=b);var w,x,_=2147483647,E=36,S=1,T=26,k=38,P=700,C=72,D=128,N="-",O=/^xn--/,M=/[^ -~]/,L=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=E-S,B=Math.floor,A=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:u,encode:l},decode:p,encode:f,toASCII:g,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(y&&!y.nodeType)if(m)m.exports=w;else for(x in w)w.hasOwnProperty(x)&&(y[x]=w[x]);else n.punycode=w}(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var h,d,p,f,v=t[c].replace(s,"%20"),g=v.indexOf(r);g>=0?(h=v.substr(0,g),d=v.substr(g+1)):(h=v,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),n(a,p)?i(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],32:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),function(a){var s=encodeURIComponent(i(a))+r;return o(t[a])?n(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],33:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":31,"./encode":32}],34:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":35}],35:[function(t,e,r){(function(r){function n(t){return this instanceof n?(u.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}e.exports=n;var a=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},s=t("core-util-is");s.inherits=t("inherits");var u=t("./_stream_readable"),l=t("./_stream_writable");s.inherits(n,u),o(a(l.prototype),function(t){n.prototype[t]||(n.prototype[t]=l.prototype[t])})}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_readable":37,"./_stream_writable":39,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,"core-util-is":40,inherits:28}],36:[function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}e.exports=n;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":38,"core-util-is":40,inherits:28}],37:[function(t,e,r){(function(r){function n(e,r){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=t("string_decoder/").StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function i(t){return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void k.call(this)):new i(t)}function o(t,e,r,n,i){var o=l(e,r);if(o)t.emit("error",o);else if(null===r||void 0===r)e.reading=!1,e.ended||c(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||i||n||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&h(t),p(t,e);else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=D)t=D;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var r=null;return S.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?h(t):w(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?r.nextTick(function(){d(t)}):d(t))}function d(t){t.emit("readable")}function p(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(function(){f(t,e)}))}function f(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&g(t)}}function g(t){function e(t,e,i){var o=t.write(r);!1===o&&n.awaitDrain++}var r,n=t._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=t.read());)if(1===n.pipesCount?e(n.pipes,0,null):x(n.pipes,e),t.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(T.listenerCount(t,"data")>0&&m(t))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function m(t,e){var n=t._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,o=!1;t.readable=!0,t.pipe=k.prototype.pipe,t.on=t.addListener=k.prototype.on,t.on("readable",function(){o=!0;for(var e;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,o?r.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!t||t>=i)r=o?n.join(""):S.concat(n,i),n.length=0;else if(t<n[0].length){var s=n[0];r=s.slice(0,t),n[0]=s.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new S(t);for(var u=0,l=0,c=n.length;c>l&&t>u;l++){var s=n[0],h=Math.min(t-u,s.length);o?r+=s.slice(0,h):s.copy(r,u,0,h),h<s.length?n[0]=s.slice(h):n.shift(),u+=h}}return r}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,r.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function _(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}e.exports=i;var E=t("isarray"),S=t("buffer").Buffer;i.ReadableState=n;var T=t("events").EventEmitter;T.listenerCount||(T.listenerCount=function(t,e){return t.listeners(e).length});var k=t("stream"),P=t("core-util-is");P.inherits=t("inherits");var C;P.inherits(i,k),i.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding,e!==r.encoding&&(t=new S(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){C||(C=t("string_decoder/").StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e};var D=8388608;i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h(this),null;if(t=u(t,e),0===t&&e.ended)return r=null,e.length>0&&e.decoder&&(r=b(t,e),e.length-=r.length),0===e.length&&w(this),r;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(n,e)),r=t>0?b(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&w(this),r},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function n(t){t===c&&o()}function i(){t.end()}function o(){t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("drain",f),t.removeListener("error",a),t.removeListener("unpipe",n),c.removeListener("end",i),c.removeListener("end",o),(!t._writableState||t._writableState.needDrain)&&f()}function a(e){l(),t.removeListener("error",a),0===T.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",u),l()}function u(){t.removeListener("close",s),l()}function l(){c.unpipe(t)}var c=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var d=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,p=d?i:o;h.endEmitted?r.nextTick(p):c.once("end",p),t.on("unpipe",n);var f=v(c);return t.on("drain",f),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",s),t.once("finish",u),t.emit("pipe",c),h.flowing||(this.on("readable",y),h.flowing=!0,r.nextTick(function(){g(c)})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=k.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&h(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){m(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&"undefined"==typeof this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){r&&(r=!1,t.resume())},n},i._fromList=b}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,"core-util-is":40,events:27,inherits:28,isarray:29,stream:45,"string_decoder/":46}],38:[function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t);var e=(this._transformState=new n(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=(t._readableState,t._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":35,"core-util-is":40,inherits:28}],39:[function(t,e,r){(function(r){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var r=t("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(e,this),this.writable=!0,void _.call(this)):new o(e)}function a(t,e,n){var i=new Error("write after end");t.emit("error",i),r.nextTick(function(){n(i)})}function s(t,e,n,i){var o=!0;if(!w.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),r.nextTick(function(){i(a)}),o=!1}return o}function u(t,e,r){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new w(e,r)),e}function l(t,e,r,i,o){r=u(e,r,i),w.isBuffer(r)&&(i="buffer");var a=e.objectMode?1:r.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing?e.buffer.push(new n(r,i,o)):c(t,e,a,r,i,o),s}function c(t,e,r,n,i,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,i,e.onwrite),e.sync=!1}function h(t,e,n,i,o){n?r.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(d(n),e)h(t,n,i,e,o);else{var a=y(t,n);a||n.bufferProcessing||!n.buffer.length||g(t,n),i?r.nextTick(function(){f(t,n,a,o)}):f(t,n,a,o)}}function f(t,e,r,n){r||v(t,e),n(),r&&m(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));

}function g(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var n=e.buffer[r],i=n.chunk,o=n.encoding,a=n.callback,s=e.objectMode?1:i.length;if(c(t,e,s,i,o,a),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var r=y(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function b(t,e,n){e.ending=!0,m(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var x=t("core-util-is");x.inherits=t("inherits");var _=t("stream");x.inherits(o,_),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return"function"==typeof e&&(r=e,e=null),w.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?a(this,n,r):s(this,n,t,r)&&(i=l(this,n,t,e,r)),i},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),n.ending||n.finished||b(this,n,r)}}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_duplex":35,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,buffer:23,"core-util-is":40,inherits:28,stream:45}],40:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return h(t)&&"[object RegExp]"===y(t)}function h(t){return"object"==typeof t&&null!==t}function d(t){return h(t)&&"[object Date]"===y(t)}function p(t){return h(t)&&("[object Error]"===y(t)||t instanceof Error)}function f(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=s,r.isSymbol=u,r.isUndefined=l,r.isRegExp=c,r.isObject=h,r.isDate=d,r.isError=p,r.isFunction=f,r.isPrimitive=v,r.isBuffer=g}).call(this,t("buffer").Buffer)},{buffer:23}],41:[function(t,e,r){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":36}],42:[function(t,e,r){var n=t("stream");r=e.exports=t("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":35,"./lib/_stream_passthrough.js":36,"./lib/_stream_readable.js":37,"./lib/_stream_transform.js":38,"./lib/_stream_writable.js":39,stream:45}],43:[function(t,e,r){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":38}],44:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":39}],45:[function(t,e,r){function n(){i.call(this)}e.exports=n;var i=t("events").EventEmitter,o=t("inherits");o(n,i),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function a(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){l.removeListener("data",r),t.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),t.removeListener("close",u)}var l=this;l.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),t.on("error",s),l.on("end",u),l.on("close",u),t.on("close",u),t.emit("pipe",l),t}},{events:27,inherits:28,"readable-stream/duplex.js":34,"readable-stream/passthrough.js":41,"readable-stream/readable.js":42,"readable-stream/transform.js":43,"readable-stream/writable.js":44}],46:[function(t,e,r){function n(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=t("buffer").Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:23}],47:[function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&l(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return u(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function h(t){return null==t}var d=t("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),m=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=t("querystring");n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&S[i]||(n=n.substr(2),this.slashes=!0)}if(!S[i]&&(a||i&&!T[i])){for(var s=-1,l=0;l<b.length;l++){var c=n.indexOf(b[l]);-1!==c&&(-1===s||s>c)&&(s=c)}var h,f;f=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==f&&(h=n.slice(0,f),n=n.slice(f+1),this.auth=decodeURIComponent(h)),s=-1;for(var l=0;l<m.length;l++){var c=n.indexOf(m[l]);-1!==c&&(-1===s||s>c)&&(s=c)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),l=0,P=g.length;P>l;l++){var C=g[l];if(C&&!C.match(x)){for(var D="",N=0,O=C.length;O>N;N++)D+=C.charCodeAt(N)>127?"x":C[N];if(!D.match(x)){var M=g.slice(0,l),L=g.slice(l+1),I=C.match(_);I&&(M.push(I[1]),L.unshift(I[2])),L.length&&(n="/"+L.join(".")+n),this.hostname=M.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!v){for(var R=this.hostname.split("."),B=[],l=0;l<R.length;++l){var A=R[l];B.push(A.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(A):A)}this.hostname=B.join(".")}var j=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+j,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[o])for(var l=0,P=y.length;P>l;l++){var z=y[l],V=encodeURIComponent(z);V===z&&(V=escape(z)),n=n.split(z).join(V)}var F=n.indexOf("#");-1!==F&&(this.hash=n.substr(F),n=n.slice(0,F));var X=n.indexOf("?");if(-1!==X?(this.search=n.substr(X),this.query=n.substr(X+1),e&&(this.query=k.parse(this.query)),n=n.slice(0,X)):e&&(this.search="",this.query={}),n&&(this.pathname=n),T[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",A=this.search||"";this.path=j+A}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),T[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!T[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=l||s||r.host&&t.pathname,p=d,f=r.pathname&&r.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],v=r.protocol&&!T[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===f[0]?f[0]=r.host:f.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),d=d&&(""===i[0]||""===f[0])),l)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,f=i;else if(i.length)f||(f=[]),f.pop(),f=f.concat(i),r.search=t.search,r.query=t.query;else if(!h(t.search)){if(v){r.hostname=r.host=f.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!f.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var y=f.slice(-1)[0],m=(r.host||t.host)&&("."===y||".."===y)||""===y,b=0,w=f.length;w>=0;w--)y=f[w],"."==y?f.splice(w,1):".."===y?(f.splice(w,1),b++):b&&(f.splice(w,1),b--);if(!d&&!p)for(;b--;b)f.unshift("..");!d||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),m&&"/"!==f.join("/").substr(-1)&&f.push("");var x=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(v){r.hostname=r.host=x?"":f.length?f.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return d=d||r.host&&f.length,d&&!x&&f.unshift(""),f.length?r.pathname=f.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:30,querystring:33}],48:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],49:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(e)?n.showHidden=e:e&&r._extend(n,e),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&k(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return b(i)||(i=u(t,i,n)),i}var o=l(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),T(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(k(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return c(e)}var y="",m=!1,w=["{","}"];if(f(e)&&(m=!0,w=["[","]"]),k(e)){var x=e.name?": "+e.name:"";y=" [Function"+x+"]"}if(_(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),T(e)&&(y=" "+c(e)),0===a.length&&(!m||0==e.length))return w[0]+y+w[1];if(0>n)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=m?h(t,e,n,v,a):a.map(function(r){return d(t,e,n,v,r,m)}),t.seen.pop(),p(E,y,w)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(O(e,String(a))?d(t,e,r,n,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(t,e,r,n,i,!0))}),o}function d(t,e,r,n,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),O(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=g(r)?u(t,l.value,null):u(t,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function f(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function _(t){return E(t)&&"[object RegExp]"===C(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===C(t)}function T(t){return E(t)&&("[object Error]"===C(t)||t instanceof Error)}function k(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function C(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;r.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(t).replace(M,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),s=n[r];o>r;s=n[++r])a+=g(s)||!E(s)?" "+s:" "+i(s);return a},r.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(x(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var L,I={};r.debuglog=function(t){if(x(L)&&(L=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(L)){var n=e.pid;I[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else I[t]=function(){};return I[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=f,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=y,r.isNumber=m,r.isString=b,r.isSymbol=w,r.isUndefined=x,r.isRegExp=_,r.isObject=E,r.isDate=S,r.isError=T,r.isFunction=k,r.isPrimitive=P,r.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",N(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!E(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":48,"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,inherits:28}],50:[function(t,e,r){var n=e.exports,i=(t("events").EventEmitter,t("./lib/request")),o=t("url");n.request=function(t,e){"string"==typeof t&&(t=o.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.protocol||(t.protocol=t.scheme?t.scheme+":":window.location.protocol),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https:"==t.protocol?443:80);var r=new i(new a,t);return e&&r.on("response",e),r},n.get=function(t,e){t.method="GET";var r=n.request(t,e);return r.end(),r},n.Agent=function(){},n.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var r=new window.ActiveXObject(t[e]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(t[e])}}catch(n){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":51,events:27,url:47}],51:[function(t,e,r){var n=t("stream"),i=t("./response"),o=t("Base64"),a=t("inherits"),s=e.exports=function(t,e){var r=this;r.writable=!0,r.xhr=t,r.body=[],r.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(n){}if(e.responseType)try{t.responseType=e.responseType}catch(n){}if(t.open(e.method||"GET",r.uri,!0),t.onerror=function(t){r.emit("error",new Error("Network error"))},r._headers={},e.headers)for(var a=u(e.headers),s=0;s<a.length;s++){var l=a[s];if(r.isSafeRequestHeader(l)){var c=e.headers[l];r.setHeader(l,c)}}e.auth&&this.setHeader("Authorization","Basic "+o.btoa(e.auth));var h=new i;h.on("close",function(){r.emit("close")}),h.on("ready",function(){r.emit("response",h)}),h.on("error",function(t){r.emit("error",t)}),t.onreadystatechange=function(){t.__aborted||h.handle(t)}};a(s,n),s.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},s.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},s.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},s.prototype.write=function(t){this.body.push(t)},s.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=u(this._headers),r=0;r<e.length;r++){var n=e[r],i=this._headers[n];if(l(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(n,i[o]);else this.xhr.setRequestHeader(n,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(l(this.body[0])){for(var a=[],r=0;r<this.body.length;r++)a.push.apply(a,this.body[r]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,r=0;r<this.body.length;r++)s+=this.body[r].length;for(var a=new this.body[0].constructor(s),c=0,r=0;r<this.body.length;r++)for(var d=this.body[r],o=0;o<d.length;o++)a[c++]=d[o];this.xhr.send(a)}else if(h(this.body[0]))this.xhr.send(this.body[0]);else{for(var a="",r=0;r<this.body.length;r++)a+=this.body[r].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(t){return t?-1===c(s.unsafeHeaders,t.toLowerCase()):!1};var u=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1},h=function(t){return"undefined"!=typeof Blob&&t instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&t instanceof FormData?!0:void 0}},{"./response":52,Base64:53,inherits:54,stream:45}],52:[function(t,e,r){function n(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<e.length;n++){var i=e[n];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==r[a]?u(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}else r[i]=!0}}return r}var i=t("stream"),o=t("util"),a=e.exports=function(t){this.offset=0,this.readable=!0};o.inherits(a,i);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&s.status2){try{this.statusCode=t.status,this.headers=n(t)}catch(e){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=n(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){s.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{stream:45,util:49}],53:[function(t,e,r){!function(){function t(t){this.message=t}var e="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,i,o=0,a=n,s="";e.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&r>>8-o%1*8)){if(i=e.charCodeAt(o+=.75),i>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return s}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i=n.indexOf(i);return s})}()},{}],54:[function(t,e,r){e.exports=t(28)},{"/home/alex/projects/javascript/imjs/node_modules/grunt-browserify/node_modules/browserify/node_modules/inherits/inherits_browser.js":28}],55:[function(t,e,r){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.once=n,i.off=n,i.emit=n,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],56:[function(t,e,r){(function(n){function i(t,e,r){function i(){for(;l.length&&!h.paused;){var t=l.shift();if(null===t)return h.emit("end");h.emit("data",t)}}function a(){h.writable=!1,e.call(h),!h.readable&&h.autoDestroy&&h.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(r&&r.autoDestroy===!1),h.write=function(e){return t.call(this,e),!h.paused},h.queue=h.push=function(t){return c?h:(null==t&&(c=!0),l.push(t),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&n.nextTick(function(){h.destroy()})}),h.end=function(t){return s?void 0:(s=!0,arguments.length&&h.write(t),a(),h)},h.destroy=function(){return u?void 0:(u=!0,s=!0,l.length=0,h.writable=h.readable=!1,h.emit("close"),h)},h.pause=function(){return h.paused?void 0:(h.paused=!0,h)},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=t("stream");r=e.exports=i,i.through=i}).call(this,t("/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/alex/projects/javascript/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":55,stream:45}]},{},[2])(2)})}(window.intermine)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,r){var n={toNodesAndEdges:function(t,e){var r={nodes:[],edges:[]};for(var n in t){var i,o=t[n];i=this.recordToNode(o),o.interactions?r=this.mergeObjects(r,this.toNodesAndEdges(o.interactions,i)):r.edges.push(this.interactionToEdge(e,i)),r.nodes.push(i)}return r},recordToNode:function(t){var e;return e=t.gene2?t.gene2:t,{data:{details:this.addDetails(t),label:this.nameNode(t),"class":e["class"],symbol:e.symbol,id:e.objectId.toString()}}},addDetails:function(t){return t.details?t.details[0]:{}},nameNode:function(t){return t.gene2&&t.gene2.symbol?t.gene2.symbol:t.symbol?t.symbol:t.details?t.details[0].name:"NAME MISSING"},interactionToEdge:function(t,e){return{data:{source:t.data.id,
target:e.data.id}}},mergeObjects:function(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}};e.exports=n},{}],4:[function(t,e,r){var n,i=t("./cymine"),o=t("./../bower_components/cytoscape/dist/cytoscape"),a=t("./../bower_components/imjs/js/im.js"),s=t("./nodeDataDisplay"),u=new a.Service({root:"www.humanmine.org/humanmine"}),l={name:"Gene_Interactions",title:"Gene --> Interactions",description:"Show all interactions for a given gene.",constraintLogic:"A and B",from:"Gene",select:["symbol","interactions.gene2.symbol","interactions.details.name","interactions.details.role1","interactions.details.role2","interactions.details.type","interactions.details.experiment.interactionDetectionMethods.name","interactions.details.experiment.publication.pubMedId","interactions.details.relationshipType.name","interactions.details.dataSets.name"],orderBy:[{path:"symbol",direction:"ASC"}],where:[{path:"Gene",op:"LOOKUP",value:"PPARG",extraValue:"H. sapiens",code:"A",editable:!0,switched:"LOCKED",switchable:!1}]};u.records(l).then(function(t){if(t)try{var e={};e.data=i.toNodesAndEdges(t),e.targetElem=document.getElementById("cy"),e.statusBar=e.targetElem.querySelector(".status"),console.debug("response:",t,"graph data",e.data),n=o({container:e.targetElem,layout:{name:"cose"},style:o.stylesheet().selector("node").css({content:"data(label)"}).selector(":selected").css({"background-color":"black","line-color":"black","target-arrow-color":"black","source-arrow-color":"black","text-outline-color":"black"}),elements:e.data,ready:function(){window.cy=this,e.statusBar.remove()}}),n.on("tap","node",function(){s.display(this.data())})}catch(r){console.error(r)}else e.statusBar["class"]="status no-results"})},{"./../bower_components/cytoscape/dist/cytoscape":1,"./../bower_components/imjs/js/im.js":2,"./cymine":3,"./nodeDataDisplay":5}],5:[function(t,e,r){var n={display:function(t){this.targetElem=document.getElementById("nodeDetails"),console.log(t),this.node=t,this.setTitle(),this.listProperties()},setTitle:function(){var t=n.targetElem.querySelector(".nodeTitle");t.innerHTML=this.node.label},listProperties:function(){var t=this.expandPropertyVals(this.node);n.targetElem.querySelector(".nodeInfo").innerHTML=t},addProperty:function(t,e){return"<b> "+e+"</b>: "+t[e]+"<br />"},expandPropertyVals:function(t){var e="";for(var r in t)"object"==typeof t[r]?(e+=this.addProperty(this.expandPropertyVals(t[r]),r),console.log("object:",t[r],"prop:",r)):e+=this.addProperty(t,r);return e}};e.exports=n},{}],6:[function(t,e,r){},{}],7:[function(t,e,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n"},{}],8:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===a(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:9}],9:[function(t,e,r){function n(){c=!1,s.length?l=s.concat(l):h=-1,l.length&&i()}function i(){if(!c){var t=setTimeout(n);c=!0;for(var e=l.length;e;){for(s=l,l=[];++h<e;)s[h].run();h=-1,e=l.length}s=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},l=[],c=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new o(t,e)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}]},{},[4]);
//# sourceMappingURL=bundle.js.map