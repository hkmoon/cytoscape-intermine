!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cymine=e()}}(function(){var e;return function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){t.exports=[{selector:"node",style:{content:"data(label)","border-width":"2px","background-color":"#dedede","border-style":"solid","border-color":"#999"}},{selector:":selected",style:{"text-outline-color":"black","background-color":"gold","border-color":"gold","border-width":"5px","border-style":"solid"}},{selector:"edge",style:{width:"2px"}},{selector:'edge[interactionType@^="genetic"]',style:{"line-color":"#2c79be"}},{selector:'edge[interactionType@^="physical"]',style:{"line-color":"#c00"}},{selector:".genetic",style:{"border-color":"#225f95"}},{selector:".physical",style:{"border-color":"#c00"}},{selector:".both",style:{"border-color":"#77304B"}}]},{}],2:[function(e,t,n){var r=e("underscore"),i=function(e){function t(e,o){var a,s={nodes:[],edges:[]};collapseArrays=function(e){var t={};return r.each(e,function(n,r){Array.isArray(e)?("object"==typeof n&&(n=collapseArrays(n)),t[n.name||n["class"]]=1===n.length?n[0]:n):Array.isArray(n)?t[r]=1===n.length?n[0]:n:"object"==typeof n?(n=collapseArrays(n),t[n.name||n["class"]]=1===n.length?n[0]:n):t[r]=n}),t};for(var u in e){var l,h=e[u];a=n(o,h),l=i(h,o),h.interactions?s=r.extend(s,t(h.interactions,l)):s.edges=s.edges.concat(c(o,l)),a||s.nodes.push(l)}return s}this.records=e;var n=function(e,t){var n,r;return n=e&&e.data.symbol&&t.participant2.symbol,n&&(r=t.participant2.symbol===e.data.symbol),n&&r},i=function(e,t){var n,r;return n=e.participant2?e.participant2:e,r=s(e),label=l(e),{classes:a(r),data:{title:n["class"]+" "+label,"interaction details":u(e.details,label,t),label:label,"class":n["class"],interactionTypes:r,symbol:n.symbol,id:n.primaryIdentifier}}},a=function(e){var t=r.uniq(e);return t.length>1&&t.push("both"),t.join(" ")},s=function(e){var t=[];if(e.details)for(var n=0;n<e.details.length;n++)t.indexOf(e.details[n].type)<0&&t.push(e.details[n].type);else t.push("master");return t},u=function(e,t,n){var r={};if(e)for(var i in e)e.hasOwnProperty(i)&&(r[e[i].name]=e[i],"unspecified"!==e[i].role1?(e[i].roles={},e[i].roles[e[i].role2]=t,e[i].roles[e[i].role1]=n.data.label):e[i].roles="unspecified");return r||{}},l=function(e){return e.participant2&&e.participant2.symbol?e.participant2.symbol:e.participant2&&e.participant2.primaryIdentifier?e.participant2.primaryIdentifier:e.symbol?e.symbol:e.details?e.details[0].name:e.primaryIdentifier?e.primaryIdentifier:"NAME MISSING"},c=function(e,t){for(var n=t.data.interactionTypes,r=[],i=0;i<n.length;i++)r.push({classes:n[i],data:{id:o(t,n[i])+"",title:"Interaction between "+e.data.label+" and "+t.data.label,source:e.data.id,target:t.data.id,interactionType:n[i]}});return r};return t(e)},o=function(e,t){return e.data.label+"_"+t};t.exports=i},{underscore:78}],3:[function(e,t,n){var r=(e("./../util"),e("./svDataFormatter")()),i=function(){var e=function(e,t){var i=r.format(e,t),o="text/"+e;n(i,"results-table."+e,o,!0)},t=function(e,t,n){var r;return e?(r="data:"+t+",",r+=encodeURIComponent(n)):r=n,r},n=function(e,n,r,i){var o=document.createElement("a"),a=t(i,r,e);if(r=r||"application/octet-stream",navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([e],{type:r}),n);if("download"in o)return o.href+=a,o.setAttribute("download",n),document.body.appendChild(o),setTimeout(function(){o.click(),document.body.removeChild(o)},66),!0;var s=document.createElement("iframe");return document.body.appendChild(s),s.src=a,setTimeout(function(){document.body.removeChild(s)},333),!0};return{sv:e,download:n,prepDownloadString:t}};t.exports=i},{"./../util":13,"./svDataFormatter":5}],4:[function(e,t,n){var r=e("./../util"),i=e("./exportHelpers")();exporter=function(){var e,t,n={},o=function(){var n=function(){i.download(t.jpg(),"network.jpg")},r=function(){i.download(t.png(),"network.png")},o=function(){i.sv("csv",e)},a=function(){i.sv("tsv",e)};return{jpg:n,png:r,csv:o,tsv:a}},a=function(){var e=n;e.exportElem=e.parentElem.querySelector(".export"),e.formatChooser=e.exportElem.querySelector("select"),e.exportButton=e.exportElem.querySelector("button");var t=o();e.exportElem.addEventListener("click",function(){r.addClass(e.exportElem,"active")}),e.exportButton.addEventListener("click",function(){var n=u();try{t[n]()}catch(i){console.error("Invalid file format: '"+n+"'. ",i)}r.removeClass(e.exportElem,"active")})},s=function(r){n.parentElem=r.parentElem,e=r.rawData,t=r.cy,a()},u=function(){return n.formatChooser.value};return{init:s}},t.exports=exporter},{"./../util":13,"./exportHelpers":3}],5:[function(e,t,n){var r=function(){var e=function(e,t){var n=["Gene > Symbol","Gene > DB identifier","Gene > Interactions > Details > Type","Gene > Interactions > Gene 2 . Symbol","Gene > Interactions > Gene 2 > DB identifier","Gene > Interactions > Details > Data Sets > Data Source > Name"];return n.join(e)},t=function(e){var t,r,i=[];e=e[0];for(var o=0;o<e.interactions.length;o++)r=e.interactions[o],t=[e.symbol,e.primaryIdentifier,r.participant2.symbol,r.participant2.primaryIdentifier],i=i.concat(n(t,r.details));return i},n=function(e,t){for(var n,i=[],o=0;o<t.length;o++)detail=t[o],n=e.slice(0),n.splice(2,0,detail.type),i=i.concat(r(n,detail.dataSets));return i},r=function(e,t){for(var n,r=[],i=0;i<t.length;i++)ds=t[i],n=e.slice(0),n.push(ds.name),r.push(n);return r},i=function(n,r){var i={csv:",",tsv:"\t"},o=e(i[n],r)+"\n",a=t(r);return a.forEach(function(e,t){dataString=e.join(i[n]),o+=dataString+"\n"}),o};return{format:i}};t.exports=r},{}],6:[function(e,t,n){function r(e){function t(){if(!b.parentElem){var e=document.getElementById("cymine");if(!e)return console.error(u.dev.noParent.noDefault),!1;b.parentElem=e,console.info(u.dev.noParent.usingDefault)}return!0}function n(){if(b.service)return new a.Service({token:b.service.token,root:b.service.root,errorHandler:i});throw new y("noServiceUrl")}function r(){if(b.queryOn)return s.extend(l.where[0],b.queryOn),b.query=l,b.nodeType===u.CONST.PROTEIN&&v(),!0;throw new y("noQueryData")}function v(){b.query.where[0].path=u.CONST.LOOKUP_PROTEIN,"="===b.query.where[0].op&&(b.query.where[0].path+=".id"),b.query.where.length<=1&&b.query.where.push(c)}function g(){var e=new d(function(e,i){if(t()){if(m=new p(b),m.init(),mine=n(),r()&&mine){mine.records(l).then(function(t){var n=t.length,r=n?t[0].interactions.length:0,i=t.length>0&&r<=w,a=r>w;if(i){b.rawData=t,b.data=new o(t),b.cy=m.attachResults();try{x.init(b)}catch(s){console.error(s)}try{f.init(b)}catch(s){console.error(s)}console.debug("response:",t,"graphdata:",b),e(b)}else a?m.attachResults(u.user.tooManyResults):m.attachResults(u.user.noResults)})["catch"](function(e){console.error("Communication error: ",e),m.attachResults(u.user.pleaseClearCache),i()})}}else i("bad query")});return e}function y(e,t){var n=t?t:"noQueryData";m.init(u.user[n]),console.error(u.dev[e])}var m,b=s.extend({},e),x=h(),w=500;return cym=g(),cym}function i(){throw new initError("badServiceUrl")}var o=e("./dataFormatter"),a=e("imjs"),s=(e("cytoscape"),e("underscore")),u=e("./strings"),l=e("./query/query"),c=e("./query/proteinPhysicalConstraint"),h=e("./exporter/exporter"),f=e("./showInTable")(),d=e("es6-promise").Promise,p=e("./ui");t.exports=r},{"./dataFormatter":2,"./exporter/exporter":4,"./query/proteinPhysicalConstraint":8,"./query/query":9,"./showInTable":10,"./strings":11,"./ui":12,cytoscape:21,"es6-promise":22,imjs:35,underscore:78}],7:[function(e,t,n){var r=["label","objectId","title","interactionTypes","class","role1","role2"];t.exports=r},{}],8:[function(e,t,n){t.exports={path:"interactions.details.type",op:"=",value:"physical",code:"B"}},{}],9:[function(e,t,n){t.exports={name:"Gene_Interactions",title:"Gene --> Interactions",description:"Show all interactions for a given gene.",constraintLogic:"A and B",from:"Gene",select:["primaryIdentifier","symbol","interactions.participant2.symbol","interactions.participant2.primaryIdentifier","interactions.details.name","interactions.details.role1","interactions.details.role2","interactions.details.type","interactions.details.dataSets.name"],orderBy:[{path:"symbol",direction:"ASC"}],where:[{path:"Gene",op:"LOOKUP",code:"A",editable:!0,switched:"LOCKED",switchable:!1}]}},{}],10:[function(e,t,n){var r=e("./util"),i=e("./strings").showTable,o=function(){var e,t,n={},o=function(n){timeoutID=setTimeout(function(){imtables&&(e=n,a()),t={query:e.query,service:{root:e.service.root}}},500)},a=function(){n.showTable=e.parentElem.querySelector(".showTable"),r.addClass(n.showTable,"enabled"),n.showTable.innerHTML=i.showInTableFormat,l()},s=function(){n.theTable=e.parentElem.querySelector(".tableView"),n.showTable.innerHTML=i.hideTableFormat,r.removeClass(n.theTable,"disabled"),r.hasClass(n.theTable,"firstRun")&&(imtables.loadTable(n.theTable,{start:0,size:25},{query:e.query,service:{root:e.service.root}}).then(function(e){console.log("Table loaded",e)},function(e){console.error("Could not load table",e)}),r.removeClass(n.theTable,"firstRun"))},u=function(){r.addClass(n.theTable,"disabled"),n.showTable.innerHTML=i.showInTableFormat},l=function(){n.showTable.addEventListener("click",function(){!n.theTable||r.hasClass(n.theTable,"disabled")?s():u()})};return{showTable:s,init:o}};t.exports=o},{"./strings":11,"./util":13}],11:[function(e,t,n){t.exports={user:{noResults:"No interaction results for this query",tooManyResults:"This graph is displayed when there are 500 or fewer interactions.",pleaseClearCache:"Error loading results. Please clear your cache and try again.",noQueryData:"Problem loading query results"},dev:{noParent:{usingDefault:"Cymine: No parent element specified for Cymine. Using default '#cymine",noDefault:"Cymine: No parent element specified, and default '#cymine' not available."},noQueryData:"Cymine: No queryOn values supplied!",noServiceUrl:"Cymine: No serviceUrl defined, unable to query for interactions.",badServiceUrl:"Cymine: bad serviceUrl. Please check for typos and check this host is up."},showTable:{showInTableFormat:"Show in table format",hideTableFormat:"Hide table"},CONST:{PROTEIN:"Protein",LOOKUP_PROTEIN:"proteins"}}},{}],12:[function(e,t,n){var r=e("./metaFields"),i=e("./util"),o=e("underscore"),a=e("cytoscape"),s=e("./cytoscapeStyle");ui=function(t){o.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},this.graph=t;var n,u={name:"cose"},l={cymineHtml:{html:e("./../template/cytomine.html"),type:"html"},InteractionDetail:{html:e("./../template/interaction.html"),type:"_"}},c=function(e){targetElem=t.parentElem.querySelector("nodeDetails"),h(e),f(e)},h=function(e){var n=t.parentElem.querySelector(".nodeTitle");n.innerHTML=e.title},f=function(e){try{var n=v(e),r=t.parentElem.querySelector(".nodeInfo");n.setAttribute("class","nodeInfo"),r.parentElement.replaceChild(n,r)}catch(i){console.error("Whoopsie",i)}},d=function(e){var t=l[e];return"html"===t.type?t.html:"_"===t.type?o.template(t.html):void 0},p=function(e){return l[e]&&!0},v=function(e){var t,n,o=document.createElement("dl");for(var a in e)r.indexOf(a)<0&&(t=document.createElement("dt"),t.appendChild(document.createTextNode(a)),n=document.createElement("dd"),i.addClass(n,"cym-"+a),"object"==typeof e[a]?e[a]&&p(e[a]["class"])?n.appendChild(g(e[a])):(i.addClass(n,"child"),n.appendChild(v(e[a]))):n.appendChild(document.createTextNode(e[a])),y([t,n],o));return o},g=function(e){var t=o.clone(e),n=d(e["class"]);return l[e["class"]].additionalFunction&&(t=l[e["class"]].additionalFunction(t)),temp=document.createElement("div"),temp.innerHTML=n(t),temp},y=function(e,t){for(var n=t.firstChild,r=0;r<e.length;r++)t.insertBefore(e[r],n)},m=function(e){return e?E(e):w(),n},b=function(){var e,r=function(){return t.parentElem.querySelector(".interactionFilter")},o=function(){return t.parentElem.querySelector(".reset")},a=function(t){var r=t.target;if(r!==t.currentTarget&&"button"===r.nodeName.toLowerCase()){c();var o=r.className;i.addClass(r,"selected"),e&&e.restore(),e=n.elements().filterFn(function(e){return"default"===o?!e:!e.hasClass(o)&&!e.hasClass("both")&&!e.hasClass("master")}).remove()}},s=function(){n.makeLayout(u).run(),r().querySelector(".default").click()},l=function(){r().addEventListener("click",a,!1),o().addEventListener("click",s,!1)},c=function(){for(var e=r().querySelectorAll("button"),t=0;t<e.length;t++)i.removeClass(e[t]," selected"),i.removeClass(e[t],"selected")};return{listen:l}},x=function(){t.parentElem.innerHTML=d("cymineHtml"),i.addClass(t.parentElem,"cymine"),t.statusBar=t.parentElem.querySelector(".status"),t.targetElem=t.parentElem.querySelector(".cy"),t.targetElem.style.width=t.parentElem.querySelector(".graph").clientWidth+"px",console.log("%cgraph.compact","color:seagreen;font-weight:bold;",t.compact)},w=function(){try{var e=b();e.listen()}catch(r){console.error(r)}n=a({container:t.targetElem,layout:u,elements:t.data,style:s,ready:function(){t.statusBar.remove()}}),n.on("tap","node",function(){c(this.data())}),n.on("tap","edge",function(){c(this.data())})},E=function(e){t.compact&&i.addClass(t.parentElem,"compact"),t.statusBar.className="status no-results",t.statusBar.innerHTML=e};return{init:x,attachResults:m,noResults:E}},t.exports=ui},{"./../template/cytomine.html":83,"./../template/interaction.html":84,"./cytoscapeStyle":1,"./metaFields":7,"./util":13,cytoscape:21,underscore:78}],13:[function(e,t,n){var r={addClass:function(e,t){r.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(t,"")},hasClass:function(e,t){var n=e.className.split(" ");return n.indexOf(t)>=0}};t.exports=r},{}],14:[function(t,n,r){!function(){function t(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++l+"";return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,n){if(null!=e)if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var o in e)this.has(e,o)&&t.call(n,e[o],o,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,o=this,a=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=t();i={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=c.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,s,u,l,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(a=e?[e]:c.keys(this._events),s=0,u=a.length;s<u;s++)if(e=a[s],o=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,h=o.length;l<h;l++)i=o[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var o in r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}};var h=/\s+/,f=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(h.test(n)){for(var o=n.split(h),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(e,t){i[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=c.uniqueId("l"));return i[o]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.BackboneEvents=i):"function"==typeof e&&"object"==typeof e.amd?e(function(){return i}):o.BackboneEvents=i}(this)},{}],15:[function(e,t,n){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":14}],16:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new f(o(e,i,a)),u=0,l=a>0?i-4:i,c=0;c<l;c+=4)t=h[e.charCodeAt(c)]<<18|h[e.charCodeAt(c+1)]<<12|h[e.charCodeAt(c+2)]<<6|h[e.charCodeAt(c+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=h[e.charCodeAt(c)]<<2|h[e.charCodeAt(c+1)]>>4,s[u++]=255&t),1===a&&(t=h[e.charCodeAt(c)]<<10|h[e.charCodeAt(c+1)]<<4|h[e.charCodeAt(c+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(u(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}n.byteLength=i,n.toByteArray=a,n.fromByteArray=l;for(var c=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,v=d.length;p<v;++p)c[p]=d[p],h[d.charCodeAt(p)]=p;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],17:[function(e,t,n){},{}],18:[function(e,t,n){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}function i(e){if(e>Z)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return c(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);var i=d(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}function l(e){return s(e),i(e<0?0:0|p(e))}function c(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=i(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}function h(e){for(var t=e.length<0?0:0|p(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=o.prototype,r}function d(e){if(o.isBuffer(e)){var t=0|p(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}return void 0!==e.length?"number"!=typeof e.length||H(e.length)?i(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}function p(e){if(e>=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(i)return r?-1:F(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,H(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:x(e,t,n,r,i);if("number"==typeof t)return t=255&t,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(e,l)===o(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(e,l+f)!==o(t,f)){h=!1;break}if(h)return l}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(H(s))return a;e[n+a]=s}return a}function E(e,t,n,r){return Y(F(t,e.length-n),e,n,r)}function _(e,t,n,r){return Y(V(t),e,n,r)}function S(e,t,n,r){return _(e,t,n,r)}function T(e,t,n,r){return Y(X(t),e,n,r)}function C(e,t,n,r){return Y(U(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return O(r)}function O(e){var t=e.length;if(t<=Q)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Q));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function q(e){if(e=e.split("=")[0],e=e.trim().replace(K,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function U(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(e){return G.toByteArray(q(e))}function Y(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function H(e){return e!==e}var G=e("base64-js"),$=e("ieee754");n.Buffer=o,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;var Z=2147483647;n.kMaxLength=Z,o.TYPED_ARRAY_SUPPORT=r(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return u(e,t,n)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&e._isBuffer===!0&&e!==o.prototype},o.compare=function(e,t){if(W(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(W(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):y.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(W(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){
if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),$.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),$.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),$.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),$.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:o.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var K=/[^+\/0-9A-Za-z-_]/g},{"base64-js":16,ieee754:26}],19:[function(e,t,n){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],20:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function h(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function d(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=l,n.isRegExp=c,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=v,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":46}],21:[function(t,n,r){(function(i){!function(i,o){"object"==typeof r&&"object"==typeof n?n.exports=o(t("lodash.debounce"),t("heap")):"function"==typeof e&&e.amd?e(["lodash.debounce","heap"],o):"object"==typeof r?r.cytoscape=o(t("lodash.debounce"),t("heap")):i.cytoscape=o(i["lodash.debounce"],i.heap)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),o=i?i.navigator:null,a=i?i.document:null,s=r(""),u=r({}),l=r(function(){}),c="undefined"==typeof HTMLElement?"undefined":r(HTMLElement),h=function(e){return e&&e.instanceString&&f.fn(e.instanceString)?e.instanceString():null},f={defined:function(e){return null!=e},string:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))==s},fn:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))===l},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))===u&&!f.array(e)&&e.constructor===Object},object:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))===u},number:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))===r(1)&&!isNaN(e)},integer:function(e){return f.number(e)&&Math.floor(e)===e},bool:function(e){return null!=e&&("undefined"==typeof e?"undefined":r(e))===r(!0)},htmlElement:function(e){return"undefined"===c?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection:function(e){return f.element(e)||f.collection(e)},element:function(e){return"collection"===h(e)&&e._private.single},collection:function(e){return"collection"===h(e)&&!e._private.single},core:function(e){return"core"===h(e)},style:function(e){return"style"===h(e)},stylesheet:function(e){return"stylesheet"===h(e)},event:function(e){return"event"===h(e)},thread:function(e){return"thread"===h(e)},fabric:function(e){return"fabric"===h(e)},emptyString:function(e){return void 0===e||null===e||!(""!==e&&!e.match(/^\s+$/))},nonemptyString:function(e){return!(!e||!f.string(e)||""===e||e.match(/^\s+$/))},domElement:function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},boundingBox:function(e){return f.plainObject(e)&&f.number(e.x1)&&f.number(e.x2)&&f.number(e.y1)&&f.number(e.y2)},promise:function(e){return f.object(e)&&f.fn(e.then)},touch:function(){return i&&("ontouchstart"in i||i.DocumentTouch&&a instanceof DocumentTouch)},gecko:function(){return i&&("undefined"!=typeof InstallTrigger||"MozAppearance"in a.documentElement.style)},webkit:function(){return i&&("undefined"!=typeof webkitURL||"WebkitAppearance"in a.documentElement.style)},chromium:function(){return i&&"undefined"!=typeof chrome},khtml:function(){return o&&o.vendor.match(/kde/i)},khtmlEtc:function(){return f.khtml()||f.webkit()||f.chromium()},ms:function(){return o&&o.userAgent.match(/msie|trident|edge/i)},windows:function(){return o&&o.appVersion.match(/Win/i)},mac:function(){return o&&o.appVersion.match(/Mac/i)},linux:function(){return o&&o.appVersion.match(/Linux/i)},unix:function(){return o&&o.appVersion.match(/X11/i)}};e.exports=f},function(e,t,n){"use strict";var r=n(0),i=n(2),o={MAX_INT:Number.MAX_SAFE_INTEGER||9007199254740991,trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(e){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(e){return this.extend({},e)},copy:function(e){return null==e?e:r.array(e)?e.slice():r.plainObject(e)?this.clone(e):e},copyArray:function(e){return e.slice()},clonePosition:function(e){return{x:e.x,y:e.y}},uuid:function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];e[a]=r[a]}}return e},o.assign=o.extend,o["default"]=function(e,t){return void 0===e?t:e},o.removeFromArray=function(e,t,n){for(var r=e.length;r>=0&&(e[r]!==t||(e.splice(r,1),n));r--);},o.clearArray=function(e){e.splice(0,e.length)},o.push=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},o.getPrefixedProperty=function(e,t,n){return n&&(t=this.prependCamel(n,t)),e[t]},o.setPrefixedProperty=function(e,t,n,r){n&&(t=this.prependCamel(n,t)),e[t]=r},[n(21),n(22),{memoize:n(13)},n(23),n(24),n(25),n(27)].forEach(function(e){o.extend(o,e)}),e.exports=o},function(e,t,n){"use strict";var r={};r.arePositionsSame=function(e,t){return e.x===t.x&&e.y===t.y},r.copyPosition=function(e){return{x:e.x,y:e.y}},r.modelToRenderedPosition=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},r.renderedToModelPosition=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},r.array2point=function(e){return{x:e[0],y:e[1]}},r.deg2rad=function(e){return Math.PI*e/180},r.getAngleFromDisp=function(e,t){return Math.atan2(t,e)-Math.PI/2},r.log2=Math.log2||function(e){return Math.log(e)/Math.log(2)},r.signum=function(e){return e>0?1:e<0?-1:0},r.dist=function(e,t){return Math.sqrt(r.sqdist(e,t))},r.sqdist=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},r.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},r.qbezierPtAt=function(e,t,n,i){return{x:r.qbezierAt(e.x,t.x,n.x,i),y:r.qbezierAt(e.y,t.y,n.y,i)}},r.lineAt=function(e,t,n,i){var o={x:t.x-e.x,y:t.y-e.y},a=r.dist(e,t),s={x:o.x/a,y:o.y/a};return n=null==n?0:n,i=null!=i?i:n*a,{x:e.x+s.x*i,y:e.y+s.y*i}},r.lineAtDist=function(e,t,n){return r.lineAt(e,t,void 0,n)},r.triangleAngle=function(e,t,n){var i=r.dist(t,n),o=r.dist(e,n),a=r.dist(e,t);return Math.acos((i*i+o*o-a*a)/(2*i*o))},r.bound=function(e,t,n){return Math.max(e,Math.min(n,t))},r.makeBoundingBox=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},r.updateBoundingBox=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},r.expandBoundingBoxByPoint=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},r.expandBoundingBox=function(e,t){return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},r.boundingBoxesIntersect=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},r.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},r.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},r.boundingBoxInBoundingBox=function(e,t){return r.inBoundingBox(e,t.x1,t.y1)&&r.inBoundingBox(e,t.x2,t.y2)},r.roundRectangleIntersectLine=function(e,t,n,r,i,o,a){var s=this.getRoundRectangleRadius(i,o),u=i/2,l=o/2,c=void 0,h=n-u+s-a,f=r-l-a,d=n+u-s+a,p=f;if(c=this.finiteLinesIntersect(e,t,n,r,h,f,d,p,!1),c.length>0)return c;var v=n+u+a,g=r-l+s-a,y=v,m=r+l-s+a;if(c=this.finiteLinesIntersect(e,t,n,r,v,g,y,m,!1),c.length>0)return c;var b=n-u+s-a,x=r+l+a,w=n+u-s+a,E=x;if(c=this.finiteLinesIntersect(e,t,n,r,b,x,w,E,!1),c.length>0)return c;var _=n-u-a,S=r-l+s-a,T=_,C=r+l-s+a;if(c=this.finiteLinesIntersect(e,t,n,r,_,S,T,C,!1),c.length>0)return c;var k=void 0,P=n-u+s,O=r-l+s;if(k=this.intersectLineCircle(e,t,n,r,P,O,s+a),k.length>0&&k[0]<=P&&k[1]<=O)return[k[0],k[1]];var A=n+u-s,I=r-l+s;if(k=this.intersectLineCircle(e,t,n,r,A,I,s+a),k.length>0&&k[0]>=A&&k[1]<=I)return[k[0],k[1]];var N=n+u-s,L=r+l-s;if(k=this.intersectLineCircle(e,t,n,r,N,L,s+a),k.length>0&&k[0]>=N&&k[1]>=L)return[k[0],k[1]];var M=n-u+s,D=r+l-s;return k=this.intersectLineCircle(e,t,n,r,M,D,s+a),k.length>0&&k[0]<=M&&k[1]>=D?[k[0],k[1]]:[]},r.inLineVicinity=function(e,t,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return u-s<=e&&e<=l+s&&c-s<=t&&t<=h+s},r.inBezierVicinity=function(e,t,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i)-u,x2:Math.max(n,a,i)+u,y1:Math.min(r,s,o)-u,y2:Math.max(r,s,o)+u};return!(e<l.x1||e>l.x2||t<l.y1||t>l.y2)},r.solveQuadratic=function(e,t,n,r){n-=r;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),a=2*e,s=(-t+o)/a,u=(-t-o)/a;return[s,u]},r.solveCubic=function(e,t,n,r,i){t/=e,n/=e,r/=e;var o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0;return a=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*(t*t)),s/=54,o=a*a*a+s*s,i[1]=0,h=t/3,o>0?(l=s+Math.sqrt(o),l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(f=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*f,void(i[4]=i[2]=-(f+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),f=2*Math.sqrt(a),i[0]=-h+f*Math.cos(u/3),i[2]=-h+f*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+f*Math.cos((u+4*Math.PI)/3))))},r.sqdistToQuadraticBezier=function(e,t,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,f=[];this.solveCubic(u,l,c,h,f);for(var d=1e-7,p=[],v=0;v<6;v+=2)Math.abs(f[v+1])<d&&f[v]>=0&&f[v]<=1&&p.push(f[v]);p.push(1),p.push(0);for(var g=-1,y=void 0,m=void 0,b=void 0,x=0;x<p.length;x++)y=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*a,m=Math.pow(1-p[x],2)*r+2*(1-p[x])*p[x]*o+p[x]*p[x]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),g>=0?b<g&&(g=b):g=b;return g},r.sqdistToFiniteLine=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return c<0?l:h>u?(e-i)*(e-i)+(t-o)*(t-o):l-h},r.pointInsidePolygonPoints=function(e,t,n){for(var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||r<=e&&e<=o))continue;s=(e-r)/(o-r)*(a-i)+i,s>t&&u++}return u%2!==0},r.pointInsidePolygon=function(e,t,n,i,o,a,s,u,l){var c=new Array(n.length),h=void 0;null!=u[0]?(h=Math.atan(u[1]/u[0]),u[0]<0?h+=Math.PI/2:h=-h-Math.PI/2):h=u;for(var f=Math.cos(-h),d=Math.sin(-h),p=0;p<c.length/2;p++)c[2*p]=a/2*(n[2*p]*f-n[2*p+1]*d),c[2*p+1]=s/2*(n[2*p+1]*f+n[2*p]*d),c[2*p]+=i,c[2*p+1]+=o;var v=void 0;if(l>0){var g=this.expandPolygon(c,-l);v=this.joinLines(g)}else v=c;return r.pointInsidePolygonPoints(e,t,v)},r.joinLines=function(e){for(var t=new Array(e.length/2),n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0;c<e.length/4;c++){n=e[4*c],r=e[4*c+1],i=e[4*c+2],o=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],s=e[4*(c+1)+1],u=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],s=e[1],u=e[2],l=e[3]);var h=this.finiteLinesIntersect(n,r,i,o,a,s,u,l,!0);t[2*c]=h[0],t[2*c+1]=h[1]}return t},r.expandPolygon=function(e,t){for(var n=new Array(2*e.length),r=void 0,i=void 0,o=void 0,a=void 0,s=0;s<e.length/2;s++){r=e[2*s],i=e[2*s+1],s<e.length/2-1?(o=e[2*(s+1)],a=e[2*(s+1)+1]):(o=e[0],a=e[1]);var u=a-i,l=-(o-r),c=Math.sqrt(u*u+l*l),h=u/c,f=l/c;n[4*s]=r+h*t,n[4*s+1]=i+f*t,n[4*s+2]=o+h*t,n[4*s+3]=a+f*t}return n},r.intersectLineEllipse=function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},r.checkInEllipse=function(e,t,n,r,i,o,a){return e-=i,t-=o,e/=n/2+a,t/=r/2+a,e*e+t*t<=1},r.intersectLineCircle=function(e,t,n,r,i,o,a){var s=[n-e,r-t],u=[e-i,t-o],l=s[0]*s[0]+s[1]*s[1],c=2*(u[0]*s[0]+u[1]*s[1]),h=u[0]*u[0]+u[1]*u[1]-a*a,f=c*c-4*l*h;if(f<0)return[];var d=(-c+Math.sqrt(f))/(2*l),p=(-c-Math.sqrt(f))/(2*l),v=Math.min(d,p),g=Math.max(d,p),y=[];if(v>=0&&v<=1&&y.push(v),g>=0&&g<=1&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var x=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,b,x,w]}return[m,b]},r.findCircleNearPoint=function(e,t,n,r,i){var o=r-e,a=i-t,s=Math.sqrt(o*o+a*a),u=o/s,l=a/s;return[e+u*n,t+l*n]},r.findMaxSqDistanceToOrigin=function(e){for(var t=1e-6,n=void 0,r=0;r<e.length/2;r++)n=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],n>t&&(t=n);return t},r.midOfThree=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},r.finiteLinesIntersect=function(e,t,n,r,i,o,a,s,u){var l=e-i,c=n-e,h=a-i,f=t-o,d=r-t,p=s-o,v=h*f-p*l,g=c*f-d*l,y=p*c-h*d;if(0!==y){var m=v/y,b=g/y,x=.001,w=0-x,E=1+x;return w<=m&&m<=E&&w<=b&&b<=E?[e+m*c,t+m*d]:u?[e+m*c,t+m*d]:[]}return 0===v||0===g?this.midOfThree(e,n,a)===a?[a,s]:this.midOfThree(e,n,i)===i?[i,o]:this.midOfThree(i,a,n)===n?[n,r]:[]:[]},r.polygonIntersectLine=function(e,t,n,i,o,a,s,u){var l=[],c=void 0,h=new Array(n.length),f=!0;5===arguments.length&&(f=!1);var d=void 0;if(f){for(var p=0;p<h.length/2;p++)h[2*p]=n[2*p]*a+i,h[2*p+1]=n[2*p+1]*s+o;if(u>0){var v=r.expandPolygon(h,-u);d=r.joinLines(v)}else d=h}else d=n;for(var g=void 0,y=void 0,m=void 0,b=void 0,x=0;x<d.length/2;x++)g=d[2*x],y=d[2*x+1],x<d.length/2-1?(m=d[2*(x+1)],b=d[2*(x+1)+1]):(m=d[0],b=d[1]),c=this.finiteLinesIntersect(e,t,i,o,g,y,m,b),0!==c.length&&l.push(c[0],c[1]);return l},r.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(e,t){var n=r.generateUnitNgonPoints(e,t);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(e){for(var t=void 0,n=void 0,r=e.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;u<r;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*l,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var f=0;f<r;f++)n=e[2*f+1]=e[2*f+1]+(-1-o);return e},r.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i=new Array(2*e),o=void 0,a=0;a<e;a++)o=a*n+r,i[2*a]=Math.cos(o),i[2*a+1]=Math.sin(-o);return i},r.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},r.getCutRectangleCornerLength=function(){return 8},r.bezierPtsToQuadCoeff=function(e,t,n){return[e-2*t+n,2*(t-e),e]},r.getBarrelCurveConstants=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},e.exports=r},function(e,t,n){"use strict";e.exports="undefined"==typeof window?null:window},function(e,t,n){"use strict";var r=n(1),i={};[n(43),n(45),n(46)].forEach(function(e){r.assign(i,e)}),e.exports=i},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=0,a=1,s=2,u=function p(e){return this instanceof p?(this.id="Thenable/1.0.7",this.state=o,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new p(e)};u.prototype={fulfill:function(e){return l(this,a,"fulfillValue",e)},reject:function(e){return l(this,s,"rejectReason",e)},then:function(e,t){var n=this,r=new u;return n.onFulfilled.push(f(e,r,"fulfill")),n.onRejected.push(f(t,r,"reject")),c(n),r.proxy}};var l=function(e,t,n,r){return e.state===o&&(e.state=t,e[n]=r,c(e)),e},c=function(e){e.state===a?h(e,"onFulfilled",e.fulfillValue):e.state===s&&h(e,"onRejected",e.rejectReason)},h=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var o=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof i?i(o):setTimeout(o,0)}},f=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(o){return void t.reject(o)}d(t,i)}}},d=function v(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"===("undefined"==typeof t?"undefined":r(t))&&null!==t||"function"==typeof t)try{n=t.then}catch(i){return void e.reject(i)}if("function"!=typeof n)e.fulfill(t);else{var o=!1;try{n.call(t,function(n){o||(o=!0,n===t?e.reject(new TypeError("circular thenable chain")):v(e,n))},function(t){o||(o=!0,e.reject(t))})}catch(i){o||e.reject(i)}}};u.all=function(e){return new u(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,i++,i===e.length&&t(r)},a=0;a<e.length;a++)!function(t){var r=e[t],i=null!=r&&null!=r.then;if(i)r.then(function(e){o(t,e)},function(e){n(e)});else{var a=r;o(t,a)}}(a)})},u.resolve=function(e){return new u(function(t,n){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},e.exports="undefined"!=typeof Promise?Promise:u},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(10),a=function(e){var t=this;if(t._private={selectorText:e,invalid:!0},null==e||r.string(e)&&e.match(/^\s*$/))t.length=0;else if("*"===e||"edge"===e||"node"===e)t[0]=o(),t[0].group="*"===e?e:e+"s",t[0].groupOnly=!0,t[0].length=1,t._private.invalid=!1,t.length=1;else if(r.elementOrCollection(e)){var n=e.collection();t[0]=o(),t[0].collection=n,t[0].length=1,t.length=1}else if(r.fn(e))t[0]=o(),t[0].filter=e,t[0].length=1,t.length=1;else{if(!r.string(e))return void i.error("A selector must be created from a string; found ",e);if(!t.parse(e))return}t._private.invalid=!1},s=a.prototype;s.valid=function(){return!this._private.invalid},s.invalid=function(){return this._private.invalid},s.text=function(){return this._private.selectorText},s.size=function(){return this.length},s.eq=function(e){return this[e]},s.sameText=function(e){return this.text()===e.text()},s.toString=s.selector=function(){if(null!=this._private.toStringCache)return this._private.toStringCache;var e=void 0,t="",n=function(e){return null==e?"":e},i=function(e){return r.string(e)?'"'+e+'"':n(e)},o=function(e){return" "+e+" "},a=function u(t){var r="",a=void 0,s=void 0;t.subject===t&&(r+="$");var l=n(t.group);for(r+=l.substring(0,l.length-1),a=0;a<t.data.length;a++){var c=t.data[a];r+=c.value?"["+c.field+o(n(c.operator))+i(c.value)+"]":"["+n(c.operator)+c.field+"]"}for(a=0;a<t.meta.length;a++){var h=t.meta[a];r+="[["+h.field+o(n(h.operator))+i(h.value)+"]]"}for(a=0;a<t.colonSelectors.length;a++)s=t.colonSelectors[e],r+=s;for(a=0;a<t.ids.length;a++)s="#"+t.ids[e],r+=s;for(a=0;a<t.classes.length;a++)s="."+t.classes[a],r+=s;if(null!=t.source&&null!=t.target&&(r=u(t.source)+" -> "+u(t.target)),null!=t.connectedNodes){var f=t.connectedNodes;r=u(f[0])+" <-> "+u(f[1])}return null!=t.parent&&(r=u(t.parent)+" > "+r),null!=t.ancestor&&(r=u(t.ancestor)+" "+r),null!=t.child&&(r+=" > "+u(t.child)),null!=t.descendant&&(r+=" "+u(t.descendant)),r};for(e=0;e<this.length;e++){var s=this[e];t+=a(s),this.length>1&&e<this.length-1&&(t+=", ")}return this._private.toStringCache=t,t},[n(49),n(52)].forEach(function(e){return i.assign(s,e)}),e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(8),s=n(14),u={generate:function(e,t,n){for(var i=null!=n?n:r.uuid();e.hasElementWithId(i);)i=r.uuid();return i}},l=function(e,t,n){if(void 0===e||!i.core(e))return void r.error("A collection must have a reference to the core");var l=new o,c=!1;if(t){if(t.length>0&&i.plainObject(t[0])&&!i.element(t[0])){c=!0;for(var h=[],f=new a,d=0,p=t.length;d<p;d++){var v=t[d];null==v.data&&(v.data={});var g=v.data;if(null==g.id)g.id=u.generate(e,v);else if(e.hasElementWithId(g.id)||f.has(g.id))continue;var y=new s(e,v,(!1));h.push(y),f.add(g.id)}t=h}}else t=[];this.length=0;for(var m=0,b=t.length;m<b;m++){var x=t[m];if(null!=x){var w=x._private.data.id;(null==n||n.unique&&!l.has(w))&&(l.set(w,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={cy:e,map:l},c&&this.restore()},c=s.prototype=l.prototype;c.instanceString=function(){return"collection"},c.spawn=function(e,t,n){return i.core(e)||(n=t,t=e,e=this.cy()),new l(e,t,n)},c.spawnSelf=function(){return this.spawn(this)},c.cy=function(){return this._private.cy},c.renderer=function(){return this._private.cy.renderer()},c.element=function(){return this[0]},c.collection=function(){return i.collection(this)?this:new l(this._private.cy,[this])},c.unique=function(){return new l(this._private.cy,this,{unique:!0})},c.hasElementWithId=function(e){return this._private.map.has(e)},c.getElementById=function(e){var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new l(t)},c.$id=c.getElementById,c.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this._private.data.id;return t._private.map.get(n).index},c.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var o=t._private;if(i.plainObject(e)){n.startBatch(),e.data&&t.data(e.data),e.position&&t.position(e.position);var a=function(n,r,i){var a=e[n];null!=a&&a!==o[n]&&(a?t[r]():t[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),
null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null};s.classes="";var u=0;return o.classes.forEach(function(e){return s.classes+=0===u++?e:" "+e}),s}}},c.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},c.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new s(e,i,(!1));t.push(o)}return new l(e,t)},c.copy=c.clone,c.restore=function(e){var t=this,n=t.cy(),a=n._private;void 0===e&&(e=!0);for(var s=[],c=[],h=void 0,f=0,d=t.length;f<d;f++){var p=t[f];p.removed()&&(p.isNode()?s.push(p):c.push(p))}h=s.concat(c);var v=void 0,g=function(){h.splice(v,1),v--};for(v=0;v<h.length;v++){var y=h[v],m=y._private,b=m.data;if(y.clearTraversalCache(),void 0===b.id)b.id=u.generate(n,y);else if(i.number(b.id))b.id=""+b.id;else{if(i.emptyString(b.id)||!i.string(b.id)){r.error("Can not create element with invalid string ID `"+b.id+"`"),g();continue}if(n.hasElementWithId(b.id)){r.error("Can not create second element with ID `"+b.id+"`"),g();continue}}var x=b.id;if(y.isNode()){var w=m.position;null==w.x&&(w.x=0),null==w.y&&(w.y=0)}if(y.isEdge()){for(var E=y,_=["source","target"],S=_.length,T=!1,C=0;C<S;C++){var k=_[C],P=b[k];i.number(P)&&(P=b[k]=""+b[k]),null==P||""===P?(r.error("Can not create edge `"+x+"` with unspecified "+k),T=!0):n.hasElementWithId(P)||(r.error("Can not create edge `"+x+"` with nonexistant "+k+" `"+P+"`"),T=!0)}if(T){g();continue}var O=n.getElementById(b.source),A=n.getElementById(b.target);O._private.edges.push(E),A._private.edges.push(E),E._private.source=O,E._private.target=A}m.map=new o,m.map.set(x,{ele:y,index:0}),m.removed=!1,n.addToPool(y)}for(var I=0;I<s.length;I++){var N=s[I],L=N._private.data;i.number(L.parent)&&(L.parent=""+L.parent);var M=L.parent,D=null!=M;if(D){var R=n.getElementById(M);if(R.empty())L.parent=void 0;else{for(var B=!1,j=R;!j.empty();){if(N.same(j)){B=!0,L.parent=void 0;break}j=j.parent()}B||(R[0]._private.children.push(N),N._private.parent=R[0],a.hasCompoundNodes=!0)}}}if(h.length>0){for(var q=new l(n,h),z=0;z<q.length;z++){var F=q[z];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}var V=void 0;V=a.hasCompoundNodes?n.collection().merge(q).merge(q.connectedNodes()).merge(q.parent()):q,V.dirtyCompoundBoundsCache().updateStyle(e),e?q.emitAndNotify("add"):q.emit("add")}return t},c.removed=function(){var e=this[0];return e&&e._private.removed},c.inside=function(){var e=this[0];return e&&!e._private.removed},c.remove=function(e){function t(e){for(var t=e._private.edges,n=0;n<t.length;n++)i(t[n])}function n(e){for(var t=e._private.children,n=0;n<t.length;n++)i(t[n])}function i(e){var r=f[e.id()];e.removed()||r||(f[e.id()]=!0,e.isNode()?(h.push(e),t(e),n(e)):h.unshift(e))}function o(e,t){var n=e._private.edges;r.removeFromArray(n,t),e.clearTraversalCache()}function a(e){e.parallelEdges().clearTraversalCache()}function s(e,t){t=t[0],e=e[0];var n=e._private.children,i=e.id();r.removeFromArray(n,t),y.ids[i]||(y.ids[i]=!0,y.push(e))}var u=this,c=[],h=[],f={},d=u._private.cy;void 0===e&&(e=!0);for(var p=0,v=u.length;p<v;p++){var g=u[p];i(g)}var y=[];y.ids={},u.dirtyCompoundBoundsCache(),d.removeFromPool(h);for(var m=0;m<h.length;m++){var b=h[m];if(b._private.removed=!0,c.push(b),b.isEdge()){var x=b.source()[0],w=b.target()[0];o(x,b),o(w,b),a(b)}else{var E=b.parent();0!==E.length&&s(E,b)}}var _=d._private.elements;d._private.hasCompoundNodes=!1;for(var S=0;S<_.length;S++){var T=_[S];if(T.isParent()){d._private.hasCompoundNodes=!0;break}}var C=new l(this.cy(),c);C.size()>0&&(e&&this.cy().notify({type:"remove",eles:C}),C.emit("remove"));for(var k=0;k<y.length;k++){var P=y[k];P.removed()||P.updateStyle()}return new l(d,c)},c.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.hasElementWithId(n),o=t.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],l=this[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r),u.scratch=l._private.scratch)}return t.add(a)}}else if(void 0!==e.parent){var c=e.parent,h=null===c||t.hasElementWithId(c);if(h){var f=this.jsons(),d=this.descendants(),p=d.union(d.union(this).connectedEdges()).jsons();this.remove();for(var v=0;v<f.length;v++){var g=f[v],y=this[v];"nodes"===g.group&&(g.data.parent=null===c?void 0:c,g.scratch=y._private.scratch)}return t.add(f.concat(p))}}return this},[n(29),n(42),n(47),n(48),n(53),n(54),n(55),n(56),n(61),n(62),n(63),n(7),n(64),n(65),n(66),n(67),n(68)].forEach(function(e){r.extend(c,e)}),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function(){function e(t){if(r(this,e),this._obj=Object.create(null),null!=t){var n=void 0;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var i=0;i<n.length;i++)this.add(n[i])}}return i(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){this._obj[e]=1}},{key:"delete",value:function(e){this._obj[e]=0}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}},{key:"size",get:function(){return this.toArray().length}}]),e}());e.exports=o},function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){"use strict";var r=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};e.exports=r},function(e,t,n){"use strict";function r(e){i.assign(this,l,e),this.listeners=[],this.emitting=0}var i=n(1),o=n(0),a=n(16),s=/^([^.]+)(\.(?:[^.]+))?$/,u=".*",l={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},eventFields:function(){return{}},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:void 0},c=r.prototype,h=function(e,t,n,r,a,u,l){o.fn(r)&&(a=r,r=null),l&&(u=null==u?l:i.assign({},u,l));for(var c=n.split(/\s+/),h=0;h<c.length;h++){var f=c[h];if(!o.emptyString(f)){var d=f.match(s);if(d){var p=d[1],v=d[2]?d[2]:null,g=t(e,f,p,v,r,a,u);if(g===!1)break}}}},f=function(e,t){return new a(t.type,i.assign(t,e.eventFields(e.context)))},d=function(e,t,n){if(o.event(n))return void t(e,n);if(o.plainObject(n))return void t(e,f(e,n));for(var r=n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!o.emptyString(a)){var u=a.match(s);if(u){var l=u[1],c=u[2]?u[2]:null,h=f(e,{type:l,namespace:c,target:e.context});t(e,h)}}}};c.on=c.addListener=function(e,t,n,r,i){return h(this,function(e,t,n,r,i,a,s){o.fn(a)&&e.listeners.push({event:t,callback:a,type:n,namespace:r,qualifier:i,conf:s})},e,t,n,r,i),this},c.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},c.removeListener=c.off=function(e,t,n,r){var o=this;0!==this.emitting&&(this.listeners=i.copyArray(this.listeners));for(var a=this.listeners,s=function(i){var s=a[i];h(o,function(e,t,n,r,o,u){if(s.type===n&&(!r||s.namespace===r)&&(!o||e.qualifierCompare(s.qualifier,o))&&(!u||s.callback===u))return a.splice(i,1),!1},e,t,n,r)},u=a.length-1;u>=0;u--)s(u);return this},c.emit=c.trigger=function(e,t,n){var r=this.listeners,a=r.length;return this.emitting++,o.array(t)||(t=[t]),d(this,function(e,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],a=r.length);for(var s=function(n){var a=r[n];if(a.type===o.type&&(!a.namespace||a.namespace===o.namespace||a.namespace===u)&&e.eventMatches(e.context,a,o)){var s=[o];null!=t&&i.push(s,t),e.beforeEmit(e.context,a,o),a.conf&&a.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==a}));var l=e.callbackContext(e.context,a,o),c=a.callback.apply(l,s);e.afterEmit(e.context,a,o),c===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);e.bubble(e.context)&&!o.isPropagationStopped()&&e.parent(e.context).emit(o,t)},e),this.emitting--,this},e.exports=r},function(e,t,n){"use strict";var r=n(3),i=n(1),o=n(7),a=n(0),s=n(5),u=n(4),l=function(e){var t=this;e=i.extend({},e);var n=e.container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var u=n?n._cyreg:null;u=u||{},u&&u.cy&&(u.cy.destroy(),u={});var l=u.readies=u.readies||[];n&&(n._cyreg=u),u.cy=t;var c=void 0!==r&&void 0!==n&&!e.headless,h=e;h.layout=i.extend({name:c?"grid":"null"},h.layout),h.renderer=i.extend({name:c?"canvas":"null"},h.renderer);var f=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},d=this._private={container:n,ready:!1,options:h,elements:new o(this),listeners:[],aniEles:new o(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,h.zoomingEnabled),userZoomingEnabled:f(!0,h.userZoomingEnabled),panningEnabled:f(!0,h.panningEnabled),userPanningEnabled:f(!0,h.userPanningEnabled),boxSelectionEnabled:f(!0,h.boxSelectionEnabled),autolock:f(!1,h.autolock,h.autolockNodes),autoungrabify:f(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:f(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?c:h.styleEnabled,zoom:a.number(h.zoom)?h.zoom:1,pan:{x:a.plainObject(h.pan)&&a.number(h.pan.x)?h.pan.x:0,y:a.plainObject(h.pan)&&a.number(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter();var p=h.selectionType;void 0===p||"additive"!==p&&"single"!==p?d.selectionType="single":d.selectionType=p,a.number(h.minZoom)&&a.number(h.maxZoom)&&h.minZoom<h.maxZoom?(d.minZoom=h.minZoom,d.maxZoom=h.maxZoom):a.number(h.minZoom)&&void 0===h.maxZoom?d.minZoom=h.minZoom:a.number(h.maxZoom)&&void 0===h.minZoom&&(d.maxZoom=h.maxZoom);var v=function(e,t){var n=e.some(a.promise);return n?s.all(e).then(t):void t(e)};d.styleEnabled&&t.setStyle([]),t.initRenderer(i.extend({hideEdgesOnViewport:h.hideEdgesOnViewport,textureOnViewport:h.textureOnViewport,wheelSensitivity:a.number(h.wheelSensitivity)&&h.wheelSensitivity>0?h.wheelSensitivity:1,motionBlur:void 0!==h.motionBlur&&h.motionBlur,motionBlurOpacity:void 0===h.motionBlurOpacity?.05:h.motionBlurOpacity,pixelRatio:a.number(h.pixelRatio)&&h.pixelRatio>0?h.pixelRatio:void 0,desktopTapThreshold:void 0===h.desktopTapThreshold?4:h.desktopTapThreshold,touchTapThreshold:void 0===h.touchTapThreshold?8:h.touchTapThreshold},h.renderer));var g=function(e,n,r){t.notifications(!1);var o=t.mutableElements();o.length>0&&o.remove(),null!=e&&(a.plainObject(e)||a.array(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.notify({type:"load",eles:t.mutableElements()}),t.one("load",n),t.emit("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var s=i.extend({},t._private.options.layout);s.eles=t.elements(),t.layout(s).run()};v([h.style,h.elements],function(e){var n=e[0],r=e[1];d.styleEnabled&&t.style().append(n),g(r,function(){t.startAnimationLoop(),d.ready=!0,a.fn(h.ready)&&t.on("ready",h.ready);for(var e=0;e<l.length;e++){var n=l[e];t.on("ready",n)}u&&(u.readies=[]),t.emit("ready")},h.done)})},c=l.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.isDestroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function h(e){var t=this,n=t._private,r=t.mutableElements();if(a.plainObject(e)){if(t.startBatch(),e.elements){var o={},s=function(e,n){for(var r=0;r<e.length;r++){var a=e[r],s=a.data.id,u=t.getElementById(s);o[s]=!0,0!==u.length?u.json(a):n?t.add(i.extend({group:n},a)):t.add(a)}};if(a.array(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];a.array(f)&&s(f,c)}r.stdFilter(function(e){return!o[e.id()]}).remove()}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan));for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],p=0;p<d.length;p++){var v=d[p];null!=e[v]&&t[v](e[v])}return t.endBatch(),this}if(void 0===e){var h={};return h.elements={},r.forEach(function(e){var t=e.group();h.elements[t]||(h.elements[t]=[]),h.elements[t].push(e.json())}),this._private.styleEnabled&&(h.style=t.style().json()),h.zoomingEnabled=t._private.zoomingEnabled,h.userZoomingEnabled=t._private.userZoomingEnabled,h.zoom=t._private.zoom,h.minZoom=t._private.minZoom,h.maxZoom=t._private.maxZoom,h.panningEnabled=t._private.panningEnabled,h.userPanningEnabled=t._private.userPanningEnabled,h.pan=i.copy(t._private.pan),h.boxSelectionEnabled=t._private.boxSelectionEnabled,h.renderer=i.copy(t._private.options.renderer),h.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,h.textureOnViewport=t._private.options.textureOnViewport,h.wheelSensitivity=t._private.options.wheelSensitivity,h.motionBlur=t._private.options.motionBlur,h}},scratch:u.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:u.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),c.$id=c.getElementById,[n(69),n(70),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(93)].forEach(function(e){i.extend(c,e)}),e.exports=l},function(e,t,n){"use strict";e.exports=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function r(){var n=this,i=arguments,o=void 0,a=t.apply(n,i),s=r.cache;return(o=s[a])||(o=s[a]=e.apply(n,i)),o};return n.cache={},n}},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(8),a=function(e,t,n){if(n=!(void 0!==n&&!n),void 0===e||void 0===t||!i.core(e))return void r.error("An element must have a core reference and parameters set");var a=t.group;if(null==a&&(a=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==a&&"edges"!==a)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+a+"`");this.length=1,this[0]=this;var s=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,active:!1,classes:new o,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1};if(t.renderedPosition){var u=t.renderedPosition,l=e.pan(),c=e.zoom();s.position={x:(u.x-l.x)/c,y:(u.y-l.y)/c}}if(i.string(t.classes))for(var h=t.classes.split(/\s+/),f=0,d=h.length;f<d;f++){var p=h[f];p&&""!==p&&s.classes.add(p)}(t.style||t.css)&&e.style().applyBypass(this,t.style||t.css),this.createEmitter(),(void 0===n||n)&&this.restore()};e.exports=a},function(e,t,n){"use strict";var r=n(1),i=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return r.sort.descending(e.selector,t.selector)}),o=function s(e,t){var n=s.lookup=s.lookup||function(){for(var e={},t=void 0,n=0;n<i.length;n++)t=i[n],e[t.selector]=t.matches;return e}();return n[e](t)},a="("+i.map(function(e){return e.selector}).join("|")+")";e.exports={stateSelectors:i,stateSelectorMatches:o,stateSelectorRegex:a}},function(e,t,n){"use strict";function r(){return!1}function i(){return!0}var o=function(e,t){this.recycle(e,t)};o.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=r,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?i:r):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,o=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*o+a.x,y:n.y*o+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=i;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=function(e,t){function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?a?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?r.MAX_INT:0}function i(e){var t=e.pstyle("z-index-compare");return"auto"===t.value&&e.isNode()?1:0}var o=e.cy(),a=o.hasCompoundNodes(),s=n(e)-n(t);if(0!==s)return s;var u=i(e)-i(t);if(0!==u)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==l?l:e.poolIndex()-t.poolIndex()};e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),a=function u(e){return this instanceof u?r.core(e)?(this._private={cy:e,coreStyle:{}},this.length=0,void this.resetToDefault()):void i.error("A style must have a core reference"):new u(e)},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;this.length=0;var t=this._private;return t.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(e){var t="core"===e?null:new o(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},s.css=function(){var e=this,t=arguments;switch(t.length){case 1:for(var n=t[0],r=0;r<e.properties.length;r++){var o=e.properties[r],a=n[o.name];void 0===a&&(a=n[i.dash2camel(o.name)]),void 0!==a&&this.cssRule(o.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this},s.style=s.css,s.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this},s.append=function(e){return r.stylesheet(e)?e.appendToStyle(this):r.array(e)?this.appendFromJson(e):r.string(e)&&this.appendFromString(e),this},a.fromJson=function(e,t){var n=new a(e);return n.fromJson(t),n},a.fromString=function(e,t){return new a(e).fromString(t)},[n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92)].forEach(function(e){i.extend(s,e)}),a.types=s.types,a.properties=s.properties,e.exports=a},function(e,t,n){"use strict";var r=n(1),i=1e3/60;e.exports={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var o=r.debounce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),a=function(a,s){for(var u=r.performanceNow(),l=n.averageRedrawTime,c=n.lastRedrawTime,h=[],f=n.cy.extent(),d=n.getPixelRatio();;){var p=r.performanceNow(),v=p-u,g=p-s;if(c<i){var y=i-(a?l:0);if(g>=e.deqFastCost*y)break}else if(a){if(v>=e.deqCost*c||v>=e.deqAvgCost*l)break}else if(g>=e.deqNoDrawCost*i)break;var m=e.deq(t,d,f);if(!(m.length>0))break;for(var b=0;b<m.length;b++)h.push(m[b])}h.length>0&&(e.onDeqd(t,h),!a&&e.shouldRedraw(t,h,d,f)&&o())},s=e.priority||r.noop;n.beforeRender(a,s(t))}}}}},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(94),a=n(136),s=function(e){return void 0===e&&(e={}),r.plainObject(e)?new i(e):r.string(e)?o.apply(o,arguments):void 0};s.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(s),e.apply(null,t),this},s.version=n(137),s.stylesheet=s.Stylesheet=a,e.exports=s},function(e,t,n){"use strict";var r=n(0);e.exports={hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t=4===e.length,n=void 0,r=void 0,i=void 0,o=16;return t?(n=parseInt(e[1]+e[1],o),r=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),r=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,r,i]}},hsl2tuple:function(e){function t(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=new RegExp("^"+this.regex.hsla+"$").exec(e);if(c){if(r=parseInt(c[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,i=parseFloat(c[2]),i<0||i>100)return;if(i/=100,o=parseFloat(c[3]),o<0||o>100)return;if(o/=100,a=c[4],void 0!==a&&(a=parseFloat(a),a<0||a>1))return;if(0===i)s=u=l=Math.round(255*o);else{var h=o<.5?o*(1+i):o+i-o*i,f=2*o-h;s=Math.round(255*t(f,h,r+1/3)),u=Math.round(255*t(f,h,r)),l=Math.round(255*t(f,h,r-1/3))}n=[s,u,l,a]}return n},rgb2tuple:function(e){var t=void 0,n=new RegExp("^"+this.regex.rgba+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},colorname2tuple:function(e){return this.colors[e.toLowerCase()]},color2tuple:function(e){return(r.array(e)?e:null)||this.colorname2tuple(e)||this.hex2tuple(e)||this.rgb2tuple(e)||this.hsl2tuple(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},function(e,t,n){"use strict";var r=n(0);e.exports={mapEmpty:function(e){var t=!0;return null!=e?0===Object.keys(e).length:t},pushMap:function(e){var t=this.getMap(e);null==t?this.setMap(this.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];r.plainObject(a)&&this.error("Tried to set map with object key"),o<n.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},getMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),t=t[a],null==t)return t}return t},deleteMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=e.keepChildren,a=0;a<i;a++){var s=n[a];r.plainObject(s)&&this.error("Tried to delete map with object key");var u=a===e.keys.length-1;if(u)if(o)for(var l=Object.keys(t),c=0;c<l.length;c++){var h=l[c];o[h]||(t[h]=void 0)}else t[s]=void 0;else t=t[s]}}}},function(e,t,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i="rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",o="rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",a="hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",s="hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",u="\\#[0-9a-fA-F]{3}",l="\\#[0-9a-fA-F]{6}";e.exports={regex:{number:r,rgba:i,rgbaNoBackRefs:o,hsla:a,hslaNoBackRefs:s,hex3:u,hex6:l}}},function(e,t,n){"use strict";var r=n(13),i=n(0);e.exports={camel2dash:r(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel:r(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),prependCamel:r(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),capitalize:function(e){return i.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}}},function(e,t,n){"use strict";var r=n(3),i=r?r.performance:null,o={},a=i&&i.now?function(){return i.now()}:function(){return Date.now()},s=function(){if(r){if(r.requestAnimationFrame)return function(e){r.requestAnimationFrame(e)};if(r.mozRequestAnimationFrame)return function(e){r.mozRequestAnimationFrame(e)};if(r.webkitRequestAnimationFrame)return function(e){r.webkitRequestAnimationFrame(e)};if(r.msRequestAnimationFrame)return function(e){r.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(a())},1e3/60)}}();o.requestAnimationFrame=function(e){s(e)},o.performanceNow=a,o.debounce=n(26),o.now=function(){return Date.now()},e.exports=o},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:0}function i(e,t){return-1*r(e,t)}e.exports={sort:{ascending:r,descending:i}}},function(e,t,n){"use strict";function r(){this._obj={}}var i=r.prototype;i.set=function(e,t){this._obj[e]=t},i["delete"]=function(e){this._obj[e]=null},i.has=function(e){return null!=this._obj[e]},i.get=function(e){return this._obj[e]},e.exports=r},function(e,t,n){"use strict";var r=n(1),i={};[n(30),n(31),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41)].forEach(function(e){r.extend(i,e)}),e.exports=i},function(e,t,n){"use strict";var r=n(0),i=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,i){var o;r.plainObject(t)&&!r.elementOrCollection(t)&&(o=t,t=o.roots||o.root,n=o.visit,i=o.directed),i=2!==arguments.length||r.fn(n)?i:n,
n=r.fn(n)?n:function(){};for(var a,s=this._private.cy,u=t=r.string(t)?this.filter(t):t,l=[],c=[],h={},f={},d={},p=0,v=this.nodes(),g=this.edges(),y=0;y<u.length;y++)u[y].isNode()&&(l.unshift(u[y]),e.bfs&&(d[u[y].id()]=!0,c.push(u[y])),f[u[y].id()]=0);for(;0!==l.length;){var u=e.bfs?l.shift():l.pop();if(e.dfs){if(d[u.id()])continue;d[u.id()]=!0,c.push(u)}var m,b=f[u.id()],x=h[u.id()],w=null==x?void 0:x.connectedNodes().not(u)[0];if(m=n(u,x,w,p++,b),m===!0){a=u;break}if(m===!1)break;for(var E=u.connectedEdges(i?function(e){return e.data("source")===u.id()}:void 0).intersect(g),y=0;y<E.length;y++){var _=E[y],S=_.connectedNodes(function(e){return e.id()!==u.id()}).intersect(v);0===S.length||d[S.id()]||(S=S[0],l.push(S),e.bfs&&(d[S.id()]=!0,c.push(S)),h[S.id()]=_,f[S.id()]=f[u.id()]+1)}}for(var T=[],y=0;y<c.length;y++){var C=c[y],k=h[C.id()];k&&T.push(k),T.push(C)}return{path:s.collection(T,{unique:!0}),found:s.collection(a)}}},o={breadthFirstSearch:i({bfs:!0}),depthFirstSearch:i({dfs:!0})};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(9),o={dijkstra:function(e,t,n){var o;r.plainObject(e)&&!r.elementOrCollection(e)&&(o=e,e=o.root,t=o.weight,n=o.directed);var a=this._private.cy;t=r.fn(t)?t:function(){return 1};for(var s=r.string(e)?this.filter(e)[0]:e[0],u={},l={},c={},h=this.edges().filter(function(e){return!e.isLoop()}),f=this.nodes(),d=function(e){return u[e.id()]},p=function(e,t){u[e.id()]=t,v.updateItem(e)},v=new i(function(e,t){return d(e)-d(t)}),g=0;g<f.length;g++){var y=f[g];u[y.id()]=y.same(s)?0:1/0,v.push(y)}for(var m=function(e,r){for(var i,o=(n?e.edgesTo(r):e.edgesWith(r)).intersect(h),a=1/0,s=0;s<o.length;s++){var u=o[s],l=t(u);(l<a||!i)&&(a=l,i=u)}return{edge:i,dist:a}};v.size()>0;){var b=v.pop(),x=d(b),w=b.id();if(c[w]=x,x!==1/0)for(var E=b.neighborhood().intersect(f),g=0;g<E.length;g++){var _=E[g],S=_.id(),T=m(b,_),C=x+T.dist;C<d(_)&&(p(_,C),l[S]={node:b,edge:T.edge})}}return{distanceTo:function(e){var t=r.string(e)?f.filter(e)[0]:e[0];return c[t.id()]},pathTo:function(e){var t=r.string(e)?f.filter(e)[0]:e[0],n=[],i=t;if(t.length>0)for(n.unshift(t);l[i.id()];){var o=l[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};e.exports=o},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(0),i={kruskal:function(e){function t(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.anySame(e))return{eles:n,index:t}}}var n=this.cy();e=r.fn(e)?e:function(){return 1};for(var i=n.collection(n,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());for(var u=this.edges(),l=u.toArray().sort(function(t,n){var r=e(t),i=e(n);return r-i}),s=0;s<l.length;s++){var c=l[s],h=c.source()[0],f=c.target()[0],d=t(h),p=t(f);d.index!==p.index&&(i=i.add(c),o[d.index]=d.eles.add(p.eles),o.splice(p.index,1))}return a.add(i)}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={aStar:function(e){var t=this;e=e||{};var n=function N(e,t,n,r){if(e==t)return r.unshift(o.getElementById(t)),r;if(t in n){var i=n[t],a=g[t];return r.unshift(o.getElementById(a)),r.unshift(o.getElementById(t)),N(e,i,n,r)}},i=function(e,t){if(0!==e.length){for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var o=t[e[i]];o<r&&(r=o,n=i)}return n}},o=this._private.cy;if(null!=e&&null!=e.root){var a=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.goal){var s=r.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&r.fn(e.heuristic))var u=e.heuristic;else var u=function(){return 0};if(null!=e.weight&&r.fn(e.weight))var l=e.weight;else var l=function(e){return 1};if(null!=e.directed)var c=e.directed;else var c=!1;var h=a.id(),f=s.id(),d=[],p=[h],v={},g={},y={},m={};y[h]=0,m[h]=u(a);for(var b=0;p.length>0;){var x=i(p,m),w=o.getElementById(p[x]),E=w.id();if(b++,E==f){var _=n(h,f,v,[]);return{found:!0,distance:y[E],path:t.spawn(_),steps:b}}d.push(E),p.splice(x,1);for(var S=w._private.edges,T=0;T<S.length;T++){var C=S[T];if(this.hasElementWithId(C.id())&&(!c||C.data("source")===E)){var k=C.source(),P=C.target(),O=k.id()!==E?k:P,A=O.id();if(this.hasElementWithId(A)&&d.indexOf(A)==-1){var I=y[E]+l(C);p.indexOf(A)!=-1?I<y[A]&&(y[A]=I,m[A]=I+u(O),v[A]=E):(y[A]=I,m[A]=I+u(O),p.push(A),v[A]=E,g[A]=C.id())}}}}return{found:!1,distance:void 0,path:void 0,steps:b}}}}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={floydWarshall:function(e){e=e||{};var t=this.cy();if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;for(var o=this.edges().stdFilter(function(e){return!e.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;l<s;l++)u[a[l].id()]=l;for(var c=[],l=0;l<s;l++){for(var h=new Array(s),f=0;f<s;f++)l==f?h[f]=0:h[f]=1/0;c.push(h)}var d=[],p=[],v=function(e){for(var t=0;t<s;t++){for(var n=new Array(s),r=0;r<s;r++)n[r]=void 0;e.push(n)}};v(d),v(p);for(var l=0;l<o.length;l++){var g=u[o[l].source().id()],y=u[o[l].target().id()],m=n(o[l]);c[g][y]>m&&(c[g][y]=m,d[g][y]=y,p[g][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var g=u[o[l].target().id()],y=u[o[l].source().id()],m=n(o[l]);c[g][y]>m&&(c[g][y]=m,d[g][y]=y,p[g][y]=o[l])}for(var b=0;b<s;b++)for(var l=0;l<s;l++)for(var f=0;f<s;f++)c[l][b]+c[b][f]<c[l][f]&&(c[l][f]=c[l][b]+c[b][f],d[l][f]=d[l][b]);for(var x=[],l=0;l<s;l++)x.push(a[l].id());var w={distance:function(e,n){if(r.string(e))var i=t.filter(e)[0].id();else var i=e.id();if(r.string(n))var o=t.filter(n)[0].id();else var o=n.id();return c[u[i]][u[o]]},path:function(e,n){var i=function(e,n,r,i,o){if(e===n)return t.getElementById(i[e]);if(void 0!==r[e][n]){for(var a=[t.getElementById(i[e])],s=e;e!==n;){s=e,e=r[e][n];var u=o[s][e];a.push(u),a.push(t.getElementById(i[e]))}return a}};if(r.string(e))var o=t.filter(e)[0].id();else var o=e.id();if(r.string(n))var a=t.filter(n)[0].id();else var a=n.id();var s=i(u[o],u[a],d,x,p);return t.collection(s)}};return w}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o={bellmanFord:function(e){var t=this;if(e=e||{},null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.root){if(r.string(e.root))var a=this.filter(e.root)[0];else var a=e.root[0];for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h={},f=0;f<c;f++)h[l[f].id()]=f;for(var d=[],p=[],v=[],f=0;f<c;f++)l[f].id()===a.id()?d[f]=0:d[f]=1/0,p[f]=void 0;for(var g=!1,f=1;f<c;f++){g=!1;for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],x=n(u[y]),w=d[m]+x;if(w<d[b]&&(d[b]=w,p[b]=m,v[b]=u[y],g=!0),!o){var w=d[b]+x;w<d[m]&&(d[m]=w,p[m]=b,v[m]=u[y],g=!0)}}if(!g)break}if(g)for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],x=n(u[y]);if(d[m]+x<d[b])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var E=[],f=0;f<c;f++)E.push(l[f].id());var _={distanceTo:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return d[h[t]]},pathTo:function(e){var n=function(e,t,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),t===n)return i;var a=e[n];if("undefined"==typeof a)return;n=a}};if(r.string(e))var i=s.filter(e)[0].id();else var i=e.id();var o=[],u=n(p,h[a.id()],h[i],E,o,v);return null!=u&&u.reverse(),t.spawn(u)},hasNegativeWeightCycle:!1};return _}}};e.exports=o},function(e,t,n){"use strict";var r=n(1),i={kargerStein:function(e){var t=this;e=e||{};var n=function(e,t,n){for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],u=n.filter(function(e){return(t[e[1]]!==a||t[e[2]]!==s)&&(t[e[1]]!==s||t[e[2]]!==a)}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<t.length;l++)t[l]===s&&(t[l]=a);return u},i=function I(e,t,r,i){if(r<=i)return t;var o=Math.floor(Math.random()*t.length),a=n(o,e,t);return I(e,a,r-1,i)},o=this._private.cy,a=this.edges().stdFilter(function(e){return!e.isLoop()}),s=this.nodes(),u=s.length,l=a.length,c=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(u<2)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var f={},d=0;d<u;d++)f[s[d].id()]=d;for(var p=[],d=0;d<l;d++){var v=a[d];p.push([d,f[v.source().id()],f[v.target().id()]])}for(var g,y=1/0,m=[],d=0;d<u;d++)m.push(d);for(var b=0;b<=c;b++){var x=m.slice(0),w=i(x,p,u,h),E=x.slice(0),_=i(x,w,h,2),S=i(E,w,h,2);_.length<=S.length&&_.length<y?(y=_.length,g=[_,x]):S.length<=_.length&&S.length<y&&(y=S.length,g=[S,E])}for(var T=g[0].map(function(e){return a[e[0]]}),C=[],k=[],P=g[1][0],d=0;d<g[1].length;d++){var O=g[1][d];O===P?C.push(s[d]):k.push(s[d])}var A={cut:t.spawn(o,T),partition1:t.spawn(C),partition2:t.spawn(k)};return A}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={pageRank:function(e){e=e||{};var t=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var r=0;r<t;r++)e[r]=e[r]/n};if(null!=e&&null!=e.dampingFactor)var n=e.dampingFactor;else var n=.8;if(null!=e&&null!=e.precision)var i=e.precision;else var i=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else var o=200;if(null!=e&&null!=e.weight&&r.fn(e.weight))var a=e.weight;else var a=function(e){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h=u.length,f={},d=0;d<c;d++)f[l[d].id()]=d;for(var p=[],v=[],g=(1-n)/c,d=0;d<c;d++){for(var y=[],m=0;m<c;m++)y.push(0);p.push(y),v.push(0)}for(var d=0;d<h;d++){var b=u[d],x=f[b.source().id()],w=f[b.target().id()],E=a(b);p[w][x]+=E,v[x]+=E}for(var _=1/c+g,m=0;m<c;m++)if(0===v[m])for(var d=0;d<c;d++)p[d][m]=_;else for(var d=0;d<c;d++)p[d][m]=p[d][m]/v[m]+g;for(var S,T=[],C=[],d=0;d<c;d++)T.push(1),C.push(0);for(var k=0;k<o;k++){for(var P=C.slice(0),d=0;d<c;d++)for(var m=0;m<c;m++)P[d]+=p[d][m]*T[m];t(P),S=T,T=P;for(var O=0,d=0;d<c;d++)O+=Math.pow(S[d]-T[d],2);if(O<i)break}var A={rank:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return T[f[t]]}};return A}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o={degreeCentralityNormalized:function(e){e=e||{};var t=this.cy();if(null!=e.directed)var n=e.directed;else var n=!1;var o=this.nodes(),a=o.length;if(n){for(var s={},u={},l=0,c=0,h=0;h<a;h++){var f=o[h],d=this.degreeCentrality(i.extend({},e,{root:f}));l<d.indegree&&(l=d.indegree),c<d.outdegree&&(c=d.outdegree),s[f.id()]=d.indegree,u[f.id()]=d.outdegree}return{indegree:function(e){if(0==l)return 0;if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return s[e]/l},outdegree:function(e){if(0==c)return 0;if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return u[e]/c}}}for(var p={},v=0,h=0;h<a;h++){var f=o[h],d=this.degreeCentrality(i.extend({},e,{root:f}));v<d.degree&&(v=d.degree),p[f.id()]=d.degree}return{degree:function(e){if(0==v)return 0;if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return p[e]/v}}},degreeCentrality:function(e){e=e||{};var t=this;if(null!=e&&null!=e.root){var n=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&r.fn(e.weight))var i=e.weight;else var i=function(e){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.alpha&&r.number(e.alpha))var a=e.alpha;else a=0;if(o){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(t),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(t),l=s.length,c=u.length,h=0,f=0,d=0;d<s.length;d++){var p=s[d];h+=i(p)}for(var d=0;d<u.length;d++){var p=u[d];f+=i(p)}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(f,a)}}for(var v=n.connectedEdges().intersection(t),g=v.length,y=0,d=0;d<v.length;d++){var p=v[d];y+=i(p)}return{degree:Math.pow(g,1-a)*Math.pow(y,a)}}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,e.exports=o},function(e,t,n){"use strict";var r=n(0),i={closenessCentralityNormalized:function(e){e=e||{};var t=this.cy(),n=e.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:e.weight,directed:e.directed}),u=0;u<a.length;u++){for(var l=0,c=0;c<a.length;c++)if(u!=c){var h=s.distance(a[u],a[c]);l+=n?1/h:h}n||(l=1/l),o<l&&(o=l),i[a[u].id()]=l}return{closeness:function(e){if(0==o)return 0;if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return i[e]/o}}},closenessCentrality:function(e){if(e=e||{},null!=e.root){if(r.string(e.root))var t=this.filter(e.root)[0];else var t=e.root[0];if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(){return 1};if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else var i=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:t,weight:n,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=t.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(9),o={betweennessCentrality:function(e){e=e||{};var t,n;r.fn(e.weight)?(n=e.weight,t=!0):t=!1;for(var o=null!=e.directed&&e.directed,a=this._private.cy,s=this.nodes(),u={},l={},c=0,h={set:function(e,t){l[e]=t,t>c&&(c=t)},get:function(e){return l[e]}},f=0;f<s.length;f++){var d=s[f],p=d.id();o?u[p]=d.outgoers().nodes():u[p]=d.openNeighborhood().nodes(),h.set(p,0)}for(var v=0;v<s.length;v++){for(var g=s[v].id(),y=[],m={},b={},x={},w=new i(function(e,t){return x[e]-x[t]}),f=0;f<s.length;f++){var p=s[f].id();m[p]=[],b[p]=0,x[p]=1/0}for(b[g]=1,x[g]=0,w.push(g);!w.empty();){var d=w.pop();if(y.push(d),t)for(var E=0;E<u[d].length;E++){var _,S=u[d][E],T=a.getElementById(d);_=T.edgesTo(S).length>0?T.edgesTo(S)[0]:S.edgesTo(T)[0];var C=n(_);S=S.id(),x[S]>x[d]+C&&(x[S]=x[d]+C,w.nodes.indexOf(S)<0?w.push(S):w.updateItem(S),b[S]=0,m[S]=[]),x[S]==x[d]+C&&(b[S]=b[S]+b[d],m[S].push(d))}else for(var E=0;E<u[d].length;E++){var S=u[d][E].id();x[S]==1/0&&(w.push(S),x[S]=x[d]+1),x[S]==x[d]+1&&(b[S]=b[S]+b[d],m[S].push(d))}}for(var k={},f=0;f<s.length;f++)k[s[f].id()]=0;for(;y.length>0;)for(var S=y.pop(),E=0;E<m[S].length;E++){var d=m[S][E];k[d]=k[d]+b[d]/b[S]*(1+k[S]),S!=s[v].id()&&h.set(S,h.get(S)+k[S])}}var P={betweenness:function(e){if(r.string(e))var e=a.filter(e).id();else var e=e.id();return h.get(e)},betweennessNormalized:function(e){if(0==c)return 0;if(r.string(e))var e=a.filter(e).id();else var e=e.id();return h.get(e)/c}};return P.betweennessNormalised=P.betweennessNormalized,P}};o.bc=o.betweennessCentrality,e.exports=o},function(e,t,n){"use strict";var r=n(4),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(44),o=n(2),a=n(0),s={animated:function(){return function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=this,s=void 0!==n.length,u=s?n:[n],l=this._private.cy||this,c=!s,h=!c;if(!l.styleEnabled())return this;var f=l.style();e=r.assign({},e,t);var d=0===Object.keys(e).length;if(d)return new i(u[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(h&&(e.style=f.getPropsList(e.style||e.css),e.css=void 0),h&&null!=e.renderedPosition){var p=e.renderedPosition,v=l.pan(),g=l.zoom();e.position=o.renderedToModelPosition(p,g,v)}if(c&&null!=e.panBy){var y=e.panBy,m=l.pan();e.pan={x:m.x+y.x,y:m.y+y.y}}var b=e.center||e.centre;if(c&&null!=b){var x=l.getCenterPan(b.eles,e.zoom);null!=x&&(e.pan=x)}if(c&&null!=e.fit){var w=e.fit,E=l.getFitViewport(w.eles||w.boundingBox,w.padding);null!=E&&(e.pan=E.pan,e.zoom=E.zoom)}if(c&&a.plainObject(e.zoom)){var _=l.getZoomedViewport(e.zoom);null!=_&&(_.zoomed&&(e.zoom=_.zoom),_.panned&&(e.pan=_.pan))}return new i(u[0],e)}},animate:function(){return function(e,t){var n=this,i=void 0!==n.length,o=i?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;t&&(e=r.extend({},e,t));for(var s=0;s<o.length;s++){var u=o[s],l=u.animated()&&(void 0===e.queue||e.queue),c=u.animation(e,l?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private,l=u.animation.current,c=0;c<l.length;c++){var h=l[c],f=h._private;t&&(f.duration=0)}e&&(u.animation.queue=[]),t||(u.animation.current=[])}return o.notify({eles:this,type:"draw"}),this}}};e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a=function(e,t,n){var o=this._private=r.extend({duration:1e3},t,n);o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=void 0,n=e.target._private.animation;t=e.queue?n.queue:n.current,t.push(this),i.elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[r]=a}return t&&this.play(),this},promise:function(e){var t=this._private,n=void 0;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new o(function(e,t){n.push(function(){e()})})}}),s.complete=s.completed,e.exports=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),o=n(0),a={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}};return e=i.extend({},t,e),function(t,n){var i=e,a=this,s=void 0!==a.length,u=s?a:[a],l=s?a[0]:a;if(o.string(t)){if(i.allowGetting&&void 0===n){var c=void 0;return l&&(i.beforeGet(l),c=l._private[i.field][t]),c}if(i.allowSetting&&void 0!==n){var h=!i.immutableKeys[t];if(h){var f=r({},t,n);i.beforeSet(a,f);for(var d=0,p=u.length;d<p;d++){var v=u[d];i.canSet(v)&&(v._private[i.field][t]=n)}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&o.plainObject(t)){var g=t,y=void 0,m=void 0,b=Object.keys(g);i.beforeSet(a,g);for(var x=0;x<b.length;x++){y=b[x],m=g[y];var w=!i.immutableKeys[y];if(w)for(var E=0;E<u.length;E++){var _=u[E];i.canSet(_)&&(_._private[i.field][y]=m)}}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&o.fn(t)){var S=t;a.on(i.bindingEvent,S)}else if(i.allowGetting&&void 0===t){var T=void 0;return l&&(i.beforeGet(l),T=l._private[i.field]),T}return a}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=i.extend({},t,e),function(t){var n=e,r=this,i=void 0!==r.length,a=i?r:[r];if(o.string(t)){for(var s=t.split(/\s+/),u=s.length,l=0;l<u;l++){var c=s[l];if(!o.emptyString(c)){var h=!n.immutableKeys[c];if(h)for(var f=0,d=a.length;f<d;f++)a[f]._private[n.field][c]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===t){for(var p=0,v=a.length;p<v;p++)for(var g=a[p]._private[n.field],y=Object.keys(g),m=0;m<y.length;m++){var b=y[m],x=!n.immutableKeys[b];x&&(g[b]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}};e.exports=a},function(e,t,n){"use strict";var r=n(5),i={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,i=Array.prototype.slice.call(arguments,0);return new r(function(e,t){var r=function(t){n.off.apply(n,a),e(t)},o=i.concat([r]),a=o.concat([]);n.on.apply(n,o)})}}};e.exports=i},function(e,t,n){"use strict";var r=n(8),i={classes:function(e){e=(e||"").match(/\S+/g)||[];for(var t=this,n=[],i=new r(e),o=function(e){var o=t[e],a=o._private,s=a.classes,u=!1;i.forEach(function(e){var t=s.has(e);t||(u=!0)}),u||s.forEach(function(e){var t=i.has(e);t||(u=!0)}),u&&(a.classes=new r(i),n.push(o))},a=0;a<t.length;a++)o(a);return n.length>0&&this.spawn(n).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){for(var n=e.match(/\S+/g)||[],r=this,i=[],o=0,a=r.length;o<a;o++)for(var s=r[o],u=!1,l=0;l<n.length;l++){var c=n[l],h=s._private.classes,f=h.has(c),d=t||void 0===t&&!f;d?(h.add(c),f||u||(i.push(s),u=!0)):(h["delete"](c),f&&!u&&(i.push(s),u=!0))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};e.exports=i},function(e,t,n){"use strict";var r=(n(0),n(6)),i={allAre:function(e){var t=new r(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new r(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length===e.length&&this.every(function(t){return e.hasElementWithId(t.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};i.allAreNeighbours=i.allAreNeighbors,i.has=i.contains,e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(50),o=n(10),a=function(e){for(var t=void 0,n=void 0,r=void 0,o=0;o<i.length;o++){var a=i[o],s=a.name,u=e.match(a.regexObj);if(null!=u){n=u,t=a,r=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},s=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},u=function(e){var t=this,n=t._private.selectorText=e,i=t[0]=o();for(t.length=1,n=s(n);;){var u=a(n);if(null==u.expr)return r.error("The selector `"+e+"`is invalid"),!1;var l=u.match.slice(1),c=u.expr.populate(t,i,l);if(c===!1)return!1;if(null!=c&&(i=c),n=u.remaining,n.match(/^\s*$/))break}for(var h=0;h<t.length;h++){var f=t[h];if(null!=f.subject){for(;f.subject!==f;)if(null!=f.parent){var d=f.parent,p=f;p.parent=null,d.child=p,f=d}else{if(null==f.ancestor)return f.source||f.target||f.connectedNodes?(r.error("The selector `"+t.text()+"` can not contain a subject selector that applies to the source or target of an edge selector"),!1):(r.error("When adjusting references for the selector `"+t.text()+"`, neither parent nor ancestor was found"),!1);var v=f.ancestor,g=f;g.ancestor=null,v.descendant=g,f=v}t[h]=f.subject}}return!0};e.exports={parse:u}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(15),o=i.stateSelectorRegex,a=n(51),s=n(1),u=n(10),l=function(e){return e.replace(new RegExp("\\\\("+a.metaChar+")","g"),function(e,t){return t})},c=function(e,t,n){t===e[e.length-1]&&(e[e.length-1]=n)},h=[{name:"group",query:!0,regex:"("+a.group+")",populate:function(e,t,n){var i=r(n,1),o=i[0];t.group="*"===o?o:o+"s"}},{name:"state",query:!0,regex:o,populate:function(e,t,n){var i=r(n,1),o=i[0];t.colonSelectors.push(o)}},{name:"id",query:!0,regex:"\\#("+a.id+")",populate:function(e,t,n){var i=r(n,1),o=i[0];t.ids.push(l(o))}},{name:"className",query:!0,regex:"\\.("+a.className+")",populate:function(e,t,n){var i=r(n,1),o=i[0];t.classes.push(l(o))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+a.variable+")\\s*\\]",populate:function(e,t,n){var i=r(n,1),o=i[0];t.data.push({field:l(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+a.variable+")\\s*("+a.comparatorOp+")\\s*("+a.value+")\\s*\\]",populate:function(e,t,n){var i=r(n,3),o=i[0],s=i[1],u=i[2],c=null!=new RegExp("^"+a.string+"$").exec(u);u=c?u.substring(1,u.length-1):parseFloat(u),t.data.push({field:l(o),operator:s,value:u})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+a.boolOp+")\\s*("+a.variable+")\\s*\\]",populate:function(e,t,n){var i=r(n,2),o=i[0],a=i[1];t.data.push({field:l(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+a.meta+")\\s*("+a.comparatorOp+")\\s*("+a.number+")\\s*\\]\\]",populate:function(e,t,n){var i=r(n,3),o=i[0],a=i[1],s=i[2];t.meta.push({field:l(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:a.separator,populate:function(e){var t=e[e.length++]=u();return e.currentSubject=null,t}},{name:"directedEdge",separator:!0,regex:a.directedEdge,populate:function(e,t){var n=u(),r=t,i=u();return n.group="edges",n.target=i,n.source=r,n.subject=e.currentSubject,c(e,t,n),i}},{name:"undirectedEdge",separator:!0,regex:a.undirectedEdge,populate:function(e,t){var n=u(),r=t,i=u();return n.group="edges",n.connectedNodes=[r,i],n.subject=e.currentSubject,c(e,t,n),i}},{name:"child",separator:!0,regex:a.child,populate:function(e,t){var n=u();return n.parent=t,n.subject=e.currentSubject,c(e,t,n),n}},{name:"descendant",separator:!0,regex:a.descendant,populate:function(e,t){var n=u();return n.ancestor=t,n.subject=e.currentSubject,c(e,t,n),n}},{name:"subject",modifier:!0,regex:a.subject,populate:function(e,t){return null!=e.currentSubject&&t.subject!=t?(s.error("Redefinition of subject in selector `"+e.toString()+"`"),!1):(e.currentSubject=t,t.subject=t,void(e[e.length-1].subject=t))}}];h.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)}),e.exports=h},function(e,t,n){"use strict";var r=n(1),i={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:r.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};i.variable="(?:[\\w-]|(?:\\\\"+i.metaChar+"))+",i.value=i.string+"|"+i.number,i.className=i.variable,i.id=i.variable,function(){var e=void 0,t=void 0,n=void 0;for(e=i.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],i.comparatorOp+="|@"+t;for(e=i.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],t.indexOf("!")>=0||"="!==t&&(i.comparatorOp+="|\\!"+t)}(),e.exports=i},function(e,t,n){"use strict";var r=n(15),i=r.stateSelectorMatches,o=n(0),a=function(e,t){for(var n=!0,r=0;r<e[t.name].length;r++){var i=e[t.name][r],a=i.operator,s=i.value,u=i.field,l=void 0,c=t.fieldValue(u);if(null!=a&&null!=s){var h=o.string(c)||o.number(c)?""+c:"",f=""+s,d=!1;a.indexOf("@")>=0&&(h=h.toLowerCase(),f=f.toLowerCase(),a=a.replace("@",""),d=!0);var p=!1;a.indexOf("!")>=0&&(a=a.replace("!",""),p=!0),d&&(s=f.toLowerCase(),c=h.toLowerCase());var v=!1;switch(a){case"*=":l=h.indexOf(f)>=0;break;case"$=":l=h.indexOf(f,h.length-f.length)>=0;break;case"^=":l=0===h.indexOf(f);break;case"=":l=c===s;break;case">":v=!0,l=c>s;break;case">=":v=!0,l=c>=s;break;case"<":v=!0,l=c<s;break;case"<=":v=!0,l=c<=s;break;default:l=!1}!p||null==c&&v||(l=!l)}else if(null!=a)switch(a){case"?":l=!!c;break;case"!":l=!c;break;case"^":l=void 0===c}else l=void 0!==c;if(!l){n=!1;break}}return n},s=function(e,t,n){if(null!=e){var r=!1;if(!t)return!1;n=n();for(var i=0;i<n.length;i++)if(u(e,n[i])){r=!0;break}return r}return!0},u=function(e,t){if(e.groupOnly)return"*"===e.group||e.group===t.group();if(null!=e.group&&"*"!=e.group&&e.group!=t.group())return!1;var n=t.cy(),r=void 0,o=!0;for(r=0;r<e.colonSelectors.length;r++){var u=e.colonSelectors[r];if(o=i(u,t),!o)break}if(!o)return!1;var l=!0;for(r=0;r<e.ids.length;r++){var c=e.ids[r],h=t.id();if(l=l&&c==h,!l)break}if(!l)return!1;var f=!0;for(r=0;r<e.classes.length;r++){var d=e.classes[r];if(f=f&&t.hasClass(d),!f)break}if(!f)return!1;var p=a(e,{name:"data",fieldValue:function(e){return t.data(e)}});if(!p)return!1;var v=a(e,{name:"meta",fieldValue:function(e){return t[e]()}});if(!v)return!1;if(null!=e.collection){var g=e.collection.hasElementWithId(t.id());if(!g)return!1}if(null!=e.filter&&t.collection().some(e.filter))return!1;var y=n.hasCompoundNodes(),m=function(){return t.source()},b=function(){return t.target()};if(!s(e.parent,y,function(){return t.parent()}))return!1;if(!s(e.ancestor,y,function(){return t.parents()}))return!1;if(!s(e.child,y,function(){return t.children()}))return!1;if(!s(e.descendant,y,function(){return t.descendants()}))return!1;if(!s(e.source,!0,m))return!1;if(!s(e.target,!0,b))return!1;if(e.connectedNodes){var x=e.connectedNodes[0],w=e.connectedNodes[1];if(s(x,!0,m)&&s(w,!0,b));else if(!s(x,!0,b)||!s(w,!0,m))return!1}return!0},l=function(e){var t=this,n=e.cy();if(t.invalid())return n.collection();if(1===t.length&&1===t[0].length&&1===t[0].ids.length)return e.getElementById(t[0].ids[0]).collection();var r=function(e){for(var n=0;n<t.length;n++){var r=t[n];if(u(r,e))return!0}return!1};null==t.text()&&(r=function(){return!0});var i=e.filter(r);return i},c=function(e){var t=this;if(t.invalid())return!1;for(var n=0;n<t.length;n++){var r=t[n];if(u(r,e))return!0}return!1};e.exports={matches:c,filter:l
}},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=[],o=new s,a=e.cy(),u=a.hasCompoundNodes(),l=0;l<e.length;l++){var c=e[l];n?i.push(c):u&&r(i,o,c)}for(;i.length>0;){var h=i.shift();t(h),o.add(h.id()),u&&r(i,o,h)}return e}function i(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];t.has(o.id())||e.push(o)}}function o(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function a(e,t,n){o(e,t,n),i(e,t,n)}var s=n(8),u={parent:function l(e){var t=[];if(1===this.length){var l=this[0]._private.parent;if(l)return l}for(var n=0;n<this.length;n++){var r=this[n],i=r._private.parent;i&&t.push(i)}return this.spawn(t,{unique:!0}).filter(e)},parents:function c(e){for(var c=[],t=this.parent();t.nonempty();){for(var n=0;n<t.length;n++){var r=t[n];c.push(r)}t=t.parent()}return this.spawn(c,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t=void 0,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:function h(e){for(var h=[],t=0;t<this.length;t++){var n=this[t];h=h.concat(n._private.children)}return this.spawn(h,{unique:!0}).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];n.push(i),i.children().nonempty()&&t(i.children())}}var n=[];return t(this.children()),this.spawn(n,{unique:!0}).filter(e)}};u.forEachDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,e,t,i)},u.forEachUp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,e,t,o)},u.forEachUpAndDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,e,t,a)},u.ancestors=u.parents,e.exports=u},function(e,t,n){"use strict";var r=n(4),i=void 0,o=void 0;i=o={data:r.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:r.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:r.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:r.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:r.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:r.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},i.attr=i.data,i.removeAttr=i.removeData,e.exports=o},function(e,t,n){"use strict";function r(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!t&&s.isLoop()||(r+=e(i,s))}return r}}}function i(e,t){return function(n){for(var r=void 0,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}var o=n(1),a={};o.extend(a,{degree:r(function(e,t){return t.source().same(t.target())?2:1}),indegree:r(function(e,t){return t.target().same(e)?1:0}),outdegree:r(function(e,t){return t.source().same(e)?1:0})}),o.extend(a,{minDegree:i("degree",function(e,t){return e<t}),maxDegree:i("degree",function(e,t){return e>t}),minIndegree:i("indegree",function(e,t){return e<t}),maxIndegree:i("indegree",function(e,t){return e>t}),minOutdegree:i("outdegree",function(e,t){return e<t}),maxOutdegree:i("outdegree",function(e,t){return e>t})}),o.extend(a,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}}),e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(57),o=n(58),a=n(59),s=n(60);e.exports=r.assign({},i,o,a,s)},function(e,t,n){"use strict";var r=n(4),i=n(0),o=n(2),a=void 0,s=void 0,u=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isParent()&&!r.locked()){var i=r._private.position,o={x:t.x-i.x,y:t.y-i.y};e.children().shift(o)}}};a=s={position:r.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:u,onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}}),silentPosition:r.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!1,validKeys:["x","y"],beforeSet:u,onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}}),positions:function(e,t){if(i.plainObject(e))t?this.silentPosition(e):this.position(e);else if(i.fn(e)){var n=e,r=this.cy();r.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=n(a,o))&&(t?a.silentPosition(s):a.position(s))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t){var n=void 0;if(i.plainObject(e)?n=e:i.string(e)&&i.number(t)&&(n={x:0,y:0},n[e]=t),null!=n)for(var r=0;r<this.length;r++){var o=this[r],a=o.position();o.position({x:a.x+n.x,y:a.y+n.y})}return this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),a=r.zoom(),s=r.pan(),u=i.plainObject(e)?e:void 0,l=void 0!==u||void 0!==t&&i.string(e);if(n&&n.isNode()){if(!l){var c=n.position();return u=o.modelToRenderedPosition(c,a,s),void 0===e?u:u[e]}for(var h=0;h<this.length;h++){var f=this[h];void 0!==t?f.position(e,(t-s[e])/a):void 0!==u&&f.position(o.renderedToModelPosition(u,a,s))}}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),o=i.plainObject(e)?e:void 0,a=void 0!==o||void 0!==t&&i.string(e),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var u=n.position(),l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var f=h?l.position():{x:0,y:0};return o={x:u.x-f.x,y:u.y-f.y},void 0===e?o:o[e]}for(var d=0;d<this.length;d++){var p=this[d],v=s?p.parent():null,g=v&&v.length>0,y=g;g&&(v=v[0]);var m=y?v.position():{x:0,y:0};void 0!==t?p.position(e,t+m[e]):void 0!==o&&p.position({x:o.x+m.x,y:o.y+m.y})}}else if(!a)return;return this}},a.modelPosition=a.point=a.position,a.modelPositions=a.points=a.positions,a.renderedPoint=a.renderedPosition,a.relativePoint=a.relativePosition,e.exports=s},function(e,t,n){"use strict";function r(e){return{includeNodes:o["default"](e.includeNodes,b.includeNodes),includeEdges:o["default"](e.includeEdges,b.includeEdges),includeLabels:o["default"](e.includeLabels,b.includeLabels),includeOverlays:o["default"](e.includeOverlays,b.includeOverlays),useCache:o["default"](e.useCache,b.useCache)}}var i=n(0),o=n(1),a=n(2),s=void 0,u=void 0;s=u={},u.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},u.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){e._private.compoundBoundsClean=!1,e.isParent()&&e.emit("bounds")}),this):this},u.updateCompoundBounds=function(){function e(e){function t(e,t,n){var r=0,i=0,o=t+n;return e>0&&o>0&&(r=t/o*e,i=n/o*e),{biasDiff:r,biasComplementDiff:i}}function r(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}if(e.isParent()){var i=e._private,o=e.children(),a="include"===e.pstyle("compound-sizing-wrt-labels").value,s={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},u=o.boundingBox({includeLabels:a,includeOverlays:!1,useCache:!1}),l=i.position;0!==u.w&&0!==u.h||(u={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue},u.x1=l.x-u.w/2,u.x2=l.x+u.w/2,u.y1=l.y-u.h/2,u.y2=l.y+u.h/2);var c=s.width.left.value;"px"===s.width.left.units&&s.width.val>0&&(c=100*c/s.width.val);var h=s.width.right.value;"px"===s.width.right.units&&s.width.val>0&&(h=100*h/s.width.val);var f=s.height.top.value;"px"===s.height.top.units&&s.height.val>0&&(f=100*f/s.height.val);var d=s.height.bottom.value;"px"===s.height.bottom.units&&s.height.val>0&&(d=100*d/s.height.val);var p=t(s.width.val-u.w,c,h),v=p.biasDiff,g=p.biasComplementDiff,y=t(s.height.val-u.h,f,d),m=y.biasDiff,b=y.biasComplementDiff;i.autoPadding=r(u.w,u.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),i.autoWidth=Math.max(u.w,s.width.val),l.x=(-v+u.x1+u.x2+g)/2,i.autoHeight=Math.max(u.h,s.height.val),l.y=(-m+u.y1+u.y2+b)/2,n.push(e)}}var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(t.batching())return this;for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(e(i),t._private.batchingStyle||(o.compoundBoundsClean=!0))}return this};var l=function(e){return e===1/0||e===-(1/0)?0:e},c=function(e,t,n,r,i){r-t!==0&&i-n!==0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2)},h=function(e,t){return c(e,t.x1,t.y1,t.x2,t.y2)},f=function(e,t,n){return o.getPrefixedProperty(e,t,n)},d=function(e,t,n){if(!t.cy().headless()){var r=t._private,i=r.rstyle,o=i.arrowWidth/2,a=t.pstyle(n+"-arrow-shape").value,s=void 0,u=void 0;"none"!==a&&("source"===n?(s=i.srcX,u=i.srcY):"target"===n?(s=i.tgtX,u=i.tgtY):(s=i.midX,u=i.midY),c(e,s-o,u-o,s+o,u+o))}},p=function(e,t,n){if(!t.cy().headless()){var r=void 0;r=n?n+"-":"";var i=t._private,o=i.rstyle,a=t.pstyle(r+"label").strValue;if(a){var s=t.pstyle("text-halign"),u=t.pstyle("text-valign"),l=f(o,"labelWidth",n),h=f(o,"labelHeight",n),d=f(o,"labelX",n),p=f(o,"labelY",n),v=t.pstyle(r+"text-margin-x").pfValue,g=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),m=t.pstyle(r+"text-rotation"),b=t.pstyle("text-outline-width").pfValue,x=t.pstyle("text-border-width").pfValue,w=x/2,E=t.pstyle("text-background-padding").pfValue,_=h+2*E,S=l+2*E,T=S/2,C=_/2,k=void 0,P=void 0,O=void 0,A=void 0;if(y)k=d-T,P=d+T,O=p-C,A=p+C;else{switch(s.value){case"left":k=d-S,P=d;break;case"center":k=d-T,P=d+T;break;case"right":k=d,P=d+S}switch(u.value){case"top":O=p-_,A=p;break;case"center":O=p-C,A=p+C;break;case"bottom":O=p,A=p+_}}var I=y&&"autorotate"===m.strValue,N=null!=m.pfValue&&0!==m.pfValue;if(I||N){var L=I?f(i.rstyle,"labelAngle",n):m.pfValue,M=Math.cos(L),D=Math.sin(L),R=function(e,t){return e-=d,t-=p,{x:e*M-t*D+d,y:e*D+t*M+p}},B=R(k,O),j=R(k,A),q=R(P,O),z=R(P,A);k=Math.min(B.x,j.x,q.x,z.x),P=Math.max(B.x,j.x,q.x,z.x),O=Math.min(B.y,j.y,q.y,z.y),A=Math.max(B.y,j.y,q.y,z.y)}k+=v-Math.max(b,w),P+=v+Math.max(b,w),O+=g-Math.max(b,w),A+=g+Math.max(b,w),c(e,k,O,P,A)}return e}},v=function(e,t){var n=e._private.cy,r=n.styleEnabled(),i=n.headless(),o={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},s=e._private,u=r?e.pstyle("display").value:"element",h=e.isNode(),f=e.isEdge(),v=void 0,g=void 0,y=void 0,m=void 0,b=void 0,x=void 0,w="none"!==u;if(w){var E=0,_=0;r&&t.includeOverlays&&(E=e.pstyle("overlay-opacity").value,0!==E&&(_=e.pstyle("overlay-padding").value));var S=0,T=0;if(r&&(S=e.pstyle("width").pfValue,T=S/2),h&&t.includeNodes){var C=e.position();b=C.x,x=C.y;var k=e.outerWidth(),P=k/2,O=e.outerHeight(),A=O/2;v=b-P-_,g=b+P+_,y=x-A-_,m=x+A+_,c(o,v,y,g,m)}else if(f&&t.includeEdges){var I=s.rstyle||{};if(r&&!i&&(v=Math.min(I.srcX,I.midX,I.tgtX),g=Math.max(I.srcX,I.midX,I.tgtX),y=Math.min(I.srcY,I.midY,I.tgtY),m=Math.max(I.srcY,I.midY,I.tgtY),v-=T,g+=T,y-=T,m+=T,c(o,v,y,g,m)),r&&!i&&"haystack"===e.pstyle("curve-style").strValue){var N=I.haystackPts||[];if(v=N[0].x,y=N[0].y,g=N[1].x,m=N[1].y,v>g){var L=v;v=g,g=L}if(y>m){var M=y;y=m,m=M}c(o,v-T,y-T,g+T,m+T)}else{for(var D=I.bezierPts||I.linePts||[],R=0;R<D.length;R++){var B=D[R];v=B.x-T,g=B.x+T,y=B.y-T,m=B.y+T,c(o,v,y,g,m)}if(0===D.length){var j=e.source(),q=j.position(),z=e.target(),F=z.position();if(v=q.x,g=F.x,y=q.y,m=F.y,v>g){var V=v;v=g,g=V}if(y>m){var U=y;y=m,m=U}v-=T,g+=T,y-=T,m+=T,c(o,v,y,g,m)}}}if(r&&t.includeEdges&&f&&(d(o,e,"mid-source",t),d(o,e,"mid-target",t),d(o,e,"source",t),d(o,e,"target",t)),r){var X="yes"===e.pstyle("ghost").value;if(X){var Y=e.pstyle("ghost-offset-x").pfValue,W=e.pstyle("ghost-offset-y").pfValue;c(o,o.x1+Y,o.y1+W,o.x2+Y,o.y2+W)}}r&&(v=o.x1,g=o.x2,y=o.y1,m=o.y2,c(o,v-_,y-_,g+_,m+_)),r&&t.includeLabels&&(p(o,e,null,t),f&&(p(o,e,"source",t),p(o,e,"target",t)))}return o.x1=l(o.x1),o.y1=l(o.y1),o.x2=l(o.x2),o.y2=l(o.y2),o.w=l(o.x2-o.x1),o.h=l(o.y2-o.y1),o.w>0&&o.h>0&&w&&a.expandBoundingBox(o,1),o},g=function(e){return e?"t":"f"},y=function(e){var t="";return t+=g(e.incudeNodes),t+=g(e.includeEdges),t+=g(e.includeLabels),t+=g(e.includeOverlays)},m=function(e,t){var n=e._private,r=void 0,i=e.cy().headless(),o=t===b?x:y(t);return t.useCache&&!i&&n.bbCache&&n.bbCache[o]?r=n.bbCache[o]:(r=v(e,t),i||(n.bbCache=n.bbCache||{},n.bbCache[o]=r)),r},b={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},x=y(b);u.boundingBox=function(e){if(1===this.length&&this[0]._private.bbCache&&(void 0===e||void 0===e.useCache||e.useCache===!0))return e=void 0===e?b:r(e),m(this[0],e);var t={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};e=e||o.staticEmptyObject();var n=r(e),i=this,a=i.cy(),s=a.styleEnabled();s&&this.recalculateRenderedStyle(n.useCache),this.updateCompoundBounds();for(var u={},c=0;c<i.length;c++){var f=i[c];if(s&&f.isEdge()&&"bezier"===f.pstyle("curve-style").strValue&&!u[f.id()]){for(var d=f.parallelEdges(),p=0;p<d.length;p++)u[d[p].id()]=!0;d.recalculateRenderedStyle(n.useCache)}h(t,m(f,n))}return t.x1=l(t.x1),t.y1=l(t.y1),t.x2=l(t.x2),t.y2=l(t.y2),t.w=l(t.x2-t.x1),t.h=l(t.y2-t.y1),t},u.boundingBoxAt=function(e){var t=this.nodes();if(i.plainObject(e)){var n=e;e=function(){return n}}for(var r=0;r<t.length;r++){var o=t[r],a=o._private,s=a.position,u=e.call(o,o,r);a.bbAtOldPos={x:s.x,y:s.y},u&&(s.x=u.x,s.y=u.y)}this.emit("dirty"),t.dirtyCompoundBoundsCache().updateCompoundBounds();for(var l=this.boundingBox({useCache:!1}),c=0;c<t.length;c++){var h=t[c],f=h._private,d=h._private.position,p=f.bbAtOldPos;d.x=p.x,d.y=p.y}return t.dirtyCompoundBoundsCache(),this.emit("dirty"),l},s.boundingbox=s.boundingBox,s.renderedBoundingbox=s.renderedBoundingBox,e.exports=u},function(e,t,n){"use strict";var r=n(1),i=void 0,o=void 0;i=o={};var a=function(e){e.uppercaseName=r.capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=r.capitalize(e.outerName),i[e.name]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(!i)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var o=t.pstyle(e.name);switch(o.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return o.pfValue}}},i["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(i){var o=t[e.name](),a=t.pstyle("border-width").pfValue,s=2*t.padding();return o+a+s}return 1}},i["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},i["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};a({name:"width"}),a({name:"height"}),o.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},e.exports=o},function(e,t,n){"use strict";var r=function(e,t){if(e.isEdge())return t(e.renderer())};e.exports={controlPoints:function(){var e=this;return r(this,function(t){return t.getControlPoints(e)})},segmentPoints:function(){var e=this;return r(this,function(t){return t.getSegmentPoints(e)})},sourceEndpoint:function(){var e=this;return r(this,function(t){return t.getSourceEndpoint(e)})},targetEndpoint:function(){var e=this;return r(this,function(t){return t.getTargetEndpoint(e)})},midpoint:function(){var e=this;return r(this,function(t){return t.getEdgeMidpoint(e)})}}},function(e,t,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),u={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(e){return{cy:e.cy(),target:e}},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},l=function(e){return o.string(e)?new s(e):e},c={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new r(a.assign({context:t},u)))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().on(e,l(t),n)}return this},removeListener:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().removeListener(e,l(t),n)}return this},one:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().one(e,l(t),n)}return this},once:function(e,t,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().on(e,l(t),n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify({type:e,eles:this}),this.emit(e,t),this}};i.eventAliasesOn(c),e.exports=c},function(e,t,n){"use strict";var r=n(0),i=n(6),o={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},filter:function(e,t){if(void 0===e)return this;if(r.string(e)||r.elementOrCollection(e))return new i(e).filter(this);if(r.fn(e)){for(var n=this.spawn(),o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u&&n.merge(s)}return n}return this.spawn()},not:function(e){if(e){r.string(e)&&(e=this.filter(e));for(var t=[],n=e._private.map,i=0;i<this.length;i++){var o=this[i],a=n.has(o.id());a||t.push(o)}return this.spawn(t)}return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(r.string(e)){var t=e;return this.filter(t)}for(var n=[],i=this,o=e,a=this.length<e.length,s=a?o._private.map:i._private.map,u=a?i:o,l=0;l<u.length;l++){var c=u[l]._private.data.id,h=s.get(c);h&&n.push(h.ele)}return this.spawn(n)},xor:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=this,o=e,a=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=t.hasElementWithId(o);a||n.push(i)}};return a(i,o),a(o,i),this.spawn(n)},diff:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=[],o=[],a=this,s=e,u=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,s=t.hasElementWithId(a);s?o.push(i):n.push(i)}};return u(a,s,n),u(s,a,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function s(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var a=this._private.map,u=0;u<e.length;u++){var s=!a.has(e[u].id());s&&i.push(e[u])}return this.spawn(i)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&r.string(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}else{var h=o.get(u).index;this[h]=s,o.set(u,{ele:s,index:h})}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,i=r.get(n);if(!i)return this;var o=i.index;this[o]=void 0,r["delete"](n);var a=o===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[o]=u,r.set(l,{ele:u,index:o})}return this.length--,this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&r.string(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=this,i=0;i<r.length;i++)n=e(n,r[i],i,r);return n},max:function u(e,t){for(var u=-(1/0),n=void 0,r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a>u&&(u=a,n=o)}return{value:u,ele:n}},min:function l(e,t){for(var l=1/0,n=void 0,r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a<l&&(l=a,n=o)}return{value:l,ele:n}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter=a.filter,a.complement=a.abscomp=a.absoluteComplement,e.exports=o},function(e,t,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];if(e)return e._private.group}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(17),o=n(1),a={forEach:function(e,t){if(r.fn(e))for(var n=0;n<this.length;n++){var i=this[n],o=t?e.apply(t,[i,n,this]):e(i,n,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!r.fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if("nodes"===n){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:o.MAX_INT-1}var i=t.source,a=t.target,s=i.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}};a.each=a.forEach,e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(5),a=n(2),s={layoutDimensions:function(e){if(e=i.assign({nodeDimensionsIncludeLabels:!0},e),e.nodeDimensionsIncludeLabels){var t=this.boundingBox();return{w:t.w,h:t.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(e,t,n){var s=this.nodes(),u=this.cy(),l=t.eles,c=function(e,t){return e.id()+"$"+t},h=i.memoize(n,c);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(e,t,n){var r={x:t.x1+t.w/2,y:t.y1+t.h/2},i={x:(n.x-r.x)*e,y:(n.y-r.y)*e};return{x:r.x+i.x,y:r.y+i.y}},d=t.spacingFactor&&1!==t.spacingFactor,p=function(){if(!d)return null;for(var e=a.makeBoundingBox(),t=0;t<s.length;t++){var n=s[t],r=h(n,t);a.expandBoundingBoxByPoint(e,r.x,r.y)}return e},v=p(),g=i.memoize(function(e,n){var i=h(e,n),o=e.position();if(r.number(o.x)&&r.number(o.y)||e.silentPosition({x:0,y:0}),d){var a=Math.abs(t.spacingFactor);i=f(a,v,i)}return null!=t.transform&&(i=t.transform(e,i)),i},c);if(t.animate){for(var y=0;y<s.length;y++){var m=s[y],b=g(m,y),x=null==t.animateFilter||t.animateFilter(m,y);if(x){var w=m.animation({position:b,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w),w.play()}else m.position(b)}if(t.fit){var E=u.animation({fit:{boundingBox:l.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(E),E.play()}else if(void 0!==t.zoom&&void 0!==t.pan){var _=u.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_),_.play()}e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),o.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else s.positions(g),t.fit&&u.fit(t.eles,t.padding),null!=t.zoom&&u.zoom(t.zoom),t.pan&&u.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(i.extend({},e,{eles:this}))}};s.createLayout=s.makeLayout=s.layout,e.exports=s},function(e,t,n){"use strict";function r(e,t,n){var r,i=n._private,o=i.styleCache=i.styleCache||{};return null!=(r=o[e])?r:r=o[e]=t(n)}function i(e,t){return function(n){return r(e,t,n)}}function o(e,t){var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return r(e,n,t)}}function a(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!t(o))return!1}return!0}function s(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],o=e.hasCompoundNodes();if(i){var s=i._private;if(!t(i))return!1;if(i.isNode())return!o||a(i,r);var u=s.source,l=s.target;return n(u)&&(!o||a(u,n))&&(u===l||n(l)&&(!o||a(l,n)))}}}var u=n(0),l={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(e){return e._private.styleCache={}};if(e.hasCompoundNodes()){var n=void 0;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(e){t(e),e.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),i=t.style(),o=this;e=!(!e&&void 0!==e),r&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=i.apply(o);return a.dirtyStyleCache(),a.dirtyCompoundBoundsCache(),e?a.emitAndNotify("style"):a.emit("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=!(!e&&void 0!==e),!t.styleEnabled())return this;var r=n.updateMappers(this);return r.dirtyStyleCache(),r.dirtyCompoundBoundsCache(),e?r.emitAndNotify("style"):r.emit("style"),this},parsedStyle:function(e){var t=this[0],n=t.cy();if(n.styleEnabled())return t?t._private.style[e]||n.style().getDefaultProperty(e):void 0},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function v(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,v=n.style();if(u.plainObject(e)){var i=e;v.applyBypass(this,i,r),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(u.string(e)){if(void 0===t){var o=this[0];return o?v.getStylePropertyValue(o,e):void 0}v.applyBypass(this,e,t,r),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(void 0===e){var a=this[0];return a?v.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var s=0;s<i.length;s++){var u=i[s];r.removeBypasses(u,e,n)}}return this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}},c=i("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});l.takesUpSpace=o("takesUpSpace",s({ok:c}));var h=i("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&c(e)}),f=i("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&c(e)});l.interactive=o("interactive",s({ok:h,parentOk:f,edgeOkViaNode:c})),l.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var d=i("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&c(e)}),p=c;l.visible=o("visible",s({ok:d,edgeOkViaNode:p})),l.hidden=function(){var e=this[0];if(e)return!e.visible()},l.bypass=l.css=l.style,l.renderedCss=l.renderedStyle,l.removeBypass=l.removeCss=l.removeStyle,l.pstyle=l.parsedStyle,e.exports=l},function(e,t,n){"use strict";function r(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length){var o=t[0];this.on(e.event,o)}else if(0===t.length){for(var a=0;a<this.length;a++){var s=this[a],u=!e.ableField||s._private[e.ableField],l=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(u=c,!c))return this}u&&(s._private[e.field]=e.value,l&&n.push(s))}var h=this.spawn(n);h.updateStyle(),h.emit(e.event)}return this}}function i(e){o[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},o[e.on]=r({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),o[e.off]=r({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}var o={};i({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(e){
return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),o.deselect=o.unselect,o.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},i({field:"active",on:"activate",off:"unactivate"}),o.inactive=function(){var e=this[0];if(e)return!e._private.active},e.exports=o},function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[e.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(t)}}function i(e){return function(t){var n=[],r=this._private.cy,i=e||{};s.string(t)&&(t=r.$(t));for(var o=0;o<t.length;o++)for(var a=t[o]._private.edges,u=0;u<a.length;u++){var l=a[u],c=l._private.data,h=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),f=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=h||f;if(d){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!h)continue;if(i.thisIsTgt&&!f)continue}n.push(l)}}return this.spawn(n,{unique:!0})}}function o(e){var t={codirected:!1};return e=a.extend({},t,e),function(t){for(var n=[],r=this.edges(),i=e,o=0;o<r.length;o++)for(var a=r[o],s=a._private,u=s.source,l=u._private.data.id,c=s.data.target,h=u._private.edges,f=0;f<h.length;f++){var d=h[f],p=d._private.data,v=p.target,g=p.source,y=v===c&&g===l,m=l===v&&c===g;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(t)}}var a=n(1),s=n(0),u={},l=function(e,t){return function(n,r,i,o){var a=n,u=this,l=void 0;if(null==a?l="null":s.elementOrCollection(a)&&1===a.length&&(l="#"+a.id()),1===u.length&&l){var c=u[0]._private,h=c.traversalCache=c.traversalCache||{},f=h[t]=h[t]||{},d=f[l];return d?d:f[l]=e.call(u,n,r,i,o)}return e.call(u,n,r,i,o)}},c=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),h=l.target();if(e.noIncomingEdges&&h===o&&c!==o||e.noOutgoingEdges&&c===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,{unique:!0}).filter(t)}},h=function(e){return function(t){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),s=0;s<a.length;s++){var u=a[s],l=u.source(),c=u.target();e.outgoing&&l===o?(r.push(u),r.push(c)):e.incoming&&c===o&&(r.push(u),r.push(l))}}return this.spawn(r,{unique:!0}).filter(t)}},f=function(e){return function(t){for(var n=this,r=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],l=u.id();i[l]||(i[l]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(t)}};u.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},a.extend(u,{roots:c({noIncomingEdges:!0}),leaves:c({noOutgoingEdges:!0}),outgoers:l(h({outgoing:!0}),"outgoers"),successors:f({outgoing:!0}),incomers:l(h({incoming:!0}),"incomers"),predecessors:f({incoming:!0})}),a.extend(u,{neighborhood:l(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),u.neighbourhood=u.neighborhood,u.closedNeighbourhood=u.closedNeighborhood,u.openNeighbourhood=u.openNeighborhood,a.extend(u,{source:l(function(e){var t=this[0],n=void 0;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:l(function(e){var t=this[0],n=void 0;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:r({attr:"source"}),targets:r({attr:"target"})}),a.extend(u,{edgesWith:l(i(),"edgesWith"),edgesTo:l(i({thisIsSrc:!0}),"edgesTo")}),a.extend(u,{connectedEdges:l(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];t.push(s)}}return this.spawn(t,{unique:!0}).filter(e)},"connectedEdges"),connectedNodes:l(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},"connectedNodes"),parallelEdges:l(o(),"parallelEdges"),codirectedEdges:l(o({codirected:!0}),"codirectedEdges")}),a.extend(u,{components:function d(){var e=this,t=e.cy(),n=e.spawn(),r=e.nodes().spawnSelf(),d=[],i=function(e,t){n.merge(e),r.unmerge(e),t.merge(e)};if(r.empty())return e.spawn();var o=function(){var n=t.collection();d.push(n);var o=r[0];i(o,n),e.bfs({directed:!1,roots:o,visit:function(e,t,r,o,a){i(e,n)}})};do o();while(r.length>0);return d.map(function(e){var t=e.connectedEdges().stdFilter(function(t){return e.anySame(t.source())&&e.anySame(t.target())});return e.union(t)})}}),e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(7),a=n(14),s={add:function(e){var t=void 0,n=this;if(r.elementOrCollection(e)){var s=e;if(s._private.cy===n)t=s.restore();else{for(var u=[],l=0;l<s.length;l++){var c=s[l];u.push(c.json())}t=new o(n,u)}}else if(r.array(e)){var h=e;t=new o(n,h)}else if(r.plainObject(e)&&(r.array(e.nodes)||r.array(e.edges))){for(var f=e,d=[],p=["nodes","edges"],v=0,g=p.length;v<g;v++){var y=p[v],m=f[y];if(r.array(m))for(var b=0,x=m.length;b<x;b++){var w=i.extend({group:y},m[b]);d.push(w)}}t=new o(n,d)}else{var E=e;t=new a(n,E).collection()}return t},remove:function(e){if(r.elementOrCollection(e));else if(r.string(e)){var t=e;e=this.$(t)}return e.remove()}};e.exports=s},function(e,t,n){"use strict";var r=n(4),i=n(1),o=n(71),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function e(){t._private.animationsRunning&&i.requestAnimationFrame(function(n){o(n,t),e()})}var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var n=t.renderer();n&&n.beforeRender?n.beforeRender(function(e,n){o(n,t)},n.beforeRenderPriorities.animations):e()}}};e.exports=a},function(e,t,n){"use strict";function r(e,t){function n(t,n){var r=t._private,s=r.animation.current,u=r.animation.queue,l=!1;if(!n&&"none"===t.pstyle("display").value){s=s.splice(0,s.length).concat(u.splice(0,u.length));for(var c=0;c<s.length;c++)s[c].stop()}if(0===s.length){var h=u.shift();h&&s.push(h)}for(var f=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n()}e.splice(0,e.length)},d=s.length-1;d>=0;d--){var p=s[d],v=p._private;v.stopped?(s.splice(d,1),v.hooked=!1,v.playing=!1,v.started=!1,f(v.frames)):(v.playing||v.applying)&&(v.playing&&v.applying&&(v.applying=!1),v.started||o(t,p,e,n),i(t,p,e,n),v.applying&&(v.applying=!1),f(v.frames),p.completed()&&(s.splice(d,1),v.hooked=!1,v.playing=!1,v.started=!1,f(v.completes)),l=!0)}return n||0!==s.length||0!==u.length||a.push(t),l}for(var r=t._private.aniEles,a=[],s=!1,u=0;u<r.length;u++){var l=r[u],c=n(l);s=s||c}var h=n(t,!0);(s||h)&&(r.length>0?(r.dirtyCompoundBoundsCache(),t.notify({type:"draw",eles:r})):t.notify({type:"draw"})),r.unmerge(a),t.emit("step")}var i=n(72),o=n(77);e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var u=!r,l=e._private,c=t._private,h=c.easing,f=c.startTime,d=r?e:e.cy(),p=d.style();if(!c.easingImpl)if(null==h)c.easingImpl=o.linear;else{var v=void 0;if(s.string(h)){var g=p.parse("transition-timing-function",h);v=g.value}else v=h;var y=void 0,m=void 0;s.string(v)?(y=v,m=[]):(y=v[1],m=v.slice(2).map(function(e){return+e})),m.length>0?("spring"===y&&m.push(c.duration),c.easingImpl=o[y].apply(null,m)):c.easingImpl=o[y]}var b=c.easingImpl,x=void 0;if(x=0===c.duration?1:(n-f)/c.duration,c.applying&&(x=c.progress),x<0?x=0:x>1&&(x=1),null==c.delay){var w=c.startPosition,E=c.position;if(E&&u&&!e.locked()){var _=e.position();i(w.x,E.x)&&(_.x=a(w.x,E.x,x,b)),i(w.y,E.y)&&(_.y=a(w.y,E.y,x,b)),e.emit("position")}var S=c.startPan,T=c.pan,C=l.pan,k=null!=T&&r;k&&(i(S.x,T.x)&&(C.x=a(S.x,T.x,x,b)),i(S.y,T.y)&&(C.y=a(S.y,T.y,x,b)),e.emit("pan"));var P=c.startZoom,O=c.zoom,A=null!=O&&r;A&&(i(P,O)&&(l.zoom=a(P,O,x,b)),e.emit("zoom")),(k||A)&&e.emit("viewport");var I=c.style;if(I&&I.length>0&&u){for(var N=0;N<I.length;N++){var L=I[N],M=L.name,D=L,R=c.startStyle[M],B=p.properties[R.name],j=a(R,D,x,b,B);p.overrideBypass(e,M,j)}e.emit("style")}}return c.progress=x,x}function i(e,t){return null!=e&&null!=t&&(!(!s.number(e)||!s.number(t))||!(!e||!t))}var o=n(73),a=n(76),s=n(0);e.exports=r},function(e,t,n){"use strict";var r=n(74),i=n(75),o=function(e,t,n,i){var o=r(e,t,n,i);return function(e,t,n){return e+(t-e)*o(n)}},a={linear:function(e,t,n){return e+(t-e)*n},ease:o(.25,.1,.25,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"ease-in-sine":o(.47,0,.745,.715),"ease-out-sine":o(.39,.575,.565,1),"ease-in-out-sine":o(.445,.05,.55,.95),"ease-in-quad":o(.55,.085,.68,.53),"ease-out-quad":o(.25,.46,.45,.94),"ease-in-out-quad":o(.455,.03,.515,.955),"ease-in-cubic":o(.55,.055,.675,.19),"ease-out-cubic":o(.215,.61,.355,1),"ease-in-out-cubic":o(.645,.045,.355,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-quart":o(.165,.84,.44,1),"ease-in-out-quart":o(.77,0,.175,1),"ease-in-quint":o(.755,.05,.855,.06),"ease-out-quint":o(.23,1,.32,1),"ease-in-out-quint":o(.86,0,.07,1),"ease-in-expo":o(.95,.05,.795,.035),"ease-out-expo":o(.19,1,.22,1),"ease-in-out-expo":o(1,0,0,1),"ease-in-circ":o(.6,.04,.98,.335),"ease-out-circ":o(.075,.82,.165,1),"ease-in-out-circ":o(.785,.135,.15,.86),spring:function s(e,t,n){if(0===n)return a.linear;var s=i(e,t,n);return function(e,t,n){return e+(t-e)*s(n)}},"cubic-bezier":o};e.exports=a},function(e,t,n){"use strict";function r(e,t,n,r){function i(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function a(e){return 3*e}function s(e,t,n){return((i(t,n)*e+o(t,n))*e+a(t))*e}function u(e,t,n){return 3*i(t,n)*e*e+2*o(t,n)*e+a(t)}function l(t,r){for(var i=0;i<p;++i){var o=u(r,e,n);if(0===o)return r;var a=s(r,e,n)-t;r-=a/o}return r}function c(){for(var t=0;t<m;++t)E[t]=s(t*b,e,n)}function h(t,r,i){var o=void 0,a=void 0,u=0;do a=r+(i-r)/2,o=s(a,e,n)-t,o>0?i=a:r=a;while(Math.abs(o)>g&&++u<y);return a}function f(t){for(var r=0,i=1,o=m-1;i!==o&&E[i]<=t;++i)r+=b;--i;var a=(t-E[i])/(E[i+1]-E[i]),s=r+a*b,c=u(s,e,n);return c>=v?l(t,s):0===c?s:h(t,r,r+b)}function d(){_=!0,e===t&&n===r||c()}var p=4,v=.001,g=1e-7,y=10,m=11,b=1/(m-1),x="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var w=0;w<4;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var E=x?new Float32Array(m):new Array(m),_=!1,S=function(i){return _||d(),e===t&&n===r?i:0===i?0:1===i?1:s(f(i),t,r)};S.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var T="generateBezier("+[e,t,n,r]+")";return S.toString=function(){return T},S}e.exports=r},function(e,t,n){"use strict";var r=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var o={x:-1,v:0,tension:null,friction:null},a=[0],s=0,u=1e-4,l=.016,c=void 0,h=void 0,f=void 0;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,o.tension=e,o.friction=t,c=null!==i,c?(s=r(e,t),h=s/i*l):h=l;f=n(f||o,h),a.push(1+f.x),s+=16,Math.abs(f.x)>u&&Math.abs(f.v)>u;);return c?function(e){return a[e*(a.length-1)|0]}:s}}();e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i){if(1===r)return n;var o=i(t,n,r);return null==e?o:((e.roundValue||e.color)&&(o=Math.round(o)),void 0!==e.min&&(o=Math.max(o,e.min)),void 0!==e.max&&(o=Math.min(o,e.max)),o)}function i(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function o(e,t,n,o,s){var u=null!=s?s.type:null;n<0?n=0:n>1&&(n=1);var l=i(e,s),c=i(t,s);if(a.number(l)&&a.number(c))return r(u,l,c,n,o);if(a.array(l)&&a.array(c)){for(var h=[],f=0;f<c.length;f++){var d=l[f],p=c[f];if(null!=d&&null!=p){var v=r(u,d,p,n,o);h.push(v)}else h.push(p)}return h}}var a=n(0);e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){var i=!r,o=e,a=t._private,s=r?e:e.cy(),u=s.style();if(i){var l=o.position();a.startPosition=a.startPosition||{x:l.x,y:l.y},a.startStyle=a.startStyle||u.getAnimationStartStyle(o,a.style)}if(r){var c=s._private.pan;a.startPan=a.startPan||{x:c.x,y:c.y},a.startZoom=null!=a.startZoom?a.startZoom:s._private.zoom}a.started=!0,a.startTime=n-a.progress*a.duration}e.exports=r},function(e,t,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),u={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(e){return{cy:e,target:e}},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},l=function(e){return o.string(e)?new s(e):e},c={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new r(a.assign({context:this},u))),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,l(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,l(t),n),this},one:function(e,t,n){return this.emitter().one(e,l(t),n),this},once:function(e,t,n){return this.emitter().one(e,l(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this}};i.eventAliasesOn(c),e.exports=c},function(e,t,n){"use strict";var r={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};r.jpeg=r.jpg,e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(0),o={layout:function a(e){var t=this;if(null==e)return void r.error("Layout options must be specified to make a layout");if(null==e.name)return void r.error("A `name` must be specified to make a layout");var n=e.name,o=t.extension("layout",n);if(null==o)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var s=void 0;s=i.string(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var a=new o(r.extend({},e,{cy:t,eles:s}));return a}};o.createLayout=o.makeLayout=o.layout,e.exports=o},function(e,t,n){"use strict";var r={notify:function(e){var t=this._private;if(t.batchingNotify){var n=t.batchNotifyEles,r=t.batchNotifyTypes;return e.eles&&n.merge(e.eles),void(r.ids[e.type]||(r.push(e.type),r.ids[e.type]=!0))}if(t.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=!!e)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=this.collection(),e.batchNotifyEles=this.collection(),e.batchNotifyTypes=[],e.batchNotifyTypes.ids={}),e.batchCount++,this},endBatch:function(){var e=this._private;return e.batchCount--,0===e.batchCount&&(e.batchingStyle=!1,e.batchStyleEles.updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,eles:e.batchNotifyEles})),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i],a=t.getElementById(i);a.data(o)}})}};e.exports=r},function(e,t,n){"use strict";var r=n(1),i={renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.emit("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);return null==n?void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name):(t._private.renderer=new n(r.extend({},e,{cy:t})),void this.notify({type:"init"}))},destroyRenderer:function(){var e=this;e.notify({type:"destroy"});var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};i.invalidateDimensions=i.resize,e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(7),o={collection:function(e,t){return r.string(e)?this.$(e):r.elementOrCollection(e)?e.collection():r.array(e)?new i(this,e,t):new i(this)},nodes:function a(e){var a=this.$(function(e){return e.isNode()});return e?a.filter(e):a},edges:function s(e){var s=this.$(function(e){return e.isEdge()});return e?s.filter(e):s},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};o.elements=o.filter=o.$,e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(18),o={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return r.stylesheet(e)?t.style=e.generateStyle(this):r.array(e)?t.style=i.fromJson(this,e):r.string(e)?t.style=i.fromString(this,e):t.style=i(this),t.style}};e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a={};a.apply=function(e){var t=this,n=t._private,r=n.cy,i=r.collection();n.newStyle&&(n.contextStyles={},n.propDiffs={},t.cleanElements(e,!0));for(var o=0;o<e.length;o++){var a=e[o],s=t.getContextMeta(a);if(!s.empty){i.merge(a);var u=t.getContextStyle(s),l=t.applyContextStyle(s,u,a);n.newStyle||t.updateTransitions(a,l.diffProps),t.updateStyleHints(a)}}return n.newStyle=!1,i},a.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===e[u],h="t"===t[u],f=c!==h,d=l.mappedProperties.length>0;if(f||d){var p=void 0;f&&d?p=l.properties:f?p=l.properties:d&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var x=n[b],w="t"===t[b];if(w&&(m=null!=x.properties[g.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},a.getContextMeta=function(e){var t=this,n="",r=void 0,i=e._private.styleCxtKey||"";t._private.newStyle&&(i="");for(var o=0;o<t.length;o++){var a=t[o],s=a.selector&&a.selector.matches(e);n+=s?"t":"f"}return r=t.getPropertiesDiff(i,n),e._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:0===r.length}},a.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},o=0;o<n.length;o++){var a=n[o],s="t"===t[o];if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return r[t]=i,i},a.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=t[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,"delete":!0}}if(l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n.pstyle(s),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},a.updateStyleHints=function(e){var t=e._private,n=this;if(!e.removed()){var r=!1;if("nodes"===t.group)for(var i=1;i<=n.pieBackgroundN;i++){var o=e.pstyle("pie-"+i+"-background-size").value;if(o>0){r=!0;break}}t.hasPie=r;var a=e.pstyle("text-transform").strValue,s=e.pstyle("label").strValue,u=e.pstyle("source-label").strValue,l=e.pstyle("target-label").strValue,c=e.pstyle("font-style").strValue,h=e.pstyle("font-size").pfValue+"px",f=e.pstyle("font-family").strValue,d=e.pstyle("font-weight").strValue,p=e.pstyle("text-valign").strValue,v=e.pstyle("text-valign").strValue,g=e.pstyle("text-outline-width").pfValue,y=e.pstyle("text-wrap").strValue,m=e.pstyle("text-max-width").pfValue,b=c+"$"+h+"$"+f+"$"+d+"$"+a+"$"+p+"$"+v+"$"+g+"$"+y+"$"+m;t.labelStyleKey=b,t.sourceLabelKey=b+"$"+u,t.targetLabelKey=b+"$"+l,t.labelKey=b+"$"+s,t.fontKey=c+"$"+d+"$"+h+"$"+f,t.styleKey=Date.now()}},a.applyParsedProperty=function(e,t){var n=this,o=t,a=e._private.style,s=void 0,u=n.types,l=n.properties[o.name].type,c=o.bypass,h=a[o.name],f=h&&h.bypass,d=e._private,p="mapping",v=function(){n.checkZOrderTrigger(e,o.name,h?h.value:null,o.value)};if("curve-style"===t.name&&"haystack"===t.value&&e.isEdge()&&(e.isLoop()||e.source().isParent()||e.target().isParent())&&(o=t=this.parse(t.name,"bezier",c)),o["delete"])return a[o.name]=void 0,v(),!0;if(o.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,v(),!0):(v(),!0);if(o.deleteBypass)return h?!!h.bypass&&(a[o.name]=h.bypassed,v(),!0):(v(),!0);var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case u.mapData:for(var y=o.field.split("."),m=d.data,b=0;b<y.length&&m;b++){var x=y[b];m=m[x]}var w=void 0;if(w=i.number(m)?(m-o.fieldMin)/(o.fieldMax-o.fieldMin):0,w<0?w=0:w>1&&(w=1),l.color){var E=o.valueMin[0],_=o.valueMax[0],S=o.valueMin[1],T=o.valueMax[1],C=o.valueMin[2],k=o.valueMax[2],P=null==o.valueMin[3]?1:o.valueMin[3],O=null==o.valueMax[3]?1:o.valueMax[3],A=[Math.round(E+(_-E)*w),Math.round(S+(T-S)*w),Math.round(C+(k-C)*w),Math.round(P+(O-P)*w)];s={bypass:o.bypass,name:o.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else{if(!l.number)return!1;var I=o.valueMin+(o.valueMax-o.valueMin)*w;s=this.parse(o.name,I,o.bypass,p)}s||(s=this.parse(o.name,h.strValue,o.bypass,p)),s||g(),s.mapping=o,o=s;break;case u.data:var N=o.field.split("."),L=d.data;if(L)for(var M=0;M<N.length;M++){var D=N[M];L=L[D]}if(s=this.parse(o.name,L,o.bypass,p),!s){var R=h?h.strValue:"";s=this.parse(o.name,R,o.bypass,p)}s||g(),s.mapping=o,o=s;break;case u.fn:var B=o.value,j=B(e);s=this.parse(o.name,j,o.bypass,p),s.mapping=o,o=s;break;case void 0:break;default:return!1}return c?(f?o.bypassed=h.bypassed:o.bypassed=h,a[o.name]=o):f?h.bypassed=o:a[o.name]=o,v(),!0},a.cleanElements=function(e,t){for(var n=this,r=n.properties,i=0;i<e.length;i++){var o=e[i];if(t)for(var a=o._private.style,s=0;s<r.length;s++){var u=r[s],l=a[u.name];l&&(l.bypass?l.bypassed=null:a[u.name]=null)}else o._private.style={}}},a.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()},a.updateMappers=function(e){for(var t=this,n=this._private.cy,r=n.collection(),i=0;i<e.length;i++){for(var o=e[i],a=o._private.style,s=!1,u=0;u<t.properties.length;u++){var l=t.properties[u],c=a[l.name];if(c&&c.mapping){var h=c.mapping;this.applyParsedProperty(o,h),s=!0}}s&&(this.updateStyleHints(o),r.merge(o))}return r},a.updateTransitions=function(e,t,n){var r=this,a=e._private,s=e.pstyle("transition-property").value,u=e.pstyle("transition-duration").pfValue,l=e.pstyle("transition-delay").pfValue;if(s.length>0&&u>0){for(var c={},h=!1,f=0;f<s.length;f++){var d=s[f],p=e.pstyle(d),v=t[d];if(v){var g=v.prev,y=g,m=null!=v.next?v.next:p,b=!1,x=void 0,w=1e-6;y&&(i.number(y.pfValue)&&i.number(m.pfValue)?(b=m.pfValue-y.pfValue,x=y.pfValue+w*b):i.number(y.value)&&i.number(m.value)?(b=m.value-y.value,x=y.value+w*b):i.array(y.value)&&i.array(m.value)&&(b=y.value[0]!==m.value[0]||y.value[1]!==m.value[1]||y.value[2]!==m.value[2],x=y.strValue),b&&(c[d]=m.strValue,this.applyBypass(e,d,x),h=!0))}}if(!h)return;a.transitioning=!0,new o(function(t){l>0?e.delayAnimation(l).play().promise().then(t):t()}).then(function(){return e.animation({style:c,duration:u,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,s),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,s),e.emitAndNotify("style"),a.transitioning=!1)},a.checkZOrderTrigger=function(e,t,n,r){var i=this.properties[t];null==i.triggersZOrder||null!=n&&!i.triggersZOrder(n,r)||this._private.cy.notify({type:"zorder",eles:e})},e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o={};o.applyBypass=function(e,t,n,o){var a=this,s=[],u=!0;if("*"===t||"**"===t){if(void 0!==n)for(var l=0;l<a.properties.length;l++){var c=a.properties[l],h=c.name,f=this.parse(h,n,!0);f&&s.push(f)}}else if(r.string(t)){var d=this.parse(t,n,!0);d&&s.push(d)}else{if(!r.plainObject(t))return!1;var p=t;o=n;for(var v=Object.keys(p),g=0;g<v.length;g++){var y=v[g],m=(a.properties[y],p[y]);if(void 0===m&&(m=p[i.dash2camel(y)]),void 0!==m){var b=this.parse(y,m,!0);b&&s.push(b)}}}if(0===s.length)return!1;for(var x=!1,w=0;w<e.length;w++){for(var E=e[w],_={},S=void 0,T=0;T<s.length;T++){var C=s[T];if(o){var k=E.pstyle(C.name);S=_[C.name]={prev:k}}x=this.applyParsedProperty(E,C)||x,o&&(S.next=E.pstyle(C.name))}x&&this.updateStyleHints(E),o&&this.updateTransitions(E,_,u)}return x},o.overrideBypass=function(e,t,n){t=i.camel2dash(t);for(var r=0;r<e.length;r++){var o=e[r],a=o._private.style[t],s=this.properties[t].type,u=s.color,l=s.mutiple;if(a&&a.bypass){var c=null!=a.pfValue?a.pfValue:a.value;a.value=n,null!=a.pfValue&&(a.pfValue=n),u?a.strValue="rgb("+n.join(",")+")":l?a.strValue=n.join(" "):a.strValue=""+n,this.checkZOrderTrigger(o,t,c,n)}else this.applyBypass(o,t,n)}},o.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},o.removeBypasses=function(e,t,n){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a={},s=0;s<t.length;s++){var u=t[s],l=this.properties[u],c=o.pstyle(l.name);if(c&&c.bypass){var h="",f=this.parse(u,h,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,f),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}},e.exports=o},function(e,t,n){"use strict";var r=n(3),i={};i.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},i.containerCss=function(e){var t=this._private.cy,n=t.container();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)},e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(0),o={};o.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},o.getRawStyle=function(e,t){var n=this;if(e=e[0]){for(var i={},o=0;o<n.properties.length;o++){var a=n.properties[o],s=n.getStylePropertyValue(e,a.name,t);null!=s&&(i[a.name]=s,i[r.dash2camel(a.name)]=s)}return i}},o.getIndexedStyle=function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},o.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0]){var i=r.properties[t];i.alias&&(i=i.pointsTo);var o=i.type,a=e.pstyle(i.name),s=e.cy().zoom();if(a){var u=a.units?o.implicitUnits||"px":null,l=u?[].concat(a.pfValue).map(function(e){return e*(n?s:1)+u}).join(" "):a.strValue;return l}}},o.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r],a=o.name,s=e.pstyle(a);void 0!==s&&(s=i.plainObject(s)?this.parse(a,s.strValue):this.parse(a,s)),s&&(n[a]=s)}return n},o.getPropsList=function(e){var t=this,n=[],i=e,o=t.properties;if(i)for(var a=Object.keys(i),s=0;s<a.length;s++){var u=a[s],l=i[u],c=o[u]||o[r.camel2dash(u)],h=this.parse(c.name,l);h&&n.push(h)}return n},e.exports=o},function(e,t,n){"use strict";var r={};r.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);t.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];t.css(u,l)}}return t},r.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},r.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e},e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(6),o={};o.appendFromString=function(e){function t(){s=s.length>u.length?s.substr(u.length):""}function n(){l=l.length>c.length?l.substr(c.length):""}var o=this,a=this,s=""+e,u=void 0,l=void 0,c=void 0;for(s=s.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var h=s.match(/^\s*$/);if(h)break;var f=s.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+s);break}u=f[0];var d=f[1];if("core"!==d){var p=new i(d);if(p._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),t();continue}}var v=f[2],g=!1;l=v;for(var y=[];;){var m=l.match(/^\s*$/);if(m)break;var b=l.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!b){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),g=!0;break}c=b[0];var x=b[1],w=b[2],E=o.properties[x];if(E){var _=a.parse(x,w);_?(y.push({name:x,val:w}),n()):(r.error("Skipping property: Invalid property definition in: "+c),n())}else r.error("Skipping property: Invalid property name in: "+c),n()}if(g){t();break}a.selector(d);for(var S=0;S<y.length;S++){var T=y[S];a.css(T.name,T.val)}t()}return a},o.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o={};!function(){var e=r.regex.number,t=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,a=r.regex.hex3,s=r.regex.hex6,u=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},l=function(r){var i=e+"|\\w+|"+t+"|"+n+"|"+a+"|"+s;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},c=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];o.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontletiant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]
},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","cutrectangle","bottomroundrectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:u("data")},layoutData:{mapping:!0,regex:u("layoutData")},scratch:{mapping:!0,regex:u("scratch")},mapData:{mapping:!0,regex:l("mapData")},mapLayoutData:{mapping:!0,regex:l("mapLayoutData")},mapScratch:{mapping:!0,regex:l("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:c,singleRegexMatchValue:!0},urls:{regexes:c,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-line"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return i.string(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var h={zeroNonZero:function(e,t){return 0===e&&0!==t||0!==e&&0===t},anyDiff:function(e,t){return e!==t}},f=h,d=o.types,p=o.properties=[{name:"label",type:d.text},{name:"text-rotation",type:d.textRotation},{name:"text-margin-x",type:d.bidirectionalSize},{name:"text-margin-y",type:d.bidirectionalSize},{name:"source-label",type:d.text},{name:"source-text-rotation",type:d.textRotation},{name:"source-text-margin-x",type:d.bidirectionalSize},{name:"source-text-margin-y",type:d.bidirectionalSize},{name:"source-text-offset",type:d.size},{name:"target-label",type:d.text},{name:"target-text-rotation",type:d.textRotation},{name:"target-text-margin-x",type:d.bidirectionalSize},{name:"target-text-margin-y",type:d.bidirectionalSize},{name:"target-text-offset",type:d.size},{name:"text-valign",type:d.valign},{name:"text-halign",type:d.halign},{name:"color",type:d.color},{name:"text-outline-color",type:d.color},{name:"text-outline-width",type:d.size},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-opacity",type:d.zeroOneNumber},{name:"text-background-color",type:d.color},{name:"text-background-opacity",type:d.zeroOneNumber},{name:"text-background-padding",type:d.size},{name:"text-border-opacity",type:d.zeroOneNumber},{name:"text-border-color",type:d.color},{name:"text-border-width",type:d.size},{name:"text-border-style",type:d.borderStyle},{name:"text-background-shape",type:d.textBackgroundShape},{name:"text-transform",type:d.textTransform},{name:"text-wrap",type:d.textWrap},{name:"text-max-width",type:d.size},{name:"text-events",type:d.bool},{name:"font-family",type:d.fontFamily},{name:"font-style",type:d.fontStyle},{name:"font-weight",type:d.fontWeight},{name:"font-size",type:d.size},{name:"min-zoomed-font-size",type:d.size},{name:"events",type:d.bool},{name:"display",type:d.display,triggersZOrder:f.anyDiff},{name:"visibility",type:d.visibility,triggersZOrder:f.anyDiff},{name:"opacity",type:d.zeroOneNumber,triggersZOrder:f.zeroNonZero},{name:"z-compound-depth",type:d.zCompoundDepth,triggersZOrder:f.anyDiff},{name:"z-index-compare",type:d.zIndexCompare,triggersZOrder:f.anyDiff},{name:"z-index",type:d.nonNegativeInt,triggersZOrder:f.anyDiff},{name:"overlay-padding",type:d.size},{name:"overlay-color",type:d.color},{name:"overlay-opacity",type:d.zeroOneNumber},{name:"transition-property",type:d.propList},{name:"transition-duration",type:d.time},{name:"transition-delay",type:d.time},{name:"transition-timing-function",type:d.easing},{name:"height",type:d.nodeSize},{name:"width",type:d.nodeSize},{name:"shape",type:d.nodeShape},{name:"shape-polygon-points",type:d.polygonPointList},{name:"background-color",type:d.color},{name:"background-opacity",type:d.zeroOneNumber},{name:"background-blacken",type:d.nOneOneNumber},{name:"padding",type:d.sizeMaybePercent},{name:"padding-relative-to",type:d.paddingRelativeTo},{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size},{name:"border-style",type:d.borderStyle},{name:"background-image",type:d.urls},{name:"background-image-crossorigin",type:d.bgCrossOrigin},{name:"background-image-opacity",type:d.zeroOneNumbers},{name:"background-position-x",type:d.bgPos},{name:"background-position-y",type:d.bgPos},{name:"background-width-relative-to",type:d.bgRelativeTo},{name:"background-height-relative-to",type:d.bgRelativeTo},{name:"background-repeat",type:d.bgRepeat},{name:"background-fit",type:d.bgFit},{name:"background-clip",type:d.bgClip},{name:"background-width",type:d.bgWH},{name:"background-height",type:d.bgWH},{name:"position",type:d.position},{name:"compound-sizing-wrt-labels",type:d.compoundIncludeLabels},{name:"min-width",type:d.size},{name:"min-width-bias-left",type:d.sizeMaybePercent},{name:"min-width-bias-right",type:d.sizeMaybePercent},{name:"min-height",type:d.size},{name:"min-height-bias-top",type:d.sizeMaybePercent},{name:"min-height-bias-bottom",type:d.sizeMaybePercent},{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"curve-style",type:d.curveStyle},{name:"haystack-radius",type:d.zeroOneNumber},{name:"source-endpoint",type:d.edgeEndpoint},{name:"target-endpoint",type:d.edgeEndpoint},{name:"control-point-step-size",type:d.size},{name:"control-point-distances",type:d.bidirectionalSizes},{name:"control-point-weights",type:d.numbers},{name:"segment-distances",type:d.bidirectionalSizes},{name:"segment-weights",type:d.numbers},{name:"edge-distances",type:d.edgeDistances},{name:"arrow-scale",type:d.positiveNumber},{name:"loop-direction",type:d.angle},{name:"loop-sweep",type:d.angle},{name:"source-distance-from-node",type:d.size},{name:"target-distance-from-node",type:d.size},{name:"ghost",type:d.bool},{name:"ghost-offset-x",type:d.bidirectionalSize},{name:"ghost-offset-y",type:d.bidirectionalSize},{name:"ghost-opacity",type:d.zeroOneNumber},{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"active-bg-color",type:d.color},{name:"active-bg-opacity",type:d.zeroOneNumber},{name:"active-bg-size",type:d.size},{name:"outside-texture-bg-color",type:d.color},{name:"outside-texture-bg-opacity",type:d.zeroOneNumber}],v=o.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];o.pieBackgroundN=16,p.push({name:"pie-size",type:d.sizeMaybePercent});for(var g=1;g<=o.pieBackgroundN;g++)p.push({name:"pie-"+g+"-background-color",type:d.color}),p.push({name:"pie-"+g+"-background-size",type:d.percent}),p.push({name:"pie-"+g+"-background-opacity",type:d.zeroOneNumber});var y=o.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:d.arrowShape},{name:"arrow-color",type:d.color},{name:"arrow-fill",type:d.arrowFill}].forEach(function(e){y.forEach(function(t){var n=t+"-"+e.name,r=e.type;p.push({name:n,type:r})})},{}),o.propertyNames=p.map(function(e){return e.name});for(var m=0;m<p.length;m++){var b=p[m];p[b.name]=b}for(var x=0;x<v.length;x++){var w=v[x],E=p[w.pointsTo],_={name:w.name,alias:!0,pointsTo:E};p.push(_),p[w.name]=_}}(),o.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},o.getDefaultProperties=r.memoize(function(){for(var e=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=o.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node"},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return o.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=e[a],u=this.parse(a,s);t[a]=u}}return t}),o.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":parent <-> node").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(2),a={};a.parse=function(e,t,n,o){var a=this;if(i.fn(t))return a.parseImplWarn(e,t,n,o);var s="mapping"===o||o===!0||o===!1||null==o?"dontcare":o,u=[e,t,n,s].join("$"),l=a.propCache=a.propCache||{},c=void 0;return(c=l[u])||(c=l[u]=a.parseImplWarn(e,t,n,o)),(n||"mapping"===o)&&(c=r.copy(c),c&&(c.value=r.copy(c.value))),c},a.parseImplWarn=function(e,t,n,i){var o=this.parseImpl(e,t,n,i);return o||null==t||r.error("The style property `%s: %s` is invalid",e,t),o},a.parseImpl=function(e,t,n,a){var s=this;e=r.camel2dash(e);var u=s.properties[e],l=t,c=s.types;if(!u)return null;if(void 0===t)return null;u.alias&&(u=u.pointsTo,e=u.name);var h=i.string(t);h&&(t=t.trim());var f=u.type;if(!f)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(i.fn(t))return{name:e,value:t,strValue:"fn",mapped:c.fn,bypass:n};var d=void 0,p=void 0;if(!h||a);else{if(d=new RegExp(c.data.regex).exec(t)){if(n)return!1;var v=c.data;return{name:e,value:d,strValue:""+t,mapped:v,field:d[1],bypass:n}}if(p=new RegExp(c.mapData.regex).exec(t)){if(n)return!1;if(f.multiple)return!1;var g=c.mapData;if(!f.color&&!f.number)return!1;var y=this.parse(e,p[4]);if(!y||y.mapped)return!1;var m=this.parse(e,p[5]);if(!m||m.mapped)return!1;if(y.value===m.value)return!1;if(f.color){var b=y.value,x=m.value,w=!(b[0]!==x[0]||b[1]!==x[1]||b[2]!==x[2]||b[3]!==x[3]&&(null!=b[3]&&1!==b[3]||null!=x[3]&&1!==x[3]));if(w)return!1}return{name:e,value:p,strValue:""+t,mapped:g,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:y.value,valueMax:m.value,bypass:n}}}if(f.multiple&&"multiple"!==a){var E=void 0;if(E=h?t.split(/\s+/):i.array(t)?t:[t],f.evenMultiple&&E.length%2!==0)return null;for(var _=[],S=[],T=[],C=!1,k=0;k<E.length;k++){var P=s.parse(e,E[k],n,"multiple");C=C||i.string(P.value),_.push(P.value),T.push(null!=P.pfValue?P.pfValue:P.value),S.push(P.units)}return f.validate&&!f.validate(_,S)?null:f.singleEnum&&C?1===_.length&&i.string(_[0])?{name:e,value:_[0],strValue:_[0],bypass:n}:null:{name:e,value:_,pfValue:T,strValue:_.map(function(e,t){return e+(S[t]||"")}).join(" "),bypass:n,units:S}}var O=function(){for(var r=0;r<f.enums.length;r++){var i=f.enums[r];if(i===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(f.number){var A=void 0,I="px";if(f.units&&(A=f.units),f.implicitUnits&&(I=f.implicitUnits),!f.unitless)if(h){var N="px|em"+(f.allowPercent?"|\\%":"");A&&(N=A);var L=t.match("^("+r.regex.number+")("+N+")?$");L&&(t=L[1],A=L[2]||I)}else A&&!f.implicitUnits||(A=I);if(t=parseFloat(t),isNaN(t)&&void 0===f.enums)return null;if(isNaN(t)&&void 0!==f.enums)return t=l,O();if(f.integer&&!i.integer(t))return null;if(void 0!==f.min&&(t<f.min||f.strictMin&&t===f.min)||void 0!==f.max&&(t>f.max||f.strictMax&&t===f.max))return null;var M={name:e,value:t,strValue:""+t+(A?A:""),units:A,bypass:n};return f.unitless||"px"!==A&&"em"!==A?M.pfValue=t:M.pfValue="px"!==A&&A?this.getEmSizeInPixels()*t:t,"ms"!==A&&"s"!==A||(M.pfValue="ms"===A?t:1e3*t),"deg"!==A&&"rad"!==A||(M.pfValue="rad"===A?t:o.deg2rad(t)),"%"===A&&(M.pfValue=t/100),M}if(f.propList){var D=[],R=""+t;if("none"===R);else{for(var B=R.split(","),j=0;j<B.length;j++){var q=B[j].trim();s.properties[q]&&D.push(q)}if(0===D.length)return null}return{name:e,value:D,strValue:0===D.length?"none":D.join(", "),bypass:n}}if(f.color){var z=r.color2tuple(t);return z?{name:e,value:z,pfValue:z,strValue:""+t,bypass:n}:null}if(f.regex||f.regexes){if(f.enums){var F=O();if(F)return F}for(var V=f.regexes?f.regexes:[f.regex],U=0;U<V.length;U++){var X=new RegExp(V[U]),Y=X.exec(t);if(Y)return{name:e,value:f.singleRegexMatchValue?Y[1]:Y,strValue:""+t,bypass:n}}return null}return f.string?{name:e,value:""+t,strValue:""+t,bypass:n}:f.enums?O():null},e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(2),a={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function s(){var e=arguments,s=this._private.pan,t=void 0,n=void 0,i=void 0,o=void 0,a=void 0;switch(e.length){case 0:return s;case 1:if(r.string(e[0]))return t=e[0],s[t];if(r.plainObject(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,a=i.y,r.number(o)&&(s.x=o),r.number(a)&&(s.y=a),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=e[0],n=e[1],"x"!==t&&"y"!==t||!r.number(n)||(s[t]=n),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0;if(!this._private.panningEnabled)return this;switch(n.length){case 1:r.plainObject(e)&&(s=n[0],u=s.x,l=s.y,r.number(u)&&(i.x+=u),r.number(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=t,"x"!==o&&"y"!==o||!r.number(a)||(i[o]+=a),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,t){if(r.number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n=void 0;if(r.string(e)){var i=e;e=this.$(i)}else if(r.boundingBox(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(e)||(e=this.mutableElements());if(!r.elementOrCollection(e)||!e.empty()){n=n||e.boundingBox();var a=this.width(),s=this.height(),u=void 0;if(t=r.number(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((a-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(r.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(r.number(e)&&(this._private.maxZoom=e),this)},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a=void 0,s=void 0,u=!1;if(t.zoomingEnabled||(u=!0),r.number(e)?s=e:r.plainObject(e)&&(s=e.level,null!=e.position?a=o.modelToRenderedPosition(e.position,i,n):null!=e.renderedPosition&&(a=e.renderedPosition),null==a||t.panningEnabled||(u=!0)),s=s>t.maxZoom?t.maxZoom:s,s=s<t.minZoom?t.minZoom:s,u||!r.number(s)||s===i||null!=a&&(!r.number(a.x)||!r.number(a.y)))return null;if(null!=a){var l=n,c=i,h=s,f={x:-h/c*(a.x-l.x)+a.x,y:-h/c*(a.y-l.y)+a.y};return{zoomed:!0,panned:!0,zoom:h,pan:f}}return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify({type:"viewport"}),this):this},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(r.number(e.zoom)||(n=!1),r.plainObject(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;r.number(l.x)&&(t.pan.x=l.x,s=!1),r.number(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(r.string(e)){var n=e;e=this.mutableElements().filter(n)}else r.elementOrCollection(e)||(e=this.mutableElements());if(0!==e.length){var i=e.boundingBox(),o=this.width(),a=this.height();t=void 0===t?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container;return e.sizeCache=e.sizeCache||(t?function(){var e=i.getComputedStyle(t),n=function(t){return parseFloat(e.getPropertyValue(t))};return{width:t.clientWidth-n("padding-left")-n("padding-right"),height:t.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};a.centre=a.center,a.autolockNodes=a.autolock,a.autoungrabifyNodes=a.autoungrabify,e.exports=a},function(e,t,n){"use strict";function r(e,t,n){var r=n,o=function(n){s.error("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(c.prototype[t])return o(t);c.prototype[t]=n}else if("collection"===e){if(l.prototype[t])return o(t);l.prototype[t]=n}else if("layout"===e){for(var a=function(e){this.options=e,n.call(this,e),f.plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},h=a.prototype=Object.create(n.prototype),v=[],g=0;g<v.length;g++){var y=v[g];h[y]=h[y]||function(){return this}}h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});var m=n.prototype.stop;h.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return m?m.call(this):this.emit("layoutstop"),this},h.destroy||(h.destroy=function(){return this}),h.cy=function(){return this._private.cy};var b=function(e){return e._private.cy};s.assign(h,{createEmitter:function(){return this._private.emitter=new d({eventFields:function(e){return{layout:e,cy:b(e),target:e}},bubble:function(){return!0},parent:function(e){return b(e)},context:this}),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),u.eventAliasesOn(h),r=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var x=i("renderer","base"),w=x.prototype,E=n,_=n.prototype,S=function(){x.apply(this,arguments),E.apply(this,arguments)},T=S.prototype;for(var C in w){var k=w[C],P=null!=_[C];if(P)return o(C);T[C]=k}for(var O in _)T[O]=_[O];w.clientFunctions.forEach(function(e){T[e]=T[e]||function(){s.error("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=S}return s.setMap({map:p,keys:[e,t],value:r})}function i(e,t){return s.getMap({map:p,keys:[e,t]})}function o(e,t,n,r,i){return s.setMap({map:v,keys:[e,t,n,r],value:i})}function a(e,t,n,r){return s.getMap({map:v,keys:[e,t,n,r]})}var s=n(1),u=n(4),l=n(7),c=n(12),h=n(95),f=n(0),d=n(11),p={},v={},g=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?a.apply(null,arguments):5===arguments.length?o.apply(null,arguments):void s.error("Invalid extension access syntax")};c.prototype.extension=g,h.forEach(function(e){e.extensions.forEach(function(t){r(e.type,t.name,t.impl)})}),e.exports=g},function(e,t,n){"use strict";e.exports=[{type:"layout",extensions:n(96)},{type:"renderer",extensions:n(105)}]},function(e,t,n){"use strict";e.exports=[{name:"breadthfirst",impl:n(97)},{name:"circle",impl:n(98)},{name:"concentric",impl:n(99)},{name:"cose",impl:n(100)},{name:"grid",impl:n(101)},{name:"null",impl:n(102)},{name:"preset",impl:n(103)},{name:"random",impl:n(104)}]},function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=n(1),o=n(2),a=n(0),s={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent"),s=r,u=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l=void 0;if(a.elementOrCollection(t.roots))l=t.roots;else if(a.array(t.roots)){for(var c=[],h=0;h<t.roots.length;h++){var f=t.roots[h],d=n.getElementById(f);c.push(d)}l=n.collection(c)}else if(a.string(t.roots))l=n.$(t.roots);else if(t.directed)l=i.roots();else{for(var p=[],v=i,g=function(){var e=n.collection();r.bfs({roots:v[0],visit:function(t,n,r,i,o){e=e.add(t)},directed:!1}),v=v.not(e),p.push(e)};v.length>0;)g();l=n.collection();for(var y=function(e){var t=p[e],n=t.maxDegree(!1),r=t.filter(function(e){return e.degree(!1)===n});l=l.add(r)},m=0;m<p.length;m++)y(m)}var b=[],x={},w={},E={},_={},S={};s.bfs({roots:l,directed:t.directed,visit:function(e,t,n,r,i){var o=e[0],a=o.id();if(b[i]||(b[i]=[]),b[i].push(o),x[a]=!0,w[a]=i,E[a]=n,_[a]=t,n){var s=n.id(),u=S[s]=S[s]||[];u.push(e)}}});for(var T=[],C=0;C<i.length;C++){var k=i[C];x[k.id()]||T.push(k)}for(var P=3*T.length,O=0;0!==T.length&&O<P;){for(var A=T.shift(),I=A.neighborhood().nodes(),N=!1,L=0;L<I.length;L++){var M=w[I[L].id()];if(void 0!==M){b[M].push(A),N=!0;break}}N||T.push(A),O++}for(;0!==T.length;){var D=T.shift(),R=!1;R||(0===b.length&&b.push([]),b[0].push(D))}var B=function(){for(var e=0;e<b.length;e++)for(var t=b[e],n=0;n<t.length;n++){var r=t[n];null!=r?r._private.scratch.breadthfirst={depth:e,index:n}:(t.splice(n,1),n--)}};B();for(var j=function(e){for(var t=e.connectedEdges(function(t){return t.data("target")===e.id()}),n=e._private.scratch.breadthfirst,r=0,i=void 0,o=0;o<t.length;o++){var a=t[o],s=a.source()[0],u=s._private.scratch.breadthfirst;n.depth<=u.depth&&r<u.depth&&(r=u.depth,i=s)}return i},q=0;q<t.maximalAdjustments;q++){for(var z=b.length,F=[],V=0;V<z;V++)for(var U=b[V],X=U.length,Y=0;Y<X;Y++){var W=U[Y],H=W._private.scratch.breadthfirst,G=j(W);G&&(H.intEle=G,F.push(W))}for(var $=0;$<F.length;$++){var Z=F[$],Q=Z._private.scratch.breadthfirst,K=Q.intEle,J=K._private.scratch.breadthfirst;b[Q.depth][Q.index]=null;for(var ee=J.depth+1;ee>b.length-1;)b.push([]);b[ee].push(Z),Q.depth=ee,Q.index=b[ee].length-1}B()}var te=0;if(t.avoidOverlap)for(var ne=0;ne<i.length;ne++){var re=i[ne],ie=re.layoutDimensions(t),oe=ie.w,ae=ie.h;te=Math.max(te,oe,ae)}for(var se={},ue=function(e){if(se[e.id()])return se[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes().not(":parent").intersection(i),r=0,o=0,a=0;a<n.length;a++){var s=n[a],u=s._private.scratch.breadthfirst,l=u.index,c=u.depth,h=b[c].length;(t>c||0===t)&&(r+=l/h,o++)}return o=Math.max(1,o),r/=o,0===o&&(r=void 0),se[e.id()]=r,r},le=function(e,t){var n=ue(e),r=ue(t);return n-r},ce=0;ce<3;ce++){for(var he=0;he<b.length;he++)b[he]=b[he].sort(le);B()}for(var fe=0,de=0;de<b.length;de++)fe=Math.max(b[de].length,fe);for(var pe={x:u.x1+u.w/2,y:u.x1+u.h/2},ve=function(e,n){var r=e._private.scratch.breadthfirst,i=r.depth,o=r.index,a=b[i].length,s=Math.max(u.w/(a+1),te),l=Math.max(u.h/(b.length+1),te),c=Math.min(u.w/2/b.length,u.h/2/b.length);if(c=Math.max(c,te),t.circle){if(t.circle){var h=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),f=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:pe.x+h*Math.cos(f),y:pe.y+h*Math.sin(f)}}return{x:pe.x+(o+1-(a+1)/2)*s,y:(i+1)*l}}var d={x:pe.x+(o+1-(a+1)/2)*s,y:(i+1)*l};return n?d:d},ge={},ye=b.length-1;ye>=0;ye--)for(var me=b[ye],be=0;be<me.length;be++){var xe=me[be];ge[xe.id()]=ve(xe,ye===b.length-1)}return i.layoutPositions(this,t,function(e){return ge[e.id()]}),this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=n(1),o=n(2),a=n(0),s={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,s=r.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var u=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:u.x1+u.w/2,y:u.y1+u.h/2},c=void 0===t.sweep?2*Math.PI-2*Math.PI/s.length:t.sweep,h=c/Math.max(1,s.length-1),f=void 0,d=0,p=0;p<s.length;p++){var v=s[p],g=v.layoutDimensions(t),y=g.w,m=g.h;d=Math.max(d,y,m)}if(f=a.number(t.radius)?t.radius:s.length<=1?0:Math.min(u.h,u.w)/2-d,s.length>1&&t.avoidOverlap){d*=1.75;var b=Math.cos(h)-Math.cos(0),x=Math.sin(h)-Math.sin(0),w=Math.sqrt(d*d/(b*b+x*x));f=Math.max(w,f)}var E=function(e,n){var r=t.startAngle+n*h*(i?1:-1),o=f*Math.cos(r),a=f*Math.sin(r),s={x:l.x+o,y:l.y+a};return s};return s.layoutPositions(this,t,E),this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=n(1),o=n(2),a={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t;
}};r.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,a=i.nodes().not(":parent"),s=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],c=(t.startAngle,0),h=0;h<a.length;h++){var f=a[h],d=void 0;d=t.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}a.updateStyle();for(var p=0;p<a.length;p++){var v=a[p],g=v.layoutDimensions(t);c=Math.max(c,g.w,g.h)}l.sort(function(e,t){return t.value-e.value});for(var y=t.levelWidth(a),m=[[]],b=m[0],x=0;x<l.length;x++){var w=l[x];if(b.length>0){var E=Math.abs(b[0].value-w.value);E>=y&&(b=[],m.push(b))}b.push(w)}var _=c+t.minNodeSpacing;if(!t.avoidOverlap){var S=m.length>0&&m[0].length>1,T=Math.min(s.w,s.h)/2-_,C=T/(m.length+S?1:0);_=Math.min(_,C)}for(var k=0,P=0;P<m.length;P++){var O=m[P],A=void 0===t.sweep?2*Math.PI-2*Math.PI/O.length:t.sweep,I=O.dTheta=A/Math.max(1,O.length-1);if(O.length>1&&t.avoidOverlap){var N=Math.cos(I)-Math.cos(0),L=Math.sin(I)-Math.sin(0),M=Math.sqrt(_*_/(N*N+L*L));k=Math.max(M,k)}O.r=k,k+=_}if(t.equidistant){for(var D=0,R=0,B=0;B<m.length;B++){var j=m[B],q=j.r-R;D=Math.max(D,q)}R=0;for(var z=0;z<m.length;z++){var F=m[z];0===z&&(R=F.r),F.r=R,R+=D}}for(var V={},U=0;U<m.length;U++)for(var X=m[U],Y=X.dTheta,W=X.r,H=0;H<X.length;H++){var G=X[H],$=t.startAngle+(n?1:-1)*Y*H,Z={x:u.x+W*Math.cos($),y:u.y+W*Math.sin($)};V[G.node.id()]=Z}return a.layoutPositions(this,t,function(e){var t=e.id();return V[t]}),this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=o.extend({},l,e),this.options.layout=this}var i,o=n(1),a=n(2),s=n(0),u=n(5),l={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};r.prototype.run=function(){function e(e){var t={type:"message",message:e};h.trigger(t)}var t=this.options,n=t.cy,r=this,a=this.thread,l=t.weaver?t.weaver.Thread:null,h={listeners:[],on:function(e,t){return this.listeners.push({event:e,callback:t}),this},trigger:function x(e){s.string(e)&&(e={type:e});var t=function(t){return t.event===e.type},x=function(t){t.callback(e)};return this.listeners.filter(t).forEach(x),this},pass:function(e){return this.pass=e,this},run:function(e){var t=this.pass;return new u(function(n){n(e(t))})},stop:function(){return this},stopped:function(){return!0}};a&&!a.stopped()||(a=this.thread=l?new l:h),r.stopped=!1,t.animate!==!0&&t.animate!==!1||r.emit({type:"layoutstart",layout:r}),i=!0===t.debug;var f=c(n,r,t);i&&d(f),t.randomize&&p(f,n);var g=Date.now(),y=!1,m=function(e){e=e||{},y&&!e.next||!e.force&&Date.now()-g<t.animationThreshold||(y=!0,o.requestAnimationFrame(function(){v(f,n,t),!0===t.fit&&n.fit(t.padding),y=!1,e.next&&e.next()}))};a.on("message",function(e){var t=e.message;f.layoutNodes=t,m()}),a.pass({layoutInfo:f,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var n,r=t.layoutInfo,i=t.options,o=!1,a=function(e,t,n){s(e,t),f(e,t),d(e,t),p(e,t),v(e,t)},s=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],s=o+1;s<i;s++){var u=e.layoutNodes[e.idToIndex[r[s]]];l(a,u,e,t)}},u=function(e){return-e+2*e*Math.random()},l=function(e,t,n,r){var i=e.cmptId,o=t.cmptId;if(i===o||n.isCompound){var a=t.positionX-e.positionX,s=t.positionY-e.positionY,l=1;0===a&&0===s&&(a=u(l),s=u(l));var f=c(e,t,a,s);if(f>0)var d=r.nodeOverlap*f,p=Math.sqrt(a*a+s*s),v=d*a/p,g=d*s/p;else var y=h(e,a,s),m=h(t,-1*a,-1*s),b=m.x-y.x,x=m.y-y.y,w=b*b+x*x,p=Math.sqrt(w),d=(e.nodeRepulsion+t.nodeRepulsion)/w,v=d*b/p,g=d*x/p;e.isLocked||(e.offsetX-=v,e.offsetY-=g),t.isLocked||(t.offsetX+=v,t.offsetY+=g)}},c=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},h=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=n/t,u=o/a,l={};return 0===t&&0<n?(l.x=r,l.y=i+o/2,l):0===t&&0>n?(l.x=r,l.y=i+o/2,l):0<t&&-1*u<=s&&s<=u?(l.x=r+a/2,l.y=i+a*n/2/t,l):0>t&&-1*u<=s&&s<=u?(l.x=r-a/2,l.y=i-a*n/2/t,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+o*t/2/n,l.y=i+o/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-o*t/2/n,l.y=i-o/2,l):l},f=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],s=e.layoutNodes[a],u=s.positionX-o.positionX,l=s.positionY-o.positionY;if(0!==u||0!==l){var c=h(o,u,l),f=h(s,-1*u,-1*l),d=f.x-c.x,p=f.y-c.y,v=Math.sqrt(d*d+p*p),g=Math.pow(r.idealLength-v,2)/r.elasticity;if(0!==v)var y=g*d/v,m=g*p/v;else var y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}}},d=function(e,t){for(var n=1,r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],o=i.length;if(0===r)var a=e.clientHeight/2,s=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;c<o;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var f=a-h.positionX,d=s-h.positionY,p=Math.sqrt(f*f+d*d);if(p>n){var v=t.gravity*f/p,g=t.gravity*d/p;h.offsetX+=v,h.offsetY+=g}}}}},p=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var o=n[r++],a=e.idToIndex[o],s=e.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var f=e.layoutNodes[e.idToIndex[u[h]]];f.offsetX+=l,f.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},v=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=g(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,y(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},g=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},y=function E(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?E(r,t):void 0}},m=function(e,t){for(var n=r.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var h=0;h<c.length;h++){var f=c[h];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var d=0,p=0,v=0,g=0,y=Math.sqrt(l)*r.clientWidth/r.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var h=0;h<c.length;h++){var f=c[h];f.isLocked||(f.positionX+=d,f.positionY+=p)}d+=c.w+t.componentSpacing,v+=c.w+t.componentSpacing,g=Math.max(g,c.h),v>y&&(p+=g+t.componentSpacing,d=0,v=0,g=0)}}},b=function(e){return!o&&(a(r,i,e),r.temperature=r.temperature*i.coolingFactor,!(r.temperature<i.minTemp))},x=0;do{for(var w=0;w<i.refresh&&x<i.numIter;){var n=b(x);if(!n)break;w++,x++}i.animate===!0&&e(r.layoutNodes)}while(n&&x+1<i.numIter);return m(r,i),r}).then(function(e){f.layoutNodes=e.layoutNodes,a.stop(),b()});var b=function(){t.animate===!0||t.animate===!1?m({force:!0,next:function(){r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r})}}):t.eles.nodes().layoutPositions(r,t,function(e){var t=f.layoutNodes[f.idToIndex[e.data("id")]];return{x:t.positionX,y:t.positionY}})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],d=0;d<f.length;d++){var p=f[d];l[p.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=i[c],g=v.layoutDimensions(n),y={};y.isLocked=v.locked(),y.id=v.data("id"),y.parentId=v.data("parent"),y.cmptId=l[v.id()],y.children=[],y.positionX=v.position("x"),y.positionY=v.position("y"),y.offsetX=0,y.offsetY=0,y.height=g.w,y.width=g.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(v.style("padding")),y.padRight=parseFloat(v.style("padding")),y.padTop=parseFloat(v.style("padding")),y.padBottom=parseFloat(v.style("padding")),y.nodeRepulsion=s.fn(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=c}for(var m=[],b=0,x=-1,w=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],E=v.parentId;null!=E?o.layoutNodes[o.idToIndex[E]].children.push(v.id):(m[++x]=v.id,w.push(v.id))}for(o.graphSet.push(w);b<=x;){var _=m[b++],S=o.idToIndex[_],p=o.layoutNodes[S],T=p.children;if(T.length>0){o.graphSet.push(T);for(var c=0;c<T.length;c++)m[++x]=T[c]}}for(var c=0;c<o.graphSet.length;c++)for(var C=o.graphSet[c],d=0;d<C.length;d++){var k=o.idToIndex[C[d]];o.indexToGraph[k]=c}for(var c=0;c<o.edgeSize;c++){var P=r[c],O={};O.id=P.data("id"),O.sourceId=P.data("source"),O.targetId=P.data("target");var A=s.fn(n.idealEdgeLength)?n.idealEdgeLength(P):n.idealEdgeLength,I=s.fn(n.edgeElasticity)?n.edgeElasticity(P):n.edgeElasticity,N=o.idToIndex[O.sourceId],L=o.idToIndex[O.targetId],M=o.indexToGraph[N],D=o.indexToGraph[L];if(M!=D){for(var R=h(O.sourceId,O.targetId,o),B=o.graphSet[R],j=0,y=o.layoutNodes[N];-1===B.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],j++;for(y=o.layoutNodes[L];-1===B.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],j++;A*=j*n.nestingFactor}O.idealLength=A,O.elasticity=I,o.layoutEdges.push(O)}return o},h=function(e,t,n){var r=f(e,t,0,n);return 2>r.count?0:r.graph},f=function g(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],u=r.idToIndex[s],l=r.layoutNodes[u].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],h=g(e,t,c,r);if(0!==h.count){if(1!==h.count)return h;if(o++,2===o)break}}}return{count:o,graph:n}},d=function(e){if(i){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],r="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var o=e.graphSet,t=0;t<o.length;t++)console.debug("Set : "+t+": "+o[t].toString());for(var r="IndexToGraph",t=0;t<e.indexToGraph.length;t++)r+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(r),r="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var a=e.layoutEdges[t];r+="\nEdge Index: "+t+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(r),r="nodeSize: "+e.nodeSize,r+="\nedgeSize: "+e.edgeSize,r+="\ntemperature: "+e.temperature,console.debug(r)}},p=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},v=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=e.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[t.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))};e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=n(1),o=n(2),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var a=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)i.layoutPositions(this,t,function(e){return{x:a.x1,y:a.y1}});else{var s=i.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(e){if(null==e)return Math.min(l,c);var t=Math.min(l,c);t==l?l=e:c=e},f=function(e){if(null==e)return Math.max(l,c);var t=Math.max(l,c);t==l?l=e:c=e},d=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=d&&null!=p)l=d,c=p;else if(null!=d&&null==p)l=d,c=Math.ceil(s/l);else if(null==d&&null!=p)c=p,l=Math.ceil(s/c);else if(c*l>s){var v=h(),g=f();(v-1)*g>=s?h(v-1):(g-1)*v>=s&&f(g-1)}else for(;c*l<s;){var y=h(),m=f();(m+1)*y>=s?f(m+1):h(y+1)}var b=a.w/c,x=a.h/l;if(t.condense&&(b=0,x=0),t.avoidOverlap)for(var w=0;w<i.length;w++){var E=i[w],_=E._private.position;null!=_.x&&null!=_.y||(_.x=0,_.y=0);var S=E.layoutDimensions(t),T=t.avoidOverlapPadding,C=S.w+T,k=S.h+T;b=Math.max(b,C),x=Math.max(x,k)}for(var P={},O=function(e,t){return!!P["c-"+e+"-"+t]},A=function(e,t){P["c-"+e+"-"+t]=!0},I=0,N=0,L=function(){N++,N>=c&&(N=0,I++)},M={},D=0;D<i.length;D++){var R=i[D],B=t.position(R);if(B&&(void 0!==B.row||void 0!==B.col)){var j={row:B.row,col:B.col};if(void 0===j.col)for(j.col=0;O(j.row,j.col);)j.col++;else if(void 0===j.row)for(j.row=0;O(j.row,j.col);)j.row++;M[R.id()]=j,A(j.row,j.col)}}var q=function(e,t){var n=void 0,r=void 0;if(e.locked()||e.isParent())return!1;var i=M[e.id()];if(i)n=i.col*b+b/2+a.x1,r=i.row*x+x/2+a.y1;else{for(;O(I,N);)L();n=N*b+b/2+a.x1,r=I*x+x/2+a.y1,A(I,N),L()}return{x:n,y:r}};i.layoutPositions(this,t,q)}return this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=n(1),o={ready:function(){},stop:function(){}};r.prototype.run=function(){var e=this.options,t=e.eles,n=this;e.cy;return n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this},r.prototype.stop=function(){return this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=n(1),o=n(0),a={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};r.prototype.run=function(){function e(e){if(null==t.positions)return null;if(i)return t.positions(e);var n=t.positions[e._private.data.id];return null==n?null:n}var t=this.options,n=t.eles,r=n.nodes(),i=o.fn(t.positions);return r.layoutPositions(this,t,function(t,n){var r=e(t);return!t.locked()&&null!=r&&r}),this},e.exports=r},function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=n(1),o=n(2),a={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};r.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent"),i=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a=function(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,e,a),this},e.exports=r},function(e,t,n){"use strict";e.exports=[{name:"null",impl:n(106)},{name:"base",impl:n(107)},{name:"canvas",impl:n(123)}]},function(e,t,n){"use strict";function r(e){this.options=e,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(3),a=function(e){this.init(e)},s=a,u=s.prototype;u.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],u.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(o){var r=o.document,a=r.head,s="__________cytoscape_stylesheet",u="__________cytoscape_container",l=null!=r.getElementById(s);if(n.className.indexOf(u)<0&&(n.className=(n.className||"")+" "+u),!l){var c=r.createElement("style");c.id=s,c.innerHTML="."+u+" { position: relative; }",a.insertBefore(c,a.children[0])}var h=o.getComputedStyle(n),f=h.getPropertyValue("position");"static"===f&&i.error("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=e.pixelRatio,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},u.notify=function(e){var t,n=this;if(!this.destroyed){t=r.array(e.type)?e.type:[e.type];for(var i={},o=0;o<t.length;o++){var a=t[o];i[a]=!0}if(i.init)return void n.load();if(i.destroy)return void n.destroy();(i.add||i.remove||i.load||i.zorder)&&n.invalidateCachedZSortedEles(),i.viewport&&n.redrawHint("select",!0),(i.load||i.resize)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},u.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(o){}},[n(108),n(109),n(119),n(120),n(121),n(122)].forEach(function(e){i.extend(u,e)}),e.exports=s},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(1),a={};a.arrowShapeWidth=.3,a.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,o,a){var s=i.x-n/2-a,u=i.x+n/2+a,l=i.y-n/2-a,c=i.y+n/2+a,h=s<=e&&e<=u&&l<=t&&t<=c;return h},a=function(e,t,n,r,i){var o=e*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r),s=o*n,u=a*n,l=s+i.x,c=u+i.y;return{x:l,y:c}},s=function(e,t,n,r){for(var i=[],o=0;o<e.length;o+=2){var s=e[o],u=e[o+1];i.push(a(s,u,t,n,r))}return i},u=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},l=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},c=function(a,c){i.string(c)&&(c=e[c]),e[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,i,o,a){var l=u(s(this.points,n+2*a,i,o)),c=r.pointInsidePolygonPoints(e,t,l);return c},roughCollide:n,draw:function(e,n,r,i){var o=s(this.points,n,r,i);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:l},c)};c("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),c("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),c("arrow","triangle"),c("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,r,i,o){var u=s(this.points,n,r,i),l=this.controlPoint,c=a(l[0],l[1],n,r,i);t.arrowShapeImpl(this.name)(e,u,c)},gap:function(e){return.8*l(e)}}),c("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,i,o,a,l){var c=u(s(this.points,n+2*l,i,o)),h=u(s(this.pointsTee,n+2*l,i,o)),f=r.pointInsidePolygonPoints(e,t,c)||r.pointInsidePolygonPoints(e,t,h);return f},draw:function(e,n,r,i,o){var a=s(this.points,n,r,i),u=s(this.pointsTee,n,r,i);t.arrowShapeImpl(this.name)(e,a,u)}}),c("triangle-cross",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e,i=3,o=5;return n[i]=n[i]-r,n[o]=n[o]-r,n},collide:function(e,t,n,i,o,a,l){var c=u(s(this.points,n+2*l,i,o)),h=u(s(this.crossLinePts(n,a),n+2*l,i,o)),f=r.pointInsidePolygonPoints(e,t,c)||r.pointInsidePolygonPoints(e,t,h);return f},draw:function(e,n,r,i,o){var a=s(this.points,n,r,i),u=s(this.crossLinePts(n,o),n,r,i);t.arrowShapeImpl(this.name)(e,a,u)}}),c("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*l(e)}}),c("circle",{radius:.15,collide:function(e,t,n,r,i,o,a){var s=i,u=Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((n+2*a)*this.radius,2);return u},draw:function(e,n,r,i,o){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),c("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),c("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),c("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})},e.exports=a},function(e,t,n){"use strict";var r=n(1),i={};[n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118)].forEach(function(e){r.extend(i,e)}),e.exports=i},function(e,t,n){"use strict";var r=n(3),i=n(2),o=n(1),r=n(3),a={};a.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom(),l=((e-i)/a-s.x)/u,c=((t-o)/a-s.y)/u;return[l,c]},a.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=r.getComputedStyle(e),i=function(e){return parseFloat(n.getPropertyValue(e))},o={left:i("padding-left"),right:i("padding-right"),top:i("padding-top"),bottom:i("padding-bottom")},a={left:i("border-left-width"),right:i("border-right-width"),top:i("border-top-width"),bottom:i("border-bottom-width")},s=e.clientWidth,u=e.clientHeight,l=o.left+o.right,c=o.top+o.bottom,h=a.left+a.right,f=a.top+a.bottom,d=t.width/(s+h),p=s-l,v=u-c,g=(t.width-(l+h)*d,t.height-(c+f)*d,t.left+o.left+a.left),y=t.top+o.top+a.top;return this.containerBB=[g,y,p,v,d]},a.invalidateContainerClientCoordsCache=function(){this.containerBB=null},a.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},a.findNearestElements=function(e,t,n,r){function a(e,t){if(e.isNode()){if(f)return;f=e,g.push(e)}if(e.isEdge()&&(null==t||t<E))if(h){if(h.pstyle("z-index").value===e.pstyle("z-index").value)for(var n=0;n<g.length;n++)if(g[n].isEdge()){g[n]=e,h=e,E=null!=t?t:E;break}}else g.push(e),h=e,E=null!=t?t:E}function s(n){var r=n.outerWidth()+2*x,i=n.outerHeight()+2*x,o=r/2,s=i/2,u=n.position();if(u.x-o<=e&&e<=u.x+o&&u.y-s<=t&&t<=u.y+s){var l=p.nodeShapes[d.getNodeShape(n)];if(l.checkPoint(e,t,0,r,i,u.x,u.y))return a(n,0),!0}}function u(n){var r,o=n._private,u=o.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,h=l/2+b,f=h*h,v=2*h,y=o.source,x=o.target,w=!1;if("segments"===u.edgeType||"straight"===u.edgeType||"haystack"===u.edgeType){for(var E=u.allpts,_=0;_+3<E.length;_+=2)if((w=i.inLineVicinity(e,t,E[_],E[_+1],E[_+2],E[_+3],v))&&f>(r=i.sqdistToFiniteLine(e,t,E[_],E[_+1],E[_+2],E[_+3])))return a(n,r),!0}else if("bezier"===u.edgeType||"multibezier"===u.edgeType||"self"===u.edgeType||"compound"===u.edgeType)for(var E=u.allpts,_=0;_+5<u.allpts.length;_+=4)if((w=i.inBezierVicinity(e,t,E[_],E[_+1],E[_+2],E[_+3],E[_+4],E[_+5],v))&&f>(r=i.sqdistToQuadraticBezier(e,t,E[_],E[_+1],E[_+2],E[_+3],E[_+4],E[_+5])))return a(n,r),!0;for(var y=y||o.source,x=x||o.target,S=d.getArrowWidth(l,c),T=[{name:"source",x:u.arrowStartX,y:u.arrowStartY,angle:u.srcArrowAngle},{name:"target",x:u.arrowEndX,y:u.arrowEndY,angle:u.tgtArrowAngle},{name:"mid-source",x:u.midX,y:u.midY,angle:u.midsrcArrowAngle},{name:"mid-target",x:u.midX,y:u.midY,angle:u.midtgtArrowAngle}],_=0;_<T.length;_++){var C=T[_],k=p.arrowShapes[n.pstyle(C.name+"-arrow-shape").value],P=n.pstyle("width").pfValue;if(k.roughCollide(e,t,S,C.angle,{x:C.x,y:C.y},P,b)&&k.collide(e,t,S,C.angle,{x:C.x,y:C.y},P,b))return a(n),!0}m&&g.length>0&&(s(y),s(x))}function l(e,t,n){return o.getPrefixedProperty(e,t,n)}function c(n,r){var o,s=n._private,u=w;o=r?r+"-":"";var c=n.pstyle(o+"label").value,h="yes"===n.pstyle("text-events").strValue;if(h&&c){var f=s.rstyle,d=n.pstyle("text-border-width").pfValue,p=n.pstyle("text-background-padding").pfValue,v=l(f,"labelWidth",r)+d+2*u+2*p,g=l(f,"labelHeight",r)+d+2*u+2*p,y=l(f,"labelX",r),m=l(f,"labelY",r),b=l(s.rscratch,"labelAngle",r),x=y-v/2,E=y+v/2,_=m-g/2,S=m+g/2;if(b){var T=Math.cos(b),C=Math.sin(b),k=function(e,t){return e-=y,t-=m,{x:e*T-t*C+y,y:e*C+t*T+m}},P=k(x,_),O=k(x,S),A=k(E,_),I=k(E,S),N=[P.x,P.y,A.x,A.y,I.x,I.y,O.x,O.y];if(i.pointInsidePolygonPoints(e,t,N))return a(n),!0}else{var L={w:v,h:g,x1:x,x2:E,y1:_,y2:S};if(i.inBoundingBox(L,e,t))return a(n),!0}}}var h,f,d=this,p=this,v=p.getCachedZSortedEles(),g=[],y=p.cy.zoom(),m=p.cy.hasCompoundNodes(),b=(r?24:8)/y,x=(r?8:2)/y,w=(r?8:2)/y,E=1/0;n&&(v=v.interactive);for(var _=v.length-1;_>=0;_--){var S=v[_];S.isNode()?s(S)||c(S):u(S)||c(S)||c(S,"source")||c(S,"target")}return g},a.getAllInBox=function(e,t,n,r){var o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(e,n),u=Math.max(e,n),l=Math.min(t,r),c=Math.max(t,r);e=s,n=u,t=l,r=c;for(var h=i.makeBoundingBox({x1:e,y1:t,x2:n,y2:r}),f=0;f<o.length;f++){var d=o[f];if(d.isNode()){var p=d,v=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(h,v)&&!i.boundingBoxInBoundingBox(v,h)&&a.push(p)}else{var g=d,y=g._private,m=y.rscratch;if(null!=m.startX&&null!=m.startY&&!i.inBoundingBox(h,m.startX,m.startY))continue;if(null!=m.endX&&null!=m.endY&&!i.inBoundingBox(h,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var b=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,x=!0,w=0;w<b.length;w++)if(!i.pointInBoundingBox(h,b[w])){x=!1;break}x&&a.push(g)}else"haystack"!==m.edgeType&&"straight"!==m.edgeType||a.push(g)}}return a},e.exports=a},function(e,t,n){"use strict";var r=n(2),i={};i.calculateArrowAngles=function(e){var t,n,i,o,a,s,u,l,c=e._private.rscratch,h="haystack"===c.edgeType,f="bezier"===c.edgeType,d="multibezier"===c.edgeType,p="segments"===c.edgeType,v="compound"===c.edgeType,g="self"===c.edgeType;if(h?(i=c.haystackPts[0],o=c.haystackPts[1],a=c.haystackPts[2],s=c.haystackPts[3]):(i=c.arrowStartX,o=c.arrowStartY,a=c.arrowEndX,s=c.arrowEndY),u=c.midX,l=c.midY,p)t=i-c.segpts[0],n=o-c.segpts[1];else if(d||v||g||f){var y=c.allpts,m=r.qbezierAt(y[0],y[2],y[4],.1),b=r.qbezierAt(y[1],y[3],y[5],.1);t=i-m,n=o-b}else t=i-u,n=o-l;c.srcArrowAngle=r.getAngleFromDisp(t,n);var u=c.midX,l=c.midY;if(h&&(u=(i+a)/2,l=(o+s)/2),t=a-i,n=s-o,p){var y=c.allpts;if(y.length/2%2===0){var x=y.length/2,w=x-2;t=y[x]-y[w],n=y[x+1]-y[w+1]}else{var x=y.length/2-1,w=x-2,E=x+2;t=y[x]-y[w],n=y[x+1]-y[w+1]}}else if(d||v||g){var _,S,T,C,y=c.allpts,k=c.ctrlpts;if(k.length/2%2===0){var P=y.length/2-1,O=P+2,A=O+2;_=r.qbezierAt(y[P],y[O],y[A],0),S=r.qbezierAt(y[P+1],y[O+1],y[A+1],0),T=r.qbezierAt(y[P],y[O],y[A],1e-4),C=r.qbezierAt(y[P+1],y[O+1],y[A+1],1e-4)}else{var O=y.length/2-1,P=O-2,A=O+2;_=r.qbezierAt(y[P],y[O],y[A],.4999),S=r.qbezierAt(y[P+1],y[O+1],y[A+1],.4999),T=r.qbezierAt(y[P],y[O],y[A],.5),C=r.qbezierAt(y[P+1],y[O+1],y[A+1],.5)}t=T-_,n=C-S}if(c.midtgtArrowAngle=r.getAngleFromDisp(t,n),c.midDispX=t,c.midDispY=n,t*=-1,n*=-1,p){var y=c.allpts;if(y.length/2%2===0);else{var x=y.length/2-1,E=x+2;t=-(y[E]-y[x]),n=-(y[E+1]-y[x+1])}}if(c.midsrcArrowAngle=r.getAngleFromDisp(t,n),p)t=a-c.segpts[c.segpts.length-2],n=s-c.segpts[c.segpts.length-1];else if(d||v||g||f){var y=c.allpts,I=y.length,m=r.qbezierAt(y[I-6],y[I-4],y[I-2],.9),b=r.qbezierAt(y[I-5],y[I-3],y[I-1],.9);t=a-m,n=s-b}else t=a-u,n=s-l;c.tgtArrowAngle=r.getAngleFromDisp(t,n)},i.getArrowWidth=i.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r?r:(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)},e.exports=i},function(e,t,n){"use strict";function r(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}var i=n(2),o=n(0),a={};a.findEdgeControlPoints=function(e){if(e&&0!==e.length){for(var t,n=this,r=n.cy,a=r.hasCompoundNodes(),s={},u=[],l=[],c=0;c<e.length;c++){var h=e[c],f=h._private,d=f.data,p=h.pstyle("curve-style").value,v="unbundled-bezier"===p||"segments"===p,g="unbundled-bezier"===p||"bezier"===p;if("none"!==h.pstyle("display").value)if("haystack"!==p){var y=d.source,m=d.target;t=y>m?m+"$-$"+y:y+"$-$"+m,v&&(t="unbundled$-$"+d.id);var b=s[t];null==b&&(b=s[t]=[],u.push(t)),b.push(h),v&&(b.hasUnbundled=!0),g&&(b.hasBezier=!0)}else l.push(h)}for(var x,w,E,_,S,T,C,k,P,O,A,I,N=0;N<u.length;N++){t=u[N];var L=s[t];if(L.sort(function(e,t){return e.poolIndex()-t.poolIndex()}),x=L[0]._private.source,w=L[0]._private.target,!L.hasUnbundled&&x.id()>w.id()){var M=x;x=w,w=M}E=x.position(),
_=w.position(),S=x.outerWidth(),T=x.outerHeight(),C=w.outerWidth(),k=w.outerHeight(),P=n.nodeShapes[this.getNodeShape(x)],O=n.nodeShapes[this.getNodeShape(w)],I=!1;for(var h,D,R,B={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0},j=E.x,q=E.y,z=S,F=T,V=_.x,U=_.y,X=C,Y=k,W=L.length,c=0;c<L.length;c++){h=L[c],D=h._private,R=D.rscratch;var H=R.lastEdgeIndex,G=c,$=R.lastNumEdges,p=h.pstyle("curve-style").value,v="unbundled-bezier"===p||"segments"===p,Z=x.id()!==h.source().id(),Q=h.pstyle("control-point-distances"),K=h.pstyle("loop-direction").pfValue,J=h.pstyle("loop-sweep").pfValue,ee=h.pstyle("control-point-weights"),te=Q&&ee?Math.min(Q.value.length,ee.value.length):1,ne=h.pstyle("control-point-step-size").pfValue,re=Q?Q.pfValue[0]:void 0,ie=ee.value[0],oe=h.pstyle("edge-distances").value,ae=h.pstyle("segment-weights"),se=h.pstyle("segment-distances"),ue=Math.min(ae.pfValue.length,se.pfValue.length),le=h.pstyle("source-endpoint").value,ce=h.pstyle("target-endpoint").value,he=h.pstyle("source-arrow-shape").value,fe=h.pstyle("target-arrow-shape").value,de=h.pstyle("arrow-scale").value,pe=h.pstyle("width").pfValue,ve=R.lastSrcCtlPtX,ge=R.lastSrcCtlPtY,ye=R.lastSrcCtlPtW,me=R.lastSrcCtlPtH,be=R.lastTgtCtlPtX,xe=R.lastTgtCtlPtY,we=R.lastTgtCtlPtW,Ee=R.lastTgtCtlPtH,_e=R.lastCurveStyle,Se=p,Te=R.lastCtrlptDists,Ce=Q?Q.strValue:null,ke=R.lastCtrlptWs,Pe=ee.strValue,Oe=R.lastSegmentWs,Ae=ae.strValue,Ie=R.lastSegmentDs,Ne=se.strValue,Le=R.lastStepSize,Me=ne,De=R.lastLoopDir,Re=K,Be=R.lastLoopSwp,je=J,qe=R.lastEdgeDistances,ze=oe,Fe=R.lastSrcEndpt,Ve=le,Ue=R.lastTgtEndpt,Xe=ce,Ye=R.lastSrcArr,We=he,He=R.lastTgtArr,Ge=fe,$e=R.lastLineW,Ze=pe,Qe=R.lastArrScl,Ke=de;I?R.badBezier=!0:R.badBezier=!1;var Je;if(ve===j&&ge===q&&ye===z&&me===F&&be===V&&xe===U&&we===X&&Ee===Y&&_e===Se&&Te===Ce&&ke===Pe&&Oe===Ae&&Ie===Ne&&Le===Me&&De===Re&&Be===je&&qe===ze&&Fe===Ve&&Ue===Xe&&Ye===We&&He===Ge&&$e===Ze&&Qe===Ke&&(H===G&&$===W||v)?Je=!0:(Je=!1,R.lastSrcCtlPtX=j,R.lastSrcCtlPtY=q,R.lastSrcCtlPtW=z,R.lastSrcCtlPtH=F,R.lastTgtCtlPtX=V,R.lastTgtCtlPtY=U,R.lastTgtCtlPtW=X,R.lastTgtCtlPtH=Y,R.lastEdgeIndex=G,R.lastNumEdges=W,R.lastCurveStyle=Se,R.lastCtrlptDists=Ce,R.lastCtrlptWs=Pe,R.lastSegmentDs=Ne,R.lastSegmentWs=Ae,R.lastStepSize=Me,R.lastLoopDir=Re,R.lastLoopSwp=je,R.lastEdgeDistances=ze,R.lastSrcEndpt=Ve,R.lastTgtEndpt=Xe,R.lastSrcArr=We,R.lastTgtArr=Ge,R.lastLineW=Ze,R.lastArrScl=Ke),!Je){if(!L.calculatedIntersection&&x!==w&&(L.hasBezier||L.hasUnbundled)){L.calculatedIntersection=!0;var et=P.intersectLine(E.x,E.y,S,T,_.x,_.y,0);L.srcIntn=et;var tt=O.intersectLine(_.x,_.y,C,k,E.x,E.y,0);L.tgtIntn=tt;var nt={x1:et[0],x2:tt[0],y1:et[1],y2:tt[1]},rt={x1:E.x,x2:_.x,y1:E.y,y2:_.y},it=tt[1]-et[1],ot=tt[0]-et[0],at=Math.sqrt(ot*ot+it*it),st={x:ot,y:it},ut={x:st.x/at,y:st.y/at};A={x:-ut.y,y:ut.x},O.checkPoint(et[0],et[1],0,C,k,_.x,_.y)&&P.checkPoint(tt[0],tt[1],0,S,T,E.x,E.y)&&(A={},I=!0)}if(Z?(R.srcIntn=L.tgtIntn,R.tgtIntn=L.srcIntn):(R.srcIntn=L.srcIntn,R.tgtIntn=L.tgtIntn),x===w){R.edgeType="self";var lt=c,ct=ne;v&&(lt=0,ct=re);var ht=K-Math.PI/2,ft=ht-J/2,dt=ht+J/2,pt=String(K+"_"+J);lt=void 0===B[pt]?B[pt]=0:++B[pt],R.ctrlpts=[E.x+1.4*Math.cos(ft)*ct*(lt/3+1),E.y+1.4*Math.sin(ft)*ct*(lt/3+1),E.x+1.4*Math.cos(dt)*ct*(lt/3+1),E.y+1.4*Math.sin(dt)*ct*(lt/3+1)]}else if(a&&(x.isParent()||x.isChild()||w.isParent()||w.isChild())&&(x.parents().anySame(w)||w.parents().anySame(x))){R.edgeType="compound",R.badBezier=!1;var lt=c,ct=ne;v&&(lt=0,ct=re);var vt=50,gt={x:E.x-S/2,y:E.y-T/2},yt={x:_.x-C/2,y:_.y-k/2},mt={x:Math.min(gt.x,yt.x),y:Math.min(gt.y,yt.y)},bt=.5,xt=Math.max(bt,Math.log(.01*S)),wt=Math.max(bt,Math.log(.01*C));R.ctrlpts=[mt.x,mt.y-(1+Math.pow(vt,1.12)/100)*ct*(lt/3+1)*xt,mt.x-(1+Math.pow(vt,1.12)/100)*ct*(lt/3+1)*wt,mt.y]}else if("segments"===p){R.edgeType="segments",R.segpts=[];for(var Et=0;Et<ue;Et++){var _t=ae.pfValue[Et],St=se.pfValue[Et],Tt=1-_t,Ct=_t,kt="node-position"===oe?rt:nt,Pt={x:kt.x1*Tt+kt.x2*Ct,y:kt.y1*Tt+kt.y2*Ct};R.segpts.push(Pt.x+A.x*St,Pt.y+A.y*St)}}else if(L.length%2!==1||c!==Math.floor(L.length/2)||v){var Ot=v;R.edgeType=Ot?"multibezier":"bezier",R.ctrlpts=[];for(var At=0;At<te;At++){var It,Nt=(.5-L.length/2+c)*ne,Lt=i.signum(Nt);Ot&&(re=Q?Q.pfValue[At]:ne,ie=ee.value[At]),It=v?re:void 0!==re?Lt*re:void 0;var Mt=void 0!==It?It:Nt,Tt=1-ie,Ct=ie;if(Z){var M=Tt;Tt=Ct,Ct=M}var kt="node-position"===oe?rt:nt,Pt={x:kt.x1*Tt+kt.x2*Ct,y:kt.y1*Tt+kt.y2*Ct};R.ctrlpts.push(Pt.x+A.x*Mt,Pt.y+A.y*Mt)}}else R.edgeType="straight";this.findEndpoints(h);var Dt=!o.number(R.startX)||!o.number(R.startY),Rt=!o.number(R.arrowStartX)||!o.number(R.arrowStartY),Bt=!o.number(R.endX)||!o.number(R.endY),jt=!o.number(R.arrowEndX)||!o.number(R.arrowEndY),qt=3,zt=this.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.arrowShapeWidth,Ft=qt*zt;if("bezier"===R.edgeType){var Vt=i.dist({x:R.ctrlpts[0],y:R.ctrlpts[1]},{x:R.startX,y:R.startY}),Ut=Vt<Ft,Xt=i.dist({x:R.ctrlpts[0],y:R.ctrlpts[1]},{x:R.endX,y:R.endY}),Yt=Xt<Ft,Wt=!1;if(Dt||Rt||Ut){Wt=!0;var Ht={x:R.ctrlpts[0]-E.x,y:R.ctrlpts[1]-E.y},Gt=Math.sqrt(Ht.x*Ht.x+Ht.y*Ht.y),$t={x:Ht.x/Gt,y:Ht.y/Gt},Zt=Math.max(S,T),Qt={x:R.ctrlpts[0]+2*$t.x*Zt,y:R.ctrlpts[1]+2*$t.y*Zt},Kt=P.intersectLine(E.x,E.y,S,T,Qt.x,Qt.y,0);Ut?(R.ctrlpts[0]=R.ctrlpts[0]+$t.x*(Ft-Vt),R.ctrlpts[1]=R.ctrlpts[1]+$t.y*(Ft-Vt)):(R.ctrlpts[0]=Kt[0]+$t.x*Ft,R.ctrlpts[1]=Kt[1]+$t.y*Ft)}if(Bt||jt||Yt){Wt=!0;var Ht={x:R.ctrlpts[0]-_.x,y:R.ctrlpts[1]-_.y},Gt=Math.sqrt(Ht.x*Ht.x+Ht.y*Ht.y),$t={x:Ht.x/Gt,y:Ht.y/Gt},Zt=Math.max(S,T),Qt={x:R.ctrlpts[0]+2*$t.x*Zt,y:R.ctrlpts[1]+2*$t.y*Zt},Jt=O.intersectLine(_.x,_.y,C,k,Qt.x,Qt.y,0);Yt?(R.ctrlpts[0]=R.ctrlpts[0]+$t.x*(Ft-Xt),R.ctrlpts[1]=R.ctrlpts[1]+$t.y*(Ft-Xt)):(R.ctrlpts[0]=Jt[0]+$t.x*Ft,R.ctrlpts[1]=Jt[1]+$t.y*Ft)}Wt&&this.findEndpoints(h)}if("multibezier"===R.edgeType||"bezier"===R.edgeType||"self"===R.edgeType||"compound"===R.edgeType){R.allpts=[],R.allpts.push(R.startX,R.startY);for(var At=0;At+1<R.ctrlpts.length;At+=2)R.allpts.push(R.ctrlpts[At],R.ctrlpts[At+1]),At+3<R.ctrlpts.length&&R.allpts.push((R.ctrlpts[At]+R.ctrlpts[At+2])/2,(R.ctrlpts[At+1]+R.ctrlpts[At+3])/2);R.allpts.push(R.endX,R.endY);var en,tn;R.ctrlpts.length/2%2===0?(en=R.allpts.length/2-1,R.midX=R.allpts[en],R.midY=R.allpts[en+1]):(en=R.allpts.length/2-3,tn=.5,R.midX=i.qbezierAt(R.allpts[en],R.allpts[en+2],R.allpts[en+4],tn),R.midY=i.qbezierAt(R.allpts[en+1],R.allpts[en+3],R.allpts[en+5],tn))}else if("straight"===R.edgeType)R.allpts=[R.startX,R.startY,R.endX,R.endY],R.midX=(R.startX+R.endX+R.arrowStartX+R.arrowEndX)/4,R.midY=(R.startY+R.endY+R.arrowStartY+R.arrowEndY)/4;else if("segments"===R.edgeType)if(R.allpts=[],R.allpts.push(R.startX,R.startY),R.allpts.push.apply(R.allpts,R.segpts),R.allpts.push(R.endX,R.endY),R.segpts.length%4===0){var nn=R.segpts.length/2,rn=nn-2;R.midX=(R.segpts[rn]+R.segpts[nn])/2,R.midY=(R.segpts[rn+1]+R.segpts[nn+1])/2}else{var rn=R.segpts.length/2-1;R.midX=R.segpts[rn],R.midY=R.segpts[rn+1]}this.storeEdgeProjections(h),this.calculateArrowAngles(h)}this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}}for(var c=0;c<l.length;c++){var h=l[c],f=h._private,on=f.rscratch,R=on;if(!on.haystack){var an=2*Math.random()*Math.PI;on.source={x:Math.cos(an),y:Math.sin(an)};var an=2*Math.random()*Math.PI;on.target={x:Math.cos(an),y:Math.sin(an)}}var x=f.source,w=f.target,E=x.position(),_=w.position(),S=x.width(),C=w.width(),T=x.height(),k=w.height(),Zt=h.pstyle("haystack-radius").value,sn=Zt/2;R.haystackPts=R.allpts=[R.source.x*S*sn+E.x,R.source.y*T*sn+E.y,R.target.x*C*sn+_.x,R.target.y*k*sn+_.y],R.midX=(R.allpts[0]+R.allpts[2])/2,R.midY=(R.allpts[1]+R.allpts[3])/2,on.edgeType=on.lastCurveStyle="haystack",on.haystack=!0,this.storeEdgeProjections(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}}},a.getSegmentPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("segments"===n)return r(t.segpts)},a.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return r(t.ctrlpts)},a.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return{x:t.midX,y:t.midY}},e.exports=a},function(e,t,n){"use strict";var r=n(2),i=n(0),o={};o.manualEndptToPx=function(e,t){var n=this,r=e.position(),i=e.outerWidth(),o=e.outerHeight();if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*i),"%"===t.units[1]&&(a[1]=a[1]*o),a[0]+=r.x,a[1]+=r.y,a}var s=t.pfValue[0];s=-Math.PI/2+s;var u=2*Math.max(i,o),l=[r.x+Math.cos(s)*u,r.y+Math.sin(s)*u];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,i,o,l[0],l[1],0)},o.findEndpoints=function(e){var t=this,n=void 0,o=e.source()[0],a=e.target()[0],s=o.position(),u=a.position(),l=e.pstyle("target-arrow-shape").value,c=e.pstyle("source-arrow-shape").value,h=e.pstyle("target-distance-from-node").pfValue,f=e.pstyle("source-distance-from-node").pfValue,d=e._private.rscratch,p=d.edgeType,v="self"===p||"compound"===p,g="bezier"===p||"multibezier"===p||v,y="bezier"!==p,m="straight"===p||"segments"===p,b="segments"===p,x=g||y||m,w=e.pstyle("source-endpoint"),E=v?"outside-to-node":w.value,_=e.pstyle("target-endpoint"),S=v?"outside-to-node":_.value;d.srcManEndpt=w,d.tgtManEndpt=_;var T=void 0,C=void 0,k=void 0,P=void 0;if(g){var O=[d.ctrlpts[0],d.ctrlpts[1]],A=y?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:O;T=A,C=O}else if(m){var I=b?d.segpts.slice(0,2):[u.x,u.y],N=b?d.segpts.slice(d.segpts.length-2):[s.x,s.y];T=N,C=I}"inside-to-node"===S?n=[u.x,u.y]:_.units?n=this.manualEndptToPx(a,_):"outside-to-line"===S?n=d.tgtIntn:("outside-to-node"===S?k=T:"outside-to-line"===S&&(k=[s.x,s.y]),n=t.nodeShapes[this.getNodeShape(a)].intersectLine(u.x,u.y,a.outerWidth(),a.outerHeight(),k[0],k[1],0));var L=r.shortenIntersection(n,T,t.arrowShapes[l].spacing(e)+h),M=r.shortenIntersection(n,T,t.arrowShapes[l].gap(e)+h);d.endX=M[0],d.endY=M[1],d.arrowEndX=L[0],d.arrowEndY=L[1],"inside-to-node"===E?n=[s.x,s.y]:w.units?n=this.manualEndptToPx(o,w):"outside-to-line"===E?n=d.srcIntn:("outside-to-node"===E?P=C:"outside-to-line"===E&&(P=[u.x,u.y]),n=t.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),P[0],P[1],0));var D=r.shortenIntersection(n,C,t.arrowShapes[c].spacing(e)+f),R=r.shortenIntersection(n,C,t.arrowShapes[c].gap(e)+f);d.startX=R[0],d.startY=R[1],d.arrowStartX=D[0],d.arrowStartY=D[1],x&&(i.number(d.startX)&&i.number(d.startY)&&i.number(d.endX)&&i.number(d.endY)?d.badLine=!1:d.badLine=!0)},o.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},o.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}},e.exports=o},function(e,t,n){"use strict";function r(e,t,n){for(var r=function(e,t,n,r){return i.qbezierAt(e,t,n,r)},o=t._private,a=o.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var u=e.bezierProjPcts[s];a.push({x:r(n[0],n[2],n[4],u),y:r(n[1],n[3],n[5],u)})}}var i=n(2),o={};o.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,i=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var o=(t.rstyle.bezierPts=[],0);o+5<n.allpts.length;o+=4)r(this,e,n.allpts.slice(o,o+6));else if("segments"===i)for(var a=t.rstyle.linePts=[],o=0;o+1<n.allpts.length;o+=2)a.push({x:n.allpts[o],y:n.allpts[o+1]});else if("haystack"===i){var s=n.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},o.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},e.exports=o},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(1),a={};a.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!i.emptyString(t)){var n,r,o=e._private,a=e.width(),s=e.height(),u=e.padding(),l=e.position(),c=e.pstyle("text-halign").strValue,h=e.pstyle("text-valign").strValue,f=o.rscratch,d=o.rstyle;switch(c){case"left":n=l.x-a/2-u;break;case"right":n=l.x+a/2+u;break;default:n=l.x}switch(h){case"top":r=l.y-s/2-u;break;case"bottom":r=l.y+s/2+u;break;default:r=l.y}f.labelX=n,f.labelY=r,d.labelX=n,d.labelY=r,this.applyLabelDimensions(e)}},a.recalculateEdgeLabelProjections=function(e){var t,n=e._private,i=n.rscratch,a=this,s={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(s.mid||s.source||s.target){t={x:i.midX,y:i.midY};var u=function(e,t,r){o.setPrefixedProperty(n.rscratch,e,t,r),o.setPrefixedProperty(n.rstyle,e,t,r)};u("labelX",null,t.x),u("labelY",null,t.y);var l=function h(){function e(e,t,n,i,o){var a=r.dist(t,n),s=e.segments[e.segments.length-1],u={p0:t,p1:n,t0:i,t1:o,startDist:s?s.startDist+s.length:0,length:a};e.segments.push(u),e.length+=a}if(h.cache)return h.cache;for(var t=[],o=0;o+5<i.allpts.length;o+=4){var s={x:i.allpts[o],y:i.allpts[o+1]},u={x:i.allpts[o+2],y:i.allpts[o+3]},l={x:i.allpts[o+4],y:i.allpts[o+5]};t.push({p0:s,p1:u,p2:l,startDist:0,length:0,segments:[]})}for(var c=n.rstyle.bezierPts,f=a.bezierProjPcts.length,o=0;o<t.length;o++){var d=t[o],p=t[o-1];p&&(d.startDist=p.startDist+p.length),e(d,d.p0,c[o*f],0,a.bezierProjPcts[0]);for(var v=0;v<f-1;v++)e(d,c[o*f+v],c[o*f+v+1],a.bezierProjPcts[v],a.bezierProjPcts[v+1]);e(d,c[o*f+f-1],d.p2,a.bezierProjPcts[f-1],1)}return h.cache=t},c=function(n){var o,a="source"===n;if(s[n]){var c=e.pstyle(n+"-text-offset").pfValue,h=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.atan(r/n)},f=function(e,t,n,i){var o=r.bound(0,i-.001,1),a=r.bound(0,i+.001,1),s=r.qbezierPtAt(e,t,n,o),u=r.qbezierPtAt(e,t,n,a);return h(s,u)};switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var d,p=l(),v=0,g=0,y=0;y<p.length;y++){for(var m=p[a?y:p.length-1-y],b=0;b<m.segments.length;b++){var x=m.segments[a?b:m.segments.length-1-b],w=y===p.length-1&&b===m.segments.length-1;if(v=g,g+=x.length,g>=c||w){d={cp:m,segment:x};break}}if(d)break}var m=d.cp,x=d.segment,E=(c-v)/x.length,_=x.t1-x.t0,S=a?x.t0+_*E:x.t1-_*E;S=r.bound(0,S,1),t=r.qbezierPtAt(m.p0,m.p1,m.p2,S),o=f(m.p0,m.p1,m.p2,S,t);break;case"straight":case"segments":case"haystack":for(var T,C,k,P,O=0,A=i.allpts.length,y=0;y+3<A&&(a?(k={x:i.allpts[y],y:i.allpts[y+1]},P={x:i.allpts[y+2],y:i.allpts[y+3]}):(k={x:i.allpts[A-2-y],y:i.allpts[A-1-y]},P={x:i.allpts[A-4-y],y:i.allpts[A-3-y]}),T=r.dist(k,P),C=O,O+=T,!(O>=c));y+=2);var I=c-C,S=I/T;S=r.bound(0,S,1),t=r.lineAt(k,P,S),o=h(k,P)}u("labelX",n,t.x),u("labelY",n,t.y),u("labelAutoAngle",n,o)}};c("source"),c("target"),this.applyLabelDimensions(e)}},a.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},a.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r);o.setPrefixedProperty(n.rstyle,"labelWidth",t,i.width),o.setPrefixedProperty(n.rscratch,"labelWidth",t,i.width),o.setPrefixedProperty(n.rstyle,"labelHeight",t,i.height),o.setPrefixedProperty(n.rscratch,"labelHeight",t,i.height)},a.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,a=e.pstyle("text-transform").value,s=function(e,r){return r?(o.setPrefixedProperty(n.rscratch,e,t,r),r):o.getPrefixedProperty(n.rscratch,e,t)};"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var u=e.pstyle("text-wrap").value;if("wrap"===u){var l=s("labelKey");if(l&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var c=i.split("\n"),h=e.pstyle("text-max-width").pfValue,f=[],d=0;d<c.length;d++){var p=c[d],v=this.calculateLabelDimensions(e,p,"line="+p),g=v.width;if(g>h){for(var y=p.split(/\s+/),m="",b=0;b<y.length;b++){var x=y[b],w=0===m.length?x:m+" "+x,E=this.calculateLabelDimensions(e,w,"testLine="+w),_=E.width;_<=h?m+=x+" ":(f.push(m),m=x+" ")}m.match(/^\s+$/)||f.push(m)}else f.push(p)}s("labelWrapCachedLines",f),i=s("labelWrapCachedText",f.join("\n")),s("labelWrapKey",l)}else if("ellipsis"===u){for(var h=e.pstyle("text-max-width").pfValue,S="",T="…",C=!1,k=0;k<i.length;k++){var P=this.calculateLabelDimensions(e,S+i[k]+T).width;if(P>h)break;S+=i[k],k===i.length-1&&(C=!0)}return C||(S+=T),S}return i},a.calculateLabelDimensions=function(e,t,n){var r=this,i=e._private.labelStyleKey+"$@$"+t;n&&(i+="$@$"+n);var o=r.labelDimCache||(r.labelDimCache={});if(o[i])return o[i];var a=1,s=e.pstyle("font-style").strValue,u=a*e.pstyle("font-size").pfValue+"px",l=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var f=h.style;return f.fontFamily=l,f.fontStyle=s,f.fontSize=u,f.fontWeight=c,f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none",f.padding="0",f.lineHeight="1","wrap"===e.pstyle("text-wrap").value?f.whiteSpace="pre":f.whiteSpace="normal",h.textContent=t,o[i]={width:Math.ceil(h.clientWidth/a),height:Math.ceil(h.clientHeight/a)},o[i]},a.calculateLabelAngles=function(e){var t=e._private,n=t.rscratch,r=e.isEdge(),i=e.pstyle("text-rotation"),o=i.strValue;"none"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:r&&"autorotate"===o?(n.labelAngle=Math.atan(n.midDispY/n.midDispX),n.sourceLabelAngle=n.sourceLabelAutoAngle,n.targetLabelAngle=n.targetLabelAutoAngle):"autorotate"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=i.pfValue},e.exports=a},function(e,t,n){"use strict";var r={};r.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if(e.isParent())return"rectangle"===n||"roundrectangle"===n||"cutrectangle"===n||"barrel"===n?n:"rectangle";if("polygon"===n){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n},e.exports=r},function(e,t,n){"use strict";var r={};r.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.merge(e);for(var i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.rstyle;r&&(s.clean=!1,a.bbCache=null);var u=s.dirtyEvents=s.dirtyEvents||{length:0};u[n.type]||(u[n.type]=!0,u.length++)}};n.binder(e).on("position.* style.* free.* bounds.*","node",function(e){var t=e.target;r(t,e),r(t.connectedEdges(),e)}).on("add.*","node",function(e){var t=e.target;r(t,e)}).on("background.*","node",function(e){var t=e.target;r(t,e,!1)}).on("add.* style.*","edge",function(e){var t=e.target;r(t,e),r(t.parallelEdges(),e)}).on("remove.*","edge",function(e){for(var t=e.target,n=t.parallelEdges(),i=0;i<n.length;i++){var o=n[i];o.removed()||r(o,e)}}).on("dirty.*","node",function(e){var t=e.target;r(t,e)});var i=function(r){if(r){var i=n.onUpdateEleCalcsFns;if(i)for(var o=0;o<i.length;o++){var a=i[o];a(r,t)}n.recalculateRenderedStyle(t,!1);for(var o=0;o<t.length;o++)t[o]._private.rstyle.dirtyEvents=null;t=e.collection()}};n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},r.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)},r.recalculateRenderedStyle=function(e,t){var n=[],r=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.rstyle;t&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===a.group?r.push(o):n.push(o),s.clean=!0)}for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=a.rstyle,u=o.position();this.recalculateNodeLabelProjection(o),s.nodeX=u.x,s.nodeY=u.y,s.nodeW=o.pstyle("width").pfValue,s.nodeH=o.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var i=0;i<n.length;i++){var o=n[i],a=o._private,s=a.rstyle,l=a.rscratch;this.recalculateEdgeLabelProjections(o),s.srcX=l.arrowStartX,s.srcY=l.arrowStartY,s.tgtX=l.arrowEndX,s.tgtY=l.arrowEndY,s.midX=l.midX,s.midY=l.midY,s.labelAngle=l.labelAngle,s.sourceLabelAngle=l.sourceLabelAngle,s.targetLabelAngle=l.targetLabelAngle}}},e.exports=r},function(e,t,n){"use strict";var r=n(17),i={};i.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):i.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}},i.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},i.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(r),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t},e.exports=i},function(e,t,n){"use strict";var r={};r.getCachedImage=function(e,t,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[e];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[e]=i[e]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var s="data:",u=e.substring(0,s.length).toLowerCase()===s;return u||(a.crossOrigin=t),a.src=e,a},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(2),a=(n(16),{});a.registerBinding=function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,i)},a.binder=function(e){var t=this,n=e===window||e===document||e===document.body||r.domElement(e);if(null==t.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(a){}t.supportsPassiveEvents=i}var s=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),t.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:s,addEventListener:s,addListener:s,bind:s}},a.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},a.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},a.load=function(){var e=this,t=function(t,n,r,o){null==t&&(t=e.cy);for(var a=0;a<n.length;a++){var s=n[a];t.emit(i.extend({originalEvent:r,type:s},o))}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},a=function(t,n){var r=!0;if(e.cy.hasCompoundNodes()&&t&&t.isEdge())for(var i=0;n&&i<n.length;i++){var t=n[i];if(t.isNode()&&t.isParent()){r=!1;break}}else r=!0;return r},s=function(t){var n;if(t.addToList&&e.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var r=0;r<t.addToList.length;r++){var i=t.addToList[r];t.addToList.hasId[i.id()]=!0}}n=t.addToList.hasId}return n||{}},u=function(e){e[0]._private.grabbed=!0},l=function(e){e[0]._private.grabbed=!1},c=function(e){e[0]._private.rscratch.inDragLayer=!0},h=function(e){e[0]._private.rscratch.inDragLayer=!1},f=function(e){e[0]._private.rscratch.isGrabTarget=!0},d=function(e){e[0]._private.rscratch.isGrabTarget=!1},p=function(e,t){var n=s(t);n[e.id()]||(t.addToList.push(e),n[e.id()]=!0,u(e))},v=function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(c),n.connectedEdges().forEach(c)),t.addToList&&n.forEach(function(e){p(e,t)})}},g=function(t,n){n=n||{};var r=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(c),t.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(c)),n.addToList&&t.forEach(function(e){p(e,n)}),v(t,n),b(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},y=g,m=function(t){t&&(t.hasId={},e.getCachedZSortedEles().forEach(function(e){l(e),h(e),d(e)}),e.updateCachedGrabbedEles())},b=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(c),r.forEach(c)),t.addToList&&r.forEach(function(e){p(e,t)})}}},x="undefined"!=typeof MutationObserver;x?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var w=i.debounce(function(){e.cy.resize()},100);x&&(e.styleObserver=new MutationObserver(w),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",w);var E=function(e,t){for(;null!=e;)t(e),e=e.parentNode},_=function(){e.invalidateContainerClientCoordsCache()};E(e.container,function(t){e.registerBinding(t,"transitionend",_),e.registerBinding(t,"animationend",_),e.registerBinding(t,"scroll",_)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var S=function(){return 0!==e.selection[4]},T=function(t){for(var n=e.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=t.touches?t.touches:[t],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=e.container,f=t.target,d=f.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};e.registerBinding(e.container,"mousedown",function(n){if(T(n)){n.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=n.which;var r=e.cy,i=[n.clientX,n.clientY],o=e.projectIntoViewport(i[0],i[1]),a=e.selection,s=e.findNearestElements(o[0],o[1],!0,!1),u=s[0],l=e.dragData.possibleDragElements;e.hoverData.mdownPos=o,e.hoverData.mdownGPos=i;var c=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}})}},e.tapholdDuration)};if(3==n.which){e.hoverData.cxtStarted=!0;var h={originalEvent:n,type:"cxttapstart",position:{x:o[0],y:o[1]}};u?(u.activate(),u.emit(h),e.hoverData.down=u):r.emit(h),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==n.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var d=function(e){return{originalEvent:n,type:e,position:{x:o[0],y:o[1]}}},p=function(e){e.emit(d("grab"))};if(f(u),u.selected()){l=e.dragData.possibleDragElements=[];var v=r.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});g(v,{addToList:l}),u.emit(d("grabon")),v.forEach(p)}else l=e.dragData.possibleDragElements=[],y(u,{addToList:l}),u.emit(d("grabon")).emit(d("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=s,e.hoverData.downTime=(new Date).getTime(),t(u,["mousedown","tapstart","vmousedown"],n,{position:{x:o[0],y:o[1]}}),null==u?(a[4]=1,e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()):u.isEdge()&&(a[4]=1),c()}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1),e.registerBinding(window,"mousemove",function(i){var s=e.hoverData.capture;if(s||T(i)){var u=!1,l=e.cy,c=l.zoom(),h=[i.clientX,i.clientY],f=e.projectIntoViewport(h[0],h[1]),d=e.hoverData.mdownPos,p=e.hoverData.mdownGPos,v=e.selection,y=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(y=e.findNearestElement(f[0],f[1],!0,!1));var b,x=e.hoverData.last,w=e.hoverData.down,E=[f[0]-v[2],f[1]-v[3]],_=e.dragData.possibleDragElements;if(p){var S=h[0]-p[0],C=S*S,k=h[1]-p[1],P=k*k,O=C+P;e.hoverData.isOverThresholdDrag=b=O>=e.desktopTapThreshold2}var A=n(i);b&&(e.hoverData.tapholdCancelled=!0);var I=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(E[0]),t.push(E[1])):(t[0]+=E[0],t[1]+=E[1])};u=!0,t(y,["mousemove","vmousemove","tapdrag"],i,{position:{x:f[0],y:f[1]}});var N=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||l.emit("boxstart"),v[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(b){var L={originalEvent:i,type:"cxtdrag",position:{x:f[0],y:f[1]}};w?w.emit(L):l.emit(L),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&y===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:i,type:"cxtdragout",position:{x:f[0],y:f[1]}}),e.hoverData.cxtOver=y,y&&y.emit({originalEvent:i,type:"cxtdragover",position:{x:f[0],y:f[1]}}))}}else if(e.hoverData.dragging){if(u=!0,l.panningEnabled()&&l.userPanningEnabled()){var M;if(e.hoverData.justStartedPan){var D=e.hoverData.mdownPos;M={x:(f[0]-D[0])*c,y:(f[1]-D[1])*c},e.hoverData.justStartedPan=!1}else M={x:E[0]*c,y:E[1]*c};l.panBy(M),e.hoverData.dragged=!0}f=e.projectIntoViewport(i.clientX,i.clientY)}else if(1!=v[4]||null!=w&&!w.isEdge()){if(w&&w.isEdge()&&w.active()&&w.unactivate(),w&&w.grabbed()||y==x||(x&&t(x,["mouseout","tapdragout"],i,{position:{x:f[0],y:f[1]}}),y&&t(y,["mouseover","tapdragover"],i,{position:{x:f[0],y:f[1]}}),e.hoverData.last=y),w)if(b){if(l.boxSelectionEnabled()&&A)w&&w.grabbed()&&(m(_),w.emit("free")),N();else if(w&&w.grabbed()&&e.nodeIsDraggable(w)){var R=!e.dragData.didDrag;R&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var B=[];e.hoverData.draggingEles||g(l.collection(_),{inDragLayer:!0});for(var j=0;j<_.length;j++){var q=_[j];if(e.nodeIsDraggable(q)&&q.grabbed()){var z=q.position();if(B.push(q),r.number(E[0])&&r.number(E[1])&&(z.x+=E[0],z.y+=E[1],R)){var F=e.hoverData.dragDelta;F&&r.number(F[0])&&r.number(F[1])&&(z.x+=F[0],z.y+=F[1])}}}e.hoverData.draggingEles=!0;var V=l.collection(B);V.dirtyCompoundBoundsCache(),V.emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else I();u=!0}else if(b){if(e.hoverData.dragging||!l.boxSelectionEnabled()||!A&&l.panningEnabled()&&l.userPanningEnabled()){if(!e.hoverData.selecting&&l.panningEnabled()&&l.userPanningEnabled()){var U=a(w,e.hoverData.downs);U&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,v[4]=0,e.data.bgActivePosistion=o.array2point(d),e.redrawHint("select",!0),e.redraw())}}else N();w&&w.isEdge()&&w.active()&&w.unactivate()}return v[2]=f[0],v[3]=f[1],u?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0}},!1),e.registerBinding(window,"mouseup",function(r){var i=e.hoverData.capture;if(i){e.hoverData.capture=!1;var o=e.cy,a=e.projectIntoViewport(r.clientX,r.clientY),s=e.selection,u=e.findNearestElement(a[0],a[1],!0,!1),l=e.dragData.possibleDragElements,c=e.hoverData.down,h=n(r);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,c&&c.unactivate(),3===e.hoverData.which){var f={originalEvent:r,type:"cxttapend",position:{x:a[0],y:a[1]}};if(c?c.emit(f):o.emit(f),!e.hoverData.cxtDragged){var d={originalEvent:r,type:"cxttap",position:{x:a[0],y:a[1]}};c?c.emit(d):o.emit(d)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(null!=c||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(r)||(o.$(function(e){return e.selected()}).unselect(),l.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=l=[]),t(u,["mouseup","tapend","vmouseup"],r,{position:{x:a[0],y:a[1]}}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||t(c,["click","tap","vclick"],r,{position:{x:a[0],y:a[1]}}),u!=c||e.dragData.didDrag||e.hoverData.selecting||null!=u&&u._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||h?u.selected()?u.unselect():u.select():h||(o.$(":selected").unmerge(u).unselect(),u.select())),e.redrawHint("eles",!0)),e.hoverData.selecting){var p=o.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));
e.redrawHint("select",!0),p.length>0&&e.redrawHint("eles",!0),o.emit("boxend");var v=function(e){return e.selectable()&&!e.selected()};"additive"===o.selectionType()?p.emit("box").stdFilter(v).select().emit("boxselect"):(h||o.$(":selected").unmerge(p).unselect(),p.emit("box").stdFilter(v).select().emit("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!s[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var g=c&&c.grabbed();m(l),g&&c.emit("free")}}s[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var C=function(t){if(!e.scrollingPage){var n=e.cy,r=e.projectIntoViewport(t.clientX,t.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||S())return void t.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var o;o=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,o*=e.wheelSensitivity;var a=1===t.deltaMode;a&&(o*=33),n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:i[0],y:i[1]}})}}};e.registerBinding(e.container,"wheel",C,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var k,P,O,A,I,N,L,M,D,R,B,j,q,z,F=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},V=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};e.registerBinding(e.container,"touchstart",z=function(n){if(T(n)){e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.touchData.now,o=e.touchData.earlier;if(n.touches[0]){var a=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(n.touches[1]){var a=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=a[0],i[3]=a[1]}if(n.touches[2]){var a=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=a[0],i[5]=a[1]}if(n.touches[1]){m(e.dragData.touchDragEles);var s=e.findContainerClientCoords();D=s[0],R=s[1],B=s[2],j=s[3],k=n.touches[0].clientX-D,P=n.touches[0].clientY-R,O=n.touches[1].clientX-D,A=n.touches[1].clientY-R,q=0<=k&&k<=B&&0<=O&&O<=B&&0<=P&&P<=j&&0<=A&&A<=j;var u=r.pan(),l=r.zoom();I=F(k,P,O,A),N=V(k,P,O,A),L=[(k+O)/2,(P+A)/2],M=[(L[0]-u.x)/l,(L[1]-u.y)/l];var c=200,h=c*c;if(N<h&&!n.touches[2]){var d=e.findNearestElement(i[0],i[1],!0,!0),p=e.findNearestElement(i[2],i[3],!0,!0);return d&&d.isNode()?(d.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=d):p&&p.isNode()?(p.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=p):r.emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var v=e.findNearestElements(i[0],i[1],!0,!0),b=v[0];if(null!=b&&(b.activate(),e.touchData.start=b,e.touchData.starts=v,e.nodeIsGrabbable(b))){var x=e.dragData.touchDragEles=[],w=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),b.selected()?(w=r.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),g(w,{addToList:x})):y(b,{addToList:x}),f(b);var E=function(e){return{originalEvent:n,type:e,position:{x:i[0],y:i[1]}}};b.emit(E("grabon")),w?w.forEach(function(e){e.emit(E("grab"))}):b.emit(E("grab"))}t(b,["touchstart","tapstart","vmousedown"],n,{position:{x:i[0],y:i[1]}}),null==b&&(e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||e.touchData.selecting||(t(e.touchData.start,["taphold"],n,{position:{x:i[0],y:i[1]}}),e.touchData.start||r.$(":selected").unselect())},e.tapholdDuration)}if(n.touches.length>=1){for(var _=e.touchData.startPosition=[],S=0;S<i.length;S++)_[S]=o[S]=i[S];var C=n.touches[0];e.touchData.startGPosition=[C.clientX,C.clientY]}}},!1);var U;e.registerBinding(window,"touchmove",U=function(n){var i=e.touchData.capture;if(i||T(n)){var s=e.selection,u=e.cy,l=e.touchData.now,c=e.touchData.earlier,h=u.zoom();if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=f[0],l[1]=f[1]}if(n.touches[1]){var f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=f[0],l[3]=f[1]}if(n.touches[2]){var f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=f[0],l[5]=f[1]}var d,p=e.touchData.startGPosition;if(i&&n.touches[0]&&p){for(var v=[],y=0;y<l.length;y++)v[y]=l[y]-c[y];var b=n.touches[0].clientX-p[0],x=b*b,w=n.touches[0].clientY-p[1],E=w*w,_=x+E;d=_>=e.touchTapThreshold2}if(i&&e.touchData.cxt){n.preventDefault();var S=n.touches[0].clientX-D,C=n.touches[0].clientY-R,L=n.touches[1].clientX-D,B=n.touches[1].clientY-R,j=V(S,C,L,B),z=j/N,U=150,X=U*U,Y=1.5,W=Y*Y;if(z>=W||j>=X){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var H={originalEvent:n,type:"cxttapend",position:{x:l[0],y:l[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(H),e.touchData.start=null):u.emit(H)}}if(i&&e.touchData.cxt){var H={originalEvent:n,type:"cxtdrag",position:{x:l[0],y:l[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(H):u.emit(H),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var G=e.findNearestElement(l[0],l[1],!0,!0);e.touchData.cxtOver&&G===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:n,type:"cxtdragout",position:{x:l[0],y:l[1]}}),e.touchData.cxtOver=G,G&&G.emit({originalEvent:n,type:"cxtdragover",position:{x:l[0],y:l[1]}}))}else if(i&&n.touches[2]&&u.boxSelectionEnabled())n.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||u.emit("boxstart"),e.touchData.selecting=!0,e.redrawHint("select",!0),s&&0!==s.length&&void 0!==s[0]?(s[2]=(l[0]+l[2]+l[4])/3,s[3]=(l[1]+l[3]+l[5])/3):(s[0]=(l[0]+l[2]+l[4])/3,s[1]=(l[1]+l[3]+l[5])/3,s[2]=(l[0]+l[2]+l[4])/3+1,s[3]=(l[1]+l[3]+l[5])/3+1),s[4]=1,e.touchData.selecting=!0,e.redraw();else if(i&&n.touches[1]&&u.zoomingEnabled()&&u.panningEnabled()&&u.userZoomingEnabled()&&u.userPanningEnabled()){n.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var $=e.dragData.touchDragEles;if($){e.redrawHint("drag",!0);for(var Z=0;Z<$.length;Z++){var Q=$[Z]._private;Q.grabbed=!1,Q.rscratch.inDragLayer=!1}}var S=n.touches[0].clientX-D,C=n.touches[0].clientY-R,L=n.touches[1].clientX-D,B=n.touches[1].clientY-R,K=F(S,C,L,B),J=K/I;if(q){var ee=S-k,te=C-P,ne=L-O,re=B-A,ie=(ee+ne)/2,oe=(te+re)/2,ae=u.zoom(),se=ae*J,ue=u.pan(),le=M[0]*ae+ue.x,ce=M[1]*ae+ue.y,he={x:-se/ae*(le-ue.x-ie)+le,y:-se/ae*(ce-ue.y-oe)+ce};if(e.touchData.start&&e.touchData.start.active()){var $=e.dragData.touchDragEles;m($),e.redrawHint("drag",!0),e.redrawHint("eles",!0),e.touchData.start.unactivate().emit("free")}u.viewport({zoom:se,pan:he,cancelOnFailedZoom:!0}),I=K,k=S,P=C,O=L,A=B,e.pinching=!0}if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=f[0],l[1]=f[1]}if(n.touches[1]){var f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=f[0],l[3]=f[1]}if(n.touches[2]){var f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=f[0],l[5]=f[1]}}else if(n.touches[0]){var G,fe=e.touchData.start,de=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(G=e.findNearestElement(l[0],l[1],!0,!0)),i&&null!=fe&&n.preventDefault(),i&&null!=fe&&e.nodeIsDraggable(fe))if(d){var $=e.dragData.touchDragEles,pe=!e.dragData.didDrag;pe&&g(u.collection($),{inDragLayer:!0});for(var ve=0;ve<$.length;ve++){var ge=$[ve];if(e.nodeIsDraggable(ge)&&ge.grabbed()){e.dragData.didDrag=!0;var ye=ge.position();if(r.number(v[0])&&r.number(v[1])&&(ye.x+=v[0],ye.y+=v[1]),pe){e.redrawHint("eles",!0);var me=e.touchData.dragDelta;me&&r.number(me[0])&&r.number(me[1])&&(ye.x+=me[0],ye.y+=me[1])}}}var be=u.collection($);be.dirtyCompoundBoundsCache(),be.emit("position drag"),e.hoverData.draggingEles=!0,e.redrawHint("drag",!0),e.touchData.startPosition[0]==c[0]&&e.touchData.startPosition[1]==c[1]&&e.redrawHint("eles",!0),e.redraw()}else{var me=e.touchData.dragDelta=e.touchData.dragDelta||[];0===me.length?(me.push(v[0]),me.push(v[1])):(me[0]+=v[0],me[1]+=v[1])}if(t(fe||G,["touchmove","tapdrag","vmousemove"],n,{position:{x:l[0],y:l[1]}}),fe&&fe.grabbed()||G==de||(de&&de.emit({originalEvent:n,type:"tapdragout",position:{x:l[0],y:l[1]}}),G&&G.emit({originalEvent:n,type:"tapdragover",position:{x:l[0],y:l[1]}})),e.touchData.last=G,i)for(var Z=0;Z<l.length;Z++)l[Z]&&e.touchData.startPosition[Z]&&d&&(e.touchData.singleTouchMoved=!0);if(i&&(null==fe||fe.isEdge())&&u.panningEnabled()&&u.userPanningEnabled()){var xe=a(fe,e.touchData.starts);xe&&(n.preventDefault(),e.swipePanning?u.panBy({x:v[0]*h,y:v[1]*h}):d&&(e.swipePanning=!0,u.panBy({x:b*h,y:w*h}),fe&&(fe.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion=o.array2point(e.touchData.startPosition)),e.redrawHint("select",!0),e.touchData.start=null)));var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=f[0],l[1]=f[1]}}for(var y=0;y<l.length;y++)c[y]=l[y];i&&n.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var X;e.registerBinding(window,"touchcancel",X=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()});var Y;if(e.registerBinding(window,"touchend",Y=function(n){var r=e.touchData.start,i=e.touchData.capture;if(i){0===n.touches.length&&(e.touchData.capture=!1),n.preventDefault();var o=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var a=e.cy,s=a.zoom(),u=e.touchData.now,l=e.touchData.earlier;if(n.touches[0]){var c=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=c[0],u[1]=c[1]}if(n.touches[1]){var c=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=c[0],u[3]=c[1]}if(n.touches[2]){var c=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=c[0],u[5]=c[1]}r&&r.unactivate();var h;if(e.touchData.cxt){if(h={originalEvent:n,type:"cxttapend",position:{x:u[0],y:u[1]}},r?r.emit(h):a.emit(h),!e.touchData.cxtDragged){var f={originalEvent:n,type:"cxttap",position:{x:u[0],y:u[1]}};r?r.emit(f):a.emit(f)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&a.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var d=a.collection(e.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,e.redrawHint("select",!0),a.emit("boxend");var p=function(e){return e.selectable()&&!e.selected()};d.emit("box").stdFilter(p).select().emit("boxselect"),d.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=r&&r.unactivate(),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var v=e.dragData.touchDragEles;if(null!=r){var g=r._private.grabbed;m(v),e.redrawHint("drag",!0),e.redrawHint("eles",!0),g&&r.emit("free"),t(r,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:u[0],y:u[1]}}),r.unactivate(),e.touchData.start=null}else{var y=e.findNearestElement(u[0],u[1],!0,!0);t(y,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:u[0],y:u[1]}})}var b=e.touchData.startPosition[0]-u[0],x=b*b,w=e.touchData.startPosition[1]-u[1],E=w*w,_=x+E,S=_*s*s;null!=r&&!e.dragData.didDrag&&r._private.selectable&&S<e.touchTapThreshold2&&!e.pinching&&("single"===a.selectionType()?(a.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved||t(r,["tap","vclick"],n,{position:{x:u[0],y:u[1]}}),e.touchData.singleTouchMoved=!0}for(var T=0;T<u.length;T++)l[T]=u[T];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null),n.touches.length<2&&(e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var W=[],H=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},G=function(e){return{event:e,touch:H(e)}},$=function(e){W.push(G(e))},Z=function(e){for(var t=0;t<W.length;t++){var n=W[t];if(n.event.pointerId===e.pointerId)return void W.splice(t,1)}},Q=function(e){var t=W.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=H(e)},K=function(e){e.touches=W.map(function(e){return e.touch})},J=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){J(e)||(e.preventDefault(),$(e),K(e),z(e))}),e.registerBinding(e.container,"pointerup",function(e){J(e)||(Z(e),K(e),Y(e))}),e.registerBinding(e.container,"pointercancel",function(e){J(e)||(Z(e),K(e),X(e))}),e.registerBinding(e.container,"pointermove",function(e){J(e)||(e.preventDefault(),Q(e),K(e),U(e))})}},e.exports=a},function(e,t,n){"use strict";var r=n(2),i={};i.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,e,t,n/2,i/2,s)},checkPoint:function(e,t,n,i,o,a,s){return r.pointInsidePolygon(e,t,this.points,a,s,i,o,[0,-1],n)}}},i.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){return r.intersectLineEllipse(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s){return r.checkInEllipse(e,t,i,o,a,s,n)}}},i.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,a,s){var u=r.getRoundRectangleRadius(i,o),l=2*u;return!!r.pointInsidePolygon(e,t,this.points,a,s,i,o-l,[0,-1],n)||(!!r.pointInsidePolygon(e,t,this.points,a,s,i-l,o,[0,-1],n)||(!!r.checkInEllipse(e,t,l,l,a-i/2+u,s-o/2+u,n)||(!!r.checkInEllipse(e,t,l,l,a+i/2-u,s-o/2+u,n)||(!!r.checkInEllipse(e,t,l,l,a+i/2-u,s+o/2-u,n)||!!r.checkInEllipse(e,t,l,l,a-i/2+u,s+o/2-u,n)))))}}},i.generateCutRectangle=function(){return this.nodeShapes.cutrectangle={renderer:this,name:"cutrectangle",cornerLength:r.getCutRectangleCornerLength(),points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},generateCutTrianglePts:function(e,t,n,r){var i=this.cornerLength,o=t/2,a=e/2,s=n-a,u=n+a,l=r-o,c=r+o;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,n,i,o,a,s){var u=this.generateCutTrianglePts(n+2*s,i+2*s,e,t),l=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return r.polygonIntersectLine(o,a,l,e,t)},checkPoint:function(e,t,n,i,o,a,s){if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-2*this.cornerLength,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-2*this.cornerLength,o,[0,-1],n))return!0;var u=this.generateCutTrianglePts(i,o,a,s);return r.pointInsidePolygonPoints(e,t,u.topLeft)||r.pointInsidePolygonPoints(e,t,u.topRight)||r.pointInsidePolygonPoints(e,t,u.bottomRight)||r.pointInsidePolygonPoints(e,t,u.bottomLeft)}}},i.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){var u=.15,l=.5,c=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),f=function(e){var t=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},u),n=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},l),i=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},c);return[e[0],e[1],t.x,t.y,n.x,n.y,i.x,i.y,e[4],e[5]]},d=[].concat(f(h.topLeft),f(h.topRight),f(h.bottomRight),f(h.bottomLeft));return r.polygonIntersectLine(o,a,d,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,u=n+a,l=i-o,c=i+o,h=r.getBarrelCurveConstants(e,t),f=h.heightOffset,d=h.widthOffset,p=h.ctrlPtOffsetPct*e,v={topLeft:[s,l+f,s+p,l,s+d,l],topRight:[u-d,l,u-p,l,u,l+f],bottomRight:[u,c-f,u-p,c,u-d,c],bottomLeft:[s+d,c,s+p,c,s,c-f]};return v.topLeft.isTop=!0,v.topRight.isTop=!0,v.bottomLeft.isBottom=!0,v.bottomRight.isBottom=!0,v},checkPoint:function(e,t,n,i,o,a,s){var u=r.getBarrelCurveConstants(i,o),l=u.heightOffset,c=u.widthOffset;if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-2*l,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-2*c,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),f=function(e,t,n){var i=n[4],o=n[2],a=n[0],s=n[5],u=n[1],l=Math.min(i,a),c=Math.max(i,a),h=Math.min(s,u),f=Math.max(s,u);if(l<=e&&e<=c&&h<=t&&t<=f){var d=r.bezierPtsToQuadCoeff(i,o,a),p=r.solveQuadratic(d[0],d[1],d[2],e),v=p.filter(function(e){return 0<=e&&e<=1});if(v.length>0)return v[0]}return null},d=Object.keys(h),p=0;p<d.length;p++){var v=d[p],g=h[v],y=f(e,t,g);if(null!=y){var m=g[5],b=g[3],x=g[1],w=r.qbezierAt(m,b,x,y);if(g.isTop&&w<=t)return!0;if(g.isBottom&&t<=w)return!0}}return!1}}},i.generateBottomRoundrectangle=function(){return this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottomroundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){var u=e-(n/2+s),l=t-(i/2+s),c=l,h=e+(n/2+s),f=r.finiteLinesIntersect(o,a,e,t,u,l,h,c,!1);return f.length>0?f:r.roundRectangleIntersectLine(o,a,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,a,s){var u=r.getRoundRectangleRadius(i,o),l=2*u;if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-l,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,h=o/2+2*n,f=[a-c,s-h,a-c,s,a+c,s,a+c,s-h];return!!r.pointInsidePolygonPoints(e,t,f)||(!!r.checkInEllipse(e,t,l,l,a+i/2-u,s+o/2-u,n)||!!r.checkInEllipse(e,t,l,l,a-i/2+u,s+o/2-u,n))}}},i.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",r.generateUnitNgonPointsFitToSquare(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(var s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=r.fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("concavehexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),e.makePolygon=function(e){var n,r=e.join("$"),i="polygon-"+r;return(n=this[i])?n:t.generatePolygon(i,e)}},e.exports=i},function(e,t,n){"use strict";var r=n(1),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},i.redraw=function(e){e=e||r.staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},i.beforeRender=function(e,t){if(!this.destroyed){t=t||0;var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}};var o=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};i.startRenderLoop=function(){var e=this;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var t=function n(t){if(!e.destroyed){if(e.requestedFrame&&!e.skipFrame){o(e,!0,t);var i=r.performanceNow();e.render(e.renderOptions);var a=e.lastDrawTime=r.performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var s=a-i;e.redrawTotalTime+=s,e.lastRedrawTime=s,e.averageRedrawTime=e.averageRedrawTime/2+s/2,e.requestedFrame=!1}else o(e,!1,t);e.skipFrame=!1,r.requestAnimationFrame(n)}};r.requestAnimationFrame(t)}},e.exports=i},function(e,t,n){"use strict";function r(e){var t=this;t.data={canvases:new Array(l.CANVAS_LAYERS),contexts:new Array(l.CANVAS_LAYERS),canvasNeedsRedraw:new Array(l.CANVAS_LAYERS),bufferCanvases:new Array(l.BUFFER_COUNT),bufferContexts:new Array(l.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";t.data.canvasContainer=document.createElement("div");var r=t.data.canvasContainer.style;t.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),(i.getAttribute("style")||"").indexOf(n)<0&&i.setAttribute("style",(i.getAttribute("style")||"")+n);for(var u=0;u<l.CANVAS_LAYERS;u++){var c=t.data.canvases[u]=document.createElement("canvas");t.data.contexts[u]=c.getContext("2d"),c.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(o.ms()?" -ms-touch-action: none; touch-action: none; ":"")),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(l.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(c),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[l.NODE].setAttribute("data-id","layer"+l.NODE+"-node"),t.data.canvases[l.SELECT_BOX].setAttribute("data-id","layer"+l.SELECT_BOX+"-selectbox"),t.data.canvases[l.DRAG].setAttribute("data-id","layer"+l.DRAG+"-drag");for(var u=0;u<l.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=document.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0,t.data.eleTxrCache=new a(t),t.data.lyrTxrCache=new s(t,t.data.eleTxrCache),t.onUpdateEleCalcs(function(e,n){for(var r=0;r<n.length;r++){var i=n[r],o=i._private.rstyle,a=o.dirtyEvents;if(i.isNode()&&a&&1===a.length&&a.position);else if(t.data.eleTxrCache.invalidateElement(i),i.isParent()&&a.style){var s=o.prevParentOpacity,u=i.pstyle("opacity").pfValue;if(o.prevParentOpacity=u,s!==u)for(var l=i.descendants(),c=0;c<l.length;c++)t.data.eleTxrCache.invalidateElement(l[c])}}n.length>0&&t.data.lyrTxrCache.invalidateElements(n)})}var i=n(1),o=n(0),a=n(124),s=n(125),u=r,l=r.prototype;l.CANVAS_LAYERS=3,l.SELECT_BOX=0,l.DRAG=1,l.NODE=2,l.BUFFER_COUNT=3,l.TEXTURE_BUFFER=0,l.MOTIONBLUR_BUFFER_NODE=1,l.MOTIONBLUR_BUFFER_DRAG=2,l.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[l.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[l.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[l.SELECT_BOX]=t}};var c="undefined"!=typeof Path2D;l.path2dEnabled=function(e){return void 0===e?this.pathsEnabled:void(this.pathsEnabled=!!e)},l.usePaths=function(){return c&&this.pathsEnabled},[n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135)].forEach(function(e){i.extend(l,e)}),e.exports=u},function(e,t,n){"use strict";var r=n(2),i=n(1),o=n(9),a=n(19),s=25,u=50,l=-4,c=2,h=3.99,f=8,d=1024,p=1024,v=1024,g=.5,y=.8,m=10,b=!1,x=!1,w=.15,E=.1,_=.9,S=.9,T=100,C=1,k={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},P=function(e){var t=this;t.renderer=e,t.onDequeues=[],t.setupDequeueing()},O=P.prototype;O.reasons=k,O.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},O.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r},O.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new o(function(e,t){return t.reqs-e.reqs});return t},O.getElementIdToQueue=function(){var e=this,t=e.eleIdToCacheQueue=e.eleIdToCacheQueue||{};return t},O.getElement=function(e,t,n,i,o){var a=this,d=this.renderer,g=e._private.rscratch,y=d.cy.zoom();if(0===t.w||0===t.h||!e.visible())return null;if(null==i&&(i=Math.ceil(r.log2(y*n))),i<l)i=l;else if(y>=h||i>c)return null;var m=Math.pow(2,i),w=t.h*m,E=t.w*m,_=g.imgCaches=g.imgCaches||{},S=_[i];if(S)return S;var T;if(T=w<=s?s:w<=u?u:Math.ceil(w/u)*u,w>v||E>p||!b&&e.isEdge()||!x&&e.isParent())return null;var C=a.getTextureQueue(T),P=C[C.length-2],O=function(){return a.recycleTexture(T,E)||a.addTexture(T,E)};P||(P=C[C.length-1]),P||(P=O()),P.width-P.usedWidth<E&&(P=O());for(var A,I=d.eleTextBiggerThanMin(e,m),N=function(e){return e&&e.scaledLabelShown===I},L=o&&o===k.dequeue,M=o&&o===k.highQuality,D=o&&o===k.downscale,R=i+1;R<=c;R++){var B=_[R];if(B){A=B;break}}var j=A&&A.level===i+1?A:null,q=function(){P.context.drawImage(j.texture.canvas,j.x,0,j.width,j.height,P.usedWidth,0,E,w)};if(P.context.setTransform(1,0,0,1,0,0),P.context.clearRect(P.usedWidth,0,E,T),N(j))q();else if(N(A)){if(!M)return a.queueElement(e,A.level-1),A;for(var R=A.level;R>i;R--)j=a.getElement(e,t,n,R,k.downscale);q()}else{var z;if(!L&&!M&&!D)for(var R=i-1;R>=l;R--){var B=_[R];if(B){z=B;break}}if(N(z))return a.queueElement(e,i),z;P.context.translate(P.usedWidth,0),P.context.scale(m,m),d.drawElement(P.context,e,t,I),P.context.scale(1/m,1/m),P.context.translate(-P.usedWidth,0)}return S=_[i]={ele:e,x:P.usedWidth,texture:P,level:i,scale:m,width:E,height:w,scaledLabelShown:I},P.usedWidth+=Math.ceil(E+f),P.eleCaches.push(S),a.checkTextureFullness(P),S},O.invalidateElement=function(e){var t=this,n=e._private.rscratch.imgCaches;if(n)for(var r=l;r<=c;r++){var o=n[r];if(o){var a=o.texture;a.invalidatedWidth+=o.width,n[r]=null,i.removeFromArray(a.eleCaches,o),t.removeFromQueue(e),t.checkTextureUtility(a)}}},O.checkTextureUtility=function(e){e.invalidatedWidth>=g*e.width&&this.retireTexture(e)},O.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>y&&e.fullnessChecks>=m?i.removeFromArray(n,e):e.fullnessChecks++},O.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n);i.removeFromArray(r,e),e.retired=!0;for(var o=e.eleCaches,a=0;a<o.length;a++){var s=o[a],u=s.ele,l=s.level,c=u._private.rscratch.imgCaches;c&&(c[l]=null)}i.clearArray(o);var h=t.getRetiredTextureQueue(n);h.push(e)},O.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),i={};return r.push(i),i.eleCaches=[],i.height=e,i.width=Math.max(d,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=document.createElement("canvas"),i.canvas.width=i.width,i.canvas.height=i.height,i.context=i.canvas.getContext("2d"),i},O.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),o=n.getRetiredTextureQueue(e),a=0;a<o.length;a++){var s=o[a];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,i.clearArray(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),i.removeFromArray(o,s),r.push(s),s}},O.queueElement=function(e,t){var n=this,r=n.getElementQueue(),i=n.getElementIdToQueue(),o=e.id(),a=i[o];if(a)a.level=Math.max(a.level,t),a.reqs++,r.updateItem(a);else{var s={ele:e,level:t,reqs:1};r.push(s),i[o]=s}},O.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementIdToQueue(),i=[],o=0;o<C&&n.size()>0;o++){var a=n.pop(),s=a.ele,u=s._private.rscratch.imgCaches;if(null==u[a.level]){r[s.id()]=null,i.push(a);var l=s.boundingBox();t.getElement(s,l,e,a.level,k.dequeue)}}return i},O.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementIdToQueue(),o=r[e.id()];null!=o&&(o.reqs=i.MAX_INT,n.updateItem(o),n.pop(),r[e.id()]=null)},O.onDequeue=function(e){this.onDequeues.push(e)},O.offDequeue=function(e){i.removeFromArray(this.onDequeues,e)},O.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:T,deqCost:w,deqAvgCost:E,deqNoDrawCost:_,deqFastCost:S,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++){var a=t[o].ele.boundingBox();if(r.boundingBoxesIntersect(a,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}}),e.exports=P},function(e,t,n){"use strict";function r(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)}var i=n(1),o=n(2),a=n(9),s=n(0),u=n(19),l=1,c=-4,h=2,f=3.99,d=50,p=50,v=!0,g=.15,y=.1,m=.9,b=.9,x=1,w=250,E=16e6,_=!0,S=!0,T=!0,C=function(e,t){var n=this,r=n.renderer=e;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=i.performanceNow()-2*w,n.skipping=!1,r.beforeRender(function(e,t){t-n.lastInvalidationTime<=w?n.skipping=!0:n.skipping=!1});var o=function(e,t){return t.reqs-e.reqs};n.layersQueue=new a(o),n.eleTxrCache=t,n.setupEleCacheInvalidation(),n.setupDequeueing()},k=C.prototype,P=0,O=Math.pow(2,53)-1;k.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),o=document.createElement("canvas");o.width=r,o.height=i;var a={id:P=++P%O,bb:e,level:t,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a},k.getLayers=function(e,t,n){var r=this,a=r.renderer,s=a.cy,u=s.zoom(),d=r.firstGet;if(r.firstGet=!1,null==n)if(n=Math.ceil(o.log2(u*t)),n<c)n=c;else if(u>=f||n>h)return null;r.validateLayersElesOrdering(n,e);var p,v,g=r.layersByLevel,y=Math.pow(2,n),m=g[n]=g[n]||[],b=r.levelIsComplete(n,e),x=function(){var t=function(t){if(r.validateLayersElesOrdering(t,e),r.levelIsComplete(t,e))return v=g[t],
!0},o=function(e){if(!v)for(var r=n+e;c<=r&&r<=h&&!t(r);r+=e);};o(1),o(-1);for(var a=m.length-1;a>=0;a--){var s=m[a];s.invalid&&i.removeFromArray(m,s)}};if(b)return m;x();var w=function(){if(!p){p=o.makeBoundingBox();for(var t=0;t<e.length;t++)o.updateBoundingBox(p,e[t].boundingBox())}return p},S=function(e){e=e||{};var t=e.after;w();var i=p.w*y*(p.h*y);if(i>E)return null;var o=r.makeLayer(p,n);if(null!=t){var a=m.indexOf(t)+1;m.splice(a,0,o)}else(void 0===e.insert||e.insert)&&m.unshift(o);return o};if(r.skipping&&!d)return null;for(var T=null,C=e.length/l,k=_&&!d,P=0;P<e.length;P++){var O=e[P],A=O._private.rscratch,I=A.imgLayerCaches=A.imgLayerCaches||{},N=I[n];if(N)T=N;else{if((!T||T.eles.length>=C||!o.boundingBoxInBoundingBox(T.bb,O.boundingBox()))&&(T=S({insert:!0,after:T}),!T))return null;v||k?r.queueLayer(T,O):r.drawEleInLayer(T,O,n,t),T.eles.push(O),I[n]=T}}return v?v:k?null:m},k.getEleLevelForLayerLevel=function(e,t){return e},k.drawEleInLayer=function(e,t,n,i){var o=this,a=this.renderer,s=e.context,u=t.boundingBox();if(0!==u.w&&0!==u.h&&t.visible()){var l=o.eleTxrCache,c=S?l.reasons.highQuality:void 0;n=o.getEleLevelForLayerLevel(n,i);var h=T?l.getElement(t,u,null,n,c):null;h?(v&&r(s,!1),s.drawImage(h.texture.canvas,h.x,0,h.width,h.height,u.x1,u.y1,u.w,u.h),v&&r(s,!0)):a.drawElement(s,t)}},k.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||0===r.length)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0)return!1;if(a.invalid)return!1;i+=a.eles.length}return i===t.length},k.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0)this.invalidateLayer(i);else for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==t[s+a]){this.invalidateLayer(i);break}}},k.updateElementsInLayers=function(e,t){for(var n=this,r=s.element(e[0]),i=0;i<e.length;i++)for(var o=r?null:e[i],a=r?e[i]:e[i].ele,u=a._private.rscratch,l=u.imgLayerCaches=u.imgLayerCaches||{},f=c;f<=h;f++){var d=l[f];d&&(o&&n.getEleLevelForLayerLevel(d.level)!==o.level||t(d,a,o))}},k.haveLayers=function(){for(var e=this,t=!1,n=c;n<=h;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t},k.invalidateElements=function(e){var t=this;t.lastInvalidationTime=i.performanceNow(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)})},k.invalidateLayer=function(e){if(this.lastInvalidationTime=i.performanceNow(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];i.removeFromArray(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var o=0;o<n.length;o++){var a=n[o]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},k.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||(i=e.replacement=t.makeLayer(e.bb,e.level),i.replaces=e,i.eles=e.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})},k.setupEleCacheInvalidation=function(){var e=this,t=[];if(T){var n=i.debounce(function(){e.refineElementTextures(t),t=[]},p);e.eleTxrCache.onDequeue(function(e){for(var r=0;r<e.length;r++)t.push(e[r]);n()})}},k.queueLayer=function(e,t){var n=this,r=n.layersQueue,i=e.elesQueue,o=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;i.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},k.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],i=0;i<x&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(t.drawEleInLayer(o,a,o.level,e),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&t.applyLayerReplacement(o),t.requestRedraw())}}return r},k.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=e;for(var o=0;o<e.eles.length;o++){var a=e.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[e.level]=e)}t.requestRedraw()}},k.requestRedraw=i.debounce(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),k.setupDequeueing=u.setupDequeueing({deqRedrawThreshold:d,deqCost:g,deqAvgCost:y,deqNoDrawCost:m,deqFastCost:b,deq:function(e,t){return e.dequeue(t)},onDeqd:i.noop,shouldRedraw:i.trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}}),e.exports=C},function(e,t,n){"use strict";var r,i={};i.arrowShapeImpl=function(e){return(r||(r={polygon:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}},"triangle-backcurve":function(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];0===i&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath(),e.beginPath&&e.beginPath();var a=n,s=n[0];e.moveTo(s.x,s.y);for(var i=0;i<a.length;i++){var o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()},"triangle-cross":function(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath(),e.beginPath&&e.beginPath();var a=n,s=n[0];e.moveTo(s.x,s.y);for(var i=0;i<a.length;i++){var o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()},circle:function(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}}))[e]},e.exports=i},function(e,t,n){"use strict";var r=n(2),i={};i.drawElement=function(e,t,n,r){var i=this;t.isNode()?i.drawNode(e,t,n,r):i.drawEdge(e,t,n,r)},i.drawCachedElement=function(e,t,n,i){var o=this,a=t.boundingBox();if(0!==a.w&&0!==a.h&&(!i||r.boundingBoxesIntersect(a,i))){var s=o.data.eleTxrCache.getElement(t,a,n);null!=s?e.drawImage(s.texture.canvas,s.x,0,s.width,s.height,a.x1,a.y1,a.w,a.h):o.drawElement(e,t)}},i.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var i=t[r];n.drawElement(e,i)}},i.drawCachedElements=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];i.drawCachedElement(e,a,n,r)}},i.drawCachedNodes=function(e,t,n,r){for(var i=this,o=0;o<t.length;o++){var a=t[o];a.isNode()&&i.drawCachedElement(e,a,n,r)}},i.drawLayeredElements=function(e,t,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(t,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;0!==u.w&&0!==u.h&&e.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(e,t,n,r)},i.drawDebugPoints=function(e,t){for(var n=function(t,n,r){e.fillStyle=r,e.fillRect(t-1,n-1,3,3)},r=0;r<t.length;r++){var i=t[r],o=i._private.rscratch;if(i.isNode()){var a=i.position();n(a.x,a.y,"magenta")}else{for(var s=o.allpts,u=0;u+1<s.length;u+=2){var l=s[u],c=s[u+1];n(l,c,"cyan")}n(o.midX,o.midY,"yellow")}}},e.exports=i},function(e,t,n){"use strict";var r={};r.drawEdge=function(e,t,n,r){var i=this,o=t._private.rscratch,a=i.usePaths();if(t.visible()&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var s=void 0;n&&(s=n,e.translate(-s.x1,-s.y1));var u=t.pstyle("overlay-padding").pfValue,l=2*u,c=t.pstyle("overlay-opacity").value,h=t.pstyle("overlay-color").value,f=t.pstyle("line-color").value,d=t.pstyle("opacity").value,p=t.pstyle("line-style").value,v=t.pstyle("width").pfValue,g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e.lineWidth=v,e.lineCap="butt",i.strokeStyle(e,f[0],f[1],f[2],n),i.drawEdgePath(t,e,o.allpts,p)},y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;e.lineWidth=l,"self"!==o.edgeType||a?e.lineCap="round":e.lineCap="butt",i.strokeStyle(e,h[0],h[1],h[2],n),i.drawEdgePath(t,e,o.allpts,"solid")},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;i.drawArrowheads(e,t,n)},b=function(){i.drawElementText(e,t,r)};e.lineJoin="round";var x="yes"===t.pstyle("ghost").value;if(x){var w=t.pstyle("ghost-offset-x").pfValue,E=t.pstyle("ghost-offset-y").pfValue,_=t.pstyle("ghost-opacity").value,S=d*_;e.translate(w,E),g(S),m(S),e.translate(-w,-E)}g(),m(),y(),b(),n&&e.translate(s.x1,s.y1)}},r.drawEdgePath=function(e,t,n,r){var i=e._private.rscratch,o=t,a=void 0,s=!1,u=this.usePaths();if(u){var l=n.join("$"),c=i.pathCacheKey&&i.pathCacheKey===l;c?(a=t=i.pathCache,s=!0):(a=t=new Path2D,i.pathCacheKey=l,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash([6,3]);break;case"solid":o.setLineDash([])}if(!s&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)t.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1])}t=o,u?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])},r.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},r.drawArrowhead=function(e,t,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=this,u=t.pstyle(n+"-arrow-shape").value;if("none"!==u){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,f=t.pstyle("opacity").value;void 0===a&&(a=f);var d=e.globalCompositeOperation;1===a&&"hollow"!==c||(e.globalCompositeOperation="destination-out",s.fillStyle(e,255,255,255,1),s.strokeStyle(e,255,255,255,1),s.drawArrowShape(t,n,e,l,h,u,r,i,o),e.globalCompositeOperation=d);var p=t.pstyle(n+"-arrow-color").value;s.fillStyle(e,p[0],p[1],p[2],a),s.strokeStyle(e,p[0],p[1],p[2],a),s.drawArrowShape(t,n,e,c,h,u,r,i,o)}}},r.drawArrowShape=function(e,t,n,r,i,o,a,s,u){var l=this,c=this.usePaths(),h=e._private.rscratch,f=!1,d=void 0,p=n,v={x:a,y:s},g=e.pstyle("arrow-scale").value,y=this.getArrowWidth(i,g),m=l.arrowShapes[o];if(c){var b=y+"$"+o+"$"+u+"$"+a+"$"+s;h.arrowPathCacheKey=h.arrowPathCacheKey||{},h.arrowPathCache=h.arrowPathCache||{};var x=h.arrowPathCacheKey[t]===b;x?(d=n=h.arrowPathCache[t],f=!0):(d=n=new Path2D,h.arrowPathCacheKey[t]=b,h.arrowPathCache[t]=d)}n.beginPath&&n.beginPath(),f||m.draw(n,y,u,v,i),!m.leavePathOpen&&n.closePath&&n.closePath(),n=p,"filled"!==r&&"both"!==r||(c?n.fill(d):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=m.matchEdgeWidth?i:1,n.lineJoin="miter",c?n.stroke(d):n.stroke())},e.exports=r},function(e,t,n){"use strict";var r={};r.safeDrawImage=function(e,t,n,r,i,o,a,s,u,l){i<=0||o<=0||u<=0||l<=0||e.drawImage(t,n,r,i,o,a,s,u,l)},r.drawInscribedImage=function(e,t,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),h=c(n,"background-fit","value",r),f=c(n,"background-repeat","value",r),d=n.width(),p=n.height(),v=2*n.padding(),g=d+("inner"===c(n,"background-width-relative-to","value",r)?0:v),y=p+("inner"===c(n,"background-height-relative-to","value",r)?0:v),m=n._private.rscratch,b=n.pstyle("background-clip").value,x="node"===b,w=c(n,"background-image-opacity","value",r)*i,E=t.width||t.cachedW,_=t.height||t.cachedH;null!=E&&null!=_||(document.body.appendChild(t),E=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var S=E,T=_;if("auto"!==c(n,"background-width","value",r)&&(S="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*g:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(T="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*y:c(n,"background-height","pfValue",r)),0!==S&&0!==T){if("contain"===h){var C=Math.min(g/S,y/T);S*=C,T*=C}else if("cover"===h){var C=Math.max(g/S,y/T);S*=C,T*=C}var k=s-g/2;k+="%"===c(n,"background-position-x","units",r)?(g-S)*c(n,"background-position-x","pfValue",r):c(n,"background-position-x","pfValue",r);var P=u-y/2;P+="%"===c(n,"background-position-y","units",r)?(y-T)*c(n,"background-position-y","pfValue",r):c(n,"background-position-y","pfValue",r),m.pathCache&&(k-=s,P-=u,s=0,u=0);var O=e.globalAlpha;if(e.globalAlpha=w,"no-repeat"===f)x&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,s,u,g,y),e.clip())),o.safeDrawImage(e,t,0,0,E,_,k,P,S,T),x&&e.restore();else{var A=e.createPattern(t,f);e.fillStyle=A,o.nodeShapes[o.getNodeShape(n)].draw(e,s,u,g,y),e.translate(k,P),e.fill(),e.translate(-k,-P)}e.globalAlpha=O}},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var o=o||5;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill()}var i=n(1),o=n(2),a={};a.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(o.log2(n*r));t=Math.pow(2,i)}var a=e.pstyle("font-size").pfValue*t,s=e.pstyle("min-zoomed-font-size").pfValue;return!(a<s)},a.drawElementText=function(e,t,n){var r=this;if(void 0===n){if(!r.eleTextBiggerThanMin(t))return}else if(!n)return;if(t.isNode()){var i=t.pstyle("label");if(!i||!i.value)return;var o=t.pstyle("text-halign").strValue;t.pstyle("text-valign").strValue;switch(o){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}e.textBaseline="bottom"}else{var i=t.pstyle("label"),a=t.pstyle("source-label"),s=t.pstyle("target-label");if(!(i&&i.value||a&&a.value||s&&s.value))return;e.textAlign="center",e.textBaseline="bottom"}r.drawText(e,t),t.isEdge()&&(r.drawText(e,t,"source"),r.drawText(e,t,"target"))},a.drawNodeText=a.drawEdgeText=a.drawElementText,a.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},a.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=t.pstyle("text-opacity").value*t.pstyle("opacity").value*n,u=t.pstyle("text-outline-opacity").value*s,l=t.pstyle("color").value,c=t.pstyle("text-outline-color").value,h=t._private.fontKey,f=this.getFontCache(e);f.key!==h&&(e.font=r+" "+a+" "+i+" "+o,f.key=h),e.lineJoin="round",this.fillStyle(e,l[0],l[1],l[2],s),this.strokeStyle(e,c[0],c[1],c[2],u)},a.drawText=function(e,t,n){var o=t._private,a=o.rscratch,s=t.effectiveOpacity();if(0!==s&&0!==t.pstyle("text-opacity").value){var u=i.getPrefixedProperty(a,"labelX",n),l=i.getPrefixedProperty(a,"labelY",n),c=this.getLabelText(t,n);if(null!=c&&""!==c&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(e,t);var h=n?n+"-":"",f=i.getPrefixedProperty(a,"labelWidth",n),d=i.getPrefixedProperty(a,"labelHeight",n),p=i.getPrefixedProperty(a,"labelAngle",n),v=t.pstyle(h+"text-margin-x").pfValue,g=t.pstyle(h+"text-margin-y").pfValue,y=t.isEdge(),m=(t.isNode(),t.pstyle("text-halign").value),b=t.pstyle("text-valign").value;y&&(m="center",b="center"),u+=v,l+=g;var x,w=t.pstyle("text-rotation");if(x="autorotate"===w.strValue?y?p:0:"none"===w.strValue?0:w.pfValue,0!==x){var E=u,_=l;e.translate(E,_),e.rotate(x),u=0,l=0}switch(b){case"top":break;case"center":l+=d/2;break;case"bottom":l+=d}var S=t.pstyle("text-background-opacity").value,T=t.pstyle("text-border-opacity").value,C=t.pstyle("text-border-width").pfValue,k=t.pstyle("text-background-padding").pfValue;if(S>0||C>0&&T>0){var P=u-k;switch(m){case"left":P-=f;break;case"center":P-=f/2;break;case"right":}var O=l-d-k,A=f+2*k,I=d+2*k;if(S>0){var N=e.fillStyle,L=t.pstyle("text-background-color").value;e.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+S*s+")";var M=t.pstyle("text-background-shape").strValue;"roundrectangle"==M?r(e,P,O,A,I,2):e.fillRect(P,O,A,I),e.fillStyle=N}if(C>0&&T>0){var D=e.strokeStyle,R=e.lineWidth,B=t.pstyle("text-border-color").value,j=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+T*s+")",e.lineWidth=C,e.setLineDash)switch(j){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=C/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(P,O,A,I),"double"===j){var q=C/2;e.strokeRect(P+q,O+q,A-2*q,I-2*q)}e.setLineDash&&e.setLineDash([]),e.lineWidth=R,e.strokeStyle=D}}var z=2*t.pstyle("text-outline-width").pfValue;if(z>0&&(e.lineWidth=z),"wrap"===t.pstyle("text-wrap").value){var F=i.getPrefixedProperty(a,"labelWrapCachedLines",n),V=d/F.length;switch(b){case"top":l-=(F.length-1)*V;break;case"center":case"bottom":l-=(F.length-1)*V}for(var U=0;U<F.length;U++)z>0&&e.strokeText(F[U],u,l),e.fillText(F[U],u,l),l+=V}else z>0&&e.strokeText(c,u,l),e.fillText(c,u,l);0!==x&&(e.rotate(-x),e.translate(-E,-_))}}},e.exports=a},function(e,t,n){"use strict";var r=n(0),i={};i.drawNode=function(e,t,n,i){var o=this,a=void 0,s=void 0,u=t._private,l=u.rscratch,c=t.position();if(r.number(c.x)&&r.number(c.y)&&t.visible()){var h=t.effectiveOpacity(),f=o.usePaths(),d=void 0,p=!1,v=t.padding();a=t.width()+2*v,s=t.height()+2*v;var g=void 0;n&&(g=n,e.translate(-g.x1,-g.y1));for(var y=t.pstyle("background-image"),m=y.value,b=new Array(m.length),x=new Array(m.length),w=0,E=0;E<m.length;E++){var _=m[E],S=b[E]=null!=_&&"none"!==_;if(S){var T=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);w++,x[E]=o.getCachedImage(_,T,function(){t.emitAndNotify("background")})}}var C=t.pstyle("background-blacken").value,k=t.pstyle("border-width").pfValue,P=t.pstyle("background-color").value,O=t.pstyle("background-opacity").value*h,A=t.pstyle("border-color").value,I=t.pstyle("border-style").value,N=t.pstyle("border-opacity").value*h;e.lineJoin="miter";var L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;o.fillStyle(e,P[0],P[1],P[2],t)},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;o.strokeStyle(e,A[0],A[1],A[2],t)},D=t.pstyle("shape").strValue,R=t.pstyle("shape-polygon-points").pfValue;if(f){var B=D+"$"+a+"$"+s+("polygon"===D?"$"+R.join("$"):"");e.translate(c.x,c.y),l.pathCacheKey===B?(d=l.pathCache,p=!0):(d=new Path2D,l.pathCacheKey=B,l.pathCache=d)}var j=function(){if(!p){var n=c;f&&(n={x:0,y:0}),o.nodeShapes[o.getNodeShape(t)].draw(d||e,n.x,n.y,a,s)}f?e.fill(d):e.fill()},q=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,r=u.backgrounding,i=0,a=0;a<x.length;a++)b[a]&&x[a].complete&&!x[a].error&&(i++,o.drawInscribedImage(e,x[a],t,a,n));u.backgrounding=!(i===w),r!==u.backgrounding&&t.updateStyle(!1)},z=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;o.hasPie(t)&&(o.drawPie(e,t,r),n&&(f||o.nodeShapes[o.getNodeShape(t)].draw(e,c.x,c.y,a,s)))},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=(C>0?C:-C)*t,r=C>0?0:255;0!==C&&(o.fillStyle(e,r,r,r,n),f?e.fill(d):e.fill())},V=function(){if(k>0){if(e.lineWidth=k,e.lineCap="butt",e.setLineDash)switch(I){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(f?e.stroke(d):e.stroke(),"double"===I){e.lineWidth=k/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f?e.stroke(d):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}},U=function(){var n=t.pstyle("overlay-padding").pfValue,r=t.pstyle("overlay-opacity").value,i=t.pstyle("overlay-color").value;r>0&&(o.fillStyle(e,i[0],i[1],i[2],r),o.nodeShapes.roundrectangle.draw(e,c.x,c.y,a+2*n,s+2*n),e.fill())},X=function(){o.drawElementText(e,t,i)},Y="yes"===t.pstyle("ghost").value;if(Y){var W=t.pstyle("ghost-offset-x").pfValue,H=t.pstyle("ghost-offset-y").pfValue,G=t.pstyle("ghost-opacity").value,$=G*h;e.translate(W,H),L(G*O),j(),q($),z(0!==C||0!==k),F($),M(G*N),V(),e.translate(-W,-H)}L(),j(),q(),z(0!==C||0!==k),F(),M(),V(),f&&e.translate(-c.x,-c.y),X(),U(),n&&e.translate(g.x1,g.y1)}},i.hasPie=function(e){return e=e[0],e._private.hasPie},i.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),o=t.pstyle("pie-size"),a=r.x,s=r.y,u=t.width(),l=t.height(),c=Math.min(u,l)/2,h=0,f=this.usePaths();f&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,v=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*n,y=p/100;y+h>1&&(y=1-h);var m=1.5*Math.PI+2*Math.PI*h,b=2*Math.PI*y,x=m+b;0===p||h>=1||h+y>1||(e.beginPath(),e.moveTo(a,s),e.arc(a,s,c,m,x),e.closePath(),this.fillStyle(e,v[0],v[1],v[2],g),e.fill(),h+=y)}},e.exports=i},function(e,t,n){"use strict";var r={},i=n(1),o=100;r.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},r.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},r.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},r.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},r.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],o=r[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var u,l=i*a,c=o*a;if(l!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)u=n.canvases[f],u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";for(var f=0;f<t.BUFFER_COUNT;f++)u=n.bufferCanvases[f],u.width=l,u.height=c,u.style.width=i+"px",u.style.height=o+"px";t.textureMult=1,a<=1&&(u=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,u.width=l*t.textureMult,u.height=c*t.textureMult),t.canvasWidth=l,t.canvasHeight=c}},r.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(e){function t(e,t,n,r,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",c.fillStyle(e,255,255,255,c.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=o}function n(e,n){var i,o,s,h;c.clearingMotionBlur||e!==d.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]&&e!==d.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG]?(i=C,o=S,s=c.canvasWidth,h=c.canvasHeight):(i={x:T.x*y,y:T.y*y},o=_*y,s=c.canvasWidth*y,h=c.canvasHeight*y),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?t(e,0,0,s,h):r||void 0!==n&&!n||e.clearRect(0,0,s,h),a||(e.translate(i.x,i.y),e.scale(o,o)),l&&e.translate(l.x,l.y),u&&e.scale(u,u)}e=e||i.staticEmptyObject();var r=e.forcedContext,a=e.drawAllLayers,s=e.drawOnlyNodeLayer,u=e.forcedZoom,l=e.forcedPan,c=this,h=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,f=c.cy,d=c.data,p=d.canvasNeedsRedraw,v=c.textureOnViewport&&!r&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming),g=void 0!==e.motionBlur?e.motionBlur:c.motionBlur,y=c.motionBlurPxRatio,m=f.hasCompoundNodes(),b=c.hoverData.draggingEles,x=!(!c.hoverData.selecting&&!c.touchData.selecting);g=g&&!r&&c.motionBlurEnabled&&!x;var w=g;r||(c.prevPxRatio!==h&&(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container),c.redrawHint("eles",!0),c.redrawHint("drag",!0)),c.prevPxRatio=h),!r&&c.motionBlurTimeout&&clearTimeout(c.motionBlurTimeout),g&&(null==c.mbFrames&&(c.mbFrames=0),c.mbFrames++,c.mbFrames<3&&(w=!1),c.mbFrames>c.minMbLowQualFrames&&(c.motionBlurPxRatio=c.mbPxRBlurry)),c.clearingMotionBlur&&(c.motionBlurPxRatio=1),c.textureDrawLastFrame&&!v&&(p[c.NODE]=!0,p[c.SELECT_BOX]=!0);var E=f.style()._private.coreStyle,_=f.zoom(),S=void 0!==u?u:_,T=f.pan(),C={x:T.x,y:T.y},k={zoom:_,pan:{x:T.x,y:T.y}},P=c.prevViewport,O=void 0===P||k.zoom!==P.zoom||k.pan.x!==P.pan.x||k.pan.y!==P.pan.y;O||b&&!m||(c.motionBlurPxRatio=1),l&&(C=l),S*=h,C.x*=h,C.y*=h;var A=c.getCachedZSortedEles();if(v||(c.textureDrawLastFrame=!1),v){c.textureDrawLastFrame=!0;var I;if(!c.textureCache){c.textureCache={},I=c.textureCache.bb=f.mutableElements().boundingBox(),c.textureCache.texture=c.data.bufferCanvases[c.TEXTURE_BUFFER];var N=c.data.bufferContexts[c.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:h*c.textureMult});var k=c.textureCache.viewport={zoom:f.zoom(),pan:f.pan(),width:c.canvasWidth,height:c.canvasHeight};k.mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}p[c.DRAG]=!1,p[c.NODE]=!1;var L=d.contexts[c.NODE],M=c.textureCache.texture,k=c.textureCache.viewport;I=c.textureCache.bb,L.setTransform(1,0,0,1,0,0),g?t(L,0,0,k.width,k.height):L.clearRect(0,0,k.width,k.height);var D=E["outside-texture-bg-color"].value,R=E["outside-texture-bg-opacity"].value;c.fillStyle(L,D[0],D[1],D[2],R),L.fillRect(0,0,k.width,k.height);var _=f.zoom();n(L,!1),L.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/h,k.height/k.zoom/h),L.drawImage(M,k.mpan.x,k.mpan.y,k.width/k.zoom/h,k.height/k.zoom/h)}else c.textureOnViewport&&!r&&(c.textureCache=null);var B=f.extent(),j=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,q=c.hideEdgesOnViewport&&j,z=[];if(z[c.NODE]=!p[c.NODE]&&g&&!c.clearedForMotionBlur[c.NODE]||c.clearingMotionBlur,z[c.NODE]&&(c.clearedForMotionBlur[c.NODE]=!0),z[c.DRAG]=!p[c.DRAG]&&g&&!c.clearedForMotionBlur[c.DRAG]||c.clearingMotionBlur,z[c.DRAG]&&(c.clearedForMotionBlur[c.DRAG]=!0),p[c.NODE]||a||s||z[c.NODE]){var F=g&&!z[c.NODE]&&1!==y,L=r||(F?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]:d.contexts[c.NODE]),V=g&&!F?"motionBlur":void 0;n(L,V),q?c.drawCachedNodes(L,A.nondrag,h,B):c.drawLayeredElements(L,A.nondrag,h,B),c.debug&&c.drawDebugPoints(L,A.nondrag),a||g||(p[c.NODE]=!1)}if(!s&&(p[c.DRAG]||a||z[c.DRAG])){var F=g&&!z[c.DRAG]&&1!==y,L=r||(F?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG]:d.contexts[c.DRAG]);n(L,g&&!F?"motionBlur":void 0),q?c.drawCachedNodes(L,A.drag,h,B):c.drawCachedElements(L,A.drag,h,B),c.debug&&c.drawDebugPoints(L,A.drag),a||g||(p[c.DRAG]=!1)}if(c.showFps||!s&&p[c.SELECT_BOX]&&!a){var L=r||d.contexts[c.SELECT_BOX];if(n(L),1==c.selection[4]&&(c.hoverData.selecting||c.touchData.selecting)){var _=c.cy.zoom(),U=E["selection-box-border-width"].value/_;L.lineWidth=U,L.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",L.fillRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1]),U>0&&(L.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",L.strokeRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1]))}if(d.bgActivePosistion&&!c.hoverData.selecting){var _=c.cy.zoom(),X=d.bgActivePosistion;L.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",L.beginPath(),L.arc(X.x,X.y,E["active-bg-size"].pfValue/_,0,2*Math.PI),L.fill()}var Y=c.lastRedrawTime;if(c.showFps&&Y){Y=Math.round(Y);var W=Math.round(1e3/Y);L.setTransform(1,0,0,1,0,0),L.fillStyle="rgba(255, 0, 0, 0.75)",L.strokeStyle="rgba(255, 0, 0, 0.75)",L.lineWidth=1,L.fillText("1 frame = "+Y+" ms = "+W+" fps",0,20);var H=60;L.strokeRect(0,30,250,20),L.fillRect(0,30,250*Math.min(W/H,1),20)}a||(p[c.SELECT_BOX]=!1)}if(g&&1!==y){var G=d.contexts[c.NODE],$=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE],Z=d.contexts[c.DRAG],Q=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG],K=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!w?e.clearRect(0,0,c.canvasWidth,c.canvasHeight):t(e,0,0,c.canvasWidth,c.canvasHeight);var i=y;e.drawImage(n,0,0,c.canvasWidth*i,c.canvasHeight*i,0,0,c.canvasWidth,c.canvasHeight)};(p[c.NODE]||z[c.NODE])&&(K(G,$,z[c.NODE]),p[c.NODE]=!1),(p[c.DRAG]||z[c.DRAG])&&(K(Z,Q,z[c.DRAG]),p[c.DRAG]=!1)}c.prevViewport=k,c.clearingMotionBlur&&(c.clearingMotionBlur=!1,c.motionBlurCleared=!0,c.motionBlur=!0),g&&(c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null,c.clearedForMotionBlur[c.NODE]=!1,c.clearedForMotionBlur[c.DRAG]=!1,c.motionBlur=!1,c.clearingMotionBlur=!v,c.mbFrames=0,p[c.NODE]=!0,p[c.DRAG]=!0,c.redraw()},o)),r||f.emit("render")},e.exports=r},function(e,t,n){"use strict";var r=n(2),i={};i.drawPolygonPath=function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)e.lineTo(t+a*o[2*u],n+s*o[2*u+1]);e.closePath()},i.drawRoundRectanglePath=function(e,t,n,i,o){var a=i/2,s=o/2,u=r.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.arcTo(t+a,n-s,t+a,n,u),e.arcTo(t+a,n+s,t,n+s,u),e.arcTo(t-a,n+s,t-a,n,u),e.arcTo(t-a,n-s,t,n-s,u),e.lineTo(t,n-s),e.closePath()},i.drawBottomRoundRectanglePath=function(e,t,n,i,o){var a=i/2,s=o/2,u=r.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.lineTo(t+a,n-s),e.lineTo(t+a,n),e.arcTo(t+a,n+s,t,n+s,u),e.arcTo(t-a,n+s,t-a,n,u),e.lineTo(t-a,n-s),e.lineTo(t,n-s),e.closePath()},i.drawCutRectanglePath=function(e,t,n,i,o){var a=i/2,s=o/2,u=r.getCutRectangleCornerLength();e.beginPath&&e.beginPath(),e.moveTo(t-a+u,n-s),e.lineTo(t+a-u,n-s),e.lineTo(t+a,n-s+u),e.lineTo(t+a,n+s-u),e.lineTo(t+a-u,n+s),e.lineTo(t-a+u,n+s),e.lineTo(t-a,n+s-u),e.lineTo(t-a,n-s+u),e.closePath()},i.drawBarrelPath=function(e,t,n,i,o){var a=i/2,s=o/2,u=t-a,l=t+a,c=n-s,h=n+s,f=r.getBarrelCurveConstants(i,o),d=f.widthOffset,p=f.heightOffset,v=f.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(u,c+p),e.lineTo(u,h-p),e.quadraticCurveTo(u+v,h,u+d,h),e.lineTo(l-d,h),e.quadraticCurveTo(l-v,h,l,h-p),e.lineTo(l,c+p),e.quadraticCurveTo(l-v,c,l-d,c),e.lineTo(u+d,c),e.quadraticCurveTo(u+v,c,u,c+p),e.closePath()};for(var o=Math.sin(0),a=Math.cos(0),s={},u={},l=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var c,h,f=r/2,d=i/2,p=0*Math.PI;p<2*Math.PI;p+=l)c=t-f*s[p]*o+f*u[p]*a,h=n+d*u[p]*o+d*s[p]*a,0===p?e.moveTo(c,h):e.lineTo(c,h);e.closePath()},e.exports=i},function(e,t,n){"use strict";function r(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:t})}function i(e){var t=e.indexOf(",");return e.substr(t+1)}function o(e,t,n){var o=t.toDataURL(n,e.quality);switch(e.output){case"blob":return r(i(o),n);case"base64":return i(o);case"base64uri":default:return o}}var a=n(0),s={};s.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},s.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=e.full?Math.ceil(r.w):i[2],s=e.full?Math.ceil(r.h):i[3],u=a.number(e.maxWidth)||a.number(e.maxHeight),l=this.getPixelRatio(),c=1;if(void 0!==e.scale)o*=e.scale,s*=e.scale,c=e.scale;else if(u){var h=1/0,f=1/0;a.number(e.maxWidth)&&(h=c*e.maxWidth/o),a.number(e.maxHeight)&&(f=c*e.maxHeight/s),c=Math.min(h,f),o*=c,s*=c}u||(o*=l,s*=l,c*=l);var d=document.createElement("canvas");d.width=o,d.height=s,d.style.width=o+"px",d.style.height=s+"px";
var p=d.getContext("2d");if(o>0&&s>0){p.clearRect(0,0,o,s),p.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(e.full)p.translate(-r.x1*c,-r.y1*c),p.scale(c,c),this.drawElements(p,v),p.scale(1/c,1/c),p.translate(r.x1*c,r.y1*c);else{var g=t.pan(),y={x:g.x*c,y:g.y*c};c*=t.zoom(),p.translate(y.x,y.y),p.scale(c,c),this.drawElements(p,v),p.scale(1/c,1/c),p.translate(-y.x,-y.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,o,s),p.fill())}return d},s.png=function(e){return o(e,this.bufferCanvasImage(e),"image/png")},s.jpg=function(e){return o(e,this.bufferCanvasImage(e),"image/jpeg")},e.exports=s},function(e,t,n){"use strict";var r={};r.nodeShapeImpl=function(e,t,n,r,i,o,a){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,o);case"polygon":return this.drawPolygonPath(t,n,r,i,o,a);case"roundrectangle":return this.drawRoundRectanglePath(t,n,r,i,o);case"cutrectangle":return this.drawCutRectanglePath(t,n,r,i,o);case"bottomroundrectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,o);case"barrel":return this.drawBarrelPath(t,n,r,i,o)}},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(18),a=function u(){return this instanceof u?void(this.length=0):new u},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},s.css=function(e,t){var n=this.length-1;if(r.string(e))this[n].properties.push({name:e,value:t});else if(r.plainObject(e))for(var a=e,s=0;s<o.properties.length;s++){var u=o.properties[s],l=a[u.name];if(void 0===l&&(l=a[i.dash2camel(u.name)]),void 0!==l){var c=u.name,h=l;this[n].properties.push({name:c,value:h})}}return this},s.style=s.css,s.generateStyle=function(e){var t=new o(e);return this.appendToStyle(t)},s.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e},e.exports=a},function(e,t,n){"use strict";e.exports="3.2.15"}])})}).call(this,t("timers").setImmediate)},{heap:24,"lodash.debounce":47,timers:76}],22:[function(t,n,r){(function(i,o){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ES6Promise=i()}(this,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}function r(e){W=e}function a(e){H=e}function s(){return function(){return i.nextTick(f)}}function u(){return"undefined"!=typeof Y?function(){Y(f)}:h()}function l(){var e=0,t=new Z(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<X;e+=2){var t=J[e],n=J[e+1];t(n),J[e]=void 0,J[e+1]=void 0}X=0}function d(){try{var e=Function("return this")().require("vertx");return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return h()}}function p(e,t){var n=this,r=new this.constructor(g);void 0===r[te]&&M(r);var i=n._state;if(i){var o=arguments[i-1];H(function(){return I(i,r,o,n._result)})}else P(n,r,e,t);return r}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return S(n,e),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return oe.error=t,oe}}function x(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function w(e,t,n){H(function(e){var r=!1,i=x(n,t,function(n){r||(r=!0,t!==n?S(e,n):C(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function E(e,t){t._state===re?C(e,t._result):t._state===ie?k(e,t._result):P(t,void 0,function(t){return S(e,t)},function(t){return k(e,t)})}function _(e,t,r){t.constructor===e.constructor&&r===p&&t.constructor.resolve===v?E(e,t):r===oe?(k(e,oe.error),oe.error=null):void 0===r?C(e,t):n(r)?w(e,t,r):C(e,t)}function S(t,n){t===n?k(t,y()):e(n)?_(t,n,b(n)):C(t,n)}function T(e){e._onerror&&e._onerror(e._result),O(e)}function C(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&H(O,e))}function k(e,t){e._state===ne&&(e._state=ie,e._result=t,H(T,e))}function P(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=n,i[o+ie]=r,0===o&&e._state&&H(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function A(e,t){try{return e(t)}catch(n){return oe.error=n,oe}}function I(e,t,r,i){var o=n(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=A(r,i),a===oe?(l=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,m())}else a=i,u=!0;t._state!==ne||(o&&u?S(t,a):l?k(t,s):e===re?C(t,a):e===ie&&k(t,a))}function N(e,t){try{t(function(t){S(e,t)},function(t){k(e,t)})}catch(n){k(e,n)}}function L(){return ae++}function M(e){e[te]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function D(){return new Error("Array Methods must be provided an Array")}function R(e){return new se(this,e).promise}function B(e){var t=this;return new t(U(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function j(e){var t=this,n=new t(g);return k(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=ue}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var U=V,X=0,Y=void 0,W=void 0,H=function(e,t){J[X]=e,J[X+1]=t,X+=2,2===X&&(W?W(f):ee())},G="undefined"!=typeof window?window:void 0,$=G||{},Z=$.MutationObserver||$.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof i&&"[object process]"==={}.toString.call(i),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),ee=void 0;ee=Q?s():Z?l():K?c():void 0===G&&"function"==typeof t?d():h();var te=Math.random().toString(36).substring(2),ne=void 0,re=1,ie=2,oe={error:null},ae=0,se=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[te]||M(this.promise),U(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&C(this.promise,this._result))):k(this.promise,D())}return e.prototype._enumerate=function(e){for(var t=0;this._state===ne&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var i=b(e);if(i===p&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ue){var o=new n(g);_(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ne&&(this._remaining--,e===ie?k(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(re,t,e)},function(e){return n._settledAt(ie,t,e)})},e}(),ue=function(){function e(t){this[te]=L(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&q(),this instanceof e?N(this,t):z())}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype["finally"]=function(e){var t=this,n=t.constructor;return t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return ue.prototype.then=p,ue.all=R,ue.race=B,ue.resolve=v,ue.reject=j,ue._setScheduler=r,ue._setAsap=a,ue._asap=H,ue.polyfill=F,ue.Promise=ue,ue})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:49}],23:[function(e,t,n){function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function o(e,t,n){if(t)e.call(n);else for(var r=e.length,i=g(e,r),o=0;o<r;++o)i[o].call(n)}function a(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].call(n,r)}function s(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=g(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function u(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=g(e,a),u=0;u<a;++u)s[u].call(n,r,i,o)}function l(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=g(e,i),a=0;a<i;++a)o[a].apply(n,r)}function c(e,t,n,r){var o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=w(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=i(e),o&&o>0&&s.length>o)){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else s=a[t]=n,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=_.call(h,r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?y(i):g(i,i.length):[]}function p(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e){var t=function(){};return t.prototype=e,new t}function b(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function x(e){var t=this;return function(){return t.apply(e,arguments)}}var w=Object.create||m,E=Object.keys||b,_=Function.prototype.bind||x;t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var S,T=10;try{var C={};Object.defineProperty&&Object.defineProperty(C,"x",{value:0}),S=0===C.x}catch(k){S=!1}S?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');T=e}}):r.defaultMaxListeners=T,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return i(this)},r.prototype.emit=function(e){var t,n,r,i,c,h,f="error"===e;if(h=this._events)f=f&&null==h.error;else if(!f)return!1;if(f){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var d=new Error('Unhandled "error" event. ('+t+")");throw d.context=t,d}if(n=h[e],!n)return!1;var p="function"==typeof n;switch(r=arguments.length){case 1:o(n,p,this);break;case 2:a(n,p,this,arguments[1]);break;case 3:s(n,p,this,arguments[1],arguments[2]);break;case 4:u(n,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),c=1;c<r;c++)i[c-1]=arguments[c];l(n,p,this,i)}return!0},r.prototype.addListener=function(e,t){return c(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return c(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=w(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():v(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=w(null),this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events=w(null):delete n[e]),this;if(0===arguments.length){var i,o=E(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],24:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":25}],25:[function(t,n,r){(function(){var t,i,o,a,s,u,l,c,h,f,d,p,v,g,y;o=Math.floor,f=Math.min,i=function(e,t){return e<t?-1:e>t?1:0},h=function(e,t,n,r,a){var s;if(null==n&&(n=0),null==a&&(a=i),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)s=o((n+r)/2),a(t,e[s])<0?r=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},u=function(e,t,n){return null==n&&(n=i),e.push(t),g(e,0,e.length-1,n)},s=function(e,t){var n,r;return null==t&&(t=i),n=e.pop(),e.length?(r=e[0],e[0]=n,y(e,0,t)):r=n,r},c=function(e,t,n){var r;return null==n&&(n=i),r=e[0],e[0]=t,y(e,0,n),r},l=function(e,t,n){var r;return null==n&&(n=i),e.length&&n(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],y(e,0,n)),t},a=function(e,t){var n,r,a,s,u,l;for(null==t&&(t=i),s=function(){l=[];for(var t=0,n=o(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],r=0,a=s.length;r<a;r++)n=s[r],u.push(y(e,n,t));return u},v=function(e,t,n){var r;if(null==n&&(n=i),r=e.indexOf(t),r!==-1)return g(e,0,r,n),y(e,r,n)},d=function(e,t,n){var r,o,s,u,c;if(null==n&&(n=i),o=e.slice(0,t),!o.length)return o;for(a(o,n),c=e.slice(t),s=0,u=c.length;s<u;s++)r=c[s],l(o,r,n);return o.sort(n).reverse()},p=function(e,t,n){var r,o,u,l,c,d,p,v,g,y;if(null==n&&(n=i),10*t<=e.length){if(l=e.slice(0,t).sort(n),!l.length)return l;for(u=l[l.length-1],v=e.slice(t),c=0,p=v.length;c<p;c++)r=v[c],n(r,u)<0&&(h(l,r,0,null,n),l.pop(),u=l[l.length-1]);return l}for(a(e,n),y=[],o=d=0,g=f(t,e.length);0<=g?d<g:d>g;o=0<=g?++d:--d)y.push(s(e,n));return y},g=function(e,t,n,r){var o,a,s;for(null==r&&(r=i),o=e[n];n>t&&(s=n-1>>1,a=e[s],r(o,a)<0);)e[n]=a,n=s;return e[n]=o},y=function(e,t,n){var r,o,a,s,u;for(null==n&&(n=i),o=e.length,u=t,a=e[t],r=2*t+1;r<o;)s=r+1,s<o&&!(n(e[r],e[s])<0)&&(r=s),e[t]=e[r],t=r,r=2*t+1;return e[t]=a,g(e,u,t,n)},t=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=u,e.pop=s,e.replace=c,e.pushpop=l,e.heapify=a,e.updateItem=v,e.nlargest=d,e.nsmallest=p,e.prototype.push=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pop=function(){return s(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1},e.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(t,i){return"function"==typeof e&&e.amd?e([],i):"object"==typeof r?n.exports=i():t.Heap=i()}(this,function(){return t})}).call(this)},{}],26:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*v}},{}],27:[function(e,t,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],28:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,x;o=e("url"),r=e("JSONStream"),d=e("http"),t=e("./constants").ACCEPT_HEADER,u=e("./version").VERSION,x=b=e("./util"),h=x.error,c=x.defer,v=x.merge,p=x.invoke,s="node-http/imjs-"+u,i=/,\s*$/,a="application/x-www-form-urlencoded",n.supports=function(){return!0},m=function(e,t,n){return function(e){var i,o;return null==e.pipe?n(new Error("response is not a stream")):(e.on("error",n),null!=e.statusCode&&200!==e.statusCode?(i=r.parse("error"),i.pause(),e.pipe(i),n([e.statusCode,i])):(o=r.parse("results.*"),o.pause(),e.pipe(o),t(o)))}},f=function(e,t,n,r){var i,o;return i=e.type,o=e.url,"Could not parse response to "+i+" "+o+': "'+t+'" ('+r+": "+n+")"},l=function(e,t,n){return function(r){var i;return i="",r.on("data",function(e){return i+=e}),r.on("error",n),r.on("end",function(){var o,a,s,u,l,c,h;if(null!=(null!=r?r.headers:void 0)&&(o=r.headers["content-type"]),"application/json"!==o&&!/json/.test(e.dataType)&&!/json/.test(e.data.format))return(l=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(l[2])):(u=200<=(h=r.statusCode)&&h<400?t:n)(i);if(""===i&&200===r.statusCode)return t();try{return c=JSON.parse(i),(s=c.error)?n(new Error(s)):t(c)}catch(d){return a=d,n(r.statusCode>=400?new Error(r.statusCode):new Error(f(e,i,a,r.statusCode)))}})}},n.iterReq=function(e,t,n){return function(r,i,o,a,s){var u,l,c,f,d;return null==i&&(i={}),null==o&&(o=function(){}),null==a&&(a=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(d=[{},i,o,a],i=d[0],o=d[1],a=d[2],s=d[3]),f=v({format:n},i,{query:r.toXML()}),u=function(e){return e.on("data",o),e.on("error",a),e.on("end",s),setTimeout(function(){if(null!=e.resume)return e.resume()},3),e},c=function(e){var t,n;return n=e[0],t=e[1],t.on("data",a),t.on("error",a),t.on("end",s),null!=t.resume&&t.resume(),h(n)},l=this.makeRequest(e,t,f,null,!0),l.then(u,c),l}},y=function(e,t,n){var r;return r=setTimeout(function(){return t("Request timed out.")},e),n.then(function(){return cancelTimeout(r)})},g=function(e){var n,r,i,u,l,c,h,f;if(!e.url)throw new Error("No url provided in "+JSON.stringify(e));if("string"==typeof e.data){if(i=e.data,"GET"===(c=e.type)||"DELETE"===c)throw new Error("Invalid request. "+e.type+" requests must not have bodies")}else i=b.querystring(e.data);if(r=o.parse(e.url,!0),r.withCredentials=!1,r.method=e.type||"GET",null!=e.port&&(r.port=e.port),r.headers={"User-Agent":s,Accept:t[e.dataType]},("GET"===(h=r.method)||"DELETE"===h)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(e.contentType||a)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=e.headers){f=e.headers;for(n in f)l=f[n],r.headers[n]=l}return null!=e.auth&&(r.auth=e.auth),[r,i]},n.doReq=function(e,t){var n,r,i,o,a,s,u,h,f,p,v;p=c(),o=p.promise,u=p.resolve,a=p.reject,o.then(null,e.error);try{v=g(e),f=v[0],i=v[1],r=(t?m:l)(e,u,a),s=d.request(f,r),s.on("error",function(t){return a(new Error("Error: "+f.method+" "+e.url+": "+t))}),null!=i&&s.write(i),s.end(),h=e.timeout,h>0&&y(h,a,o)}catch(b){n=b,a(n)}return o}}).call(this)},{"./constants":27,"./util":39,"./version":40,JSONStream:42,http:70,url:79}],29:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){return function(){return e.apply(t,arguments)}};c=e("./util"),d=n,p=c.uniqBy,u=c.difference,s=c.defer,v=c.withCB,f=c.id,h=c.get,l=c.fold,a=c.concatMap,o=6e4,t=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t;return e.prototype.getStats=function(e){return null!=e?this.stats[e]:this.stats},t=a(h("matches")),e.prototype.getMatches=function(e){var n;return"MATCH"===e?this.matches[e]:null!=(n=t(this.matches[e]))?n:[]},e.prototype.getMatchIds=function(e){return null!=e?this.getMatches(e).map(h("id")):this.allMatchIds()},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){var e;return(e=l(function(e){return function(t,n){return t.concat(e.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},e}(),i=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t,n,r,i;return i=p(f),t=a(f),n=function(e){var n,r;return t(function(){var t,i;t=e.identifiers,i=[];for(n in t)r=t[n],i.push(r);return i}())},r=function(e,t){return null==t||y.call(n(e),t)>=0},e.prototype.getStats=function(e){switch(e){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},e.prototype.getIdentifierStats=function(){var e,n,r,o,a,s;return s=function(e){var n,r;return i(t(function(){var t,i,o;for(o=[],t=0,i=e.length;t<i;t++)r=e[t],o.push(function(){var e;e=[];for(n in null!=r?r.identifiers:void 0)e.push(n);return e}());return o}()))},o=s(this.getMatches("MATCH")),n=s(this.getMatches()),a=o.length,e=n.length,r=u(n,o).length,{matches:a,all:e,issues:r}},e.prototype.getObjectStats=function(){var e,t,r,i;return i=this.goodMatchIds().length,e=this.allMatchIds().length,t=function(){var e;e=[];for(f in this)g.call(this,f)&&(r=this[f],y.call(n(r),"MATCH")<0&&e.push(f));return e}.call(this).length,{matches:i,all:e,issues:t}},e.prototype.getMatches=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(t));return n},e.prototype.getMatchIds=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(f));return n},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){return this.getMatchIds()},e}(),r=function(){function e(e,t){this.uid=e,this.service=t,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return e.prototype.fetchStatus=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("status")))},e.prototype.fetchErrorMessage=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("message")))},e.prototype.fetchResults=function(e){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(h("results")),r=this.service.fetchVersion(),r.then(function(e){return n.then(function(n){return e>=16?new t(n):new i(n)})})},e.prototype.del=function(e){return v(e,this.service.makeRequest("DELETE","ids/"+this.uid))},e.prototype.decay=50,e.prototype.poll=function(e,t,n){var r,i,a,u,l,c,h;return h=s(),a=h.promise,l=h.resolve,u=h.reject,a.then(e,t),i=null!=n?n:function(){},c=this.fetchStatus(),c.then(null,u),r=this.decay,this.decay=Math.min(o,1.25*r),c.then(function(e){return function(t){switch(i(t),t){case"SUCCESS":return e.fetchResults().then(l,u);case"ERROR":return e.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return e.poll(l,u,i)},r)}}}(this)),a},e}(),r.prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},d.IDResolutionJob=r,d.CategoryResults=t,d.IdResults=i}).call(this)},{"./util":39}],30:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y=function(e,t){return function(){return e.apply(t,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};v=e("./util"),c=n,d=v.merge,g=v.withCB,u=v.get,h=v.invoke,i=v.REQUIRES_VERSION,p=v.set,s=v.dejoin,a="list/tags",o="lists/shares",t="lists/invitations",f=function(e){return"__folder__"===e.substr(0,e.indexOf(":"))},l=function(e){return e.substr(e.indexOf(":")+1)},r=function(){function e(e,t){var n,r;this.service=t,this._updateTags=y(this._updateTags,this),this.hasTag=y(this.hasTag,this);for(n in e)m.call(e,n)&&(r=e[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(f).map(l)}var n;return e.prototype.hasTag=function(e){return b.call(this.tags,e)>=0},e.prototype.query=function(e){return null==e&&(e=["*"]),this.service.query({select:e,from:this.type,where:[[this.type,"IN",this.name]]})},e.prototype.del=function(e){return this.service.makeRequest("DELETE","lists",{name:this.name},e)},n=function(e){var t;return t=e.tags},e.prototype._updateTags=function(e,t){if(null==e)return this.tags=t.slice(),this.folders=this.tags.filter(f).map(l)},e.prototype.fetchTags=function(e){return g(this._updateTags,e,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},e.prototype.addTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("POST","list/tags",r).then(n))},e.prototype.removeTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("DELETE","list/tags",r).then(n))},e.prototype.contents=function(e){return g(e,this.query().then(s).then(h("records")))},e.prototype.rename=function(e,t){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:e}).then(u("listName")).then(function(e){return function(t){return e.name=t}}(this)).then(this.service.fetchList),g(t,n)},e.prototype.copy=function(e,t){var n,r,i,o,a,s,l;return null==e&&(e={}),null==t&&(t=function(){}),1===arguments.length&&v.isFunction(e)&&(a=[{},e],e=a[0],t=a[1]),"string"==typeof e&&(e={name:e}),r=n=null!=(s=e.name)?s:""+this.name+"_copy",o=this.tags.concat(null!=(l=e.tags)?l:[]),i=this.query(["id"]),g(t,this.service.fetchLists().then(h("map",u("name"))).then(function(e){return function(t){var a;for(a=1;b.call(t,r)>=0;)r=""+n+"-"+a++;return i.then(h("saveAsList",{name:r,tags:o,description:e.description}))}}(this)))},e.prototype.enrichment=function(e,t){return this.service.enrichment(d({list:this.name},e),t)},e.prototype.shareWithUser=function(e,t){return g(t,this.service.post(o,{list:this.name,"with":e}))},e.prototype.inviteUserToShare=function(e,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),g(r,this.service.post(t,{list:this.name,to:e,notify:!!n}))},e}(),c.List=r}).call(this)},{"./util":39}],31:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f=function(e,t){return function(){return e.apply(t,arguments)}},d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=e("./table").Table,i=e("./path").PathInfo,h=e("./util"),u=h.flatten,s=h.find,a=h.error,c=h.omap,l=n,t=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function e(e){var n,r;this.name=e.name,n=e.classes,this.findCommonType=f(this.findCommonType,this),this.findSharedAncestor=f(this.findSharedAncestor,this),this.getAncestorsOf=f(this.getAncestorsOf,this),this.getSubclassesOf=f(this.getSubclassesOf,this),this.getPathInfo=f(this.getPathInfo,this),r=c(function(e){return function(t,n){return[t,new o(n,e)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=t}return e.prototype.getPathInfo=function(e,t){return i.parse(this,e,t)},e.prototype.getSubclassesOf=function(e){var t,n,r,i,o,a;if(n=e&&e.name?e:this.classes[e],null==n)throw new Error(""+e+" is not a table");r=[n.name],o=this.classes;for(i in o)t=o[i],a=n.name,d.call(t.parents(),a)>=0&&(r=r.concat(this.getSubclassesOf(t)));return r},e.prototype.getAncestorsOf=function(e){var t,n;if(t=e&&e.name?e:this.classes[e],null==t)throw new Error(""+e+" is not a table");return n=t.parents(),n.filter(function(e){return function(t){return e.classes[t]}}(this)).reduce(function(e){return function(t,n){return t.concat(e.getAncestorsOf(n))}}(this),n)},e.prototype.findSharedAncestor=function(e,t){var n,r,i;return null===t||null===e?null:e===t?e:(n=this.getAncestorsOf(e),d.call(n,t)>=0?t:(r=this.getAncestorsOf(t),d.call(r,e)>=0?e:i=s(n,function(e){return d.call(r,e)>=0})))},e.prototype.findCommonType=function(e){return null==e&&(e=[]),e.reduce(this.findSharedAncestor)},e}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(e){var t;try{return new r(e)}catch(n){throw t=n,new Error("Error loading model: "+t)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],
r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],l.Model=r}).call(this)},{"./path":32,"./table":37,"./util":39}],32:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g=function(e,t){return function(){return e.apply(t,arguments)}},y=[].slice,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};c=n,p=e("./util"),v=p.withCB,a=p.concatMap,l=p.get,o=p.any,f=p.set,s=p.copy,d=p.success,u=p.error,t={},r={},h=function(e,t,n){var r,i,o;return""+(null!=e?e.name:void 0)+"|"+(null!=e&&null!=(o=e.service)?o.root:void 0)+"|"+t+":"+function(){var e;e=[];for(r in n)i=n[r],e.push(""+r+"="+i);return e}()},i=function(){function e(e){var t,n;this.root=e.root,this.model=e.model,this.descriptors=e.descriptors,this.subclasses=e.subclasses,this.displayName=e.displayName,this.ident=e.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?y.call(n,0,t=n.length-1):(t=0,[]),this.end=n[t++],null==this.ident&&(this.ident=h(this.model,this,this.subclasses))}return e.prototype.isRoot=function(){return 0===this.descriptors.length},e.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},e.prototype.isClass=function(){return this.isRoot()||this.isReference()},e.prototype.isReference=function(){var e;return null!=(null!=(e=this.end)?e.referencedType:void 0)},e.prototype.isReverseReference=function(){var e,t,n,r,i;return!!(this.isReference()&&this.mid.length>0)&&(i=this.end,r=i.reverseReference,n=i.referencedType,t=this.getParent(),e=t.getParent(),null!=n&&e.isa(n)&&t.end.name===r)},e.prototype.isCollection=function(){var e,t;return null!=(e=null!=(t=this.end)?t.isCollection:void 0)&&e},e.prototype.containsCollection=function(){return o(this.descriptors,function(e){return e.isCollection})},e.prototype.getEndClass=function(){var e;return this.model.classes[this.subclasses[this.toString()]||(null!=(e=this.end)?e.referencedType:void 0)]||this.root},e.prototype.getParent=function(){var t;if(this.isRoot())throw new Error("Root paths do not have parents");return t={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new e(t)},e.prototype.append=function(t){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof t?this.getType().fields[t]:t,null==r)throw new Error(""+t+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new e(n)},e.prototype.isa=function(e){var t,n;return null!=e&&(this.isAttribute()?this.getType()===e:(t=e.name?e.name:""+e,n=this.getType(),t===n.name||m.call(this.model.getAncestorsOf(n),t)>=0))},e.prototype.getDisplayName=function(e){var n,r,i,o;return(r=this.displayName)?d(r):(null==this.namePromise&&(this.namePromise=(n=t[this.ident])?d(n):this.isRoot()&&this.root.displayName?d(this.root.displayName):null==this.model.service?u("No service"):(o="model"+a(function(e){return"/"+e.name})(this.allDescriptors()),i=f({format:"json"})(s(this.subclasses)),this.model.service.get(o,i).then(l("display")).then(function(e){return function(n){var r;return null!=t[r=e.ident]?t[r]:t[r]=n}}(this)))),v(e,this.namePromise))},e.prototype.getChildNodes=function(){var e,t,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(t in r)e=r[t],i.push(this.append(e));return i},e.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},e.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},e.prototype.equals=function(e){return this===e||this.ident&&(null!=e?e.ident:void 0)===this.ident},e.prototype.getType=function(){var e,t;return(null!=(e=this.end)&&null!=(t=e.type)?t.replace(/java\.lang\./,""):void 0)||this.getEndClass()},e}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(e,t,n){var o,a,s,u,l,c,f,d,p;return null==n&&(n={}),l=h(e,t,n),(o=r[l])?o:(d=(t+"").split("."),p=a=e.classes[d.shift()],c=p.name,s=function(){var r,i,o,s;for(s=[],r=0,i=d.length;r<i;r++){if(f=d[r],u=(null!=a?a.fields[f]:void 0)||(null!=(o=a=e.classes[n[c]])?o.fields[f]:void 0),!u)throw new Error("Could not find "+f+" in "+a+" when parsing "+t);c+="."+f,a=e.classes[u.type||u.referencedType],s.push(u)}return s}(),r[l]=new i({root:p,model:e,descriptors:s,subclasses:n,ident:l}))},i.flushCache=function(){return r={},t={}},c.PathInfo=i}).call(this)},{"./util":39}],33:[function(e,t,n){(function(){var n;n=e("es6-promise").Promise,t.exports=n}).call(this)},{"es6-promise":43}],34:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,x,w,E,_,S,T,C,k,P,O,A,I,N,L,M,D,R,B,j,q,z,F,V,U,X,Y,W,H,G,$,Z,Q,K,J=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},ee=function(e,t){return function(){return e.apply(t,arguments)}},te=[].slice,ne={}.hasOwnProperty;i=e("backbone-events-standalone"),k=n,k.xml=e("./xml"),X=e("./util"),s=X.REQUIRES_VERSION,Y=X.withCB,I=X.merge,x=X.filter,R=X.partition,w=X.fold,v=X.concatMap,T=X.id,E=X.get,A=X.invoke,F=X.querystring,_=function(e){var t;if(t=null!=(null!=e?e.toLowerCase:void 0)?a.OP_DICT[e.toLowerCase()]:null,!t)throw new Error("Illegal constraint operator: "+e);return t},t=["path","op","code"],l=t.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(e){return X.compose(e.fetchList,E("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(e){return null==e&&(e=""),e.substr(e.indexOf("."))},p=function(e){return null!=e?"<value>"+X.escape(e)+"</value>":"<nullValue/>"},h=function(e,t){var n,r;return function(){var i;i=[];for(n in e)r=e[n],J.call(t,n)>=0&&i.push(""+n+'="'+X.escape(r)+'" ');return i}().join("")},D=function(e){return"<constraint "+h(e,t)+"/>"},V=function(e){return"<constraint "+h(e,["path","type"])+"/>"},j=function(e){return"<constraint "+h(e,l)+"/>"},L=function(e){return"<constraint "+h(e,t)+">"+v(p)(e.values)+"</constraint>"},C=function(e){return"<constraint "+h(e,t)+'ids="'+e.ids.join(",")+'"/>'},f=function(e){var t;return null!=e.values?L(e):null!=e.ids?C(e):null==e.op?V(e):(t=e.op,J.call(a.NULL_OPS,t)>=0?D(e):j(e))},S=function(e){return e.replace(/^[^\.]+\./,"")},g=function(e){var t,n,r,i,o,a,s,u,l,c,h;return a=e.path,l=e.type,o=e.op,c=e.value,h=e.values,r=e.extraValue,i=e.ids,t=e.code,n=e.editable,u=e.switched,s=e.switchable,i=null!=i?i.slice():void 0,h=null!=h?h.slice():void 0,M({path:a,type:l,op:o,value:c,values:h,extraValue:r,ids:i,code:t,editable:n,switched:u,switchable:s})},d=function(e){var t;return t=g(e),t.path=S(t.path),t},M=function(e){var t,n;for(t in e)n=e[t],null==n&&delete e[t];return e},m=function(e,t){return"Did not remove a single constraint. original = "+e+", reduced = "+t},O=function(e,t){var n,r,i,o,s,u,l;if(n={path:e},null===t)n.op="IS NULL";else if(X.isArray(t))n.op="ONE OF",n.values=t;else if("string"==(u=typeof t)||"number"===u||"boolean"===u)l="function"==typeof t.toUpperCase?t.toUpperCase():void 0,J.call(a.NULL_OPS,l)>=0?n.op=t:(n.op="=",n.value=t);else if(i=function(){var e;e=[];for(r in t)s=t[r],e.push(r);return e}(),J.call(i,"isa")>=0)X.isArray(t.isa)?(n.op=r,n.values=t.isa):n.type=t.isa;else{J.call(i,"extraValue")>=0&&(n.extraValue=t.extraValue);for(r in t)o=t[r],"extraValue"!==r&&(n.op=r,X.isArray(o)?n.values=o:n.value=o)}return n},P=function(e){var t,n,r,i;return e=e.slice(),n={path:e.shift()},1===e.length?(t=e[0],i="function"==typeof t.toUpperCase?t.toUpperCase():void 0,J.call(a.NULL_OPS,i)>=0?n.op=t:n.type=t):e.length>=2&&(n.op=e[0],r=e[1],X.isArray(r)?n.values=r:n.value=r,3===e.length&&(n.extraValue=e[2])),n},z=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(""+t.path+" "+t.direction);return i}().join(" ")},q=function(e){var t,n,r,i,o,a,s;if(null==e)return[];for(n=e.split(/\s+/),r=function(){var e,t,r;for(r=[],i=e=0,t=n.length/2;0<=t?e<t:e>t;i=0<=t?++e:--e)r.push(2*i);return r}(),s=[],o=0,a=r.length;o<a;o++)t=r[o],s.push([n[t],n[t+1]]);return s},B=function(){var e,t;if(t=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],this.isRelevant(e.path)&&i.push(e);return i}.call(this),t.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},a=function(){function e(e,t,n){var r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m;for(u=null!=n?n:{},r=u.model,o=u.summaryFields,this.addConstraint=ee(this.addConstraint,this),this.expandStar=ee(this.expandStar,this),this.adjustPath=ee(this.adjustPath,this),this.select=ee(this.select,this),null==e&&(e={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=X.copy(null!=(l=null!=(h=e.displayNames)?h:e.aliases)?l:{}),f=["name","title","comment","description","type"],a=0,s=f.length;a<s;a++)i=f[a],null!=e[i]&&(this[i]=e[i]);this.service=null!=t?t:{},this.model=null!=(d=null!=r?r:e.model)?d:{},this.summaryFields=null!=(p=null!=o?o:e.summaryFields)?p:{},this.root=null!=(v=e.root)?v:e.from,this.maxRows=null!=(g=null!=(y=e.size)?y:e.limit)?g:e.maxRows,this.start=null!=(m=null!=(c=e.start)?c:e.offset)?m:0,this.select(e.views||e.view||e.select||[]),this.addConstraints(e.constraints||e.where||[]),this.addJoins(e.joins||e.join||[]),this.orderBy(e.sortOrder||e.orderBy||[]),null!=e.constraintLogic&&(this.constraintLogic=e.constraintLogic),this.on("change:views",B,this)}var t,n,i,a,u,l,c,p,b;return e.JOIN_STYLES=["INNER","OUTER"],e.BIO_FORMATS=["gff3","fasta","bed"],e.NULL_OPS=["IS NULL","IS NOT NULL"],e.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],e.MULTIVALUE_OPS=["ONE OF","NONE OF"],e.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],e.TERNARY_OPS=["LOOKUP"],e.LOOP_OPS=["=","!="],e.LIST_OPS=["IN","NOT IN"],e.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],c=function(e,t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],e.hasAttribute(n)&&o.push([n,e.getAttribute(n)]);return o},i=function(e,t){var n,r,i,o,a;for(o=e.getElementsByTagName(t),a=[],r=0,i=o.length;r<i;r++)n=o[r],a.push(n);return a},b=function(e){return function(t){return t.getAttribute(e)}},e.fromXML=function(e){var t,r,o,a,s,l,h;if(r=k.xml.parse(e),l=i(r,"query")[0]||i(r,"template")[0],!l)throw new Error("no query in xml");return a=b("path"),h=b("style"),s=X.pairsToObj(c(l,u)),s.view=s.view.split(/\s+/),s.sortOrder=q(s.sortOrder),s.joins=function(){var e,t,n,r;for(n=i(l,"join"),r=[],e=0,t=n.length;e<t;e++)o=n[e],"OUTER"===h(o)&&r.push(a(o));return r}(),s.constraints=function(){var e,r,o,a;for(o=i(l,"constraint"),a=[],e=0,r=o.length;e<r;e++)t=o[e],a.push(function(e){var t,r,o,a,s;return t=X.pairsToObj(c(e,n)),null!=t.ids&&(t.ids=function(){var e,n,r,i;for(r=t.ids.split(","),i=[],e=0,n=r.length;e<n;e++)s=r[e],i.push(parseInt(s,10));return i}()),a=i(e,"value"),a.length&&(t.values=function(){var e,t,n;for(n=[],e=0,t=a.length;e<t;e++)o=a[e],n.push(function(){var e,t,n,i;for(n=o.childNodes,i=[],e=0,t=n.length;e<t;e++)r=n[e],i.push(r.data);return i}().join(""));return n}()),t}(t));return a}(),s},e.prototype.constraints=[],e.prototype.views=[],e.prototype.joins={},e.prototype.constraintLogic="",e.prototype.sortOrder="",e.prototype.name=null,e.prototype.title=null,e.prototype.comment=null,e.prototype.description=null,e.prototype.removeFromSelect=function(e){var t,n,r,i;return null==e&&(e=[]),e=X.stringList(e),t=X.compose(this.expandStar,this.adjustPath),e=X.flatten(function(){var n,i,o;for(o=[],n=0,i=e.length;n<i;n++)r=e[n],o.push(t(r));return o}()),this.sortOrder=function(){var t,r,i,o,a;for(i=this.sortOrder,a=[],t=0,r=i.length;t<r;t++)n=i[t],o=n.path,J.call(e,o)>=0||a.push(n);return a}.call(this),this.views=function(){var t,n,r,o;for(r=this.views,o=[],t=0,n=r.length;t<n;t++)i=r[t],J.call(e,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",e),this.trigger("change:views",this.views),this.trigger("change",this.views)},e.prototype.removeConstraint=function(e,t){var n,r,i,o;if(null==t&&(t=!1),i=this.constraints,r="string"==typeof e?function(t){return t.code===e}:function(t){var n,r;return t.path===e.path&&t.op===e.op&&t.value===e.value&&t.extraValue===e.extraValue&&e.type===t.type&&(null!=(n=t.values)?n.join("%%"):void 0)===(null!=(r=e.values)?r.join("%%"):void 0)},o=function(){var e,t,o;for(o=[],e=0,t=i.length;e<t;e++)n=i[e],r(n)||o.push(n);return o}(),o.length!==i.length-1)throw new Error(m(i,o));if(this.constraints=o,!t)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",X.find(i,r))},e.prototype.addToSelect=function(e,t){var n,r,i,o,a,s,u,l;if(null==e&&(e=[]),null==t&&(t={}),e=X.stringList(e),r=X.compose(this.expandStar,this.adjustPath),o=X.flatten(function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)a=e[t],i.push(r(a));return i}()),n=function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)i=o[e],J.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)i=o[e],function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)s=o[e],s===i&&n.push(s);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},e.prototype.select=function(e,t){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(e,t)}catch(i){n=i,this.views=r,X.error(n)}return this},e.prototype.adjustPath=function(e){return e=e&&e.name?e.name:""+e,null!=this.root?e.match("^"+this.root)||(e=this.root+"."+e):this.root=e.split(".")[0],e},e.prototype.getPossiblePaths=function(e,t,n){var r,i,o,a,s;return null==e&&(e=3),null==t&&(t=!0),null==n&&(n=null),a="string"==typeof n?function(e){return e[n]()}:n,r=function(e){return function(n,i){var o,a,s,u,l,c;return l=e.getPathInfo(n),!t&&l.isReverseReference()?[]:l.isAttribute()?[l]:(o=l.getType(),c=v(function(e){return r(""+n+"."+e.name,i-1)}),u=o&&i>0?c(function(){var e,t;e=o.fields,t=[];for(s in e)a=e[s],t.push(a);return t}()):[],[l].concat(u))}}(this),i=""+e+"-"+t,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=r(this.root,e)).slice(),null!=a?o.filter(a):o},e.prototype.getPathInfo=function(e){var t,n,r;return t=this.adjustPath(e),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(t,this.getSubclasses()):void 0,n&&t in this.displayNames&&(n.displayName=this.displayNames[t]),n},e.prototype.makePath=e.prototype.getPathInfo,p=function(e){return[e.path,e.type]},l=X.compose(X.pairsToObj,X.map(p),x(E("type"))),e.prototype.getSubclasses=function(){return l(this.constraints)},e.prototype.getType=function(e){return this.getPathInfo(e).getType()},e.prototype.getViewNodes=function(){var e,t;return t=function(e){return function(t){return e.getPathInfo(t).getParent()}}(this),X.uniqBy(String,function(){var n,r,i,o;for(i=this.views,o=[],n=0,r=i.length;n<r;n++)e=i[n],o.push(t(e));return o}.call(this))},e.prototype.isInView=function(e){var t,n,r;if(t=this.getPathInfo(e),!t)throw new Error("Invalid path: "+e);return t.isAttribute()?(r=t.toString(),J.call(this.views,r)>=0):(n=t.toString(),X.any(this.getViewNodes(),function(e){return e.toString()===n}))},e.prototype.isConstrained=function(e,t){var n,r;if(null==t&&(t=!1),n=this.getPathInfo(e),!n)throw new Error("Invalid path: "+e);return r=function(e){return null!=e.op&&e.path===n.toString()},!n.isAttribute()&&t&&(r=function(e){return function(t){return null!=t.op&&(t.path===n.toString()||n.equals(e.getPathInfo(t.path).getParent()))}}(this)),X.any(this.constraints,r)},e.prototype.canHaveMultipleValues=function(e){return this.getPathInfo(e).containsCollection()},e.prototype.getQueryNodes=function(){var e,t,n,r;return r=this.getViewNodes(),t=function(){var t,r,i,o;for(i=this.constraints,o=[],t=0,r=i.length;t<r;t++)e=i[t],null==e.type&&(n=this.getPathInfo(e.path),n.isAttribute()?o.push(n.getParent()):o.push(n));return o}.call(this),X.uniqBy(String,r.concat(t))},e.prototype.isInQuery=function(e){var t,n,r,i,o,a;if(n=this.getPathInfo(e)){for(r=n.toPathString(),a=this.views.concat(function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;e<n;e++)t=r[e],null==t.type&&i.push(t.path);return i}.call(this)),i=0,o=a.length;i<o;i++)if(e=a[i],0===e.indexOf(r))return!0;return!1}return!0},e.prototype.isRelevant=function(e){var t,n,r;return n=this.getPathInfo(e),n.isAttribute()&&(n=n.getParent()),r=n.toString(),t=this.getViewNodes(),X.any(t,function(e){return e.toPathString()===r})},e.prototype.expandStar=function(e){var t,n,r,i,o,a,s,u;if(/\*$/.test(e))if(s=e.substr(0,e.lastIndexOf(".")),r=function(e){return s+e},n=this.getType(s),/\.\*$/.test(e)){if(n&&this.summaryFields[n.name])return i=X.compose(r,y),function(){var e,t,r,a;for(r=this.summaryFields[n.name],a=[],e=0,t=r.length;e<t;e++)o=r[e],this.hasView(o)||a.push(i(o));return a}.call(this)}else if(/\.\*\*$/.test(e))return u=this.expandStar(s+".*"),t=function(){var e;e=[];for(a in n.attributes)e.push(r("."+a));return e}(),X.uniqBy(T,u.concat(t));return e},e.prototype.isOuterJoin=function(e){return"OUTER"===this.joins[this.adjustPath(e)]},e.prototype.hasView=function(e){var t;return this.views&&(t=this.adjustPath(e),J.call(this.views,t)>=0)},e.prototype.count=function(e){if(this.service.count)return this.service.count(this,e);throw new Error("This query has no service with count functionality attached.")},e.prototype.appendToList=function(e,t){var n,r,i,a,s;return(null!=e?e.name:void 0)?(n=e.name,s=function(t,n){if(null==t)return e.size=n.size}):(n=String(e),s=null),a=this.makeListQuery(),i={listName:n,query:a.toXML()},r=o(this.service),Y(s,t,this.service.post("query/append/tolist",i).then(r))},e.prototype.selectPreservingImpliedConstraints=function(e){var t,n,r,i,o;for(null==e&&(e=[]),n=this.clone(),n.select(e),o=this.getViewNodes(),r=0,i=o.length;r<i;r++)t=o[r],this.isOuterJoined(t)||n.isInView(t||n.isConstrained(t))||null==t.getEndClass().fields.id||n.addConstraint([t.append("id"),"IS NOT NULL"]);return n},e.prototype.makeListQuery=function(){var e,t;return e=this.views.slice(),1===e.length&&(null!=(t=e[0])?t.match(/\.id$/):void 0)||(e=["id"]),this.selectPreservingImpliedConstraints(e)},e.prototype.saveAsList=function(e,t){var n,r;return r=this.makeListQuery(),n=X.copy(e),n.listName=n.listName||n.name,n.query=r.toXML(),e.tags&&(n.tags=e.tags.join(";")),Y(t,this.service.post("query/tolist",n).then(o(this.service)))},e.prototype.summarise=function(e,t,n){return this.filterSummary(e,"",t,n)},e.prototype.summarize=function(){var e;return e=1<=arguments.length?te.call(arguments,0):[],this.summarise.apply(this,e)},a=function(e){var t,n,r,i,o,a,s;for(t=null!=(null!=(a=e.results[0])?a.max:void 0),s=e.results,i=0,o=s.length;i<o;i++)n=s[i],n.count=parseInt(n.count,10);return r={uniqueValues:e.uniqueValues,filteredCount:e.filteredCount},t&&(r=I(r,e.results[0])),e.stats=r,e},e.prototype.filterSummary=function(e,t,n,r){var i,o,s;return null==r&&(r=function(){}),X.isFunction(n)&&(s=[n,null],r=s[0],n=s[1]),e=this.adjustPath(e),o=this.clone(),J.call(o.views,e)<0&&o.views.push(e),i={query:o.toXML(),summaryPath:e,format:"jsonrows"},n&&(i.size=n),t&&(i.filterTerm=t),Y(r,this.service.post("query/results",i).then(a))},e.prototype.clone=function(t){var n,r,i,o;if(n=new e(this,this.service),null==n._callbacks&&(n._callbacks={}),t){o=this._callbacks;for(r in o)ne.call(o,r)&&(i=o[r],n._callbacks[r]=i);n.off("change:views",B,this)}return n},e.prototype.next=function(){var e;return e=this.clone(),this.maxRows&&(e.start=this.start+this.maxRows),e},e.prototype.previous=function(){var e;return e=this.clone(),this.maxRows?e.start=this.start-this.maxRows:e.start=0,e},e.prototype.getSortDirection=function(e){var t,n;if(t=this.adjustPath(e),!this.isInQuery(t)&&!this.isRelevant(t))throw new Error(""+e+" is not in the query");return n=X.find(this.sortOrder,function(e){var n;return n=e.path,t===n}),null!=n?n.direction:void 0},e.prototype.isOuterJoined=function(e){var t,n,r;e=this.adjustPath(e),r=this.joins;for(n in r)if(t=r[n],"OUTER"===t&&0===e.indexOf(n))return!0;return!1},e.prototype.getOuterJoin=function(e){var t,n;return e=this.adjustPath(e),t=function(){var e;e=[];for(n in this.joins)e.push(n);return e}.call(this).sort(function(e,t){return t.length-e.length}),X.find(t,function(t){return function(n){return"OUTER"===t.joins[n]&&0===e.indexOf(n)}}(this))},e.prototype._parse_sort_order=function(e){var t,n,r,i,o,a;if(null==e)throw new Error("No input");if("string"==typeof e)i={path:e,direction:"ASC"};else if(X.isArray(e))r=e[0],t=e[1],i={path:r,direction:t};else if(null==e.path){for(n in e)o=e[n],a=[n,o],r=a[0],t=a[1];i={path:r,direction:t}}else r=e.path,t=e.direction,i={path:r,direction:t};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},e.prototype.addOrSetSortOrder=function(e){var t,n;return e=this._parse_sort_order(e),t=this.getSortDirection(e.path),null==t?this.addSortOrder(e):t!==e.direction&&(n=X.find(this.sortOrder,function(t){var n;return n=t.path,n===e.path}),n.direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},e.prototype.addSortOrder=function(e,t){var n;if(n=(null!=t?t:{}).silent,this.sortOrder.push(this._parse_sort_order(e)),!n)return this.trigger("add:sortorder",e),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},e.prototype.orderBy=function(e,t){var n,r,i,o,a,s,u,l;for(null==t&&(t={}),o=this.sortOrder.slice(),this.sortOrder=[],s=0,u=e.length;s<u;s++)i=e[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var e,t,n,i,o;for(n=this.sortOrder,o=[],e=0,t=n.length;e<t;e++)i=n[e],a=i.path,r=i.direction,o.push({path:a,direction:r});return o}.call(this),this.trigger("set:sortorder",n),z(o)!==this.getSorting()&&(t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},e.prototype.addJoins=function(e){var t,n,r,i,o,a,s;if(X.isArray(e)){for(a=[],i=0,o=e.length;i<o;i++)t=e[i],a.push(this.addJoin(t));return a}s=[];for(n in e)r=e[n],s.push(this.addJoin({path:n,style:r}));return s},e.prototype.addJoin=function(e){return"string"==typeof e&&(e={path:e,style:"OUTER"}),this.setJoinStyle(e.path,e.style)},e.prototype.setJoinStyle=function(t,n){if(null==n&&(n="OUTER"),t=this.adjustPath(t),n=n.toUpperCase(),J.call(e.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[t]!==n&&(this.joins[t]=n,this.trigger("change:joins",{path:t,style:n}),this.trigger("change")),this},e.prototype.addConstraints=function(e,t){var n,r,i,o,a,s,u;if(null==t&&(t="and"),this.__silent__=!0,i=this.constraintLogic,X.isArray(e))for(s=0,u=e.length;s<u;s++)n=e[s],this.addConstraint(n,t);else{a=function(e){return function(n,r){return e.addConstraint(O(n,r),t)}}(this);for(o in e)r=e[o],a(o,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},e.prototype.addConstraint=function(e,t){var n,i,o,a,s,u,l;if(null==t&&(t="and"),"and"!==t&&"or"!==t)throw new Error("Unknown logical conjunction: "+t);return e=X.isArray(e)?P(e):g(e),"OFF"===e.switched?this:(e.path=this.adjustPath(e.path),null==e.type&&(e.op=_(e.op)),this.constraints.push(e),o="or"===t||(null!=(l=this.constraintLogic)?l.length:void 0)>0,a=this.constraints.length,u=this.constraintLogic,o&&(s=2===a?""+r[0]+" "+t+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var e,t,i;for(i=[],n=e=0,t=a-2;0<=t?e<=t:e>=t;n=0<=t?++e:--e)i.push(r[n]);return i}().join(" and ")),"("+i+") "+t+" "+r[a-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",e),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},e.prototype.getSorting=function(){return z(this.sortOrder)},e.prototype.getConstraintXML=function(){var e,t;return t=function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;t<n;t++)e=r[t],(null==e.type||this.isInQuery(e.path))&&i.push(e);return i}.call(this),t.length?v(f)(v(T)(R(function(e){return null!=e.type})(t))):""},e.prototype.getJoinXML=function(){var e,t,n;return n=function(){var n,r;n=this.joins,r=[];for(e in n)t=n[e],this.isInQuery(e)&&"OUTER"===t&&r.push('<join path="'+e+'" style="OUTER"/>');return r}.call(this),n.join("")},e.prototype.toXML=function(){var e,t,n,r;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),t=function(){var t;t=[];for(n in e)r=e[n],r&&t.push(n+'="'+r+'"');return t}().join(" "),"<query "+t+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},e.prototype.toJSON=function(){var e,t,n,r,i;return M({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var e,t,n,r;for(n=this.views,r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push(S(i));return r}.call(this),orderBy:function(){var e,r,i,o,a;for(i=this.sortOrder,a=[],e=0,r=i.length;e<r;e++)o=i[e],n=o.path,t=o.direction,a.push({path:S(n),direction:t});return a}.call(this),joins:function(){var e,t;e=this.joins,t=[];for(n in e)r=e[n],"OUTER"===r&&t.push(S(n));return t}.call(this),where:function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;t<n;t++)e=r[t],i.push(d(e));return i}.call(this)})},e.prototype.fetchCode=function(e,t){var n;return n={query:this.toXML(),lang:e},Y(t,this.service.post("query/code",n).then(this.service.VERIFIER).then(E("code")))},e.prototype.setName=function(e){this.name=e},e.prototype.save=function(e,t){return s(this.service,16,function(n){return function(){var r,i;return X.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(t,n.service.authorise(r)).then(function(e){return n.service.doReq(e)}).then(function(e){return e.queries})}}(this))},e.prototype.store=function(e,t){return s(this.service,16,function(n){return function(){var r,i,o,a;return X.isFunction(e)&&(a=[null,e],e=a[0],t=a[1]),null!=e&&n.setName(e),o=function(e,t){if(null==e)return n.setName(t)},r=X.compose(E(n.name),E("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(t,o,n.service.authorise(i)).then(function(e){return n.service.doReq(e)}).then(r)}}(this))},e.prototype.saveAsTemplate=function(e,t){return s(this.service,16,function(n){return function(){var r,i;if(X.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+h(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},Y(t,n.service.authorise(r).then(function(e){return n.service.doReq(e)}))}}(this))},e.prototype.getCodeURI=function(e){var t,n;return t={query:this.toXML(),lang:e,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(t.token=this.service.token),""+this.service.root+"query/code?"+F(t)},e.prototype.getExportURI=function(t,n){var r,i;return null==t&&(t="tab"),null==n&&(n={}),J.call(e.BIO_FORMATS,t)>=0?this["get"+t.toUpperCase()+"URI"](n):(r=I(n,{query:this.toXML(),format:t}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+F(r))},e.prototype.needsAuthentication=function(){return X.any(this.constraints,function(e){var t;return"NOT IN"===(t=e.op)||"IN"===t})},e.prototype.fetchQID=function(e){return Y(e,this.service.post("queries",{query:this.toXML()}).then(E("id")))},t=function(e){return e.append("primaryIdentifier").toString()},e.prototype.__bio_req=function(e,n){var r,i;return i=this.makeListQuery(),r=function(t){return X.any(e,function(e){return t.isa(e)})},i.views=X.take(n)(function(){var e,i,o,a;for(o=this.getViewNodes(),a=[],e=0,i=o.length;e<i;e++)n=o[e],r(n)&&a.push(t(n));return a}.call(this)),{query:i.toXML(),format:"text"}},e.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},e.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},e.prototype._bed_req=e.prototype._gff3_req,e}(),U=w(function(e,t){return e.concat(t)}),a.prototype.toString=a.prototype.toXML,a.ATTRIBUTE_OPS=U([a.ATTRIBUTE_VALUE_OPS,a.MULTIVALUE_OPS,a.NULL_OPS]),a.REFERENCE_OPS=U([a.TERNARY_OPS,a.LOOP_OPS,a.LIST_OPS]),c=function(e,t){return function(n,r){var i,o,a,s,u;return null==n&&(n={}),null==r&&(r=function(){}),X.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(e){return function(t){var n;return n=e.getPathInfo(t),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var e,t,r,i;for(r=n.view,i=[],e=0,t=r.length;e<t;e++)s=r[e],i.push(this.getPathInfo(s).toString());return i}.call(this)),o=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,a=I(o[e](),n),t.call(o,a,r)}},K=a.BIO_FORMATS,W=function(e){var t,n,r;return n="_"+e+"_req",t="get"+e.toUpperCase(),r=t+"URI",a.prototype[t]=c(n,function(t,n){return Y(n,this.service.post("query/results/"+e,t))}),a.prototype[r]=c(n,function(t,n){return null!=this.service.token&&(t.token=this.service.token),""+this.service.root+"query/results/"+e+"?"+F(t)})};for(G=0,Z=K.length;G<Z;G++)b=K[G],W(b);for(H=function(e){return function(){var t,n,r,i;if(n=arguments[0],t=2<=arguments.length?te.call(arguments,1):[],this.service[e])return null==n?n={}:X.isFunction(n)&&(n={},t=function(){var e,t,n;for(n=[],e=0,t=arguments.length;e<t;e++)r=arguments[e],n.push(r);return n}.apply(this,arguments)),n=M(I({start:this.start,size:this.maxRows},n)),(i=this.service)[e].apply(i,[this,n].concat(te.call(t)));throw new Error("Service does not provide '"+e+"'.")}},$=0,Q=u.length;$<Q;$++)N=u[$],a.prototype[N]=H(N);i.mixin(a.prototype),a.prototype.emit=a.prototype.trigger,a.prototype.bind=a.prototype.on,k.Query=a}).call(this)},{"./util":39,"./xml":41,"backbone-events-standalone":15}],35:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,x,w,E,_,S,T,C,k,P,O,A,I,N,L,M,D,R,B,j,q,z,F,V,U,X,Y,W,H,G,$,Z,Q,K,J,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,he,fe,de,pe=function(e,t){
return function(){return e.apply(t,arguments)}},ve={}.hasOwnProperty,ge=[].slice;for(_=e("./promise"),m=e("./model").Model,C=e("./query").Query,v=e("./lists").List,q=e("./user").User,c=e("./id-resolution-job").IDResolutionJob,oe=e("./version"),ie=e("./util"),Z=e("./http"),re=ie.querystring,ae=ie.withCB,K=ie.map,J=ie.merge,G=ie.get,te=ie.set,Q=ie.invoke,ne=ie.success,H=ie.error,O=ie.REQUIRES_VERSION,W=ie.dejoin,z={},r={},k={},g={},L={},U={},a="http://",F="version",R="templates",P="version/release",i="classkeys",f="lists",y="model",N="summaryfields",S="query/results",T="search",X="widgets",s="list/enrichment",Y="listswithobject",d={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},A="lists/subtract",V="user/whoami",D=S+"/tablerows",E="user/preferences",w="path/values",j="user/tokens",h="ids",x={},fe=[F,P,i,X,y,N,T,w],ue=0,ce=fe.length;ue<ce;ue++)ee=fe[ue],x[ee]=!0;for(t={},de=[V,E,d,A,Y,s,R,j],le=0,he=de.length;le<he;le++)ee=de[le],t[ee]=!0;b=function(e,n){return!x[e]&&(!!t[e]||(null==n||!n.needsAuthentication||n.needsAuthentication()))},u=/^https?:\/\//i,l=/service\/?$/i,I="/service/",o=function(e){var t,n;return(t=null!=(n=console.error)?n:console.log)(e)},se=function(e,t,n,r,i){var o,a,s,u,l;return s=this.root,u=this.useCache,a=null!=this[e]?this[e]:this[e]=u&&(l=t[s])?ne(l):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(J(o,{url:this.root+n})).then(function(e){return t[s]=e[r]})),ae(i,a)},$=function(e){return function(t){return new _(function(n,r){var i;return(i=ie.find(t,function(t){return t.name===e}))?n(i):r('List "'+e+'" not found among: '+t.map(G("name")))})}},p=function(e,t){return null==t&&(t="listName"),ie.compose(e.fetchList,G(t))},B=function(e){var t,n,r,i,o,a;for(null==e&&(e=[]),i=ie.isArray(e)?e:[e],a=[],n=0,r=i.length;n<r;n++)t=i[n],a.push(null!=(o=t.name)?o:t);return a},M=function(){function e(e){var t;if(this.root=e.root,this.token=e.token,this.errorHandler=e.errorHandler,this.DEBUG=e.DEBUG,this.help=e.help,t=e.noCache,this.headers=e.headers,this.connectAs=pe(this.connectAs,this),this.createList=pe(this.createList,this),this.resolveIds=pe(this.resolveIds,this),this.templateQuery=pe(this.templateQuery,this),this.savedQuery=pe(this.savedQuery,this),this.query=pe(this.query,this),this.fetchRelease=pe(this.fetchRelease,this),this.fetchClassKeys=pe(this.fetchClassKeys,this),this.fetchVersion=pe(this.fetchVersion,this),this.fetchSummaryFields=pe(this.fetchSummaryFields,this),this.fetchModel=pe(this.fetchModel,this),this.fetchWidgetMap=pe(this.fetchWidgetMap,this),this.fetchWidgets=pe(this.fetchWidgets,this),this.complement=pe(this.complement,this),this.fetchListsContaining=pe(this.fetchListsContaining,this),this.fetchList=pe(this.fetchList,this),this.findLists=pe(this.findLists,this),this.fetchLists=pe(this.fetchLists,this),this.fetchTemplates=pe(this.fetchTemplates,this),this.tableRows=pe(this.tableRows,this),this.values=pe(this.values,this),this.rows=pe(this.rows,this),this.records=pe(this.records,this),this.table=pe(this.table,this),this.pathValues=pe(this.pathValues,this),this.fetchUser=pe(this.fetchUser,this),this.whoami=pe(this.whoami,this),this.findById=pe(this.findById,this),this.count=pe(this.count,this),this.enrichment=pe(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=a+this.root),l.test(this.root)||(this.root=this.root+I),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!t,this.getFormat=function(e){return function(e){return null==e&&(e="json"),e}}(this)}var t,n,x,_,M,j;return e.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),Z.doReq.apply(this,arguments)},e.prototype.post=function(e,t){return this.makeRequest("POST",e,t)},e.prototype.get=function(e,t){return this.makeRequest("GET",e,t)},e.prototype.makeRequest=function(e,t,n,r,i){var o,a,s,u,l,c,h;return null==e&&(e="GET"),null==t&&(t=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),ie.isArray(r)&&(l=r,r=l[0],a=l[1]),ie.isArray(n)&&(n=ie.pairsToObj(n)),null==a&&(a=this.errorHandler),n=ie.copy(n),o=this.getFormat(n.format),Z.supports(e)||(c=[e,Z.getMethod(e)],n.method=c[0],e=c[1]),s={data:n,dataType:o,success:r,error:a,path:t,type:e},null!=n.auth&&(s.auth=n.auth,delete s.data.auth),null!=n.headers&&(s.headers=ie.copy(n.headers),delete s.data.headers),(u=null!=(h=n.timeout)?h:this.timeout)&&(s.timeout=u,delete n.timeout),this.authorise(s).then(function(e){return function(t){return e.doReq(t,i)}}(this))},e.prototype.authorise=function(e){return this.fetchVersion().then(function(t){return function(n){var r,i,o;return r=ie.copy(e),null==r.headers&&(r.headers={}),r.url=t.root+r.path,i=[],n<14&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=t.token&&b(e.path,null!=(o=r.data)?o.query:void 0)&&(n>=14?r.headers.Authorization="Token "+t.token:"string"==typeof r.data?i.push(["token",t.token]):r.data.token=t.token),i.length&&(r.url+="?"+re(i)),r}}(this))},e.prototype.attachCustomHeaders=function(e){var t;return null!=this.headers?(t=ie.copy(e),t.headers=ie.merge(t.headers,this.headers),t):e},e.prototype.enrichment=function(e,t){return O(this,8,function(n){return function(){var r;return r=J({maxp:.05,correction:"Holm-Bonferroni"},e),ae(t,n.get(s,r).then(G("results")))}}(this))},e.prototype.search=function(e,t){return null==e&&(e={}),null==t&&(t=function(){}),O(this,9,function(n){return function(){var r,i,o,a;if(ie.isFunction(e)&&(a=[e,{}],t=a[0],e=a[1]),"string"==typeof e)i={q:e};else{i={q:e.q,start:e.start,size:e.size};for(r in e)ve.call(e,r)&&(o=e[r],"q"!==r&&"start"!==r&&"size"!==r&&(i["facet_"+r]=o))}return ae(t,n.post(T,i))}}(this))},e.prototype.makePath=function(e,t,n){return null==t&&(t={}),null==n&&(n=function(){}),ae(n,this.fetchModel().then(function(n){return n.makePath(e,t)}))},e.prototype.count=function(e,t){var n,r;return null==t&&(t=function(){}),n=e?null!=e.toPathString?(ee=e.isClass()?e.append("id"):e,this.pathValues(ee,"count")):null!=e.toXML?(r={query:e,format:"jsoncount"},this.post(S,r).then(G("count"))):"string"==typeof e?this.fetchModel().then(function(t){return function(n){var r;try{return t.count(n.makePath(e))}catch(i){return r=i,t.query({select:[e]}).then(t.count)}}}(this)):this.query(e).then(this.count):H("Not enough arguments"),ae(t,n)},e.prototype.findById=function(e,t,n,r){var i,o;return null==n&&(n=["**"]),null==r&&(r=function(){}),ie.isFunction(n)&&(o=[["**"],n],n=o[0],r=o[1]),i=this.query({from:e,select:n,where:{id:t}}).then(W).then(Q("records")).then(G(0)),ae(r,i)},e.prototype.lookup=function(e,t,n,r){var i,o;return ie.isFunction(n)&&(o=[null,n],n=o[0],r=o[1]),i=this.query({from:e,select:["**"],where:[[e,"LOOKUP",t,n]]}).then(W).then(Q("records")),ae(r,i)},e.prototype.find=function(e,t,n,r){var i;return ie.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),ae(r,this.lookup(e,t,n).then(function(e){return null==e||0===e.length?H("Nothing found"):e.length>1?H("Multiple items found: "+e.slice(0,3)+"..."):ne(e[0])}))},e.prototype.whoami=function(e){return O(this,9,function(t){return function(){return ae(e,t.get(V).then(G("user")).then(function(e){return new q(t,e)}))}}(this))},e.prototype.fetchUser=function(){var e;return e=1<=arguments.length?ge.call(arguments,0):[],this.whoami.apply(this,e)},M=function(e,t){return{format:e,path:String(t),typeConstraints:JSON.stringify(t.subclasses)}},e.prototype.pathValues=function(e,t,n){return null==t&&(t={}),O(this,6,function(r){return function(){var i,o,a,s,u;return"string"==typeof t&&(s=t,t={}),ie.isFunction(t)&&(u=[n,t],t=u[0],n=u[1]),"count"!==s&&(s="results"),o="count"===s?"jsoncount":"json",a=function(){var n;try{return this.fetchModel().then(Q("makePath",e,null!=(n=e.subclasses)?n:t)).then(function(e){return M(o,e)}).then(function(e){return function(t){return e.post(w,t)}}(this)).then(G(s))}catch(r){return i=r,H(i)}}.call(r),ae(n,a)}}(this))},e.prototype.doPagedRequest=function(e,t,n,r,i){var o,a;return null==n&&(n={}),null==i&&(i=function(){}),null!=e.toXML?(ie.isFunction(n)&&(a=[n,{}],i=a[0],n=a[1]),o=J(n,{query:e,format:r}),ae(i,this.post(t,o).then(G("results")))):this.query(e).then(function(e){return function(o){return e.doPagedRequest(o,t,n,r,i)}}(this))},e.prototype.table=function(e,t,n){return this.doPagedRequest(e,S,t,"jsontable",n)},e.prototype.records=function(e,t,n){return this.doPagedRequest(e,S,t,"jsonobjects",n)},e.prototype.rows=function(e,t,n){return this.doPagedRequest(e,S,t,"json",n)},e.prototype.values=function(e,t,n){var r,i;return ie.isFunction(t)&&(i=[t,n],n=i[0],t=i[1]),r=null==e?H("No query term supplied"):null!=e.descriptors||"string"==typeof e?this.pathValues(e,t).then(K(G("value"))):null!=e.toXML?1!==e.views.length?H("Expected one column, got "+e.views.length):this.rows(e,t).then(K(G(0))):this.query(e).then(function(e){return function(n){return e.values(n,t)}}(this)),ae(n,r)},e.prototype.tableRows=function(e,t,n){return this.doPagedRequest(e,D,t,"json",n)},e.prototype.fetchTemplates=function(e){return ae(e,this.get(R).then(G("templates")))},e.prototype.fetchLists=function(e){return this.findLists("",e)},e.prototype.findLists=function(e,t){return null==e&&(e=""),null==t&&(t=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return ae(t,e&&r<13?H("Finding lists by name on the server requires version 13. This is only "+r):(i=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(new v(t,n));return o},n.get(f,{name:e}).then(G("lists")).then(i)))}}(this))},e.prototype.fetchList=function(e,t){return this.fetchVersion().then(function(n){return function(r){return ae(t,r<13?n.findLists().then($(e)):n.findLists(e).then(G(0)))}}(this))},e.prototype.fetchListsContaining=function(e,t){var n;return n=function(e){return function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(new v(n,e));return o}}(this),ae(t,this.get(Y,e).then(G("lists")).then(n))},e.prototype.combineLists=function(e,t,n){var r,i,o,a,s,u;return u=J({lists:[],tags:[]},t),o=u.name,i=u.lists,s=u.tags,r=u.description,a={name:o,description:r},null==a.description&&(a.description=""+e+" of "+i.join(", ")),a.tags=s.join(";"),a.lists=i.join(";"),ae(n,this.get(d[e],a).then(p(this)))},e.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(ge.call(arguments)))},e.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(ge.call(arguments)))},e.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(ge.call(arguments)))},e.prototype.complement=function(e,t){var n,r,i,o,a,s,u,l,c;return null==e&&(e={}),null==t&&(t=function(){}),o=e.from,i=e.exclude,s=e.name,r=e.description,c=e.tags,n=function(){return"Relative complement of "+a.join(" and ")+" in "+u.join(" and ")},u=B(o),a=B(i),null==s&&(s=n()),null==r&&(r=n()),null==c&&(c=[]),l={name:s,description:r,tags:c,lists:a,references:u},ae(t,this.post(A,l).then(p(this)))},e.prototype.fetchWidgets=function(e){return O(this,8,function(t){return function(){return se.call(t,"widgets",U,X,"widgets",e)}}(this))},j=ie.omap(function(e){return[e.name,e]}),e.prototype.fetchWidgetMap=function(e){return O(this,8,function(t){return function(){return ae(e,null!=t.__wmap__?t.__wmap__:t.__wmap__=t.fetchWidgets().then(j))}}(this))},e.prototype.fetchModel=function(e){var t;return t=se.call(this,"model",g,y,"model").then(m.load).then(te({service:this})),ae(e,t)},e.prototype.fetchSummaryFields=function(e){return se.call(this,"summaryFields",L,N,"classes",e)},e.prototype.fetchVersion=function(e){return se.call(this,"version",z,F,"version",e)},e.prototype.fetchClassKeys=function(e){return se.call(this,"classkeys",r,i,"classes",e)},e.prototype.fetchRelease=function(e){return se.call(this,"release",k,P,"version",e)},e.prototype.query=function(e,t){var n;return n=function(t){return function(n){var r,i;return r=n[0],i=n[1],new C(e,t,{model:r,summaryFields:i})}}(this),ae(t,ie.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},_=function(e,t){return function(n){return n?e.query(n):H("No query found called "+t)}},n=function(e){return e?"string"==typeof e?ne():H("Name must be a string"):H("Name not provided")},e.prototype.savedQuery=function(e,t){return O(this,16,function(r){return function(){return n(e).then(function(){return ae(t,r.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(_(r,e)))})}}(this))},e.prototype.templateQuery=function(e,t){return n(e).then(function(n){return function(){return ae(t,n.fetchTemplates().then(G(e)).then(te("type","TEMPLATE")).then(_(n,e)))}}(this))},e.prototype.manageUserPreferences=function(e,t,n){return O(this,11,function(r){return function(){return ae(n,r.makeRequest(e,E,t).then(G("preferences")))}}(this))},e.prototype.resolveIds=function(e,t){return O(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+h,contentType:"application/json",data:JSON.stringify(e),dataType:"json"},ae(t,n.doReq(r).then(G("uid")).then(c.create(n)))}}(this))},e.prototype.resolutionJob=function(e){return c.create(this)(e)},e.prototype.createList=function(e,t,n){var r,i;return null==e&&(e={}),null==t&&(t=""),null==n&&(n=function(){}),r=function(t){return function(n){return J(n,{token:t.token,tags:e.tags||[]})}}(this),i={data:ie.isArray(t)?t.map(function(e){return'"'+e+'"'}).join("\n"):t,dataType:"json",url:""+this.root+"lists?"+re(r(e)),type:"POST",contentType:"text/plain"},ae(n,this.doReq(i).then(p(this)))},x=function(e){return e.user.temporaryToken},e.prototype.connectAs=function(t){return e.connect(J(this,{token:t,noCache:!this.useCache}))},e.prototype.register=function(e,t,n){return O(this,9,function(r){return function(){return ae(n,r.post("users",{name:e,password:t}).then(x).then(r.connectAs))}}(this))},t=300,e.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=t),O(this,16,function(t){return function(){var r;return r=null!=t.token?t.post("user/deregistration",{validity:e}).then(G("token")):H("Not registered"),ae(n,r)}}(this))},e.prototype.deregister=function(e,t){return O(this,16,function(n){return function(){return ae(t,n.makeRequest("DELETE","user",{deregistrationToken:e,format:"xml"}))}}(this))},e.prototype.login=function(e,t,n){return O(this,9,function(r){return function(){var i;return i=""+e+":"+t,ae(n,r.logout().then(function(e){return e.get("user/token",{auth:i})})).then(G("token")).then(r.connectAs)}}(this))},e.prototype.logout=function(e){return ae(e,ne(this.connectAs()))},e}(),M.prototype.rowByRow=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=Z.iterReq("POST",S,"json"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.rowByRow.apply(t,[n].concat(ge.call(e)))}}(this))},M.prototype.eachRow=M.prototype.rowByRow,M.prototype.recordByRecord=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=Z.iterReq("POST",S,"jsonobjects"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.recordByRecord.apply(t,[n].concat(ge.call(e)))}}(this))},M.prototype.eachRecord=M.prototype.recordByRecord,M.prototype.union=M.prototype.merge,M.prototype.difference=M.prototype.diff,M.prototype.symmetricDifference=M.prototype.diff,M.prototype.relativeComplement=M.prototype.complement,M.prototype.subtract=M.prototype.complement,M.flushCaches=function(){return g={},z={},k={},r={},L={},U={}},M.connect=function(e){if(null==(null!=e?e.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(e));return new M(e)},n.Service=M,n.Model=m,n.Query=C,n.utils=ie,n.VERSION=oe.VERSION,n.imjs=oe}).call(this)},{"./http":28,"./id-resolution-job":29,"./lists":30,"./model":31,"./promise":33,"./query":34,"./user":38,"./util":39,"./version":40}],36:[function(e,t,n){(function(e){(function(){var t;n.DOMParser=null!=e.DOMParser?e.DOMParser:t=function(){function e(){throw new Error("DOMParser is not available")}return e}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){(function(){var t,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}};r=function(e,t){var n,r,i;i=[];for(n in e)r=e[n],i.push(t[n]=r);return i},t=e("./promise"),i=["attributes","references","collections"],n.Table=function(){function e(e,t){var n,a,s,u,l,c,h;for(this.model=t,this.getDisplayName=o(this.getDisplayName,this),this.name=e.name,this.tags=e.tags,this.displayName=e.displayName,this.attributes=e.attributes,this.references=e.references,this.collections=e.collections,this.fields={},this.__parents__=null!=(c=e["extends"])?c:[],u=0,l=i.length;u<l;u++){if(a=i[u],null==this[a])throw new Error("Bad model data: missing "+a);r(this[a],this.fields)}h=this.collections;for(s in h)n=h[s],n.isCollection=!0}return e.prototype.toString=function(){var e,t;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(e in n)t=n[e],r.push(e);return r}.call(this)+"]]"},e.prototype.parents=function(){var e;return(null!=(e=this.__parents__)?e:[]).slice()},e.prototype.getDisplayName=function(){return new t(function(e){return function(t,n){return null!=e.model?t(e.model.makePath(e.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},e}()}).call(this)},{"./promise":33}],38:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l=function(e,t){return function(){return e.apply(t,arguments)}};u=e("./util"),s=u.withCB,o=u.get,a=u.isFunction,t=u.any,i=u.error,r=function(e,t,n,r){return e.service.manageUserPreferences(n,t,r).then(function(t){return e.preferences=t})},n.User=function(){function e(e,t){this.service=e,this.username=t.username,this.preferences=t.preferences,this.refresh=l(this.refresh,this),this.clearPreferences=l(this.clearPreferences,this),this.clearPreference=l(this.clearPreference,this),this.setPreferences=l(this.setPreferences,this),this.setPreference=l(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return e.prototype.setPreference=function(e,t,n){var r,o;if(a(t)&&(o=[null,t],t=o[0],n=o[1]),"string"==typeof e)r={},r[e]=t;else{if(null!=t)return s(n,i("Incorrect arguments to setPreference"));r=e}return this.setPreferences(r,n)},e.prototype.setPreferences=function(e,t){return r(this,e,"POST",t)},e.prototype.clearPreference=function(e,t){return r(this,{key:e},"DELETE",t)},e.prototype.clearPreferences=function(e){return r(this,{},"DELETE",e)},e.prototype.refresh=function(e){return r(this,{},"GET",e)},e.prototype.createToken=function(e,n,r){var i,u;return null==e&&(e="day"),null==r&&t([e,n],a)&&(a(e)?(i=[null,null,e],e=i[0],n=i[1],r=i[2]):a(n)&&(u=[null,n],n=u[0],r=u[1])),s(r,this.service.post("user/tokens",{type:e,message:n}).then(o("token")))},e.prototype.fetchCurrentTokens=function(e){return s(e,this.service.get("user/tokens").then(o("tokens")))},e.prototype.revokeAllTokens=function(e){return s(e,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(e,t){return s(t,this.service.makeRequest("DELETE","user/tokens/"+e))},e}()}).call(this)},{"./util":39}],39:[function(e,t,n){(function(){var t,r,i,o,a,s,u,l,c,h,f,d,p,v,g,y,m,b,x,w,E=[].slice,_=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},S={}.hasOwnProperty;t=e("./promise"),m=n,m.defer=function(){var e;return e={},e.promise=new t(function(t,n){return e.resolve=t,e.reject=n}),e},a=function(e){return encodeURIComponent(String(e))},y=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t.map(a).join("="));return i}().join("&")},m.querystring=function(e){var t,n,r,i,o,a;if(!e)return"";if(p(e))r=e.slice();else{r=[];for(t in e)a=e[t],p(a)?(i=function(){var e,n,r;for(r=[],e=0,n=a.length;e<n;e++)o=a[e],r.push([t,o]);return r}(),r=r.concat(i)):r.push([t,a])}return y(function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)n=r[e],null!=n[1]&&i.push(n);return i}())},m.curry=o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?E.call(arguments,1):[],function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],t.apply(null,e.concat(n))}},m.error=u=function(e){return new t(function(t,n){return n(new Error(e))})},m.success=b=function(e){return new t(function(t,n){return t(e)})},m.parallel=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],1===e.length&&!e[0].then&&e[0].length?t.all(e[0]):t.all(e)},m.withCB=function(){var e,t,n,r,i,a,s,u;for(t=2<=arguments.length?E.call(arguments,0,a=arguments.length-1):(a=0,[]),i=arguments[a++],s=0,u=t.length;s<u;s++)e=t[s],null!=e&&(r=o(e,null),n=e,i.then(r,n));return i},m.fold=c=function(e){return function(t,n){var r,i,o;if(1===arguments.length&&(n=(null!=t?t.slice():void 0)||t,t=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(e,t);i=t;for(r in n)o=n[r],i=null!=i?e(i,r,o):{k:o};return i}},m.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},m.filter=function(e){return function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],e(n)&&o.push(n);return o}},m.uniqBy=function(e,t){var n,r,i,a,s,u;if(1===arguments.length)return o(m.uniqBy,e);if(r=[],i=[],null==t)return i;for(s=0,u=t.length;s<u;s++)a=t[s],n=e(a),_.call(r,n)<0&&(r.push(n),i.push(a));return i},m.find=function(e,t){var n,r,i;if(1===arguments.length)return t=e,function(e){return m.find(e,t)};for(r=0,i=e.length;r<i;r++)if(n=e[r],t(n))return n;return null},p=null!=(w=Array.isArray)?w:function(e){return null!=(null!=e?e.splice:void 0)&&null!=(null!=e?e.push:void 0)&&null!=(null!=e?e.pop:void 0)&&null!=(null!=e?e.slice:void 0)},m.isArray=p,m.isFunction="function"!=typeof/./?function(e){return"function"==typeof e}:function(e){return null!=e&&null!=e.call&&null!=e.apply&&"[object Function]"===e.toString()},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(e){var t,n,r,i,o,a;if(null==e)return"";for(i=String(e).replace(/[&<>"']/g,function(e){return s[e]}),r=[],n=o=0,a=i.length;0<=a?o<=a:o>=a;n=0<=a?++o:--o)t=i.charCodeAt(n),t>256?r.push("&#"+t+";"):r.push(i.charAt(n));return r.join("")},m.omap=function(e){var t;return t=c(function(t,n,r){var i,o,a;return a=e(n,r),i=a[0],o=a[1],p(o)&&(o=o.slice()),t[i]=o,t}),function(e){return t({},e)}},m.copy=m.omap(function(e,t){return[e,t]}),m.partition=function(e){return function(t){var n;return(n=c(function(t,n){var r,i;return i=t[0],r=t[1],e(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],t)}},m.merge=function(e,t){return extend(extend({},e),t)},m.extend=function(e,t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},m.id=h=function(e){return e},m.concatMap=function(e){return function(t){var n,r,i,o,a;for(r=void 0,o=0,a=t.length;o<a;o++)i=t[o],n=e(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):v(r,n);return r}},m.map=function(e){return f("map",e)},i=c(function(e,t){return function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],e(t.apply(null,n))}}),m.compose=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],i(e)},m.flatMap=m.concatMap,m.difference=function(e,t){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],_.call(t,n)<0&&o.push(n);return o},m.stringList=function(e){return"string"==typeof e?[e]:e},m.flatten=l=function(){var e,t,n,r,i,o,a,s,u;for(n=1<=arguments.length?E.call(arguments,0):[],e=[],i=0,a=n.length;i<a;i++)if(t=n[i],p(t))for(u=l.apply(null,t),o=0,s=u.length;o<s;o++)r=u[o],e.push(r);else e.push(t);return e},m.sum=m.concatMap(h),m.merge=v=function(){var e,t,n,r,i,o,a;for(r=1<=arguments.length?E.call(arguments,0):[],t={},o=0,a=r.length;o<a;o++){n=r[o];for(e in n)S.call(n,e)&&(i=n[e],t[e]=i)}return t},m.any=function(e,t){var n,r,i;for(null==t&&(t=h),r=0,i=e.length;r<i;r++)if(n=e[r],t(n))return!0;return!1},m.invoke=f=function(){var e,t;return t=arguments[0],e=2<=arguments.length?E.call(arguments,1):[],d(t,e)},m.invokeWith=d=function(e,t,n){return null==t&&(t=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+e+'" of null');if(r[e])return r[e].apply(n||r,t);throw new Error('Cannot call undefined method "'+e+" of "+r)}},m.get=function(e){return function(t){return t[e]}},m.set=function(e,t){return function(n){var r,i;if(2===arguments.length)n[e]=t;else for(r in e)S.call(e,r)&&(i=e[r],n[r]=i);return n}},r=function(e,t){return"This service requires a service at version "+e+" or above. This one is at "+t},m.REQUIRES_VERSION=function(e,t,n){return e.fetchVersion().then(function(e){return e>=t?n():u(r(t,e))})},m.dejoin=function(e){var t,n,r,i,o;for(o=e.views,r=0,i=o.length;r<i;r++)n=o[r],t=n.split("."),t.length>2&&e.addJoin(t.slice(1,-1).join("."));return e},x=c(function(e,t){return e.then(t)}),m.sequence=function(){var e;return e=1<=arguments.length?E.call(arguments,0):[],x(b(),e)},g=c(function(e,t){var n,r;if(n=t[0],r=t[1],null!=e[n])throw new Error("Duplicate key: "+n);return e[n]=r,e}),m.pairsToObj=function(e){return g({},e)}}).call(this)},{"./promise":33}],40:[function(e,t,n){(function(){n.VERSION="3.16.0"}).call(this)},{}],41:[function(e,t,n){(function(){var t,r;t=e("xmldom").DOMParser,r=function(e){return e=e.replace(/^\s*/g,""),e=e.replace(/\s$/g,""),0===e.length?e:">"!==e[e.length-1]?e+">":e},n.parse=function(e){var n,i;if("string"!=typeof e)throw new Error("Expected a string - got "+e);if(e=r(e),!e)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new t,i.parseFromString(e,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}}).call(this)},{xmldom:36}],42:[function(e,t,n){(function(r,i){function o(e,t){return"string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e?e:"function"==typeof e&&e(t)}var a=e("jsonparse"),s=e("through");n.parse=function(e,t){var n=new a,r=s(function(e){"string"==typeof e&&(e=new i(e)),n.write(e)},function(e){e&&r.write(e),r.queue(null)});"string"==typeof e&&(e=e.split(".").map(function(e){return"*"===e||(""===e?{recurse:!0}:e)}));var u=0;return e&&e.length||(e=null),n.onValue=function(n){if(this.root||(r.root=n),e){for(var i=0,a=0;i<e.length;){var s,l=e[i];if(a++,l&&!l.recurse){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(!o(l,s.key))return;i++}else{i++;var c=e[i];if(!c)return;for(;;){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(o(c,s.key)){i++;break}a++}}}if(a===this.stack.length){u++;var h=this.stack.slice(1).map(function(e){return e.key}).concat([this.key]),f=this.value[this.key];null!=f&&null!=(f=t?t(f,h):f)&&r.queue(f),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(t,i){n._onToken(t,i),0===this.stack.length&&r.root&&(e||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(e){r.emit("error",e)},r},n.stringify=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="[\n",t="\n,\n",n="\n]\n");var i,o=!0,a=!1;return i=s(function(n){a=!0;var s=JSON.stringify(n,null,r);o?(o=!1,i.queue(e+s)):i.queue(t+s)},function(t){a||i.queue(e),i.queue(n),i.queue(null)})},n.stringifyObject=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="{\n",t="\n,\n",n="\n}\n");var i=!0,o=!1;return stream=s(function(n){o=!0;var a=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(e+a)):this.queue(t+a)},function(t){o||this.queue(e),this.queue(n),this.queue(null)}),stream},t.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,e("_process"),e("buffer").Buffer)},{_process:49,buffer:18,jsonparse:44,through:75}],43:[function(t,n,r){(function(r,i,o){(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){H=e}function c(e){Q=e}function h(){var e=r.nextTick,t=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=o),function(){e(g)}}function f(){return function(){W(g)}}function d(){var e=0,t=new ee(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function v(){return function(){setTimeout(g,1)}}function g(){for(var e=0;e<Z;e+=2){var t=re[e],n=re[e+1];t(n),re[e]=void 0,re[e+1]=void 0}Z=0}function y(){try{var e=t,n=e("vertx");return W=n.runOnLoop||n.runOnContext,f()}catch(r){return v()}}function m(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return se.error=t,se}}function E(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function _(e,t,n){Q(function(e){var r=!1,i=E(n,t,function(n){r||(r=!0,t!==n?C(e,n):P(e,n))},function(t){r||(r=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,O(e,i))},e)}function S(e,t){t._state===oe?P(e,t._result):t._state===ae?O(e,t._result):A(t,void 0,function(t){C(e,t)},function(t){O(e,t)})}function T(e,t){if(t.constructor===e.constructor)S(e,t);else{var n=w(t);n===se?O(e,se.error):void 0===n?P(e,t):s(n)?_(e,t,n):P(e,t)}}function C(e,t){e===t?O(e,b()):a(t)?T(e,t):P(e,t)}function k(e){e._onerror&&e._onerror(e._result),I(e)}function P(e,t){e._state===ie&&(e._result=t,e._state=oe,0!==e._subscribers.length&&Q(I,e))}function O(e,t){e._state===ie&&(e._state=ae,e._result=t,Q(k,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+oe]=n,i[o+ae]=r,0===o&&e._state&&Q(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?M(n,r,i,o):i(o);e._subscribers.length=0}}function N(){this.error=null}function L(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function M(e,t,n,r){var i,o,a,u,l=s(n);if(l){if(i=L(n,r),i===ue?(u=!0,o=i.error,i=null):a=!0,t===i)return void O(t,x())}else i=r,a=!0;t._state!==ie||(l&&a?C(t,i):u?O(t,o):e===oe?P(t,i):e===ae&&O(t,i))}function D(e,t){try{t(function(t){C(e,t)},function(t){O(e,t)})}catch(n){O(e,n)}}function R(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(m),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?P(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&P(n.promise,n._result))):O(n.promise,n._validationError())}function B(e){return new le(this,e).promise}function j(e){function t(e){C(i,e)}function n(e){O(i,e)}var r=this,i=new r(m);if(!$(e))return O(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===ie&&a<o;a++)A(r.resolve(e[a]),void 0,t,n);return i}function q(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return C(n,e),n}function z(e){var t=this,n=new t(m);return O(n,e),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==e&&(s(e)||F(),this instanceof U||V(),D(this,e))}function X(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=ve);
}var Y;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W,H,G,$=Y,Z=0,Q=({}.toString,function(e,t){re[Z]=e,re[Z+1]=t,Z+=2,2===Z&&(H?H(g):G())}),K="undefined"!=typeof window?window:void 0,J=K||{},ee=J.MutationObserver||J.WebKitMutationObserver,te="undefined"!=typeof r&&"[object process]"==={}.toString.call(r),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3);G=te?h():ee?d():ne?p():void 0===K&&"function"==typeof t?y():v();var ie=void 0,oe=1,ae=2,se=new N,ue=new N;R.prototype._validateInput=function(e){return $(e)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var le=R;R.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===ie&&i<t;i++)e._eachEntry(r[i],i)},R.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;u(e)?e.constructor===r&&e._state!==ie?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},R.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===ie&&(r._remaining--,e===ae?O(i,n):r._result[t]=n),0===r._remaining&&P(i,r._result)},R.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){n._settledAt(oe,t,e)},function(e){n._settledAt(ae,t,e)})};var ce=B,he=j,fe=q,de=z,pe=0,ve=U;U.all=ce,U.race=he,U.resolve=fe,U.reject=de,U._setScheduler=l,U._setAsap=c,U._asap=Q,U.prototype={constructor:U,then:function(e,t){var n=this,r=n._state;if(r===oe&&!e||r===ae&&!t)return this;var i=new this.constructor(m),o=n._result;if(r){var a=arguments[r-1];Q(function(){M(r,i,a,o)})}else A(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var ge=X,ye={Promise:ve,polyfill:ge};"function"==typeof e&&e.amd?e(function(){return ye}):"undefined"!=typeof n&&n.exports?n.exports=ye:"undefined"!=typeof this&&(this.ES6Promise=ye),ge()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:49,timers:76}],44:[function(e,t,n){(function(e){function n(e){for(var t=Object.keys(i),n=0,r=t.length;n<r;n++){var o=t[n];if(i[o]===e)return o}return e&&"0x"+e.toString(16)}function r(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=F,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new e(2),3:new e(3),4:new e(4)}}var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,l=i.COLON=5,c=i.COMMA=6,h=i.TRUE=7,f=i.FALSE=8,d=i.NULL=9,p=i.STRING=10,v=i.NUMBER=11,g=i.START=17,y=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,x=i.FALSE1=49,w=i.FALSE2=50,E=i.FALSE3=51,_=i.FALSE4=52,S=i.NULL1=65,T=i.NULL3=66,C=i.NULL2=67,k=i.NUMBER1=81,P=i.NUMBER2=82,O=i.NUMBER3=83,A=i.NUMBER4=84,I=i.NUMBER5=85,N=i.NUMBER6=86,L=i.NUMBER7=87,M=i.NUMBER8=88,D=i.STRING1=97,R=i.STRING2=98,B=i.STRING3=99,j=i.STRING4=100,q=i.STRING5=101,z=i.STRING6=102,F=i.VALUE=113,V=i.KEY=114,U=i.OBJECT=129,X=i.ARRAY=130,Y=r.prototype;Y.charError=function(e,t){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+n(this.tState)))},Y.onError=function(e){throw e},Y.write=function(t){"string"==typeof t&&(t=new e(t));for(var n,r=0,i=t.length;r<i;r++)if(this.tState===g)n=t[r],123===n?this.onToken(o,"{"):125===n?this.onToken(a,"}"):91===n?this.onToken(s,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(l,":"):44===n?this.onToken(c,","):116===n?this.tState=y:102===n?this.tState=x:110===n?this.tState=S:34===n?(this.string="",this.tState=D):45===n?(this.negative=!0,this.tState=k):48===n?(this.magnatude=0,this.tState=P):n>48&&n<64?(this.magnatude=n-48,this.tState=O):32===n||9===n||10===n||13===n||this.charError(t,r);else if(this.tState===D)if(n=t[r],this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=t[F];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+F-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var V=0;V<=t.length-1-r;V++)this.temp_buffs[this.bytes_in_sequence][V]=t[r+V];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.string+=t.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=g,this.onToken(p,this.string),this.string=void 0):92===n?this.tState=R:n>=32?this.string+=String.fromCharCode(n):this.charError(t,r);else this.tState===R?(n=t[r],34===n?(this.string+='"',this.tState=D):92===n?(this.string+="\\",this.tState=D):47===n?(this.string+="/",this.tState=D):98===n?(this.string+="\b",this.tState=D):102===n?(this.string+="\f",this.tState=D):110===n?(this.string+="\n",this.tState=D):114===n?(this.string+="\r",this.tState=D):116===n?(this.string+="\t",this.tState=D):117===n?(this.unicode="",this.tState=B):this.charError(t,r)):this.tState===B||this.tState===j||this.tState===q||this.tState===z?(n=t[r],n>=48&&n<64||n>64&&n<=70||n>96&&n<=102?(this.unicode+=String.fromCharCode(n),this.tState++===z&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=D)):this.charError(t,r)):this.tState===k?(n=t[r],48===n?(this.magnatude=0,this.tState=P):n>48&&n<64?(this.magnatude=n-48,this.tState=O):this.charError(t,r)):this.tState===P?(n=t[r],46===n?(this.position=.1,this.tState=A):101===n||69===n?(this.exponent=0,this.tState=N):(this.tState=g,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===O?(n=t[r],46===n?(this.position=.1,this.tState=A):101===n||69===n?(this.exponent=0,this.tState=N):n>=48&&n<64?this.magnatude=10*this.magnatude+n-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===A?(n=t[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=I):this.charError(t,r)):this.tState===I?(n=t[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=N):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===N?(n=t[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=L):n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=M):this.charError(t,r)):this.tState===L?(n=t[r],n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=M):this.charError(t,r)):this.tState===M?(n=t[r],n>=48&&n<64?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===y?114===t[r]?this.tState=m:this.charError(t,r):this.tState===m?117===t[r]?this.tState=b:this.charError(t,r):this.tState===b?101===t[r]?(this.tState=g,this.onToken(h,!0)):this.charError(t,r):this.tState===x?97===t[r]?this.tState=w:this.charError(t,r):this.tState===w?108===t[r]?this.tState=E:this.charError(t,r):this.tState===E?115===t[r]?this.tState=_:this.charError(t,r):this.tState===_?101===t[r]?(this.tState=g,this.onToken(f,!1)):this.charError(t,r):this.tState===S?117===t[r]?this.tState=T:this.charError(t,r):this.tState===T?108===t[r]?this.tState=C:this.charError(t,r):this.tState===C&&(108===t[r]?(this.tState=g,this.onToken(d,null)):this.charError(t,r))},Y.onToken=function(e,t){},Y.parseError=function(e,t){this.onError(new Error("Unexpected "+n(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+n(this.state)))},Y.onError=function(e){throw e},Y.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Y.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=F)},Y.emit=function(e){this.mode&&(this.state=c),this.onValue(e)},Y.onValue=function(e){},Y.onToken=function(e,t){this.state===F?e===p||e===v||e===h||e===f||e===d?(this.value&&(this.value[this.key]=t),this.emit(t)):e===o?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=V,this.mode=U):e===s?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=X,this.state=F):e===a?this.mode===U?this.pop():this.parseError(e,t):e===u&&this.mode===X?this.pop():this.parseError(e,t):this.state===V?e===p?(this.key=t,this.state=l):e===a?this.pop():this.parseError(e,t):this.state===l?e===l?this.state=F:this.parseError(e,t):this.state===c?e===c?this.mode===X?(this.key++,this.state=F):this.mode===U&&(this.state=V):e===u&&this.mode===X||e===a&&this.mode===U?this.pop():this.parseError(e,t):this.parseError(e,t)},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:18}],45:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],46:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],47:[function(e,t,n){(function(e){function n(e,t,n){function i(t){var n=v,r=g;return v=g=void 0,S=t,m=e.apply(r,n)}function o(e){return S=e,b=setTimeout(c,t),T?i(e):m}function u(e){var n=e-_,r=e-S,i=t-n;return C?w(i,y-r):i}function l(e){var n=e-_,r=e-S;return void 0===_||n>=t||n<0||C&&r>=y}function c(){var e=E();return l(e)?h(e):void(b=setTimeout(c,u(e)))}function h(e){return b=void 0,k&&v?i(e):(v=g=void 0,m)}function f(){void 0!==b&&clearTimeout(b),S=0,v=_=g=b=void 0}function d(){return void 0===b?m:h(E())}function p(){var e=E(),n=l(e);if(v=arguments,g=this,_=e,n){if(void 0===b)return o(_);if(C)return b=setTimeout(c,t),i(_)}return void 0===b&&(b=setTimeout(c,t)),m}var v,g,y,m,b,_,S=0,T=!1,C=!1,k=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(T=!!n.leading,C="maxWait"in n,y=C?x(a(n.maxWait)||0,t):y,k="trailing"in n?!!n.trailing:k),p.cancel=f,p.flush=d,p}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&b.call(e)==l}function a(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=f.test(e);return n||d.test(e)?p(e.slice(2),n?2:8):h.test(e)?u:+e}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,y=v||g||Function("return this")(),m=Object.prototype,b=m.toString,x=Math.max,w=Math.min,E=function(){return y.Date.now()};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(this,e("_process"))},{_process:49}],49:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?v=p.concat(v):y=-1,v.length&&u())}function u(){if(!g){var e=o(s);g=!0;for(var t=v.length;t;){for(p=v,v=[];++y<t;)p&&p[y].run();y=-1,t=v.length}p=null,g=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var h,f,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var p,v=[],g=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new l(e,t)),1!==v.length||g||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],50:[function(t,n,r){(function(t){!function(i){function o(e){throw new RangeError(M[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(L,".");var i=e.split("."),o=a(i,t).join(".");return r+o}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?R(e/k):e>>1,e+=R(e/t);e>D*T>>1;r+=_)e=R(e/D);return R(r+(D+1)*e/(e+C))}function d(e){var t,n,r,i,a,s,u,h,d,p,v=[],g=e.length,y=0,m=O,b=P;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(a=y,s=1,u=_;i>=g&&o("invalid-input"),h=c(e.charCodeAt(i++)),(h>=_||h>R((E-y)/s))&&o("overflow"),y+=h*s,d=u<=b?S:u>=b+T?T:u-b,!(h<d);u+=_)p=_-d,s>R(E/p)&&o("overflow"),s*=p;t=v.length+1,b=f(y-a,t,0==a),R(y/t)>E-m&&o("overflow"),m+=R(y/t),y%=t,v.splice(y++,0,m)}return l(v)}function p(e){var t,n,r,i,a,s,l,c,d,p,v,g,y,m,b,x=[];for(e=u(e),g=e.length,t=O,n=0,a=P,s=0;s<g;++s)v=e[s],v<128&&x.push(B(v));for(r=i=x.length,i&&x.push(A);r<g;){for(l=E,s=0;s<g;++s)v=e[s],v>=t&&v<l&&(l=v);for(y=r+1,l-t>R((E-n)/y)&&o("overflow"),n+=(l-t)*y,t=l,s=0;s<g;++s)if(v=e[s],v<t&&++n>E&&o("overflow"),v==t){for(c=n,d=_;p=d<=a?S:d>=a+T?T:d-a,!(c<p);d+=_)b=c-p,m=_-p,x.push(B(h(p+b%m,0))),c=R(b/m);x.push(B(h(c,0))),a=f(n,y,r==i),n=0,++r}++n,++t}return x.join("")}function v(e){return s(e,function(e){return I.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return N.test(e)?"xn--"+p(e):e})}var y="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof t&&t;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var x,w,E=2147483647,_=36,S=1,T=26,C=38,k=700,P=72,O=128,A="-",I=/^xn--/,N=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=_-S,R=Math.floor,B=String.fromCharCode;if(x={version:"1.4.1",ucs2:{decode:u,encode:l},decode:d,encode:p,toASCII:g,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return x});else if(y&&m)if(n.exports==y)m.exports=x;else for(w in x)x.hasOwnProperty(w)&&(y[w]=x[w]);else i.punycode=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,d,p,v=e[c].replace(s,"%20"),g=v.indexOf(n);g>=0?(h=v.substr(0,g),f=v.substr(g+1)):(h=v,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],52:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],53:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":51,"./encode":52}],54:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":55}],55:[function(e,t,n){"use strict";function r(e){return this instanceof r?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var u=e("core-util-is");u.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");u.inherits(r,l);for(var h=s(c.prototype),f=0;f<h.length;f++){var d=h[f];r.prototype[d]||(r.prototype[d]=c.prototype[d])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},{"./_stream_readable":57,"./_stream_writable":59,"core-util-is":20,inherits:45,"process-nextick-args":48}],56:[function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":58,"core-util-is":20,inherits:45}],57:[function(e,t,n){(function(n,r){"use strict";function i(e){return B.from(e)}function o(e){return B.isBuffer(e)||e instanceof j}function a(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function s(t,n){L=L||e("./_stream_duplex"),t=t||{};var r=n instanceof L;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(o||0===o)?this.highWaterMark=o:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(V||(V=e("string_decoder/").StringDecoder),this.decoder=new V(t.encoding),this.encoding=t.encoding)}function u(t){return L=L||e("./_stream_duplex"),this instanceof u?(this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),void R.call(this)):new u(t)}function l(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,v(e,a);else{var s;o||(s=h(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===B.prototype||(t=i(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):m(e,a)):c(e,a,t,!1))):r||(a.reading=!1)}return f(a)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),m(e,t)}function h(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=W?e=W:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(F("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?N.nextTick(y,e):y(e))}function y(e){F("emit readable"),e.emit("readable"),S(e)}function m(e,t){t.readingMore||(t.readingMore=!0,N.nextTick(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(F("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function x(e){return function(){var t=e._readableState;F("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,S(e))}}function w(e){F("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,N.nextTick(_,e,t))}function _(e,t){t.reading||(F("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(F("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=C(e,t.buffer,t.decoder),n}function C(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?k(e,t):P(e,t),r}function k(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function P(e,t){var n=B.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,N.nextTick(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var N=e("process-nextick-args");t.exports=u;var L,M=e("isarray");u.ReadableState=s;var D=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),R=e("./internal/streams/stream"),B=e("safe-buffer").Buffer,j=r.Uint8Array||function(){},q=e("core-util-is");q.inherits=e("inherits");var z=e("util"),F=void 0;F=z&&z.debuglog?z.debuglog("stream"):function(){};var V,U=e("./internal/streams/BufferList"),X=e("./internal/streams/destroy");q.inherits(u,R);var Y=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=X.destroy,u.prototype._undestroy=X.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=B.from(e,t),t=""),n=!0),l(this,e,t,!1,n)},u.prototype.unshift=function(e){return l(this,e,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(t){return V||(V=e("string_decoder/").StringDecoder),this._readableState.decoder=new V(t),this._readableState.encoding=t,this};var W=8388608;u.prototype.read=function(e){F("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return F("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):g(this),null;if(e=p(e,t),0===e&&t.ended)return 0===t.length&&O(this),null;var r=t.needReadable;F("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,F("length less than watermark",r)),t.ended||t.reading?(r=!1,F("reading or ended",r)):r&&(F("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return i=e>0?T(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function r(e,t){F("onunpipe"),e===f&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,o())}function i(){F("onend"),e.end()}function o(){F("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",h),f.removeListener("data",s),y=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){F("ondata"),m=!1;var n=e.write(t);!1!==n||m||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&I(d.pipes,e)!==-1)&&!y&&(F("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,m=!0),f.pause())}function u(t){F("onerror",t),h(),e.removeListener("error",u),0===D(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),h()}function c(){F("onfinish"),e.removeListener("close",l),h()}function h(){F("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,F("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,v=p?i:h;d.endEmitted?N.nextTick(v):f.once("end",v),e.on("unpipe",r);var g=x(f);e.on("drain",g);var y=!1,m=!1;return f.on("data",s),a(e,"error",u),e.once("close",l),e.once("finish",c),e.emit("pipe",f),d.flowing||(F("pipe resume"),f.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=I(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):N.nextTick(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(F("resume"),e.flowing=!0,E(this,e)),this},u.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(F("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(F("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<Y.length;o++)e.on(Y[o],this.emit.bind(this,Y[o]));return this._read=function(t){F("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":55,"./internal/streams/BufferList":60,"./internal/streams/destroy":61,"./internal/streams/stream":62,_process:49,"core-util-is":20,events:23,inherits:45,isarray:63,"process-nextick-args":48,"safe-buffer":68,"string_decoder/":74,util:17}],58:[function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;
i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){return this instanceof i?(s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",o)):new i(e)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":55,"core-util-is":20,inherits:45}],59:[function(e,t,n){(function(n,r,i){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){k(t,e)}}function a(e){return M.from(e)}function s(e){return M.isBuffer(e)||e instanceof D}function u(){}function l(t,n){O=O||e("./_stream_duplex"),t=t||{};var r=n instanceof O;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(a||0===a)?this.highWaterMark=a:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=t.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(t){return O=O||e("./_stream_duplex"),B.call(c,this)||this instanceof O?(this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t["final"]&&(this._final=t["final"])),void L.call(this)):new c(t)}function h(e,t){var n=new Error("write after end");e.emit("error",n),P.nextTick(t,n)}function f(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),P.nextTick(r,o),i=!1),i}function d(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=M.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var a=d(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,r,i,o);return u}function v(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,n,r,i){--t.pendingcb,n?(P.nextTick(i,r),P.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(y(n),t)g(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?A(b,e,n,o,i):b(e,n,o,i)}}function b(e,t,n,r){n||x(e,t),t.pendingcb--,r(),T(e,t)}function x(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback,f=t.objectMode?1:l.length;if(v(e,t,!1,f,l,c,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,P.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function C(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?P.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var P=e("process-nextick-args");t.exports=c;var O,A=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:P.nextTick;c.WritableState=l;var I=e("core-util-is");I.inherits=e("inherits");var N={deprecate:e("util-deprecate")},L=e("./internal/streams/stream"),M=e("safe-buffer").Buffer,D=r.Uint8Array||function(){},R=e("./internal/streams/destroy");I.inherits(c,L),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var B;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||this===c&&(e&&e._writableState instanceof l)}})):B=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&s(e);return o&&!M.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?h(this,n):(o||f(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},c.prototype.cork=function(){var e=this._writableState;e.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||C(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=R.destroy,c.prototype._undestroy=R.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":55,"./internal/streams/destroy":61,"./internal/streams/stream":62,_process:49,"core-util-is":20,inherits:45,"process-nextick-args":48,"safe-buffer":68,timers:76,"util-deprecate":81}],60:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=e("safe-buffer").Buffer,a=e("util");t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":68,util:17}],61:[function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=e("process-nextick-args");t.exports={destroy:r,undestroy:i}},{"process-nextick-args":48}],62:[function(e,t,n){t.exports=e("events").EventEmitter},{events:23}],63:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],64:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":65}],65:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":55,"./lib/_stream_passthrough.js":56,"./lib/_stream_readable.js":57,"./lib/_stream_transform.js":58,"./lib/_stream_writable.js":59}],66:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":65}],67:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":59}],68:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:18}],69:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,o=e("inherits");o(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",r),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{events:23,inherits:45,"readable-stream/duplex.js":54,"readable-stream/passthrough.js":64,"readable-stream/readable.js":65,"readable-stream/transform.js":66,"readable-stream/writable.js":67}],70:[function(e,t,n){(function(t){var r=e("./lib/request"),i=e("./lib/response"),o=e("xtend"),a=e("builtin-status-codes"),s=e("url"),u=n;u.request=function(e,n){e="string"==typeof e?s.parse(e):o(e);var i=t.location.protocol.search(/^https?:$/)===-1?"http:":"",a=e.protocol||i,u=e.hostname||e.host,l=e.port,c=e.path||"/";u&&u.indexOf(":")!==-1&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(l?":"+l:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":72,"./lib/response":73,"builtin-status-codes":19,url:79,xtend:82}],71:[function(e,t,n){(function(e){function t(){if(void 0!==a)return a;if(e.XMLHttpRequest){a=new e.XMLHttpRequest;try{a.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(t){a=null}}else a=null;return a}function r(e){var n=t();if(!n)return!1;try{return n.responseType=e,n.responseType===e}catch(r){}return!1}function i(e){return"function"==typeof e}n.fetch=i(e.fetch)&&i(e.ReadableStream),n.writableStream=i(e.WritableStream),n.abortController=i(e.AbortController),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(o){}var a,s="undefined"!=typeof e.ArrayBuffer,u=s&&i(e.ArrayBuffer.prototype.slice);n.arraybuffer=n.fetch||s&&r("arraybuffer"),n.msstream=!n.fetch&&u&&r("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&s&&r("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!t()&&i(t().overrideMimeType),n.vbArray=i(e.VBArray),a=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(e,t,n){(function(n,r,i){function o(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(n){return!1}}var s=e("./capability"),u=e("inherits"),l=e("./response"),c=e("readable-stream"),h=e("to-arraybuffer"),f=l.IncomingMessage,d=l.readyStates,p=t.exports=function(e){var t=this;c.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n,r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!s.abortController)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=o(n,r),t._fetchTimer=null,t.on("finish",function(){t._onFinish()})};u(p,c.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();v.indexOf(r)===-1&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,o=e._headers,a=null;"GET"!==t.method&&"HEAD"!==t.method&&(a=s.arraybuffer?h(i.concat(e._body)):s.blobConstructor?new r.Blob(e._body.map(function(e){return h(e)}),{type:(o["content-type"]||{}).value||""}):i.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,n=o[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode){var l=null;if(s.abortController){var c=new AbortController;l=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:l}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var f=e._xhr=new r.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick(function(){e.emit("error",p)})}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(f.timeout=t.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),u.forEach(function(e){f.setRequestHeader(e[0],e[1])}),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(a)}catch(p){return void n.nextTick(function(){e.emit("error",p)})}}}},p.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":71,"./response":73,_process:49,buffer:18,inherits:45,"readable-stream":65,"to-arraybuffer":77}],73:[function(e,t,n){(function(t,r,i){var o=e("./capability"),a=e("inherits"),s=e("readable-stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=n.IncomingMessage=function(e,n,a,u){function l(){d.read().then(function(e){if(!c._destroyed){if(e.done)return r.clearTimeout(u),void c.push(null);c.push(new i(e.value)),l()}})["catch"](function(e){r.clearTimeout(u),c._destroyed||c.emit("error",e)})}var c=this;if(s.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===a){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)}),o.writableStream){var h=new WritableStream({write:function(e){return new Promise(function(t,n){c._destroyed?n():c.push(new i(e))?t():c._resumeFetch=t})},close:function(){r.clearTimeout(u),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(h)["catch"](function(e){r.clearTimeout(u),c._destroyed||c.emit("error",e)})}catch(f){}}var d=n.body.getReader();l()}else{c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText;var p=e.getAllResponseHeaders().split(/\r?\n/);if(p.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(t[2])):void 0!==c.headers[n]?c.headers[n]+=", "+t[2]:c.headers[n]=t[2],c.rawHeaders.push(t[1],t[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var v=c.rawHeaders["mime-type"];if(v){var g=v.match(/;\s*charset=([^;])(;|$)/);g&&(c._charset=g[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(l,s.Readable),l.prototype._read=function(){var e=this,t=e._resumeFetch;t&&(e._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(o){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(o){e._mode="text:vbarray";break}if(n.length>e._pos){var a=n.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new i(a.length),l=0;l<a.length;l++)s[l]=255&a.charCodeAt(l);e.push(s)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":71,_process:49,buffer:18,inherits:45,"readable-stream":65}],74:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(m.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=f,this.end=d,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=p,this.end=v,t=3;break;default:return this.write=g,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=a(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=a(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function u(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"�"}}function l(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function f(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}var m=e("safe-buffer").Buffer,b=m.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=h,o.prototype.text=c,o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":68}],75:[function(e,t,n){(function(r){function i(e,t,n){function i(){for(;l.length&&!h.paused;){var e=l.shift();if(null===e)return h.emit("end");h.emit("data",e)}}function a(){h.writable=!1,t.call(h),!h.readable&&h.autoDestroy&&h.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&n.autoDestroy===!1),h.write=function(t){return e.call(this,t),!h.paused},h.queue=h.push=function(e){return c?h:(null===e&&(c=!0),l.push(e),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(e){if(!s)return s=!0,arguments.length&&h.write(e),a(),h},h.destroy=function(){if(!u)return u=!0,s=!0,l.length=0,h.writable=h.readable=!1,h.emit("close"),h},h.pause=function(){if(!h.paused)return h.paused=!0,h},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=e("stream");n=t.exports=i,i.through=i}).call(this,e("_process"))},{_process:49,stream:69}],76:[function(e,t,n){(function(t,r){function i(e,t){this._id=e,this._clearFn=t}var o=e("process/browser.js").nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;n.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,r=!(arguments.length<2)&&s.call(arguments,1);return u[t]=!0,o(function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":49,timers:76}],77:[function(e,t,n){var r=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:18}],78:[function(t,n,r){(function(t){!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=i._,a=Array.prototype,s=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,c=a.slice,h=s.toString,f=s.hasOwnProperty,d=Array.isArray,p=Object.keys,v=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"==typeof r||r.nodeType?i._=y:("undefined"!=typeof n&&!n.nodeType&&n.exports&&(r=n.exports=y),r._=y),y.VERSION="1.9.1";var m,b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return y.iteratee!==m?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=m=function(e,t){
return x(e,t,1/0)};var w=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},E=function(e){if(!y.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},S=function(e,t){return null!=e&&f.call(e,t)},T=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},C=Math.pow(2,53)-1,k=_("length"),P=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=C};y.each=y.forEach=function(e,t,n){t=b(t,n);var r,i;if(P(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=x(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var O=function(e){var t=function(t,n,r,i){var o=!P(t)&&y.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var u=o?o[s]:s;r=n(r,t[u],u,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,b(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=O(1),y.reduceRight=y.foldr=O(-1),y.find=y.detect=function(e,t,n){var r=P(e)?y.findIndex:y.findKey,i=r(e,t,n);if(void 0!==i&&i!==-1)return e[i]},y.filter=y.select=function(e,t,n){var r=[];return t=x(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(x(t)),n)},y.every=y.all=function(e,t,n){t=x(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=x(t,n);for(var r=!P(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return P(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=w(function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=T(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=P(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],null!=r&&r>o&&(o=r)}else t=x(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=P(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],null!=r&&r<o&&(o=r)}else t=x(t,n),y.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return P(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=P(e)?y.clone(e):y.values(e),i=k(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=y.random(a,o),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=x(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var A=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=x(r,i),y.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};y.groupBy=A(function(e,t,n){S(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=A(function(e,t,n){e[n]=t}),y.countBy=A(function(e,t,n){S(e,n)?e[n]++:e[n]=1});var I=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?c.call(e):y.isString(e)?e.match(I):P(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:P(e)?e.length:y.keys(e).length},y.partition=A(function(e,t,n){e[n?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var N=function(e,t,n,r){r=r||[];for(var i=r.length,o=0,a=k(e);o<a;o++){var s=e[o];if(P(s)&&(y.isArray(s)||y.isArguments(s)))if(t)for(var u=0,l=s.length;u<l;)r[i++]=s[u++];else N(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r};y.flatten=function(e,t){return N(e,t,!1)},y.without=w(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],a=0,s=k(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t&&!n?(a&&o===l||i.push(u),o=l):n?y.contains(o,l)||(o.push(l),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=w(function(e){return y.uniq(N(e,!0,!0))}),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var a;for(a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},y.difference=w(function(e,t){return t=N(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=w(y.unzip),y.object=function(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var L=function(e){return function(t,n,r){n=x(n,r);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=L(1),y.findLastIndex=L(-1),y.sortedIndex=function(e,t,n,r){n=x(n,r,1);for(var i=n(t),o=0,a=k(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o};var M=function(e,t,n){return function(r,i,o){var a=0,s=k(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(c.call(r,a,s),y.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=M(1,y.findIndex,y.sortedIndex),y.lastIndexOf=M(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(c.call(e,r,r+=t));return n};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=E(e.prototype),a=e.apply(o,i);return y.isObject(a)?a:o};y.bind=w(function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=w(function(i){return D(e,r,t,this,n.concat(i))});return r}),y.partial=w(function(e,t){var n=y.partial.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return D(e,r,this,this,a)};return r}),y.partial.placeholder=y,y.bindAll=w(function(e,t){t=N(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=y.bind(e[r],e)}}),y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return S(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=w(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=n.leading===!1?0:y.now(),r=null,a=e.apply(i,o),r||(i=o=null)},l=function(){var l=y.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||n.trailing===!1||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=w(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=y.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2),y.restArguments=w;var R=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(e,t){var n=B.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||s,o="constructor";for(S(e,o)&&!y.contains(t,o)&&t.push(o);n--;)o=B[n],o in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)S(e,n)&&t.push(n);return R&&j(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return R&&j(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=x(t,n);for(var r=y.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var q=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}};y.extend=q(y.allKeys),y.extendOwn=y.assign=q(y.keys),y.findKey=function(e,t,n){t=x(t,n);for(var r,i=y.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r};var z=function(e,t,n){return t in n};y.pick=w(function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=b(r,t[1])),t=y.allKeys(e)):(r=z,t=N(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),y.omit=w(function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(N(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)}),y.defaults=q(y.allKeys,!0),y.create=function(e,t){var n=E(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var F,V;F=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&V(e,t,n,r)},V=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!F(e[l],t[l],n,r))return!1}else{var c,f=y.keys(e);if(l=f.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=f[l],!S(t,c)||!F(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return F(e,t)},y.isEmpty=function(e){return null==e||(P(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=d||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return S(e,"callee")});var U=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof U&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return S(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!f.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return i._=o,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return T(t,e)}:_(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?T(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=y.invert(X),W=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=W(X),y.unescape=W(Y),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var H=0;y.uniqueId=function(e){var t=++H+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+$[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||G).source,(t.interpolate||G).source,(t.evaluate||G).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(Z,Q),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var a;try{a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(e){return a.call(this,e,y)},l=t.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},y.chain=function(e){var t=y(e);return t._chain=!0,t};var K=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),K(this,n.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],K(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return K(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},"function"==typeof e&&e.amd&&e("underscore",[],function(){return y})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&l.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),l=e("./util");n.parse=i,n.resolve=a,n.resolveObject=s,n.format=o,n.Url=r;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(p),g=["%","/","?",";","#"].concat(v),y=["/","?","#"],m=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");r.prototype.parse=function(e,t,n){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var h=f.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=c.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===s.substr(0,2);!T||d&&E[d]||(s=s.substr(2),this.slashes=!0)}if(!E[d]&&(T||d&&!_[d])){for(var C=-1,k=0;k<y.length;k++){var P=s.indexOf(y[k]);P!==-1&&(C===-1||P<C)&&(C=P)}var O,A;A=C===-1?s.lastIndexOf("@"):s.lastIndexOf("@",C),A!==-1&&(O=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(O)),C=-1;for(var k=0;k<g.length;k++){var P=s.indexOf(g[k]);P!==-1&&(C===-1||P<C)&&(C=P)}C===-1&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var N=this.hostname.split(/\./),k=0,L=N.length;k<L;k++){var M=N[k];if(M&&!M.match(b)){for(var D="",R=0,B=M.length;R<B;R++)D+=M.charCodeAt(R)>127?"x":M[R];if(!D.match(b)){var j=N.slice(0,k),q=N.slice(k+1),z=M.match(x);z&&(j.push(z[1]),q.unshift(z[2])),q.length&&(s="/"+q.join(".")+s),this.hostname=j.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+F,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[p])for(var k=0,L=v.length;k<L;k++){var U=v[k];if(s.indexOf(U)!==-1){var X=encodeURIComponent(U);X===U&&(X=escape(U)),s=s.split(U).join(X)}}var Y=s.indexOf("#");Y!==-1&&(this.hash=s.substr(Y),s=s.slice(0,Y));var W=s.indexOf("?");if(W!==-1?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=S.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),_[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",H=this.search||"";this.path=F+H}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var d=h[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||E[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=m||y||n.host&&e.pathname,x=b,w=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!_[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===w[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=w.shift();var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return n.search=e.search,n.query=e.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===C||".."===C)||""===C,P=0,O=w.length;O>=0;O--)C=w[O],"."===C?w.splice(O,1):".."===C?(w.splice(O,1),P++):P&&(w.splice(O,1),P--);if(!b&&!x)for(;P--;P)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(S){n.hostname=n.host=A?"":w.length?w.shift():"";var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return b=b||n.host&&w.length,b&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":80,punycode:50,querystring:53}],80:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],81:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],82:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}],83:[function(e,t,n){t.exports='<body>\n  <div class="graph">\n    <div class="cy">\n      <div class="status loader"></div>\n    </div>\n    <div class="controls">\n      <div class="interactionFilter">\n        <div>Show the following interaction types:</div>\n        <div>\n          <button class="genetic">Genetic</button><button class="default selected">All</button><button class="physical">Physical</button>\n        </div>\n      </div>\n      <div class="secondaryControls">\n        <div class="reset">Reset&nbsp;view</div>\n        <div class="showTable">Show in table format</div>\n        <div class="export">Export&nbsp;graph\n          <div class="exportValues">\n            <select>\n              <option value="png">PNG</option>\n              <option value="jpg">JPG</option>\n              <option value="tsv">TSV</option>\n              <option value="csv" selected>CSV</option>\n            </select>\n            <button>Go!</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nodeDetails">\n    <h2 class="nodeTitle"></h2>\n    <dl class="nodeInfo intro">\n      <dt class="intro">Click on a gene to get more info about it.</dt>\n    </dl>\n  </div>\n  <div class="tableView firstRun disabled"></div>\n</body>\n'},{}],84:[function(e,t,n){t.exports='<dl class="child">\n  <dt>Type</dt>\n  <dd class="cym-type">{{=type}}</dd>\n  {{if (typeof roles !== "string") { }}\n    <dt>Roles</dt>\n    <dd class="roles">\n      <dl>\n        {{for (role in roles) { }}\n        <dt> {{= role}}</dt>\n        <dd> {{= roles[role] }} </dd>\n        {{ } }}\n      </dl>\n    </dd>\n  {{ } else { }}\n    <dt>Role</dt> <dd> {{=role1}} </dd>\n  {{ } }}\n  {{ if(dataSets.length == 1) { }}\n    <dt>Data set</dt>\n    <dd class="dataSets child">{{=dataSets[0].name}}</dd>\n  {{ } else if (dataSets.length > 1) { }}\n    <dt>Data sets</dt>\n    <dd>\n      <ul class="dataSets">\n        {{for (var i=0; i <dataSets.length; i++) { }}\n          <li> {{= dataSets[i].name }} </li>\n        {{ } }}\n      </ul>\n    </dd>\n  {{ } }}\n</dl>\n'},{}]},{},[6])(6)});