!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cymine=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports=[{selector:"node",style:{content:"data(label)","border-width":"2px","background-color":"#dedede","border-style":"solid","border-color":"#999"}},{selector:":selected",style:{"text-outline-color":"black","background-color":"gold","border-color":"gold","border-width":"5px","border-style":"solid"}},{selector:"edge",style:{width:"2px"}},{selector:'edge[interactionType@="genetic"]',style:{"line-color":"#2c79be"}},{selector:'edge[interactionType@="physical"]',style:{"line-color":"#c00"}},{selector:".genetic",style:{"border-color":"#225f95"}},{selector:".physical",style:{"border-color":"#c00"}},{selector:".both",style:{"border-color":"#77304B"}}]},{}],2:[function(e,t,n){var r=e("underscore"),i=function(e){function t(e,i){var a={nodes:[],edges:[]};for(var o in e){var s,l=e[o];s=n(l),l.interactions?a=r.extend(a,t(l.interactions,s)):a.edges=a.edges.concat(u(i,s)),a.nodes.push(s)}return a}this.records=e;var n=function(e){var t,n;return t=e.participant2?e.participant2:e,n=o(e),label=s(e),{classes:i(n),data:{title:t["class"]+" "+label,"interaction details":a(e.details)||{},label:label,"class":t["class"],interactionTypes:n,symbol:t.symbol,id:t.primaryIdentifier}}},i=function(e){var t=r.uniq(e);return t.length>1&&t.push("both"),t.join(" ")},a=function(e){var t={};return r.each(e,function(n,r){Array.isArray(e)?("object"==typeof n&&(n=a(n)),t[n.name]=1===n.length?n[0]:n):Array.isArray(n)?t[r]=1===n.length?n[0]:n:"object"==typeof n?(n=a(n),t[n.name||n["class"]]=1===n.length?n[0]:n):t[r]=n}),t},o=function(e){var t=[];if(e.details)for(var n=0;n<e.details.length;n++)t.indexOf(e.details[n].type)<0&&t.push(e.details[n].type);else t.push("master");return t},s=function(e){return e.participant2&&e.participant2.symbol?e.participant2.symbol:e.symbol?e.symbol:e.details?e.details[0].name:"NAME MISSING"},u=function(e,t){for(var n=t.data.interactionTypes,r=[],i=0;i<n.length;i++)r.push({id:t.data["interaction details"].objectId,classes:n[i],data:{title:"Interaction between "+e.data.label+" and "+t.data.label,source:e.data.id,target:t.data.id,interactionType:n[i]}});return r};return t(e)};t.exports=i},{underscore:76}],3:[function(e,t,n){var r=(e("./../util"),e("./svDataFormatter")()),i=function(){var e=function(e,t){var i=r.format(e,t),a="text/"+e;n(i,"results-table."+e,a,!0)},t=function(e,t,n){var r;return e?(r="data:"+t+",",r+=encodeURIComponent(n)):r=n,r},n=function(e,n,r,i){var a=document.createElement("a"),o=t(i,r,e);if(r=r||"application/octet-stream",navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([e],{type:r}),n);if("download"in a)return a.href+=o,a.setAttribute("download",n),document.body.appendChild(a),setTimeout(function(){a.click(),document.body.removeChild(a)},66),!0;var s=document.createElement("iframe");return document.body.appendChild(s),s.src=o,setTimeout(function(){document.body.removeChild(s)},333),!0};return{sv:e,download:n,prepDownloadString:t}};t.exports=i},{"./../util":13,"./svDataFormatter":5}],4:[function(e,t,n){var r=e("./../util"),i=e("./exportHelpers")();exporter=function(){var e,t,n={},a=function(){var n=function(){i.download(t.jpg(),"network.jpg")},r=function(){i.download(t.png(),"network.png")},a=function(){i.sv("csv",e)},o=function(){i.sv("tsv",e)};return{jpg:n,png:r,csv:a,tsv:o}},o=function(){var e=n;e.exportElem=e.parentElem.querySelector(".export"),e.formatChooser=e.exportElem.querySelector("select"),e.exportButton=e.exportElem.querySelector("button");var t=a();e.exportElem.addEventListener("click",function(){r.addClass(e.exportElem,"active")}),e.exportButton.addEventListener("click",function(){var n=u();try{t[n]()}catch(i){console.error("Invalid file format: '"+n+"'. ",i)}r.removeClass(e.exportElem,"active")})},s=function(r){n.parentElem=r.parentElem,e=r.rawData,t=r.cy,o()},u=function(){return n.formatChooser.value};return{init:s}},t.exports=exporter},{"./../util":13,"./exportHelpers":3}],5:[function(e,t,n){var r=function(){var e=function(e,t){var n=["Gene > Symbol","Gene > DB identifier","Gene > Interactions > Details > Type","Gene > Interactions > Gene 2 . Symbol","Gene > Interactions > Gene 2 > DB identifier","Gene > Interactions > Details > Data Sets > Data Source > Name"];return n.join(e)},t=function(e){var t,r,i=[];e=e[0];for(var a=0;a<e.interactions.length;a++)r=e.interactions[a],t=[e.symbol,e.primaryIdentifier,r.participant2.symbol,r.participant2.primaryIdentifier],i=i.concat(n(t,r.details));return i},n=function(e,t){for(var n,i=[],a=0;a<t.length;a++)detail=t[a],n=e.slice(0),n.splice(2,0,detail.type),i=i.concat(r(n,detail.dataSets));return i},r=function(e,t){for(var n,r=[],i=0;i<t.length;i++)ds=t[i],n=e.slice(0),n.push(ds.name),r.push(n);return r},i=function(n,r){var i={csv:",",tsv:"	"},a=e(i[n],r)+"\n",o=t(r);return o.forEach(function(e,t){dataString=e.join(i[n]),a+=dataString+"\n"}),a};return{format:i}};t.exports=r},{}],6:[function(e,t,n){function r(e){function t(){if(!m.parentElem){var e=document.getElementById("cymine");if(!e)return console.error(u.dev.noParent.noDefault),!1;m.parentElem=e,console.info(u.dev.noParent.usingDefault)}return!0}function n(){if(m.service)return new o.Service({token:m.service.token,root:m.service.root,errorHandler:i});throw new g("noServiceUrl")}function r(){if(m.queryOn)return s.extend(l.where[0],m.queryOn),m.query=l,m.nodeType===u.CONST.PROTEIN&&p(),!0;throw new g("noQueryData")}function p(){m.query.where[0].path=u.CONST.LOOKUP_PROTEIN,"="===m.query.where[0].op&&(m.query.where[0].path+=".id"),m.query.where.length<=1&&m.query.where.push(c)}function v(){if(t()&&(y=new d(m),y.init(),mine=n(),r()&&mine))var e=mine.records(l).then(function(t){if(t.length>0){m.rawData=t,m.data=new a(t),m.cy=y.attachResults();try{b.init(m)}catch(n){console.error(n)}try{f.init(m)}catch(n){console.error(n)}return console.debug("response:",t,"graphdata:",m),e}return y.attachResults(u.user.noResults),Promise.reject()})["catch"](function(e){return console.error("Possible CORS error?",e),y.attachResults(u.user.pleaseClearCache),Promise.reject()});return Promise.reject()}function g(e,t){var n=t?t:"noQueryData";y.init(u.user[n]),console.error(u.dev[e])}var y,m=s.extend({},e),b=h();return cym=v(),cym}function i(){throw new initError("badServiceUrl")}var a=e("./dataFormatter"),o=e("imjs"),s=(e("cytoscape"),e("underscore")),u=e("./strings"),l=e("./query/query"),c=e("./query/proteinPhysicalConstraint"),h=e("./exporter/exporter"),f=e("./showInTable")(),d=e("./ui");t.exports=r},{"./dataFormatter":2,"./exporter/exporter":4,"./query/proteinPhysicalConstraint":8,"./query/query":9,"./showInTable":10,"./strings":11,"./ui":12,cytoscape:54,imjs:63,underscore:76}],7:[function(e,t,n){var r=["label","objectId","title","interactionTypes","class"];t.exports=r},{}],8:[function(e,t,n){t.exports={path:"interactions.details.type",op:"=",value:"physical",code:"B"}},{}],9:[function(e,t,n){t.exports={name:"Gene_Interactions",title:"Gene --> Interactions",description:"Show all interactions for a given gene.",constraintLogic:"A and B",from:"Gene",select:["primaryIdentifier","symbol","interactions.participant2.symbol","interactions.participant2.primaryIdentifier","interactions.details.name","interactions.details.role1","interactions.details.role2","interactions.details.type","interactions.details.dataSets.name"],orderBy:[{path:"symbol",direction:"ASC"}],where:[{path:"Gene",op:"LOOKUP",code:"A",editable:!0,switched:"LOCKED",switchable:!1}]}},{}],10:[function(e,t,n){var r=e("./util"),i=e("./strings").showTable,a=function(){var e,t,n={},a=function(n){timeoutID=setTimeout(function(){imtables&&(e=n,o()),t={query:e.query,service:{root:e.service.root}}},500)},o=function(){n.showTable=e.parentElem.querySelector(".showTable"),r.addClass(n.showTable,"enabled"),n.showTable.innerHTML=i.showInTableFormat,l()},s=function(){n.theTable=e.parentElem.querySelector(".tableView"),n.showTable.innerHTML=i.hideTableFormat,r.removeClass(n.theTable,"disabled"),r.hasClass(n.theTable,"firstRun")&&(imtables.loadTable(n.theTable,{start:0,size:25},{query:e.query,service:{root:e.service.root}}).then(function(e){console.log("Table loaded",e)},function(e){console.error("Could not load table",e)}),r.removeClass(n.theTable,"firstRun"))},u=function(){r.addClass(n.theTable,"disabled"),n.showTable.innerHTML=i.showInTableFormat},l=function(){n.showTable.addEventListener("click",function(){!n.theTable||r.hasClass(n.theTable,"disabled")?s():u()})};return{showTable:s,init:a}};t.exports=a},{"./strings":11,"./util":13}],11:[function(e,t,n){t.exports={user:{noResults:"No interaction results for this query",pleaseClearCache:"Error loading results. Please clear your cache and try again.",noQueryData:"Problem loading query results"},dev:{noParent:{usingDefault:"Cymine: No parent element specified for Cymine. Using default '#cymine",noDefault:"Cymine: No parent element specified, and default '#cymine' not available."},noQueryData:"Cymine: No queryOn values supplied!",noServiceUrl:"Cymine: No serviceUrl defined, unable to query for interactions.",badServiceUrl:"Cymine: bad serviceUrl. Please check for typos and check this host is up."},showTable:{showInTableFormat:"Show in table format",hideTableFormat:"Hide table"},CONST:{PROTEIN:"Protein",LOOKUP_PROTEIN:"proteins"}}},{}],12:[function(e,t,n){var r=e("./metaFields"),i=e("./util"),a=e("underscore"),o=e("./cytoscapeStyle");ui=function(t){a.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},this.graph=t;var n,s={name:"cose"},u={cymineHtml:{html:e("./../template/cytomine.html"),type:"html"},InteractionDetail:{html:e("./../template/interaction.html"),type:"_",additionalFunction:function(e){return g(e)}}},l=function(e){targetElem=t.parentElem.querySelector("nodeDetails"),c(e),h(e)},c=function(e){var n=t.parentElem.querySelector(".nodeTitle");n.innerHTML=e.title},h=function(e){try{var n=p(e),r=t.parentElem.querySelector(".nodeInfo");n.setAttribute("class","nodeInfo"),r.parentElement.replaceChild(n,r)}catch(i){console.error("whoopsie",i)}},f=function(e){var t=u[e];return"html"===t.type?t.html:"_"===t.type?a.template(t.html):void 0},d=function(e){return u[e]&&!0},p=function(e){var t,n,a=document.createElement("dl");for(var o in e)r.indexOf(o)<0&&(t=document.createElement("dt"),t.appendChild(document.createTextNode(o)),n=document.createElement("dd"),i.addClass(n,"cym-"+o),"object"==typeof e[o]?d(e[o]["class"])?n.appendChild(v(e[o],e)):(i.addClass(n,"child"),n.appendChild(p(e[o]))):n.appendChild(document.createTextNode(e[o])),y([t,n],a));return a},v=function(e){var t=a.clone(e),n=f(e["class"]);return u[e["class"]].additionalFunction&&(t=u[e["class"]].additionalFunction(t)),temp=document.createElement("div"),temp.innerHTML=n(t),temp},g=function(e){var t,n=e.name;return t=n.indexOf("FlyBase:")>-1?n.split(":")[1].split("_"):n.split("-"),e.roles=t,e},y=function(e,t){for(var n=t.firstChild,r=0;r<e.length;r++)t.insertBefore(e[r],n)},m=function(e){return e?_(e):x(),n},b=function(){var e,r=function(){return t.parentElem.querySelector(".interactionFilter")},a=function(){return t.parentElem.querySelector(".reset")},o=function(t){var r=t.target;if(r!==t.currentTarget&&"button"===r.nodeName.toLowerCase()){c();var a=r.className;i.addClass(r,"selected"),e&&e.restore(),e=n.elements().filterFn(function(e){return"default"===a?!e:!e.hasClass(a)&&!e.hasClass("both")&&!e.hasClass("master")}).remove()}},u=function(){n.makeLayout(s).run(),r().querySelector(".default").click()},l=function(){r().addEventListener("click",o,!1),a().addEventListener("click",u,!1)},c=function(){for(var e=r().querySelectorAll("button"),t=0;t<e.length;t++)i.removeClass(e[t]," selected"),i.removeClass(e[t],"selected")};return{listen:l}},w=function(){t.parentElem.innerHTML=f("cymineHtml"),i.addClass(t.parentElem,"cymine"),t.statusBar=t.parentElem.querySelector(".status"),t.targetElem=t.parentElem.querySelector(".cy"),t.targetElem.style.width=t.parentElem.querySelector(".graph").clientWidth+"px"},x=function(){try{var e=b();e.listen()}catch(r){console.error(r)}n=cytoscape({container:t.targetElem,layout:s,elements:t.data,style:o,ready:function(){t.statusBar.remove()}}),n.on("tap","node",function(){l(this.data())}),n.on("tap","edge",function(){l(this.data())})},_=function(e){t.statusBar.className="status no-results",t.statusBar.innerHTML=e};return{init:w,attachResults:m,noResults:_}},t.exports=ui},{"./../template/cytomine.html":77,"./../template/interaction.html":78,"./cytoscapeStyle":1,"./metaFields":7,"./util":13,underscore:76}],13:[function(e,t,n){var r={addClass:function(e,t){r.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(t,"")},hasClass:function(e,t){var n=e.className.split(" ");return n.indexOf(t)>=0}};t.exports=r},{}],14:[function(e,t,n){},{}],15:[function(e,t,n){(function(t){function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e){return this instanceof a?(this.length=0,this.parent=void 0,"number"==typeof e?o(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new a(e,arguments[1]):new a(e)}function o(e,t){if(e=v(e,0>t?0:0|g(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function s(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|m(t,n);return e=v(e,r),e.write(t,n),e}function u(e,t){if(a.isBuffer(t))return l(e,t);if(K(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return h(e,t);if(t instanceof ArrayBuffer)return f(e,t)}return t.length?d(e,t):p(e,t)}function l(e,t){var n=0|g(t.length);return e=v(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){return a.TYPED_ARRAY_SUPPORT?(t.byteLength,e=a._augment(new Uint8Array(t))):e=h(e,new Uint8Array(t)),e}function d(e,t){var n=0|g(t.length);e=v(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function p(e,t){var n,r=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,r=0|g(n.length)),e=v(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function v(e,t){a.TYPED_ARRAY_SUPPORT?(e=a._augment(new Uint8Array(t)),e.__proto__=a.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=a.poolSize>>>1;return n&&(e.parent=Z),e}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function y(e,t){if(!(this instanceof y))return new y(e,t);var n=new a(e,t);return delete n.parent,n}function m(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return C(this,t,n);case"binary":return R(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;r>o;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function x(e,t,n,r){return $(U(t,e.length-n),e,n,r)}function _(e,t,n,r){return $(Y(t),e,n,r)}function E(e,t,n,r){return _(e,t,n,r)}function S(e,t,n,r){return $(H(t),e,n,r)}function T(e,t,n,r){return $(X(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n>=i+s){var u,l,c,h;switch(s){case 1:128>a&&(o=a);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&a)<<6|63&u,h>127&&(o=h));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(h=(15&a)<<12|(63&u)<<6|63&l,h>2047&&(55296>h||h>57343)&&(o=h));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&1114112>h&&(o=h))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return O(r)}function O(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",a=t;n>a;a++)i+=V(e[a]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function L(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);a>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);a>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,a){if(t>i||a>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function j(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,n,r,52,8),n+8}function z(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return 16>e?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;r>o;o++){if(n=e.charCodeAt(o),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;a.push(n)}else if(2048>n){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function X(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function H(e){return W.toByteArray(z(e))}function $(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var W=e("base64-js"),G=e("ieee754"),K=e("is-array");n.Buffer=a,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50,a.poolSize=8192;var Z={};a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array),a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i&&e[i]===t[i];)++i;return i!==o&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new a(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new a(t),i=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,i),i+=o.length}return r},a.byteLength=m,a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):b.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:a.compare(this,e)},a.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(a.isBuffer(e))return n(this,e,t);if("number"==typeof e)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},a.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},a.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return _(this,e,t,n);case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=a._augment(this.subarray(e,t));else{var i=t-e;r=new a(i,void 0);for(var o=0;i>o;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},a.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},a.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),G.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),G.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),G.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),G.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||A(this,e,t,n,Math.pow(2,8*n),0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||A(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);A(this,e,t,n,i-1,-i)}var a=0,o=1,s=0>e?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);A(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0>e?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||A(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>o||!a.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=U(e.toString()),a=i.length;for(r=t;n>r;r++)this[r]=i[r%a]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=a.prototype;a._augment=function(e){return e.constructor=a,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,
e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":16,ieee754:17,"is-array":18}],16:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===h?62:t===s||t===f?63:u>t?-1:u+10>t?t-u+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function n(e){function n(e){l[h++]=e}var r,i,o,s,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new a(3*e.length/4-u),o=u>0?e.length-4:e.length;var h=0;for(r=0,i=0;o>r;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===u&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),l}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,a,o,s=e.length%3,u="";for(i=0,o=e.length-s;o>i;i+=3)a=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(a);switch(s){case 1:a=e[e.length-1],u+=t(a>>2),u+=t(a<<4&63),u+="==";break;case 2:a=(e[e.length-2]<<8)+e[e.length-1],u+=t(a>>10),u+=t(a>>4&63),u+=t(a<<2&63),u+="="}return u}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],17:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:(d?-1:1)*(1/0);o+=Math.pow(2,r),a-=l}return(d?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+d]=255&o,d+=p,o/=256,l-=8);e[n+d-p]|=128*v}},{}],18:[function(e,t,n){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],19:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];for(l=n.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],20:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],21:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],22:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],23:[function(e,t,n){function r(){c=!1,s.length?l=s.concat(l):h=-1,l.length&&i()}function i(){if(!c){var e=setTimeout(r);c=!0;for(var t=l.length;t;){for(s=l,l=[];++h<t;)s&&s[h].run();h=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function o(){}var s,u=t.exports={},l=[],c=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new a(e,t)),1!==l.length||c||setTimeout(i,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],24:[function(e,t,n){(function(e){!function(r){function i(e){throw RangeError(D[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function o(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(I,".");var i=e.split("."),o=a(i,t).join(".");return r+o}function s(e){for(var t,n,r=[],i=0,a=e.length;a>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&a>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function u(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:_}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?L(e/k):e>>1,e+=L(e/t);e>A*S>>1;r+=_)e=L(e/A);return L(r+(A+1)*e/(e+T))}function f(e){var t,n,r,a,o,s,c,f,d,p,v=[],g=e.length,y=0,m=O,b=P;for(n=e.lastIndexOf(C),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&i("not-basic"),v.push(e.charCodeAt(r));for(a=n>0?n+1:0;g>a;){for(o=y,s=1,c=_;a>=g&&i("invalid-input"),f=l(e.charCodeAt(a++)),(f>=_||f>L((x-y)/s))&&i("overflow"),y+=f*s,d=b>=c?E:c>=b+S?S:c-b,!(d>f);c+=_)p=_-d,s>L(x/p)&&i("overflow"),s*=p;t=v.length+1,b=h(y-o,t,0==o),L(y/t)>x-m&&i("overflow"),m+=L(y/t),y%=t,v.splice(y++,0,m)}return u(v)}function d(e){var t,n,r,a,o,u,l,f,d,p,v,g,y,m,b,w=[];for(e=s(e),g=e.length,t=O,n=0,o=P,u=0;g>u;++u)v=e[u],128>v&&w.push(M(v));for(r=a=w.length,a&&w.push(C);g>r;){for(l=x,u=0;g>u;++u)v=e[u],v>=t&&l>v&&(l=v);for(y=r+1,l-t>L((x-n)/y)&&i("overflow"),n+=(l-t)*y,t=l,u=0;g>u;++u)if(v=e[u],t>v&&++n>x&&i("overflow"),v==t){for(f=n,d=_;p=o>=d?E:d>=o+S?S:d-o,!(p>f);d+=_)b=f-p,m=_-p,w.push(M(c(p+b%m,0))),f=L(b/m);w.push(M(c(f,0))),o=h(n,y,r==a),n=0,++r}++n,++t}return w.join("")}function p(e){return o(e,function(e){return R.test(e)?f(e.slice(4).toLowerCase()):e})}function v(e){return o(e,function(e){return N.test(e)?"xn--"+d(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof t&&t&&!t.nodeType&&t,m="object"==typeof e&&e;(m.global===m||m.window===m||m.self===m)&&(r=m);var b,w,x=2147483647,_=36,E=1,S=26,T=38,k=700,P=72,O=128,C="-",R=/^xn--/,N=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=_-E,L=Math.floor,M=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:s,encode:u},decode:f,encode:d,toASCII:v,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(g&&y)if(t.exports==g)y.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,a){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var h,f,d,p,v=e[c].replace(s,"%20"),g=v.indexOf(n);g>=0?(h=v.substr(0,g),f=v.substr(g+1)):(h=v,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),r(o,d)?i(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],26:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var s=encodeURIComponent(i(o))+n;return a(e[o])?r(e[o],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[o]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],27:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":25,"./encode":26}],28:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":29}],29:[function(e,t,n){"use strict";function r(e){return this instanceof r?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(a,this)}function a(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var s=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");u.inherits(r,l);for(var h=o(c.prototype),f=0;f<h.length;f++){var d=h[f];r.prototype[d]||(r.prototype[d]=c.prototype[d])}},{"./_stream_readable":31,"./_stream_writable":33,"core-util-is":34,inherits:20,"process-nextick-args":35}],30:[function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":32,"core-util-is":34,inherits:20}],31:[function(e,t,n){(function(n){"use strict";function r(t,n){var r=e("./_stream_duplex");t=t||{},this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(D||(D=e("string_decoder/").StringDecoder),this.decoder=new D(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void O.call(this)):new i(t)}function a(e,t,n,r,i){var a=l(t,n);if(a)e.emit("error",a);else if(null===n)t.reading=!1,c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e)),d(e,t);else i||(t.reading=!1);return o(t)}function o(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var n=null;return P.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(N("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?T(f,e):f(e))}function f(e){N("emit readable"),e.emit("readable"),b(e)}function d(e,t){t.readingMore||(t.readingMore=!0,T(p,e,t))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(N("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;N("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,b(e))}}function g(e){N("readable nexttick read 0"),e.read(0)}function y(e,t){t.resumeScheduled||(t.resumeScheduled=!0,T(m,e,t))}function m(e,t){t.reading||(N("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(N("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function w(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=a?r.join(""):1===r.length?r[0]:P.concat(r,i),r.length=0;else if(e<r[0].length){var s=r[0];n=s.slice(0,e),r[0]=s.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new P(e);for(var u=0,l=0,c=r.length;c>l&&e>u;l++){var s=r[0],h=Math.min(e-u,s.length);a?n+=s.slice(0,h):s.copy(n,u,0,h),h<s.length?r[0]=s.slice(h):r.shift(),u+=h}}return n}function x(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,T(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function E(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function S(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var T=e("process-nextick-args"),k=e("isarray"),P=e("buffer").Buffer;i.ReadableState=r;var O,C=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{O=e("stream")}catch(t){}finally{O||(O=e("events").EventEmitter)}}();var P=e("buffer").Buffer,R=e("core-util-is");R.inherits=e("inherits");var N,I=e("util");N=I&&I.debuglog?I.debuglog("stream"):function(){};var D;R.inherits(i,O),i.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new P(e,t),t="")),a(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return D||(D=e("string_decoder/").StringDecoder),this._readableState.decoder=new D(t),this._readableState.encoding=t,this};var A=8388608;i.prototype.read=function(e){N("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return N("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):h(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&x(this),null;var r=t.needReadable;N("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,N("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,N("reading or ended",r)),r&&(N("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?w(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&x(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){N("onunpipe"),e===h&&a()}function i(){N("onend"),e.end()}function a(){N("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",a),h.removeListener("data",o),y=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function o(t){N("ondata");var n=e.write(t);!1===n&&(1!==f.pipesCount||f.pipes[0]!==e||1!==h.listenerCount("data")||y||(N("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function s(t){N("onerror",t),c(),e.removeListener("error",s),0===C(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),c()}function l(){N("onfinish"),e.removeListener("close",u),c()}function c(){N("unpipe"),h.unpipe(e)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,N("pipe count=%d opts=%j",f.pipesCount,t);var d=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=d?i:a;f.endEmitted?T(p):h.once("end",p),e.on("unpipe",r);var g=v(h);e.on("drain",g);var y=!1;return h.on("data",o),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",l),e.emit("pipe",h),f.flowing||(N("pipe resume"),h.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=S(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=O.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&h(this,r):T(g,this))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(N("resume"),e.flowing=!0,y(this,e)),this},i.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(N("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(N("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return E(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){N("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":29,_process:23,buffer:15,"core-util-is":34,events:19,inherits:20,isarray:22,"process-nextick-args":35,"string_decoder/":51,util:14}],32:[function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=a;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":29,"core-util-is":34,inherits:20}],33:[function(e,t,n){"use strict";function r(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(t,n){var r=e("./_stream_duplex");t=t||{},this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void T.call(this)):new o(t)}function s(e,t){var n=new Error("write after end");e.emit("error",n),_(t,n)}function u(e,t,n,r){var i=!0;if(!E.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),_(r,a),i=!1}return i}function l(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new E(t,n)),t}function c(e,t,n,r,a){n=l(t,n,r),E.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,a),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest}else h(e,t,!1,o,n,r,a);return s}function h(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function f(e,t,n,r,i){--t.pendingcb,n?_(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(d(n),t)f(e,n,r,t,i);else{var a=m(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?_(v,e,n,a,i):v(e,n,a,i)}}function v(e,t,n,r){n||g(e,t),t.pendingcb--,r(),w(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){for(var r=[],i=[];n;)i.push(n.callback),r.push(n),n=n.next;t.pendingcb++,t.lastBufferedRequest=null,h(e,t,!0,t.length,r,"",function(e){for(var n=0;n<i.length;n++)t.pendingcb--,i[n](e)})}else{for(;n;){var a=n.chunk,o=n.encoding,s=n.callback,u=t.objectMode?1:a.length;if(h(e,t,!1,u,a,o,s),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=m(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function x(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?_(n):e.once("finish",n)),t.ended=!0}t.exports=o;var _=e("process-nextick-args"),E=e("buffer").Buffer;o.WritableState=a;var S=e("core-util-is");S.inherits=e("inherits");var T,k={deprecate:e("util-deprecate")};!function(){try{T=e("stream")}catch(t){}finally{T||(T=e("events").EventEmitter)}}();var E=e("buffer").Buffer;S.inherits(o,T),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:k.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var i=this._writableState,a=!1;return"function"==typeof t&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?s(this,n):u(this,i,e,n)&&(i.pendingcb++,a=c(this,i,e,t,n)),a},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},o.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||x(this,r,n)}},{"./_stream_duplex":29,buffer:15,"core-util-is":34,events:19,inherits:20,"process-nextick-args":35,"util-deprecate":36}],34:[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function a(e){return null==e}function o(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return h(e)&&"[object RegExp]"===y(e)}function h(e){return"object"==typeof e&&null!==e}function f(e){return h(e)&&"[object Date]"===y(e)}function d(e){return h(e)&&("[object Error]"===y(e)||e instanceof Error)}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(t){return e.isBuffer(t)}function y(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=a,n.isNumber=o,n.isString=s,n.isSymbol=u,n.isUndefined=l,n.isRegExp=c,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=v,n.isBuffer=g}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":21}],35:[function(e,t,n){(function(e){"use strict";function n(t){for(var n=new Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];e.nextTick(function(){t.apply(null,n)})}t.exports=n}).call(this,e("_process"))},{_process:23}],36:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null==r?!1:"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],37:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":30}],38:[function(e,t,n){var r=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=r||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":29,"./lib/_stream_passthrough.js":30,"./lib/_stream_readable.js":31,"./lib/_stream_transform.js":32,"./lib/_stream_writable.js":33}],39:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":32}],40:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":33}],41:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,a=e("inherits");a(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function a(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",r),l.removeListener("end",a),l.removeListener("close",o),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(l.on("end",a),l.on("close",o));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{events:19,inherits:20,"readable-stream/duplex.js":28,"readable-stream/passthrough.js":37,"readable-stream/readable.js":38,"readable-stream/transform.js":39,"readable-stream/writable.js":40}],42:[function(e,t,n){var r=e("./lib/request"),i=e("xtend"),a=e("builtin-status-codes"),o=e("url"),s=n;s.request=function(e,t){e="string"==typeof e?o.parse(e):i(e);var n=e.protocol||"",a=e.hostname||e.host,s=e.port,u=e.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),e.url=(a?n+"//"+a:"")+(s?":"+s:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var l=new r(e);return t&&l.on("response",t),l},s.get=function(e,t){var n=s.request(e,t);return n.end(),n},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=a,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},{"./lib/request":44,"builtin-status-codes":46,url:52,xtend:53}],43:[function(e,t,n){(function(e){function t(e){try{return a.responseType=e,a.responseType===e}catch(t){}return!1}function r(e){return"function"==typeof e}n.fetch=r(e.fetch)&&r(e.ReadableByteStream),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(i){}var a=new e.XMLHttpRequest;a.open("GET",e.location.host?"/":"https://example.com");var o="undefined"!=typeof e.ArrayBuffer,s=o&&r(e.ArrayBuffer.prototype.slice);n.arraybuffer=o&&t("arraybuffer"),n.msstream=!n.fetch&&s&&t("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&o&&t("moz-chunked-arraybuffer"),n.overrideMimeType=r(a.overrideMimeType),n.vbArray=r(e.VBArray),a=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,n){(function(n,r,i){function a(e){return s.fetch?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function o(e){try{return null!==e.status}catch(t){return!1}}var s=e("./capability"),u=e("foreach"),l=e("indexof"),c=e("inherits"),h=e("object-keys"),f=e("./response"),d=e("stream"),p=f.IncomingMessage,v=f.readyStates,g=t.exports=function(e){var t=this;d.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),u(h(e.headers),function(n){t.setHeader(n,e.headers[n])});var n;if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=a(n),t.on("finish",function(){t._onFinish()})};c(g,d.Writable),g.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();-1===l(y,r)&&(n._headers[r]={name:e,value:t})},g.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value},g.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},g.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,a=e._opts,o=e._headers;if(("POST"===a.method||"PUT"===a.method)&&(t=s.blobConstructor?new r.Blob(e._body.map(function(e){return e.toArrayBuffer()}),{type:(o["content-type"]||{}).value||""}):i.concat(e._body).toString()),"fetch"===e._mode){var l=h(o).map(function(e){return[o[e].name,o[e].value]});r.fetch(e._opts.url,{method:e._opts.method,headers:l,body:t,mode:"cors",credentials:a.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()}).then(void 0,function(t){e.emit("error",t)})}else{var c=e._xhr=new r.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(f){return void n.nextTick(function(){e.emit("error",f)})}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!a.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),u(h(o),function(e){c.setRequestHeader(o[e].name,o[e].value)}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case v.LOADING:case v.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(t)}catch(f){return void n.nextTick(function(){e.emit("error",f)})}}}},g.prototype._onXHRProgress=function(){var e=this;o(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},g.prototype._connect=function(){var e=this;e._destroyed||(e._response=new p(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},g.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},g.prototype.abort=g.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},g.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),d.Writable.prototype.end.call(r,e,t,n)},g.prototype.flushHeaders=function(){},g.prototype.setTimeout=function(){},g.prototype.setNoDelay=function(){},g.prototype.setSocketKeepAlive=function(){};var y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":43,"./response":45,_process:23,buffer:15,foreach:47,indexof:48,inherits:20,"object-keys":49,stream:41}],45:[function(e,t,n){(function(t,r,i){var a=e("./capability"),o=e("foreach"),s=e("inherits"),u=e("stream"),l=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=n.IncomingMessage=function(e,n,r){function s(){d.read().then(function(e){if(!l._destroyed){if(e.done)return void l.push(null);l.push(new i(e.value)),s()}})}var l=this;if(u.Readable.call(l),l._mode=r,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){t.nextTick(function(){l.emit("close")})}),"fetch"===r){l._fetchResponse=n,l.statusCode=n.status,l.statusMessage=n.statusText;for(var c,h,f=n.headers[Symbol.iterator]();c=(h=f.next()).value,!h.done;)l.headers[c[0].toLowerCase()]=c[1],l.rawHeaders.push(c[0],c[1]);var d=n.body.getReader();s()}else{l._xhr=e,l._pos=0,l.statusCode=e.status,l.statusMessage=e.statusText;var p=e.getAllResponseHeaders().split(/\r?\n/);if(o(p,function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();void 0!==l.headers[n]?l.headers[n]+=", "+t[2]:l.headers[n]=t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!a.overrideMimeType){var v=l.rawHeaders["mime-type"];if(v){var g=v.match(/;\s*charset=([^;])(;|$)/);g&&(l._charset=g[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};s(c,u.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==l.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(a){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(a){e._mode="text:vbarray";break}if(n.length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new i(o.length),u=0;u<o.length;u++)s[u]=255&o.charCodeAt(u);e.push(s)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==l.DONE)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==l.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==l.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===l.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":43,_process:23,buffer:15,foreach:47,inherits:20,stream:41}],46:[function(e,t,n){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],47:[function(e,t,n){var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;t.exports=function(e,t,n){if("[object Function]"!==i.call(t))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;a>o;o++)t.call(n,e[o],o,e);else for(var s in e)r.call(e,s)&&t.call(n,e[s],s,e)}},{}],48:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],49:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Array.prototype.slice,o=e("./isArguments"),s=!{toString:null}.propertyIsEnumerable("toString"),u=function(){}.propertyIsEnumerable("prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(e){var t=e.constructor;return t&&t.prototype===e},h={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{c(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(e){if("undefined"==typeof window||!f)return c(e);try{return c(e)}catch(t){return!1}},p=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),a=o(e),c=t&&"[object String]"===i.call(e),h=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(c&&e.length>0&&!r.call(e,0))for(var p=0;p<e.length;++p)h.push(String(p));if(a&&e.length>0)for(var v=0;v<e.length;++v)h.push(String(v));else for(var g in e)f&&"prototype"===g||!r.call(e,g)||h.push(String(g));if(s)for(var y=d(e),m=0;m<l.length;++m)y&&"constructor"===l[m]||!r.call(e,l[m])||h.push(l[m]);return h};p.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(o(e)?a.call(e):e)}}}else Object.keys=p;return Object.keys||p},t.exports=p},{"./isArguments":50}],50:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},{}],51:[function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:15}],52:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&l(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function a(e){return u(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function h(e){return null==e}var f=e("punycode");n.parse=i,n.resolve=o,n.resolveObject=s,n.format=a,n.Url=r;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),m=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=e("querystring");r.prototype.parse=function(e,t,n){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=d.exec(r);if(i){i=i[0];var a=i.toLowerCase();this.protocol=a,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===r.substr(0,2);!o||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(o||i&&!T[i])){for(var s=-1,l=0;l<b.length;l++){var c=r.indexOf(b[l]);-1!==c&&(-1===s||s>c)&&(s=c)}var h,p;p=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==p&&(h=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(h)),s=-1;for(var l=0;l<m.length;l++){var c=r.indexOf(m[l]);-1!==c&&(-1===s||s>c)&&(s=c)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),l=0,P=g.length;P>l;l++){var O=g[l];if(O&&!O.match(x)){for(var C="",R=0,N=O.length;N>R;R++)C+=O.charCodeAt(R)>127?"x":O[R];if(!C.match(x)){var I=g.slice(0,l),D=g.slice(l+1),A=O.match(_);A&&(I.push(A[1]),D.unshift(A[2])),D.length&&(r="/"+D.join(".")+r),this.hostname=I.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var L=this.hostname.split("."),M=[],l=0;l<L.length;++l){var B=L[l];M.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(B):B)}this.hostname=M.join(".")}var j=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+j,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[a])for(var l=0,P=y.length;P>l;l++){var z=y[l],F=encodeURIComponent(z);F===z&&(F=escape(z)),r=r.split(z).join(F)}var V=r.indexOf("#");-1!==V&&(this.hash=r.substr(V),r=r.slice(0,V));var U=r.indexOf("?");if(-1!==U?(this.search=r.substr(U),this.query=r.substr(U+1),t&&(this.query=k.parse(this.query)),r=r.slice(0,U)):t&&(this.search="",this.query={}),r&&(this.pathname=r),T[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",B=this.search||"";this.path=j+B}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(a=k.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||T[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),T[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!T[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||S[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var a=n.pathname||"",o=n.search||"";n.path=a+o}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=l||s||n.host&&e.pathname,d=f,p=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=n.protocol&&!T[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),f=f&&(""===i[0]||""===p[0])),l)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=e.search,n.query=e.query;else if(!h(e.search)){if(v){n.hostname=n.host=p.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,n.query=e.query,c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=p.slice(-1)[0],m=(n.host||e.host)&&("."===y||".."===y)||""===y,b=0,w=p.length;w>=0;w--)y=p[w],"."==y?p.splice(w,1):".."===y?(p.splice(w,1),b++):b&&(p.splice(w,1),b--);if(!f&&!d)for(;b--;b)p.unshift("..");!f||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),m&&"/"!==p.join("/").substr(-1)&&p.push("");var x=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=x?"":p.length?p.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&p.length,f&&!x&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),c(n.pathname)&&c(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:24,querystring:27}],53:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}],54:[function(require,module,exports){(function(global,__dirname){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cytoscape=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./util"),i=e("./is"),a=e("./promise"),o=function(e,t,n){if(!(this instanceof o))return new o(e,t,n);var a=this._private=r.extend({duration:1e3},t,n);a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&i.fn(a.complete)&&a.completes.push(a.complete),this.length=1,this[0]=this},s=o.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;t=e.queue?n.queue:n.current,t.push(this),i.elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];e[t]=e[n],e[n]=r};n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition");for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=e.startStyle[r.dash2camel(o)]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t,n=this._private;switch(e){case"frame":t=n.frames;break;default:case"complete":case"completed":t=n.completes}return new a(function(e,n){t.push(function(){e()})})}}),s.complete=s.completed,t.exports=o},{"./is":77,"./promise":80,"./util":94}],2:[function(e,t,n){"use strict";var r=e("../../is"),i={aStar:function(e){var t=this;e=e||{};var n=function(e,t,r,i){if(e==t)return i.push(a.getElementById(t)),i;if(t in r){var o=r[t],s=p[t];return i.push(a.getElementById(t)),i.push(a.getElementById(s)),n(e,o,r,i)}return void 0},i=function(e,t){if(0===e.length)return void 0;for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var a=t[e[i]];r>a&&(r=a,n=i)}return n},a=this._private.cy;if(null==e||null==e.root)return void 0;var o=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null==e.goal)return void 0;var s=r.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&r.fn(e.heuristic))var u=e.heuristic;else var u=function(){return 0};if(null!=e.weight&&r.fn(e.weight))var l=e.weight;else var l=function(e){return 1};if(null!=e.directed)var c=e.directed;else var c=!1;var h=[],f=[o.id()],d={},p={},v={},g={};v[o.id()]=0,g[o.id()]=u(o);for(var y=this.edges().stdFilter(function(e){return!e.isLoop()}),m=this.nodes(),b=0;f.length>0;){var w=i(f,g),x=a.getElementById(f[w]);if(b++,x.id()==s.id()){var _=n(o.id(),s.id(),d,[]);return _.reverse(),{found:!0,distance:v[x.id()],path:t.spawn(_),steps:b}}h.push(x.id()),f.splice(w,1);var E=x.connectedEdges();c&&(E=E.stdFilter(function(e){return e.data("source")===x.id()})),E=E.intersect(y);for(var S=0;S<E.length;S++){var T=E[S],k=T.connectedNodes().stdFilter(function(e){return e.id()!==x.id()}).intersect(m);if(-1==h.indexOf(k.id())){var P=v[x.id()]+l.apply(T,[T]);-1!=f.indexOf(k.id())?P<v[k.id()]&&(v[k.id()]=P,g[k.id()]=P+u(k),d[k.id()]=x.id()):(v[k.id()]=P,g[k.id()]=P+u(k),f.push(k.id()),d[k.id()]=x.id(),p[k.id()]=T.id())}}}return{found:!1,distance:void 0,path:void 0,steps:b}}};t.exports=i},{"../../is":77}],3:[function(e,t,n){"use strict";var r=e("../../is"),i=e("../../util"),a={bellmanFord:function(e){var t=this;if(e=e||{},null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var a=e.directed;else var a=!1;if(null==e.root)return void 0;if(r.string(e.root))var o=this.filter(e.root)[0];else var o=e.root[0];for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h={},f=0;c>f;f++)h[l[f].id()]=f;for(var d=[],p=[],v=[],f=0;c>f;f++)l[f].id()===o.id()?d[f]=0:d[f]=1/0,p[f]=void 0;for(var g=!1,f=1;c>f;f++){g=!1;for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],w=n.apply(u[y],[u[y]]),x=d[m]+w;if(x<d[b]&&(d[b]=x,p[b]=m,v[b]=u[y],g=!0),!a){var x=d[b]+w;x<d[m]&&(d[m]=x,p[m]=b,v[m]=u[y],g=!0)}}if(!g)break}if(g)for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],w=n.apply(u[y],[u[y]]);if(d[m]+w<d[b])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],f=0;c>f;f++)_.push(l[f].id());var E={distanceTo:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return d[h[t]]},pathTo:function(e){var n=function(e,t,n,r,i,a){for(;;){if(i.push(s.getElementById(r[n])),i.push(a[n]),t===n)return i;var o=e[n];if("undefined"==typeof o)return void 0;n=o}};if(r.string(e))var i=s.filter(e)[0].id();else var i=e.id();var a=[],u=n(p,h[o.id()],h[i],_,a,v);return null!=u&&u.reverse(),t.spawn(u)},hasNegativeWeightCycle:!1};return E}};t.exports=a},{"../../is":77,"../../util":94}],4:[function(e,t,n){"use strict";var r=e("../../is"),i={betweennessCentrality:function(e){if(e=e||{},null!=e.weight&&r.fn(e.weight))var t=e.weight,n=!0;else var n=!1;if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else var i=!1;for(var a=function(e,t){e.unshift(t);for(var n=0;v[e[n]]<v[e[n+1]]&&n<e.length-1;n++){var r=e[n];e[n]=e[n+1],e[n+1]=r}},o=this._private.cy,s=this.nodes(),u={},l={},c=0;c<s.length;c++)i?u[s[c].id()]=s[c].outgoers("node"):u[s[c].id()]=s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)l[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var f=[],d={},p={},v={},g=[],c=0;c<s.length;c++)d[s[c].id()]=[],p[s[c].id()]=0,v[s[c].id()]=Number.POSITIVE_INFINITY;for(p[s[h].id()]=1,v[s[h].id()]=0,g.unshift(s[h].id());g.length>0;){var y=g.pop();f.push(y),n?u[y].forEach(function(e){if(o.$("#"+y).edgesTo(e).length>0)var n=o.$("#"+y).edgesTo(e)[0];else var n=e.edgesTo("#"+y)[0];var r=t.apply(n,[n]);v[e.id()]>v[y]+r&&(v[e.id()]=v[y]+r,g.indexOf(e.id())<0?a(g,e.id()):(g.splice(g.indexOf(e.id()),1),a(g,e.id())),p[e.id()]=0,d[e.id()]=[]),v[e.id()]==v[y]+r&&(p[e.id()]=p[e.id()]+p[y],d[e.id()].push(y))}):u[y].forEach(function(e){v[e.id()]==Number.POSITIVE_INFINITY&&(g.unshift(e.id()),v[e.id()]=v[y]+1),v[e.id()]==v[y]+1&&(p[e.id()]=p[e.id()]+p[y],d[e.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;f.length>0;){var b=f.pop();d[b].forEach(function(e){m[e]=m[e]+p[e]/p[b]*(1+m[b]),b!=s[h].id()&&(l[b]=l[b]+m[b])})}}var w=0;for(var x in l)w<l[x]&&(w=l[x]);var _={betweenness:function(e){if(r.string(e))var e=o.filter(e)[0].id();else var e=e.id();return l[e]},betweennessNormalized:function(e){if(r.string(e))var e=o.filter(e)[0].id();else var e=e.id();return l[e]/w}};return _.betweennessNormalised=_.betweennessNormalized,_}};i.bc=i.betweennessCentrality,t.exports=i},{"../../is":77}],5:[function(e,t,n){"use strict";
var r=e("../../is"),i=e("../../heap"),a=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,i){var a,o,s;r.plainObject(t)&&!r.elementOrCollection(t)&&(a=t,t=a.roots||a.root,n=a.visit,i=a.directed,o=a.std,s=a.thisArg),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var u,l=this._private.cy,c=t=r.string(t)?this.filter(t):t,h=[],f=[],d={},p={},v={},g=0,y=this.nodes(),m=this.edges(),b=0;b<c.length;b++)c[b].isNode()&&(h.unshift(c[b]),e.bfs&&(v[c[b].id()]=!0,f.push(c[b])),p[c[b].id()]=0);for(;0!==h.length;){var c=e.bfs?h.shift():h.pop();if(e.dfs){if(v[c.id()])continue;v[c.id()]=!0,f.push(c)}var w,x=p[c.id()],_=d[c.id()],E=null==_?void 0:_.connectedNodes().not(c)[0];if(w=o?n.call(s,c,_,E,g++,x):n.call(c,g++,x,c,_,E),w===!0){u=c;break}if(w===!1)break;for(var S=c.connectedEdges(i?function(){return this.data("source")===c.id()}:void 0).intersect(m),b=0;b<S.length;b++){var T=S[b],k=T.connectedNodes(function(){return this.id()!==c.id()}).intersect(y);0===k.length||v[k.id()]||(k=k[0],h.push(k),e.bfs&&(v[k.id()]=!0,f.push(k)),d[k.id()]=T,p[k.id()]=p[c.id()]+1)}}for(var P=[],b=0;b<f.length;b++){var O=f[b],C=d[O.id()];C&&P.push(C),P.push(O)}return{path:l.collection(P,{unique:!0}),found:l.collection(u)}}},o={breadthFirstSearch:a({bfs:!0}),depthFirstSearch:a({dfs:!0}),kruskal:function(e){function t(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.anySame(e))return{eles:n,index:t}}}var n=this.cy();e=r.fn(e)?e:function(){return 1};for(var i=n.collection(n,[]),a=[],o=this.nodes(),s=0;s<o.length;s++)a.push(o[s].collection());for(var u=this.edges(),l=u.toArray().sort(function(t,n){var r=e.call(t,t),i=e.call(n,n);return r-i}),s=0;s<l.length;s++){var c=l[s],h=c.source()[0],f=c.target()[0],d=t(h),p=t(f);d.index!==p.index&&(i=i.add(c),a[d.index]=d.eles.add(p.eles),a.splice(p.index,1))}return o.add(i)},dijkstra:function(e,t,n){var a;r.plainObject(e)&&!r.elementOrCollection(e)&&(a=e,e=a.root,t=a.weight,n=a.directed);var o=this._private.cy;t=r.fn(t)?t:function(){return 1};for(var s=r.string(e)?this.filter(e)[0]:e[0],u={},l={},c={},h=this.edges().filter(function(){return!this.isLoop()}),f=this.nodes(),d=function(e){return u[e.id()]},p=function(e,t){u[e.id()]=t,v.updateItem(e)},v=new i(function(e,t){return d(e)-d(t)}),g=0;g<f.length;g++){var y=f[g];u[y.id()]=y.same(s)?0:1/0,v.push(y)}for(var m=function(e,r){for(var i,a=(n?e.edgesTo(r):e.edgesWith(r)).intersect(h),o=1/0,s=0;s<a.length;s++){var u=a[s],l=t.apply(u,[u]);(o>l||!i)&&(o=l,i=u)}return{edge:i,dist:o}};v.size()>0;){var b=v.pop(),w=d(b),x=b.id();if(c[x]=w,w===Math.Infinite)break;for(var _=b.neighborhood().intersect(f),g=0;g<_.length;g++){var E=_[g],S=E.id(),T=m(b,E),k=w+T.dist;k<d(E)&&(p(E,k),l[S]={node:b,edge:T.edge})}}return{distanceTo:function(e){var t=r.string(e)?f.filter(e)[0]:e[0];return c[t.id()]},pathTo:function(e){var t=r.string(e)?f.filter(e)[0]:e[0],n=[],i=t;if(t.length>0)for(n.unshift(t);l[i.id()];){var a=l[i.id()];n.unshift(a.edge),n.unshift(a.node),i=a.node}return o.collection(n)}}}};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,t.exports=o},{"../../heap":75,"../../is":77}],6:[function(e,t,n){"use strict";var r=e("../../is"),i={closenessCentralityNormalized:function(e){e=e||{};var t=this.cy(),n=e.harmonic;void 0===n&&(n=!0);for(var i={},a=0,o=this.nodes(),s=this.floydWarshall({weight:e.weight,directed:e.directed}),u=0;u<o.length;u++){for(var l=0,c=0;c<o.length;c++)if(u!=c){var h=s.distance(o[u],o[c]);l+=n?1/h:h}n||(l=1/l),l>a&&(a=l),i[o[u].id()]=l}return{closeness:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return i[e]/a}}},closenessCentrality:function(e){if(e=e||{},null==e.root)return void 0;if(r.string(e.root))var t=this.filter(e.root)[0];else var t=e.root[0];if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(){return 1};if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else var i=!1;var a=e.harmonic;void 0===a&&(a=!0);for(var o=this.dijkstra({root:t,weight:n,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=t.id()){var c=o.distanceTo(u[l]);s+=a?1/c:c}return a?s:1/s}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,t.exports=i},{"../../is":77}],7:[function(e,t,n){"use strict";var r=e("../../is"),i=e("../../util"),a={degreeCentralityNormalized:function(e){e=e||{};var t=this.cy();if(null!=e.directed)var n=e.directed;else var n=!1;var a=this.nodes(),o=a.length;if(n){for(var s={},u={},l=0,c=0,h=0;o>h;h++){var f=a[h],d=this.degreeCentrality(i.extend({},e,{root:f}));l<d.indegree&&(l=d.indegree),c<d.outdegree&&(c=d.outdegree),s[f.id()]=d.indegree,u[f.id()]=d.outdegree}return{indegree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return s[e]/l},outdegree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return u[e]/c}}}for(var p={},v=0,h=0;o>h;h++){var f=a[h],d=this.degreeCentrality(i.extend({},e,{root:f}));v<d.degree&&(v=d.degree),p[f.id()]=d.degree}return{degree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return p[e]/v}}},degreeCentrality:function(e){e=e||{};var t=this;if(null==e||null==e.root)return void 0;var n=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&r.fn(e.weight))var i=e.weight;else var i=function(e){return 1};if(null!=e.directed)var a=e.directed;else var a=!1;if(null!=e.alpha&&r.number(e.alpha))var o=e.alpha;else o=0;if(a){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(t),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(t),l=s.length,c=u.length,h=0,f=0,d=0;d<s.length;d++){var p=s[d];h+=i.apply(p,[p])}for(var d=0;d<u.length;d++){var p=u[d];f+=i.apply(p,[p])}return{indegree:Math.pow(l,1-o)*Math.pow(h,o),outdegree:Math.pow(c,1-o)*Math.pow(f,o)}}for(var v=n.connectedEdges().intersection(t),g=v.length,y=0,d=0;d<v.length;d++){var p=v[d];y+=i.apply(p,[p])}return{degree:Math.pow(g,1-o)*Math.pow(y,o)}}};a.dc=a.degreeCentrality,a.dcn=a.degreeCentralityNormalised=a.degreeCentralityNormalized,t.exports=a},{"../../is":77,"../../util":94}],8:[function(e,t,n){"use strict";var r=e("../../is"),i={floydWarshall:function(e){e=e||{};var t=this.cy();if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;for(var a=this.edges().stdFilter(function(e){return!e.isLoop()}),o=this.nodes(),s=o.length,u={},l=0;s>l;l++)u[o[l].id()]=l;for(var c=[],l=0;s>l;l++){for(var h=new Array(s),f=0;s>f;f++)l==f?h[f]=0:h[f]=1/0;c.push(h)}var d=[],p=[],v=function(e){for(var t=0;s>t;t++){for(var n=new Array(s),r=0;s>r;r++)n[r]=void 0;e.push(n)}};v(d),v(p);for(var l=0;l<a.length;l++){var g=u[a[l].source().id()],y=u[a[l].target().id()],m=n.apply(a[l],[a[l]]);c[g][y]>m&&(c[g][y]=m,d[g][y]=y,p[g][y]=a[l])}if(!i)for(var l=0;l<a.length;l++){var g=u[a[l].target().id()],y=u[a[l].source().id()],m=n.apply(a[l],[a[l]]);c[g][y]>m&&(c[g][y]=m,d[g][y]=y,p[g][y]=a[l])}for(var b=0;s>b;b++)for(var l=0;s>l;l++)for(var f=0;s>f;f++)c[l][b]+c[b][f]<c[l][f]&&(c[l][f]=c[l][b]+c[b][f],d[l][f]=d[l][b]);for(var w=[],l=0;s>l;l++)w.push(o[l].id());var x={distance:function(e,n){if(r.string(e))var i=t.filter(e)[0].id();else var i=e.id();if(r.string(n))var a=t.filter(n)[0].id();else var a=n.id();return c[u[i]][u[a]]},path:function(e,n){var i=function(e,n,r,i,a){if(e===n)return t.getElementById(i[e]);if(void 0===r[e][n])return void 0;for(var o=[t.getElementById(i[e])],s=e;e!==n;){s=e,e=r[e][n];var u=a[s][e];o.push(u),o.push(t.getElementById(i[e]))}return o};if(r.string(e))var a=t.filter(e)[0].id();else var a=e.id();if(r.string(n))var o=t.filter(n)[0].id();else var o=n.id();var s=i(u[a],u[o],d,w,p);return t.collection(s)}};return x}};t.exports=i},{"../../is":77}],9:[function(e,t,n){"use strict";var r=e("../../util"),i={};[e("./bfs-dfs"),e("./a-star"),e("./floyd-warshall"),e("./bellman-ford"),e("./kerger-stein"),e("./page-rank"),e("./degree-centrality"),e("./closeness-centrality"),e("./betweenness-centrality")].forEach(function(e){r.extend(i,e)}),t.exports=i},{"../../util":94,"./a-star":2,"./bellman-ford":3,"./betweenness-centrality":4,"./bfs-dfs":5,"./closeness-centrality":6,"./degree-centrality":7,"./floyd-warshall":8,"./kerger-stein":10,"./page-rank":11}],10:[function(e,t,n){"use strict";var r=e("../../util"),i={kargerStein:function(e){var t=this;e=e||{};var n=function(e,t,n){for(var r=n[e],i=r[1],a=r[2],o=t[i],s=t[a],u=n.filter(function(e){return t[e[1]]===o&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===o?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=o):c[2]===s&&(u[l]=c.slice(0),u[l][2]=o)}for(var l=0;l<t.length;l++)t[l]===s&&(t[l]=o);return u},i=function(e,t,r,a){if(a>=r)return t;var o=Math.floor(Math.random()*t.length),s=n(o,e,t);return i(e,s,r-1,a)},a=this._private.cy,o=this.edges().stdFilter(function(e){return!e.isLoop()}),s=this.nodes(),u=s.length,l=o.length,c=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(2>u)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var f={},d=0;u>d;d++)f[s[d].id()]=d;for(var p=[],d=0;l>d;d++){var v=o[d];p.push([d,f[v.source().id()],f[v.target().id()]])}for(var g,y=1/0,m=[],d=0;u>d;d++)m.push(d);for(var b=0;c>=b;b++){var w=m.slice(0),x=i(w,p,u,h),_=w.slice(0),E=i(w,x,h,2),S=i(_,x,h,2);E.length<=S.length&&E.length<y?(y=E.length,g=[E,w]):S.length<=E.length&&S.length<y&&(y=S.length,g=[S,_])}for(var T=g[0].map(function(e){return o[e[0]]}),k=[],P=[],O=g[1][0],d=0;d<g[1].length;d++){var C=g[1][d];C===O?k.push(s[d]):P.push(s[d])}var R={cut:t.spawn(a,T),partition1:t.spawn(k),partition2:t.spawn(P)};return R}};t.exports=i},{"../../util":94}],11:[function(e,t,n){"use strict";var r=e("../../is"),i={pageRank:function(e){e=e||{};var t=function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=e[r];for(var r=0;t>r;r++)e[r]=e[r]/n};if(null!=e&&null!=e.dampingFactor)var n=e.dampingFactor;else var n=.8;if(null!=e&&null!=e.precision)var i=e.precision;else var i=1e-6;if(null!=e&&null!=e.iterations)var a=e.iterations;else var a=200;if(null!=e&&null!=e.weight&&r.fn(e.weight))var o=e.weight;else var o=function(e){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h=u.length,f={},d=0;c>d;d++)f[l[d].id()]=d;for(var p=[],v=[],g=(1-n)/c,d=0;c>d;d++){for(var y=[],m=0;c>m;m++)y.push(0);p.push(y),v.push(0)}for(var d=0;h>d;d++){var b=u[d],w=f[b.source().id()],x=f[b.target().id()],_=o.apply(b,[b]);p[x][w]+=_,v[w]+=_}for(var E=1/c+g,m=0;c>m;m++)if(0===v[m])for(var d=0;c>d;d++)p[d][m]=E;else for(var d=0;c>d;d++)p[d][m]=p[d][m]/v[m]+g;for(var S,T=[],k=[],d=0;c>d;d++)T.push(1),k.push(0);for(var P=0;a>P;P++){for(var O=k.slice(0),d=0;c>d;d++)for(var m=0;c>m;m++)O[d]+=p[d][m]*T[m];t(O),S=T,T=O;for(var C=0,d=0;c>d;d++)C+=Math.pow(S[d]-T[d],2);if(i>C)break}var R={rank:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return T[f[t]]}};return R}};t.exports=i},{"../../is":77}],12:[function(e,t,n){"use strict";var r=e("../define"),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};t.exports=i},{"../define":41}],13:[function(e,t,n){"use strict";var r=e("../util"),i={classes:function(e){e=e.match(/\S+/g)||[];for(var t=this,n=[],i={},a=0;a<e.length;a++){var o=e[a];i[o]=!0}for(var s=0;s<t.length;s++){for(var u=t[s],l=u._private,c=l.classes,h=!1,a=0;a<e.length;a++){var o=e[a],f=c[o];if(!f){h=!0;break}}if(!h)for(var d in c){var f=c[d],p=i[d];if(f&&!p){h=!0;break}}h&&(l.classes=r.copy(i),n.push(u))}return n.length>0&&this.spawn(n).updateStyle().trigger("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(e,t){for(var n=e.match(/\S+/g)||[],r=this,i=[],a=0,o=r.length;o>a;a++)for(var s=r[a],u=!1,l=0;l<n.length;l++){var c=n[l],h=s._private.classes,f=h[c],d=t||void 0===t&&!f;d?(h[c]=!0,f||u||(i.push(s),u=!0)):(h[c]=!1,f&&!u&&(i.push(s),u=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};t.exports=i},{"../util":94}],14:[function(e,t,n){"use strict";var r={allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}};r.allAreNeighbours=r.allAreNeighbors,t.exports=r},{}],15:[function(e,t,n){"use strict";var r={parent:function(e){for(var t=[],n=this._private.cy,r=0;r<this.length;r++){var i=this[r],a=n.getElementById(i._private.data.parent);a.size()>0&&t.push(a)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];t=t.concat(r._private.children)}return this.spawn(t,{unique:!0}).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];n.push(i),i.children().nonempty()&&t(i.children())}}var n=[];return t(this.children()),this.spawn(n,{unique:!0}).filter(e)}};r.ancestors=r.parents,t.exports=r},{}],16:[function(e,t,n){"use strict";var r,i,a=e("../define");r=i={data:a.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:a.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:a.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:a.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:a.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:a.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0}},r.attr=r.data,r.removeAttr=r.removeData,t.exports=i},{"../define":41}],17:[function(e,t,n){"use strict";function r(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];(t||!s.isLoop())&&(r+=e(i,s))}return r}}}function i(e,t){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}var a=e("../util"),o={};a.extend(o,{degree:r(function(e,t){return t.source().same(t.target())?2:1}),indegree:r(function(e,t){return t.target().same(e)?1:0}),outdegree:r(function(e,t){return t.source().same(e)?1:0})}),a.extend(o,{minDegree:i("degree",function(e,t){return t>e}),maxDegree:i("degree",function(e,t){return e>t}),minIndegree:i("indegree",function(e,t){return t>e}),maxIndegree:i("indegree",function(e,t){return e>t}),minOutdegree:i("outdegree",function(e,t){return t>e}),maxOutdegree:i("outdegree",function(e,t){return e>t})}),a.extend(o,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}}),t.exports=o},{"../util":94}],18:[function(e,t,n){"use strict";var r,i,a=e("../define"),o=e("../is"),s=e("../util");r=i={position:a.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()&&!e.isParent()}}),silentPosition:a.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()&&!e.isParent()}}),positions:function(e,t){if(o.plainObject(e))this.position(e);else if(o.fn(e)){for(var n=e,r=0;r<this.length;r++){var i=this[r],e=n.apply(i,[r,i]);if(e&&!i.locked()&&!i.isParent()){var a=i._private.position;a.x=e.x,a.y=e.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;t?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),s=o.plainObject(e)?e:void 0,u=void 0!==s||void 0!==t&&o.string(e);if(n&&n.isNode()){if(!u){var l=n._private.position;return s={x:l.x*i+a.x,y:l.y*i+a.y},void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==t?n._private.position[e]=(t-a[e])/i:void 0!==s&&(n._private.position={x:(s.x-a.x)/i,y:(s.y-a.y)/i})}this.rtrigger("position")}else if(!u)return void 0;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=o.plainObject(e)?e:void 0,a=void 0!==i||void 0!==t&&o.string(e),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var u=n._private.position,l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var f=h?l._private.position:{x:0,y:0};return i={x:u.x-f.x,y:u.y-f.y},void 0===e?i:i[e]}for(var d=0;d<this.length;d++){var n=this[d],l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var f=h?l._private.position:{x:0,y:0};void 0!==t?n._private.position[e]=t+f[e]:void 0!==i&&(n._private.position={x:i.x+f.x,y:i.y+f.y})}this.rtrigger("position")}else if(!a)return void 0;return this},renderedBoundingBox:function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),a=t.x1*r+i.x,o=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}},updateCompoundBounds:function(){function e(e){var t=e.children(),r=e._private.style,i="include"===r["compound-sizing-wrt-labels"].value,a=t.boundingBox({includeLabels:i,includeEdges:!0}),o={top:r["padding-top"].pfValue,bottom:r["padding-bottom"].pfValue,left:r["padding-left"].pfValue,right:r["padding-right"].pfValue},s=e._private.position,u=!1;"auto"===r.width.value&&(e._private.autoWidth=a.w,s.x=(a.x1+a.x2-o.left+o.right)/2,u=!0),"auto"===r.height.value&&(e._private.autoHeight=a.h,s.y=(a.y1+a.y2-o.top+o.bottom)/2,u=!0),u&&n.push(e)}var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return t.collection();for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var a=r[i];e(a)}r=r.parent()}return this.spawn(n)},boundingBox:function(e){var t=this,n=t._private.cy,r=n._private,i=r.styleEnabled;e=e||s.staticEmptyObject();var a=void 0===e.includeNodes?!0:e.includeNodes,o=void 0===e.includeEdges?!0:e.includeEdges,u=void 0===e.includeLabels?!0:e.includeLabels;i&&r.renderer.recalculateRenderedStyle(this);for(var l=1/0,c=-(1/0),h=1/0,f=-(1/0),d=0;d<t.length;d++){var p,v,g,y,m,b,w=t[d],x=w._private,_=x.style,E=i?x.style.display.value:"element",S="nodes"===x.group,T=!1;if("none"!==E){if(S&&a){T=!0;var k=x.position;m=k.x,b=k.y;var P=w.outerWidth(),O=P/2,C=w.outerHeight(),R=C/2;p=m-O,v=m+O,g=b-R,y=b+R,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,f=y>f?y:f}else if(w.isEdge()&&o){T=!0;var N=x.source,I=N._private,D=I.position,A=x.target,L=A._private,M=L.position,B=x.rstyle||{},P=0,j=0;if(i&&(P=_.width.pfValue,j=P/2),p=D.x,v=M.x,g=D.y,y=M.y,p>v){var q=p;p=v,v=q}if(g>y){var q=g;g=y,y=q}if(p-=j,v+=j,g-=j,y+=j,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,f=y>f?y:f,i)for(var z=B.bezierPts||B.linePts||[],F=0;F<z.length;F++){var V=z[F];p=V.x-j,v=V.x+j,g=V.y-j,y=V.y+j,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,f=y>f?y:f}if(i&&"haystack"===_["curve-style"].strValue){var U=B.haystackPts;if(p=U[0].x,g=U[0].y,v=U[1].x,y=U[1].y,p>v){var q=p;p=v,v=q}if(g>y){var q=g;g=y,y=q}l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,f=y>f?y:f}}if(i){var x=w._private,_=x.style,B=x.rstyle,Y=_.label.strValue,X=_["font-size"],H=_["text-halign"],$=_["text-valign"],W=B.labelWidth,G=B.labelHeight,K=B.labelX,Z=B.labelY,J=w.isEdge(),Q="autorotate"===_["edge-text-rotation"].strValue;if(u&&Y&&X&&null!=G&&null!=W&&null!=K&&null!=Z&&H&&$){var ee,te,ne,re,ie=G,ae=W;if(J){if(ee=K-ae/2,te=K+ae/2,ne=Z-ie/2,re=Z+ie/2,Q){var oe=x.rscratch.labelAngle,se=Math.cos(oe),ue=Math.sin(oe),le=function(e,t){return e-=K,t-=Z,{x:e*se-t*ue+K,y:e*ue+t*se+Z}},ce=le(ee,ne),he=le(ee,re),fe=le(te,ne),de=le(te,re);ee=Math.min(ce.x,he.x,fe.x,de.x),te=Math.max(ce.x,he.x,fe.x,de.x),ne=Math.min(ce.y,he.y,fe.y,de.y),re=Math.max(ce.y,he.y,fe.y,de.y)}}else{switch(H.value){case"left":ee=K-ae,te=K;break;case"center":ee=K-ae/2,te=K+ae/2;break;case"right":ee=K,te=K+ae}switch($.value){case"top":ne=Z-ie,re=Z;break;case"center":ne=Z-ie/2,re=Z+ie/2;break;case"bottom":ne=Z,re=Z+ie}}l=l>ee?ee:l,c=te>c?te:c,h=h>ne?ne:h,f=re>f?re:f}}}}var pe=function(e){return e===1/0||e===-(1/0)?0:e};return l=pe(l),c=pe(c),h=pe(h),f=pe(f),{x1:l,x2:c,y1:h,y2:f,w:c-l,h:f-h}}};var u=function(e){e.uppercaseName=s.capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=s.capitalize(e.outerName),r[e.name]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(!i)return 1;var a=n.style[e.name];switch(a.strValue){case"auto":return n[e.autoName]||0;case"label":return n.rstyle[e.labelName]||0;default:return a.pfValue}}},r["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(i){var a=n.style,o=t[e.name](),s=a["border-width"].pfValue,u=a[e.paddings[0]].pfValue+a[e.paddings[1]].pfValue;return o+s+u}return 1}},r["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},r["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};u({name:"width",paddings:["padding-left","padding-right"]}),u({name:"height",paddings:["padding-top","padding-bottom"]}),r.modelPosition=r.point=r.position,r.modelPositions=r.points=r.positions,r.renderedPoint=r.renderedPosition,r.relativePoint=r.relativePosition,r.boundingbox=r.boundingBox,r.renderedBoundingbox=r.renderedBoundingBox,t.exports=i},{"../define":41,"../is":77,"../util":94}],19:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a=function(e,t,n){if(!(this instanceof a))return new a(e,t,n);var o=this;if(n=void 0===n||n?!0:!1,void 0===e||void 0===t||!i.core(e))return void r.error("An element must have a core reference and parameters set");var s=t.group;if(null==s&&(s=null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==s&&"edges"!==s)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+s+"`");if(this.length=1,this[0]=this,this._private={cy:e,single:!0,data:t.data||{},position:t.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:s,style:{},rstyle:{},styleCxts:[],removed:!0,selected:t.selected?!0:!1,selectable:void 0===t.selectable?!0:t.selectable?!0:!1,locked:t.locked?!0:!1,grabbed:!1,grabbable:void 0===t.grabbable?!0:t.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[]},t.renderedPosition){var u=t.renderedPosition,l=e.pan(),c=e.zoom();this._private.position={x:(u.x-l.x)/c,y:(u.y-l.y)/c}}if(i.string(t.classes))for(var h=t.classes.split(/\s+/),f=0,d=h.length;d>f;f++){var p=h[f];p&&""!==p&&(o._private.classes[p]=!0)}(t.style||t.css)&&e.style().applyBypass(this,t.style||t.css),(void 0===n||n)&&this.restore()};t.exports=a},{"../is":77,"../util":94}],20:[function(e,t,n){"use strict";var r=e("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this}),this.trigger(e,t),this):void 0}};r.eventAliasesOn(i),t.exports=i},{"../define":41}],21:[function(e,t,n){"use strict";var r=e("../is"),i=e("../selector"),a={nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(e){if(r.fn(e)){for(var t=[],n=0;n<this.length;n++){var a=this[n];e.apply(a,[n,a])&&t.push(a)}return this.spawn(t)}return r.string(e)||r.elementOrCollection(e)?i(e).filter(this):void 0===e?this:this.spawn()},not:function(e){if(e){r.string(e)&&(e=this.filter(e));for(var t=[],n=0;n<this.length;n++){var i=this[n],a=e._private.ids[i.id()];a||t.push(i)}return this.spawn(t)}return this},absoluteComplement:function(){var e=this._private.cy;return e.elements().not(this)},intersect:function(e){if(r.string(e)){var t=e;return this.filter(t)}for(var n=[],i=this,a=e,o=this.length<e.length,s=o?a._private.ids:i._private.ids,u=o?i:a,l=0;l<u.length;l++){var c=u[l]._private.data.id,h=s[c];h&&n.push(h)}return this.spawn(n)},xor:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=this,a=e,o=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,o=t._private.ids[a];o||n.push(i)}};return o(i,a),o(a,i),this.spawn(n)},diff:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=[],a=[],o=this,s=e,u=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,s=t._private.ids[o];s?a.push(i):n.push(i)}};return u(o,s,n),u(s,o,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(a,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.elements(n)}for(var i=[],a=0;a<this.length;a++)i.push(this[a]);for(var a=0;a<e.length;a++){var o=!this._private.ids[e[a].id()];o&&i.push(e[a])}return this.spawn(i)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(r.string(e)){var i=e;e=n.elements(i)}for(var a=0;a<e.length;a++){var o=e[a],s=o.id(),u=!t.ids[s];if(u){var l=this.length++;this[l]=o,t.ids[s]=o,t.indexes[s]=l}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e.id(),r=t.indexes[n];if(null==r)return this;this[r]=void 0,t.ids[n]=void 0,t.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var a=this.length-1,o=this[a];this[a]=void 0,this[r]=o,t.indexes[o.id()]=r}return this.length--,this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.elements(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=t?e.apply(t,[a,i,r]):e(a,i,r);n.push(o)}return n},stdFilter:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=t?e.apply(t,[a,i,r]):e(a,i,r);o&&n.push(a)}return this.spawn(n)},max:function(e,t){for(var n,r=-(1/0),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s>r&&(r=s,n=o)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);r>s&&(r=s,n=o)}return{value:r,ele:n}}},o=a;o.u=o["|"]=o["+"]=o.union=o.or=o.add,o["\\"]=o["!"]=o["-"]=o.difference=o.relativeComplement=o.subtract=o.not,o.n=o["&"]=o["."]=o.and=o.intersection=o.intersect,o["^"]=o["(+)"]=o["(-)"]=o.symmetricDifference=o.symdiff=o.xor,o.fnFilter=o.filterFn=o.stdFilter,o.complement=o.abscomp=o.absoluteComplement,t.exports=a},{"../is":77,"../selector":81}],22:[function(e,t,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}};t.exports=r},{}],23:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a=e("./element"),o={prefix:"ele",id:0,generate:function(e,t,n){var r=(i.element(t)?t._private:t,null!=n?n:this.prefix+this.id);if(e.getElementById(r).empty())this.id++;else for(;!e.getElementById(r).empty();)r=this.prefix+ ++this.id;return r}},s=function(e,t,n){if(!(this instanceof s))return new s(e,t,n);if(void 0===e||!i.core(e))return void r.error("A collection must have a reference to the core");var u={},l={},c=!1;if(t){if(t.length>0&&i.plainObject(t[0])&&!i.element(t[0])){c=!0;for(var h=[],f={},d=0,p=t.length;p>d;d++){var v=t[d];null==v.data&&(v.data={});var g=v.data;if(null==g.id)g.id=o.generate(e,v);else if(0!==e.getElementById(g.id).length||f[g.id])continue;var y=new a(e,v,!1);h.push(y),f[g.id]=!0}t=h}}else t=[];this.length=0;for(var d=0,p=t.length;p>d;d++){var m=t[d];if(m){var b=m._private.data.id;(!n||n.unique&&!u[b])&&(u[b]=m,l[b]=this.length,this[this.length]=m,this.length++)}}this._private={cy:e,ids:u,indexes:l},c&&this.restore()},u=a.prototype=s.prototype;u.instanceString=function(){return"collection"},u.spawn=function(e,t,n){return i.core(e)||(n=t,t=e,e=this.cy()),new s(e,t,n)},u.cy=function(){return this._private.cy},u.element=function(){return this[0]},u.collection=function(){return i.collection(this)?this:new s(this._private.cy,[this])},u.unique=function(){return new s(this._private.cy,this,{unique:!0})},u.getElementById=function(e){var t=this._private.cy,n=this._private.ids[e];return n?n:new s(t)},u.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null==t)return void 0;var a=t._private;if(i.plainObject(e)){n.startBatch(),e.data&&t.data(e.data),e.position&&t.position(e.position);var o=function(n,r,i){var o=e[n];null!=o&&o!==a[n]&&(o?t[r]():t[i]())};return o("removed","remove","restore"),o("selected","select","unselect"),o("selectable","selectify","unselectify"),o("locked","lock","unlock"),o("grabbable","grabify","ungrabify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var s={data:r.copy(a.data),position:r.copy(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,classes:null},u=[];for(var l in a.classes)a.classes[l]&&u.push(l);return s.classes=u.join(" "),s}},u.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},u.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new a(e,i,!1);t.push(o)}return new s(e,t)},u.copy=u.clone,u.restore=function(e){var t=this,n=[],a=t.cy();void 0===e&&(e=!0);for(var u=[],l=[],c=[],h=0,f=0,d=0,p=t.length;p>d;d++){var v=t[d];v.isNode()?(l.push(v),h++):(c.push(v),f++)}u=l.concat(c);for(var d=0,p=u.length;p>d;d++){var v=u[d];if(v.removed()){var g=v._private,y=g.data;if(void 0===y.id)y.id=o.generate(a,v);else if(i.number(y.id))y.id=""+y.id;else{if(i.emptyString(y.id)||!i.string(y.id)){r.error("Can not create element with invalid string ID `"+y.id+"`");continue}if(0!==a.getElementById(y.id).length){
r.error("Can not create second element with ID `"+y.id+"`");continue}}var m=y.id;if(v.isNode()){var b=v,w=g.position;null==w.x&&(w.x=0),null==w.y&&(w.y=0)}if(v.isEdge()){for(var x=v,_=["source","target"],E=_.length,S=!1,T=0;E>T;T++){var k=_[T],P=y[k];i.number(P)&&(P=y[k]=""+y[k]),null==P||""===P?(r.error("Can not create edge `"+m+"` with unspecified "+k),S=!0):a.getElementById(P).empty()&&(r.error("Can not create edge `"+m+"` with nonexistant "+k+" `"+P+"`"),S=!0)}if(S)continue;var O=a.getElementById(y.source),C=a.getElementById(y.target);O._private.edges.push(x),C._private.edges.push(x),x._private.source=O,x._private.target=C}g.ids={},g.ids[m]=v,g.removed=!1,a.addToPool(v),n.push(v)}}for(var d=0;h>d;d++){var b=u[d],y=b._private.data;i.number(y.parent)&&(y.parent=""+y.parent);var R=y.parent,N=null!=R;if(N){var I=a.getElementById(R);if(I.empty())y.parent=void 0;else{for(var D=!1,A=I;!A.empty();){if(b.same(A)){D=!0,y.parent=void 0;break}A=A.parent()}D||(I[0]._private.children.push(b),b._private.parent=I[0],a._private.hasCompoundNodes=!0)}}}if(n=new s(a,n),n.length>0){var L=n.add(n.connectedNodes()).add(n.parent());L.updateStyle(e),e?n.rtrigger("add"):n.trigger("add")}return t},u.removed=function(){var e=this[0];return e&&e._private.removed},u.inside=function(){var e=this[0];return e&&!e._private.removed},u.remove=function(e){function t(e){for(var t=e._private.edges,n=0;n<t.length;n++)r(t[n])}function n(e){for(var t=e._private.children,n=0;n<t.length;n++)r(t[n])}function r(e){var r=c[e.id()];r||(c[e.id()]=!0,e.isNode()?(l.push(e),t(e),n(e)):l.unshift(e))}function i(e,t){for(var n=e._private.edges,r=0;r<n.length;r++){var i=n[r];if(t===i){n.splice(r,1);break}}}function a(e,t){t=t[0],e=e[0];for(var n=e._private.children,r=0;r<n.length;r++)if(n[r][0]===t[0]){n.splice(r,1);break}}var o=this,u=[],l=[],c={},h=o._private.cy;void 0===e&&(e=!0);for(var f=0,d=o.length;d>f;f++){var p=o[f];r(p)}for(var f=0;f<l.length;f++){var p=l[f];if(p._private.removed=!0,h.removeFromPool(p),u.push(p),p.isEdge()){var v=p.source()[0],g=p.target()[0];i(v,p),i(g,p)}else{var y=p.parent();0!==y.length&&a(y,p)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var f=0;f<m.length;f++){var p=m[f];if(p.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new s(this.cy(),u);b.size()>0&&(e&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var w={},f=0;f<l.length;f++){var p=l[f],x="nodes"===p._private.group,_=p._private.data.parent;if(x&&void 0!==_&&!w[_]){w[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return new s(h,u)},u.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.getElementById(n).length>0,a=t.getElementById(r).length>0;if(i||a){var o=this.jsons();this.remove();for(var s=0;s<o.length;s++){var u=o[s];"edges"===u.group&&(i&&(u.data.source=n),a&&(u.data.target=r))}return t.add(o)}}else if(void 0!==e.parent){var l=e.parent,c=null===l||t.getElementById(l).length>0;if(c){var o=this.jsons(),h=this.descendants(),f=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var u=o[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return t.add(o).merge(f.restore())}return this},[e("./algorithms"),e("./animation"),e("./class"),e("./comparators"),e("./compounds"),e("./data"),e("./degree"),e("./dimensions"),e("./events"),e("./filter"),e("./group"),e("./index"),e("./iteration"),e("./layout"),e("./style"),e("./switch-functions"),e("./traversing")].forEach(function(e){r.extend(u,e)}),t.exports=s},{"../is":77,"../util":94,"./algorithms":9,"./animation":12,"./class":13,"./comparators":14,"./compounds":15,"./data":16,"./degree":17,"./dimensions":18,"./element":19,"./events":20,"./filter":21,"./group":22,"./index":23,"./iteration":24,"./layout":25,"./style":26,"./switch-functions":27,"./traversing":28}],24:[function(e,t,n){"use strict";var r=e("../is"),i=e("./zsort"),a={each:function(e){if(r.fn(e))for(var t=0;t<this.length;t++){var n=this[t],i=e.apply(n,[t,n]);if(i===!1)break}return this},forEach:function(e,t){if(r.fn(e))for(var n=0;n<this.length;n++){var i=this[n],a=t?e.apply(t,[i,n,this]):e(i,n,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),0>e&&(e=r+e),0>t&&(t=r+t);for(var i=e;i>=0&&t>i&&r>i;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!r.fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,n=t.group;if("nodes"===n){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Number.MAX_VALUE}var i=t.source,a=t.target,o=i.zDepth(),s=a.zDepth();return Math.max(o,s,0)}};t.exports=a},{"../is":77,"./zsort":29}],25:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),a={layoutPositions:function(e,t,n){var i=this.nodes(),a=this.cy();if(e.trigger({type:"layoutstart",layout:e}),e.animations=[],t.animate){for(var o=0;o<i.length;o++){var s=i[o],u=o===i.length-1,l=n.call(s,o,s),c=s.position();r.number(c.x)&&r.number(c.y)||s.silentPosition({x:0,y:0});var h=s.animation({position:l,duration:t.animationDuration,easing:t.animationEasing,step:u?function(){t.fit&&a.fit(t.eles,t.padding)}:void 0,complete:u?function(){null!=t.zoom&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),t.fit&&a.fit(t.eles,t.padding),e.one("layoutstop",t.stop),e.trigger({type:"layoutstop",layout:e})}:void 0});e.animations.push(h),h.play()}e.one("layoutready",t.ready),e.trigger({type:"layoutready",layout:e})}else i.positions(n),t.fit&&a.fit(t.eles,t.padding),null!=t.zoom&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.trigger({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.layout(i.extend({},e,{eles:this})),this},makeLayout:function(e){var t=this.cy();return t.makeLayout(i.extend({},e,{eles:this}))}};a.createLayout=a.makeLayout,t.exports=a},{"../is":77,"../util":94}],26:[function(e,t,n){"use strict";var r=e("../is"),i={updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.style();e=e||void 0===e?!0:!1,r.apply(this);var i=this.updateCompoundBounds(),a=i.length>0?this.add(i):this;return e?a.rtrigger("style"):a.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=e||void 0===e?!0:!1,!t.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return e?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===e?r:r[e]}},css:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(r.plainObject(e)){var o=e;a.applyBypass(this,o,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(r.string(e)){if(void 0===t){var l=this[0];return l?l._private.style[e].strValue:void 0}a.applyBypass(this,e,t,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===e){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var a=0;a<i.length;a++){var o=i[a];r.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var a=0;a<i.length;a++){var o=i[a];r.removeBypasses(o,e,n)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],n=e.hasCompoundNodes();if(t){var r=t._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===t._private.group){if(!n)return!0;var i=t._private.data.parent?t.parents():null;if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o._private.style,u=s.visibility.value,l=s.display.value;if("visible"!==u||"element"!==l)return!1}return!0}var c=t._private.source,h=t._private.target;return c.visible()&&h.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!t)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var n="auto"===t._private.style.width.value,r="auto"===t._private.style.height.value;return t.isParent()&&n&&r}},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return t._private.backgrounding?!0:!1}};i.bypass=i.style=i.css,i.renderedStyle=i.renderedCss,i.removeBypass=i.removeStyle=i.removeCss,t.exports=i},{"../is":77}],27:[function(e,t,n){"use strict";function r(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.bind(e.event,r,i)}else if(1===t.length){var i=t[0];this.bind(e.event,i)}else if(0===t.length){for(var a=0;a<this.length;a++){var o=this[a],s=!e.ableField||o._private[e.ableField],u=o._private[e.field]!=e.value;if(e.overrideAble){var l=e.overrideAble(o);if(void 0!==l&&(s=l,!l))return this}s&&(o._private[e.field]=e.value,u&&n.push(o))}var c=this.spawn(n);c.updateStyle(),c.trigger(e.event)}return this}}function i(e){a[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},a[e.on]=r({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),a[e.off]=r({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}var a={};i({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),a.deselect=a.unselect,a.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},i({field:"active",on:"activate",off:"unactivate"}),a.inactive=function(){var e=this[0];return e?!e._private.active:void 0},t.exports=a},{}],28:[function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=i._private[e.attr];a&&n.push(a)}return this.spawn(n,{unique:!0}).filter(t)}}function i(e){return function(t){var n=[],r=this._private.cy,i=e||{};s.string(t)&&(t=r.$(t));for(var a=this._private.ids,o=t._private.ids,u=0;u<t.length;u++)for(var l=t[u]._private.edges,c=0;c<l.length;c++){var h=l[c],f=h._private.data,d=a[f.source]&&o[f.target],p=o[f.source]&&a[f.target],v=d||p;if(v){if(i.thisIs){if("source"===i.thisIs&&!d)continue;if("target"===i.thisIs&&!p)continue}n.push(h)}}return this.spawn(n,{unique:!0})}}function a(e){var t={codirected:!1};return e=o.extend({},t,e),function(t){for(var n=[],r=this.edges(),i=e,a=0;a<r.length;a++)for(var o=r[a],s=o.source()[0],u=s.id(),l=o.target()[0],c=l.id(),h=s._private.edges,f=0;f<h.length;f++){var d=h[f],p=d._private.data,v=p.target,g=p.source,y=v===c&&g===u,m=u===v&&c===g;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(t)}}var o=e("../util"),s=e("../is"),u={};o.extend(u,{roots:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r];if(i.isNode()){var a=i.connectedEdges(function(){return this.data("target")===i.id()&&this.data("source")!==i.id()}).length>0;a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)},leaves:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r];if(i.isNode()){var a=i.connectedEdges(function(){return this.data("source")===i.id()&&this.data("target")!==i.id()}).length>0;a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)},outgoers:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r],a=i.id();if(i.isNode())for(var o=i._private.edges,s=0;s<o.length;s++){var u=o[s],l=u._private.data.source,c=u._private.data.target;l===a&&c!==a&&(n.push(u),n.push(u.target()[0]))}}return this.spawn(n,{unique:!0}).filter(e)},successors:function(e){for(var t=this,n=[],r={};;){var i=t.outgoers();if(0===i.length)break;for(var a=!1,o=0;o<i.length;o++){var s=i[o],u=s.id();r[u]||(r[u]=!0,n.push(s),a=!0)}if(!a)break;t=i}return this.spawn(n,{unique:!0}).filter(e)},incomers:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r],a=i.id();if(i.isNode())for(var o=i._private.edges,s=0;s<o.length;s++){var u=o[s],l=u._private.data.source,c=u._private.data.target;c===a&&l!==a&&(n.push(u),n.push(u.source()[0]))}}return this.spawn(n,{unique:!0}).filter(e)},predecessors:function(e){for(var t=this,n=[],r={};;){var i=t.incomers();if(0===i.length)break;for(var a=!1,o=0;o<i.length;o++){var s=i[o],u=s.id();r[u]||(r[u]=!0,n.push(s),a=!0)}if(!a)break;t=i}return this.spawn(n,{unique:!0}).filter(e)}}),o.extend(u,{neighborhood:function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s._private.source,l=s._private.target,c=i===u?l:u;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),u.neighbourhood=u.neighborhood,u.closedNeighbourhood=u.closedNeighborhood,u.openNeighbourhood=u.openNeighborhood,o.extend(u,{source:function(e){var t,n=this[0];return n&&(t=n._private.source),t&&e?t.filter(e):t},target:function(e){var t,n=this[0];return n&&(t=n._private.target),t&&e?t.filter(e):t},sources:r({attr:"source"}),targets:r({attr:"target"})}),o.extend(u,{edgesWith:i(),edgesTo:i({thisIs:"source"})}),o.extend(u,{connectedEdges:function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];t.push(s)}}return this.spawn(t,{unique:!0}).filter(e)},connectedNodes:function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},parallelEdges:a(),codirectedEdges:a({codirected:!0})}),o.extend(u,{components:function(){var e=this.cy(),t=e.collection(),n=this.nodes(),r=[],i=function(e,r){t.merge(e),n.unmerge(e),r.merge(e)};do{var a=e.collection();r.push(a);var o=n[0];i(o,a),this.bfs({directed:!1,roots:o,visit:function(e,t,n,r,o){i(n,a)}})}while(n.length>0);return r.map(function(e){return e.closedNeighborhood()})}}),t.exports=u},{"../is":77,"../util":94}],29:[function(e,t,n){"use strict";var r=function(e,t){var n=e.cy(),r=e._private,i=t._private,a=r.style["z-index"].value-i.style["z-index"].value,o=0,s=0,u=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,h="nodes"===i.group,f="edges"===i.group;u&&(o=e.zDepth(),s=t.zDepth());var d=o-s,p=0===d;return p?l&&f?1:c&&h?-1:0===a?r.index-i.index:a:d};t.exports=r},{}],30:[function(e,t,n){"use strict";function r(e){var t=!l||"interactive"!==l.readyState&&"complete"!==l.readyState?r:e;setTimeout(t,9,e)}var i=e("../is"),a=e("../util"),o=e("../collection"),s=e("../collection/element"),u=e("../window"),l=u?u.document:null,c=e("../extensions/renderer/null"),h={add:function(e){var t,n=this;if(i.elementOrCollection(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var u=[],l=0;l<r.length;l++){var c=r[l];u.push(c.json())}t=new o(n,u)}}else if(i.array(e)){var u=e;t=new o(n,u)}else if(i.plainObject(e)&&(i.array(e.nodes)||i.array(e.edges))){for(var h=e,u=[],f=["nodes","edges"],l=0,d=f.length;d>l;l++){var p=f[l],v=h[p];if(i.array(v))for(var g=0,y=v.length;y>g;g++){var m=a.extend({group:p},v[g]);u.push(m)}}t=new o(n,u)}else{var m=e;t=new s(n,m).collection()}return t},remove:function(e){if(i.elementOrCollection(e))e=e;else if(i.string(e)){var t=e;e=this.$(t)}return e.remove()},load:function(e,t,n){function o(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",t),s.trigger("load")}).one("layoutstop",function(){s.one("done",n),s.trigger("done")});var e=a.extend({},s._private.options.layout);e.eles=s.$(),s.layout(e)}var s=this;s.notifications(!1);var l=s.elements();return l.length>0&&l.remove(),null!=e&&(i.plainObject(e)||i.array(e))&&s.add(e),!u||s.renderer()instanceof c?o():r(o),this}};t.exports=h},{"../collection":23,"../collection/element":19,"../extensions/renderer/null":73,"../is":77,"../util":94,"../window":100}],31:[function(e,t,n){"use strict";var r=e("../define"),i=e("../util"),a=e("../is"),o={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function e(){c._private.animationsRunning&&i.requestAnimationFrame(function(n){t(n),e()})}function t(e){function t(t,i){var o=t._private,s=o.animation.current,u=o.animation.queue,l=!1;if(0===s.length){var c=u.shift();c&&s.push(c)}for(var h=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n()}e.splice(0,e.length)},f=s.length-1;f>=0;f--){var d=s[f],p=d._private;p.stopped?(s.splice(f,1),p.hooked=!1,p.playing=!1,p.started=!1,h(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||n(t,d,e),r(t,d,e,i),p.applying&&(p.applying=!1),h(p.frames),d.completed()&&(s.splice(f,1),p.hooked=!1,p.playing=!1,p.started=!1,h(p.completes)),l=!0)}return i||0!==s.length||0!==u.length||a.push(t),l}for(var i=c._private.aniEles,a=[],o=!1,s=0;s<i.length;s++){var u=i[s],l=t(u);o=o||l}var h=t(c,!0);if(o||h){var f;if(i.length>0){var d=i.updateCompoundBounds();f=d.length>0?i.add(d):i}c.notify({type:"draw",collection:f})}i.unmerge(a)}function n(e,t,n){var r=a.core(e),i=!r,o=e,s=c._private.style,u=t._private;if(i){var l=o._private.position;u.startPosition=u.startPosition||{x:l.x,y:l.y},u.startStyle=u.startStyle||s.getValueStyle(o)}if(r){var h=c._private.pan;u.startPan=u.startPan||{x:h.x,y:h.y},u.startZoom=null!=u.startZoom?u.startZoom:c._private.zoom}u.started=!0,u.startTime=n-u.progress*u.duration}function r(e,t,n,r){var i=c._private.style,s=!r,u=e._private,h=t._private,d=h.easing,p=h.startTime;if(!h.easingImpl)if(null==d)h.easingImpl=f.linear;else{var v;if(a.string(d)){var g=i.parse("transition-timing-function",d);v=g.value}else v=d;var y,m;a.string(v)?(y=v,m=[]):(y=v[1],m=v.slice(2).map(function(e){return+e})),m.length>0?("spring"===y&&m.push(h.duration),h.easingImpl=f[y].apply(null,m)):h.easingImpl=f[y]}var b,w=h.easingImpl;if(b=0===h.duration?1:(n-p)/h.duration,h.applying&&(b=h.progress),0>b?b=0:b>1&&(b=1),null==h.delay){var x=h.startPosition,_=h.position,E=u.position;_&&s&&(o(x.x,_.x)&&(E.x=l(x.x,_.x,b,w)),o(x.y,_.y)&&(E.y=l(x.y,_.y,b,w)));var S=h.startPan,T=h.pan,k=u.pan,P=null!=T&&r;P&&(o(S.x,T.x)&&(k.x=l(S.x,T.x,b,w)),o(S.y,T.y)&&(k.y=l(S.y,T.y,b,w)),e.trigger("pan"));var O=h.startZoom,C=h.zoom,R=null!=C&&r;R&&(o(O,C)&&(u.zoom=l(O,C,b,w)),e.trigger("zoom")),(P||R)&&e.trigger("viewport");var N=h.style;if(N&&s)for(var I=0;I<N.length;I++){var D=N[I],y=D.name,A=D,L=h.startStyle[y],M=l(L,A,b,w);i.overrideBypass(e,y,M)}}return a.fn(h.step)&&h.step.apply(e,[n]),h.progress=b,b}function o(e,t){return null==e||null==t?!1:a.number(e)&&a.number(t)?!0:e&&t?!0:!1}function s(e,t,n){var r=1-n,i=n*n;return 3*r*r*n*e+3*r*i*t+i*n}function u(e,t){return function(n,r,i){return n+(r-n)*s(e,t,i)}}function l(e,t,n,r){0>n?n=0:n>1&&(n=1);var i,o;if(i=null!=e.pfValue||null!=e.value?null!=e.pfValue?e.pfValue:e.value:e,o=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,a.number(i)&&a.number(o))return r(i,o,n);if(a.array(i)&&a.array(o)){for(var s=[],u=0;u<o.length;u++){var l=i[u],c=o[u];if(null!=l&&null!=c){var h=r(l,c,n);e.roundValue&&(h=Math.round(h)),s.push(h)}else s.push(c)}return s}return void 0}var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){e();var h=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},a=t(n,.5*r,i),o=t(n,.5*r,a),s=t(n,r,o),u=1/6*(i.dx+2*(a.dx+o.dx)+s.dx),l=1/6*(i.dv+2*(a.dv+o.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var a,o,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,u.tension=e,u.friction=t,a=null!==i,a?(c=r(e,t),o=c/i*f):o=f;;)if(s=n(s||u,o),l.push(1+s.x),c+=16,!(Math.abs(s.x)>h&&Math.abs(s.v)>h))break;return a?function(e){return l[e*(l.length-1)|0]}:c}}(),f={linear:function(e,t,n){return e+(t-e)*n},ease:u(.25,.1,.25,1),"ease-in":u(.42,0,1,1),"ease-out":u(0,0,.58,1),"ease-in-out":u(.42,0,.58,1),"ease-in-sine":u(.47,0,.745,.715),"ease-out-sine":u(.39,.575,.565,1),"ease-in-out-sine":u(.445,.05,.55,.95),"ease-in-quad":u(.55,.085,.68,.53),"ease-out-quad":u(.25,.46,.45,.94),"ease-in-out-quad":u(.455,.03,.515,.955),"ease-in-cubic":u(.55,.055,.675,.19),"ease-out-cubic":u(.215,.61,.355,1),"ease-in-out-cubic":u(.645,.045,.355,1),"ease-in-quart":u(.895,.03,.685,.22),"ease-out-quart":u(.165,.84,.44,1),"ease-in-out-quart":u(.77,0,.175,1),"ease-in-quint":u(.755,.05,.855,.06),"ease-out-quint":u(.23,1,.32,1),"ease-in-out-quint":u(.86,0,.07,1),"ease-in-expo":u(.95,.05,.795,.035),"ease-out-expo":u(.19,1,.22,1),"ease-in-out-expo":u(1,0,0,1),"ease-in-circ":u(.6,.04,.98,.335),"ease-out-circ":u(.075,.82,.165,1),"ease-in-out-circ":u(.785,.135,.15,.86),spring:function(e,t,n){var r=h(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":function(e,t,n,r){return u(e,t,n,r)}}}}};t.exports=o},{"../define":41,"../is":77,"../util":94}],32:[function(e,t,n){"use strict";var r=e("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger()};r.eventAliasesOn(i),t.exports=i},{"../define":41}],33:[function(e,t,n){"use strict";var r={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};r.jpeg=r.jpg,t.exports=r},{}],34:[function(e,t,n){"use strict";var r=e("../window"),i=e("../util"),a=e("../collection"),o=e("../is"),s=e("../promise"),u=e("../define"),l=function(e){if(!(this instanceof l))return new l(e);var t=this;e=i.extend({},e);var n=e.container;n&&!o.htmlElement(n)&&o.htmlElement(n[0])&&(n=n[0]);var u=n?n._cyreg:null;u=u||{},u&&u.cy&&(u.cy.destroy(),u={});var c=u.readies=u.readies||[];n&&(n._cyreg=u),u.cy=t;var h=void 0!==r&&void 0!==n&&!e.headless,f=e;f.layout=i.extend({name:h?"grid":"null"},f.layout),f.renderer=i.extend({name:h?"canvas":"null"},f.renderer);var d=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},p=this._private={container:n,ready:!1,initrender:!1,options:f,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:a(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,f.zoomingEnabled),userZoomingEnabled:d(!0,f.userZoomingEnabled),panningEnabled:d(!0,f.panningEnabled),userPanningEnabled:d(!0,f.userPanningEnabled),boxSelectionEnabled:d(!0,f.boxSelectionEnabled),autolock:d(!1,f.autolock,f.autolockNodes),autoungrabify:d(!1,f.autoungrabify,f.autoungrabifyNodes),autounselectify:d(!1,f.autounselectify),styleEnabled:void 0===f.styleEnabled?h:f.styleEnabled,zoom:o.number(f.zoom)?f.zoom:1,pan:{x:o.plainObject(f.pan)&&o.number(f.pan.x)?f.pan.x:0,y:o.plainObject(f.pan)&&o.number(f.pan.y)?f.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},v=f.selectionType;void 0===v||"additive"!==v&&"single"!==v?p.selectionType="single":p.selectionType=v,o.number(f.minZoom)&&o.number(f.maxZoom)&&f.minZoom<f.maxZoom?(p.minZoom=f.minZoom,p.maxZoom=f.maxZoom):o.number(f.minZoom)&&void 0===f.maxZoom?p.minZoom=f.minZoom:o.number(f.maxZoom)&&void 0===f.minZoom&&(p.maxZoom=f.maxZoom);var g=function(e){for(var t=!1,n=0;n<y.length;n++){var r=y[n];if(o.promise(r)){t=!0;break}}return t?s.all(y).then(e):void e(y)};t.initRenderer(i.extend({hideEdgesOnViewport:f.hideEdgesOnViewport,hideLabelsOnViewport:f.hideLabelsOnViewport,textureOnViewport:f.textureOnViewport,wheelSensitivity:o.number(f.wheelSensitivity)&&f.wheelSensitivity>0?f.wheelSensitivity:1,motionBlur:void 0===f.motionBlur?!0:f.motionBlur,motionBlurOpacity:void 0===f.motionBlurOpacity?.05:f.motionBlurOpacity,pixelRatio:o.number(f.pixelRatio)&&f.pixelRatio>0?f.pixelRatio:"auto"===f.pixelRatio?void 0:1,desktopTapThreshold:void 0===f.desktopTapThreshold?4:f.desktopTapThreshold,touchTapThreshold:void 0===f.touchTapThreshold?8:f.touchTapThreshold},f.renderer));var y=[f.style,f.elements];g(function(e){var n=e[0],r=e[1];p.styleEnabled&&t.setStyle(n),f.initrender&&(t.on("initrender",f.initrender),t.on("initrender",function(){p.initrender=!0})),t.load(r,function(){t.startAnimationLoop(),p.ready=!0,o.fn(f.ready)&&t.on("ready",f.ready);for(var e=0;e<c.length;e++){var n=c[e];t.on("ready",n)}u&&(u.readies=[]),t.trigger("ready")},f.done)})},c=l.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(e){this.isReady()?this.trigger("ready",[],e):this.on("ready",e)},initrender:function(){return this._private.initrender},destroy:function(){var e=this;e.stopAnimationLoop(),e.notify({type:"destroy"});var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);return e},getElementById:function(e){var t=this._private.id2index[e];return void 0!==t?this._private.elements[t]:a(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,o=n[a],s=void 0!==o;s||(o=t.length,t.push(i),n[a]=o,i._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,o=n[a],s=void 0!==o;if(s){this._private.id2index[a]=void 0,t.splice(o,1);for(var u=o;u<t.length;u++){var l=t[u]._private.data.id;n[l]--,t[u]._private.index--}}}},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(e){var t=this,n=t._private;if(o.plainObject(e)){if(t.startBatch(),e.elements){var r={},a=function(e,n){for(var a=0;a<e.length;a++){var o=e[a],s=o.data.id,u=t.getElementById(s);r[s]=!0,0!==u.length?u.json(o):n?t.add(i.extend({group:n},o)):t.add(o)}};if(o.array(e.elements))a(e.elements);else for(var s=["nodes","edges"],u=0;u<s.length;u++){var l=s[u],c=e.elements[l];o.array(c)&&a(c,l)}t.elements().stdFilter(function(e){return!r[e.id()]}).remove()}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],u=0;u<h.length;u++){var f=h[u];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}if(void 0===e){var d={};return d.elements={},t.elements().each(function(e,t){var n=t.group();d.elements[n]||(d.elements[n]=[]),d.elements[n].push(t.json())}),this._private.styleEnabled&&(d.style=t.style().json()),d.zoomingEnabled=t._private.zoomingEnabled,d.userZoomingEnabled=t._private.userZoomingEnabled,d.zoom=t._private.zoom,d.minZoom=t._private.minZoom,d.maxZoom=t._private.maxZoom,d.panningEnabled=t._private.panningEnabled,d.userPanningEnabled=t._private.userPanningEnabled,d.pan=i.copy(t._private.pan),d.boxSelectionEnabled=t._private.boxSelectionEnabled,d.renderer=i.copy(t._private.options.renderer),d.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,d.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport,d.textureOnViewport=t._private.options.textureOnViewport,d.wheelSensitivity=t._private.options.wheelSensitivity,d.motionBlur=t._private.options.motionBlur,d}},scratch:u.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:u.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[e("./add-remove"),e("./animation"),e("./events"),e("./export"),e("./layout"),e("./notification"),e("./renderer"),e("./search"),e("./style"),e("./viewport")].forEach(function(e){i.extend(c,e)}),t.exports=l},{"../collection":23,"../define":41,"../is":77,"../promise":80,"../util":94,"../window":100,"./add-remove":30,"./animation":31,"./events":32,"./export":33,"./layout":35,"./notification":36,"./renderer":37,"./search":38,"./style":39,"./viewport":40}],35:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a={layout:function(e){var t=this._private.prevLayout=null==e?this._private.prevLayout:this.makeLayout(e);return t.run(),this},makeLayout:function(e){var t=this;if(null==e)return void r.error("Layout options must be specified to make a layout");if(null==e.name)return void r.error("A `name` must be specified to make a layout");var n=e.name,a=t.extension("layout",n);if(null==a)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var o;o=i.string(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var s=new a(r.extend({},e,{cy:t,eles:o}));return s}};a.createLayout=a.makeLayout,t.exports=a},{"../is":77,"../util":94}],36:[function(e,t,n){"use strict";var r={notify:function(e){var t=this._private;if(t.batchingNotify){var n=t.batchNotifyEles,r=t.batchNotifyTypes;return e.collection&&n.merge(e.collection),void(r.ids[e.type]||r.push(e.type))}if(t.notificationsEnabled){var i=this.renderer();i.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=this.collection(),e.batchNotifyEles=this.collection(),e.batchNotifyTypes=[],e.batchNotifyTypes.ids={}),e.batchCount++,this},endBatch:function(){var e=this._private;return e.batchCount--,0===e.batchCount&&(e.batchingStyle=!1,e.batchStyleEles.updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,collection:e.batchNotifyEles})),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){
for(var n in e){var r=e[n],i=t.getElementById(n);i.data(r)}})}};t.exports=r},{}],37:[function(e,t,n){"use strict";var r=e("../util"),i={renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(null==n)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name);var i=r.extend({},e,{cy:t}),a=t._private.renderer=new n(i);a.init(i)},triggerOnRender:function(){for(var e=this._private.onRenders,t=0;t<e.length;t++){var n=e[t];n()}return this},onRender:function(e){return this._private.onRenders.push(e),this},offRender:function(e){var t=this._private.onRenders;if(null==e)return this._private.onRenders=[],this;for(var n=0;n<t.length;n++){var r=t[n];if(e===r){t.splice(n,1);break}}return this}};i.invalidateDimensions=i.resize,t.exports=i},{"../util":94}],38:[function(e,t,n){"use strict";var r=e("../is"),i=e("../collection"),a={collection:function(e,t){return r.string(e)?this.$(e):r.elementOrCollection(e)?e.collection():r.array(e)?i(this,e,t):i(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(e){var t=new i(this,this._private.elements);return e?t.filter(e):t}};a.elements=a.filter=a.$,t.exports=a},{"../collection":23,"../is":77}],39:[function(e,t,n){"use strict";var r=e("../is"),i=e("../style"),a={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return r.stylesheet(e)?t.style=e.generateStyle(this):r.array(e)?t.style=i.fromJson(this,e):r.string(e)?t.style=i.fromString(this,e):t.style=i(this),t.style}};t.exports=a},{"../is":77,"../style":86}],40:[function(e,t,n){"use strict";var r=e("../is"),i={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=e?!0:!1,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=e?!0:!1,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var e,t,n,i,a,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(r.string(o[0]))return e=o[0],s[e];if(r.plainObject(o[0])){if(!this._private.panningEnabled)return this;n=o[0],i=n.x,a=n.y,r.number(i)&&(s.x=i),r.number(a)&&(s.y=a),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[0],t=o[1],"x"!==e&&"y"!==e||!r.number(t)||(s[e]=t),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e){var t,n,i,a,o,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:r.plainObject(s[0])&&(i=s[0],a=i.x,o=i.y,r.number(a)&&(u.x+=a),r.number(o)&&(u.y+=o),this.trigger("pan viewport"));break;case 2:t=s[0],n=s[1],"x"!==t&&"y"!==t||!r.number(n)||(u[t]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,t){if(r.number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(r.string(e)){var i=e;e=this.$(i)}else if(r.boundingBox(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(e)||(e=this.elements());n=n||e.boundingBox();var o,s=this.width(),u=this.height();if(t=r.number(t)?t:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){o=Math.min((s-2*t)/n.w,(u-2*t)/n.h),o=o>this._private.maxZoom?this._private.maxZoom:o,o=o<this._private.minZoom?this._private.minZoom:o;var l={x:(s-o*(n.x1+n.x2))/2,y:(u-o*(n.y1+n.y2))/2};return{zoom:o,pan:l}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(r.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(r.number(e)&&(this._private.maxZoom=e),this)},zoom:function(e){var t,n;if(void 0===e)return this._private.zoom;if(r.number(e))n=e;else if(r.plainObject(e)){if(n=e.level,e.position){var i=e.position,a=this._private.pan,o=this._private.zoom;t={x:i.x*o+a.x,y:i.y*o+a.y}}else e.renderedPosition&&(t=e.renderedPosition);if(t&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!r.number(n)||t&&(!r.number(t.x)||!r.number(t.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,t){var s=this._private.pan,u=this._private.zoom,l=n,c={x:-l/u*(t.x-s.x)+t.x,y:-l/u*(t.y-s.y)+t.y};this._private.zoom=n,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(r.number(e.zoom)||(n=!1),r.plainObject(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;r.number(l.x)&&(t.pan.x=l.x,s=!1),r.number(l.y)&&(t.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.trigger(a.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(r.string(e)){var n=e;e=this.elements(n)}else r.elementOrCollection(e)||(e=this.elements());var i=e.boundingBox(),a=this.width(),o=this.height();t=void 0===t?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};i.centre=i.center,i.autolockNodes=i.autolock,i.autoungrabifyNodes=i.autoungrabify,t.exports=i},{"../is":77}],41:[function(e,t,n){"use strict";var r=e("./util"),i=e("./is"),a=e("./selector"),o=e("./promise"),s=e("./event"),u=e("./animation"),l={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(e){},canSet:function(e){return!0}};return e=r.extend({},t,e),function(t,n){var r=e,a=this,o=void 0!==a.length,s=o?a:[a],u=o?a[0]:a;if(i.string(t)){if(r.allowGetting&&void 0===n){var l;return u&&(l=u._private[r.field][t]),l}if(r.allowSetting&&void 0!==n){var c=!r.immutableKeys[t];if(c){for(var h=0,f=s.length;f>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][t]=n);r.updateStyle&&a.updateStyle(),r.onSet(a),r.settingTriggersEvent&&a[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&i.plainObject(t)){var d,p,v=t;for(d in v){p=v[d];var c=!r.immutableKeys[d];if(c)for(var h=0,f=s.length;f>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][d]=p)}r.updateStyle&&a.updateStyle(),r.onSet(a),r.settingTriggersEvent&&a[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(t)){var g=t;a.bind(r.bindingEvent,g)}else if(r.allowGetting&&void 0===t){var l;return u&&(l=u._private[r.field]),l}return a}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=r.extend({},t,e),function(t){var n=e,r=this,a=void 0!==r.length,o=a?r:[r];if(i.string(t)){for(var s=t.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!i.emptyString(c)){var h=!n.immutableKeys[c];if(h)for(var f=0,d=o.length;d>f;f++)o[f]._private[n.field][c]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===t){for(var f=0,d=o.length;d>f;f++){var p=o[f]._private[n.field];for(var c in p){var v=!n.immutableKeys[c];v&&(p[c]=void 0)}}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(e){var t={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return e=r.extend({},t,e),function(t,n,r,o){var s=this,u=void 0!==s.length,c=u?s:[s],h=i.string(t),f=e;if(i.plainObject(n)?(o=r,r=n,n=void 0):(i.fn(n)||n===!1)&&(o=n,r=void 0,n=void 0),(i.fn(r)||r===!1)&&(o=r,r=void 0),!i.fn(o)&&o!==!1&&h)return s;if(h){var d={};d[t]=o,t=d}for(var p in t)if(o=t[p],o===!1&&(o=l.event.falseCallback),i.fn(o)){p=p.split(/\s+/);for(var v=0;v<p.length;v++){var g=p[v];if(!i.emptyString(g)){var y=g.match(l.event.regex);if(y)for(var m=y[1],b=y[2]?y[2]:void 0,w={callback:o,data:r,delegated:n?!0:!1,selector:n,selObj:new a(n),type:m,namespace:b,unbindSelfOnTrigger:f.unbindSelfOnTrigger,unbindAllBindersOnTrigger:f.unbindAllBindersOnTrigger,binders:c},x=0;x<c.length;x++){var _=c[x]._private;_.listeners=_.listeners||[],_.listeners.push(w)}}}}return s}},eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.removeListener=t.unlisten=t.unbind=t.off,t.emit=t.trigger,t.pon=t.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new o(function(e,t){var i=function(t){n.off.apply(n,o),e(t)},a=r.concat([i]),o=a.concat([]);n.on.apply(n,a)})}},off:function(e){var t={};return e=r.extend({},t,e),function(e,t,n){var r=this,a=void 0!==r.length,o=a?r:[r],s=i.string(e);if(0===arguments.length){for(var u=0;u<o.length;u++)o[u]._private.listeners=[];return r}if((i.fn(t)||t===!1)&&(n=t,t=void 0),s){var c={};c[e]=n,e=c}for(var h in e){n=e[h],n===!1&&(n=l.event.falseCallback),h=h.split(/\s+/);for(var f=0;f<h.length;f++){var d=h[f];if(!i.emptyString(d)){var p=d.match(l.event.optionalTypeRegex);if(p)for(var v=p[1]?p[1]:void 0,g=p[2]?p[2]:void 0,u=0;u<o.length;u++)for(var y=o[u]._private.listeners=o[u]._private.listeners||[],m=0;m<y.length;m++){var b=y[m],w=!g||g===b.namespace,x=!v||b.type===v,_=!n||n===b.callback,E=w&&x&&_;E&&(y.splice(m,1),m--)}}}}return r}},trigger:function(e){var t={};return e=r.extend({},t,e),function(t,n,r){var a=this,o=void 0!==a.length,u=o?a:[a],c=i.string(t),h=i.plainObject(t),f=i.event(t),d=this._private.cy||(i.core(this)?this:null),p=d?d.hasCompoundNodes():!1;if(c){var v=t.split(/\s+/);t=[];for(var g=0;g<v.length;g++){var y=v[g];if(!i.emptyString(y)){var m=y.match(l.event.regex),b=m[1],w=m[2]?m[2]:void 0;t.push({type:b,namespace:w})}}}else if(h){var x=t;t=[x]}n?i.array(n)||(n=[n]):n=[];for(var g=0;g<t.length;g++)for(var _=t[g],E=0;E<u.length;E++){var y,S=u[E],T=S._private.listeners=S._private.listeners||[],k=i.element(S),P=k||e.layout;if(f?(y=_,y.cyTarget=y.cyTarget||S,y.cy=y.cy||d):y=new s(_,{cyTarget:S,cy:d,namespace:_.namespace}),_.layout&&(y.layout=_.layout),e.layout&&(y.layout=S),y.cyPosition){var O=y.cyPosition,C=d.zoom(),R=d.pan();y.cyRenderedPosition={x:O.x*C+R.x,y:O.y*C+R.y}}r&&(T=[{namespace:y.namespace,type:y.type,callback:r}]);for(var N=0;N<T.length;N++){var I=T[N],D=!I.namespace||I.namespace===y.namespace,A=I.type===y.type,L=I.delegated?S!==y.cyTarget&&i.element(y.cyTarget)&&I.selObj.matches(y.cyTarget):!0,M=D&&A&&L;if(M){var B=[y];if(B=B.concat(n),I.data?y.data=I.data:y.data=void 0,(I.unbindSelfOnTrigger||I.unbindAllBindersOnTrigger)&&(T.splice(N,1),N--),I.unbindAllBindersOnTrigger)for(var j=I.binders,q=0;q<j.length;q++){var z=j[q];if(z&&z!==S)for(var F=z._private.listeners,V=0;V<F.length;V++){var U=F[V];U===I&&(F.splice(V,1),V--)}}var Y=I.delegated?y.cyTarget:S,X=I.callback.apply(Y,B);(X===!1||y.isPropagationStopped())&&(P=!1,X===!1&&(y.stopPropagation(),y.preventDefault()))}}if(P){var H=p?S._private.parent:null,$=null!=H&&0!==H.length;$?(H=H[0],H.trigger(y)):d.trigger(y)}}return a}},animated:function(e){var t={};return e=r.extend({},t,e),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(e){var t={};return e=r.extend({},t,e),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var a=n[i];a._private.animation.queue=[]}return this}},delay:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,i=void 0!==n.length,a=i?n:[n],o=this._private.cy||this,s=!i,l=!s;if(!o.styleEnabled())return this;var c=o.style();switch(e=r.extend({},e,t),void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}var h=!0;if(e)for(var f in e){h=!1;break}if(h)return new u(a[0],e);if(l&&(e.style=c.getPropsList(e.style||e.css),e.css=void 0),e.renderedPosition&&l){var d=e.renderedPosition,p=o.pan(),v=o.zoom();e.position={x:(d.x-p.x)/v,y:(d.y-p.y)/v}}if(e.panBy&&s){var g=e.panBy,y=o.pan();e.pan={x:y.x+g.x,y:y.y+g.y}}var m=e.center||e.centre;if(m&&s){var b=o.getCenterPan(m.eles,e.zoom);b&&(e.pan=b)}if(e.fit&&s){var w=e.fit,x=o.getFitViewport(w.eles||w.boundingBox,w.padding);x&&(e.pan=x.pan,e.zoom=x.zoom)}return new u(a[0],e)}},animate:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,i=void 0!==n.length,a=i?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;t&&(e=r.extend({},e,t));for(var s=0;s<a.length;s++){var u=a[s],l=u.animated()&&(void 0===e.queue||e.queue),c=u.animation(e,l?{queue:!0}:void 0);c.play()}return this}},stop:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){for(var s=i[o],u=s._private,l=u.animation.current,c=0;c<l.length;c++){var h=l[c],f=h._private;t&&(f.duration=0)}e&&(u.animation.queue=[]),t||(u.animation.current=[])}return a.notify({collection:this,type:"draw"}),this}}};t.exports=l},{"./animation":1,"./event":42,"./is":77,"./promise":80,"./selector":81,"./util":94}],42:[function(e,t,n){"use strict";function r(){return!1}function i(){return!0}var a=function(e,t){return this instanceof a?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?i:r):this.type=e,t&&(this.type=void 0!==t.type?t.type:this.type,this.cy=t.cy,this.cyTarget=t.cyTarget,this.cyPosition=t.cyPosition,this.cyRenderedPosition=t.cyRenderedPosition,this.namespace=t.namespace,this.layout=t.layout,this.data=t.data,this.message=t.message),void(this.timeStamp=e&&e.timeStamp||Date.now())):new a(e,t)};a.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=i;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},t.exports=a},{}],43:[function(e,t,n){"use strict";function r(e,t,n){var r=n;if("core"===e)c.prototype[t]=n;else if("collection"===e)l.prototype[t]=n;else if("layout"===e){for(var a=function(e){this.options=e,n.call(this,e),f.plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[]},o=a.prototype=Object.create(n.prototype),h=[],p=0;p<h.length;p++){var v=h[p];o[v]=o[v]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this}),o.stop||(o.stop=function(){var e=this.options;if(e&&e.animate)for(var t=this.animations,n=0;n<t.length;n++)t[n].stop();return this.trigger("layoutstop"),this}),o.destroy||(o.destroy=function(){return this}),o.on=u.on({layout:!0}),o.one=u.on({layout:!0,unbindSelfOnTrigger:!0}),o.once=u.on({layout:!0,unbindAllBindersOnTrigger:!0}),o.off=u.off({layout:!0}),o.trigger=u.trigger({layout:!0}),u.eventAliasesOn(o),r=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var g=i("renderer","base").prototype,y=n.prototype;for(var m in g){var b=g[m],w=null!=y[m];if(w)return void s.error("Can not register renderer `"+t+"` since it overrides `"+m+"` in its prototype");y[m]=b}g.clientFunctions.forEach(function(e){y[e]=y[e]||function(){s.error("Renderer does not implement `renderer."+e+"()` on its prototype")}})}return s.setMap({map:d,keys:[e,t],value:r})}function i(e,t){return s.getMap({map:d,keys:[e,t]})}function a(e,t,n,r,i){return s.setMap({map:p,keys:[e,t,n,r],value:i})}function o(e,t,n,r){return s.getMap({map:p,keys:[e,t,n,r]})}var s=e("./util"),u=e("./define"),l=e("./collection"),c=e("./core"),h=e("./extensions"),f=e("./is"),d={},p={},v=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?o.apply(null,arguments):5===arguments.length?a.apply(null,arguments):void s.error("Invalid extension access syntax")};c.prototype.extension=v,h.forEach(function(e){e.extensions.forEach(function(t){r(e.type,t.name,t.impl)})}),t.exports=v},{"./collection":23,"./core":34,"./define":41,"./extensions":44,"./is":77,"./util":94}],44:[function(e,t,n){"use strict";t.exports=[{type:"layout",extensions:e("./layout")},{type:"renderer",extensions:e("./renderer")}]},{"./layout":50,"./renderer":72}],45:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=e("../../util"),a=e("../../math"),o=e("../../is"),s={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e,t=this.options,n=t,r=t.cy,i=n.eles,s=i.nodes().not(":parent"),u=i,l=a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.elementOrCollection(n.roots))e=n.roots;else if(o.array(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var f=n.roots[h],d=r.getElementById(f);c.push(d)}e=r.collection(c)}else if(o.string(n.roots))e=r.$(n.roots);else if(n.directed)e=s.roots();else{for(var p=[],v=s;v.length>0;){var g=r.collection();i.bfs({roots:v[0],visit:function(e,t,n,r,i){g=g.add(n)},directed:!1}),v=v.not(g),p.push(g)}e=r.collection();for(var h=0;h<p.length;h++){var y=p[h],m=y.maxDegree(!1),b=y.filter(function(){return this.degree(!1)===m});e=e.add(b)}}var w=[],x={},_={},E={},S={},T={};u.bfs({roots:e,directed:n.directed,visit:function(e,t,n,r,i){var a=this[0],o=a.id();if(w[t]||(w[t]=[]),w[t].push(a),x[o]=!0,_[o]=t,E[o]=i,S[o]=r,i){var s=i.id(),u=T[s]=T[s]||[];u.push(n)}}});for(var k=[],h=0;h<s.length;h++){var d=s[h];x[d.id()]||k.push(d)}for(var P=3*k.length,O=0;0!==k.length&&P>O;){for(var C=k.shift(),R=C.neighborhood().nodes(),N=!1,h=0;h<R.length;h++){var I=_[R[h].id()];if(void 0!==I){w[I].push(C),N=!0;break}}N||k.push(C),O++}for(;0!==k.length;){var C=k.shift(),N=!1;N||(0===w.length&&w.push([]),w[0].push(C))}var D=function(){for(var e=0;e<w.length;e++)for(var t=w[e],n=0;n<t.length;n++){var r=t[n];r._private.scratch.breadthfirst={depth:e,index:n}}};D();for(var A=function(e){for(var t,n=e.connectedEdges(function(){return this.data("target")===e.id()}),r=e._private.scratch.breadthfirst,i=0,a=0;a<n.length;a++){var o=n[a],s=o.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,t=s)}return t},L=0;L<n.maximalAdjustments;L++){for(var M=w.length,B=[],h=0;M>h;h++)for(var I=w[h],j=I.length,q=0;j>q;q++){var d=I[q],z=d._private.scratch.breadthfirst,F=A(d);F&&(z.intEle=F,B.push(d))}for(var h=0;h<B.length;h++){var d=B[h],z=d._private.scratch.breadthfirst,F=z.intEle,V=F._private.scratch.breadthfirst;w[z.depth].splice(z.index,1);for(var U=V.depth+1;U>w.length-1;)w.push([]);w[U].push(d),z.depth=U,z.index=w[U].length-1}D()}var Y=0;if(n.avoidOverlap){for(var h=0;h<s.length;h++){var X=s[h],H=X.boundingBox(),$=H.w,W=H.h;Y=Math.max(Y,$,W)}Y*=n.spacingFactor}for(var G={},K=function(e){if(G[e.id()])return G[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes().not(":parent"),r=0,i=0,a=0;a<n.length;a++){var o=n[a],s=o._private.scratch.breadthfirst,u=s.index,l=s.depth,c=w[l].length;(t>l||0===t)&&(r+=u/c,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),G[e.id()]=r,r},Z=function(e,t){var n=K(e),r=K(t);return n-r},J=0;3>J;J++){for(var h=0;h<w.length;h++)w[h]=w[h].sort(Z);D()}for(var Q=0,h=0;h<w.length;h++)Q=Math.max(w[h].length,Q);for(var ee={x:l.x1+l.w/2,y:l.x1+l.h/2},te=function(e,t){var r=e._private.scratch.breadthfirst,i=r.depth,a=r.index,o=w[i].length,s=Math.max(l.w/(o+1),Y),u=Math.max(l.h/(w.length+1),Y),c=Math.min(l.w/2/w.length,l.h/2/w.length);if(c=Math.max(c,Y),n.circle){if(n.circle){var h=c*i+c-(w.length>0&&w[0].length<=3?c/2:0),f=2*Math.PI/w[i].length*a;return 0===i&&1===w[0].length&&(h=1),{x:ee.x+h*Math.cos(f),y:ee.y+h*Math.sin(f)}}return{x:ee.x+(a+1-(o+1)/2)*s,y:(i+1)*u}}var d={x:ee.x+(a+1-(o+1)/2)*s,y:(i+1)*u};return t?d:d},ne={},h=w.length-1;h>=0;h--)for(var I=w[h],q=0;q<I.length;q++){var C=I[q];ne[C.id()]=te(C,h===w.length-1)}return s.layoutPositions(this,n,function(){return ne[this.id()]}),this},t.exports=r},{"../../is":77,"../../math":79,"../../util":94}],46:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=e("../../util"),a=e("../../math"),o=e("../../is"),s={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,s=r.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var u,l=a.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:l.x1+l.w/2,y:l.y1+l.h/2},h=void 0===t.sweep?2*Math.PI-2*Math.PI/s.length:t.sweep,f=h/Math.max(1,s.length-1),d=0,p=0;p<s.length;p++){var v=s[p],g=v.boundingBox(),y=g.w,m=g.h;d=Math.max(d,y,m)}if(u=o.number(t.radius)?t.radius:s.length<=1?0:Math.min(l.h,l.w)/2-d,s.length>1&&t.avoidOverlap){d*=1.75;var b=Math.cos(f)-Math.cos(0),w=Math.sin(f)-Math.sin(0),x=Math.sqrt(d*d/(b*b+w*w));u=Math.max(x,u)}var _=function(e,n){var r=t.startAngle+e*f*(i?1:-1),a=u*Math.cos(r),o=u*Math.sin(r),s={x:c.x+a,y:c.y+o};return s};return s.layoutPositions(this,t,_),this},t.exports=r},{"../../is":77,"../../math":79,"../../util":94}],47:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=e("../../util"),a=e("../../math"),o={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,o=i.nodes().not(":parent"),s=a.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],c=t.startAngle,h=0,f=0;f<o.length;f++){var d,p=o[f];d=t.concentric.apply(p,[p]),l.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var f=0;f<o.length;f++){var p=o[f],v=p.boundingBox();h=Math.max(h,v.w,v.h)}l.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(o),y=[[]],m=y[0],f=0;f<l.length;f++){var b=l[f];if(m.length>0){var w=Math.abs(m[0].value-b.value);w>=g&&(m=[],y.push(m))}m.push(b)}var x=h+t.minNodeSpacing;if(!t.avoidOverlap){var _=y.length>0&&y[0].length>1,E=Math.min(s.w,s.h)/2-x,S=E/(y.length+_?1:0);x=Math.min(x,S)}for(var T=0,f=0;f<y.length;f++){var k=y[f],P=void 0===t.sweep?2*Math.PI-2*Math.PI/k.length:t.sweep,O=k.dTheta=P/Math.max(1,k.length-1);if(k.length>1&&t.avoidOverlap){var C=Math.cos(O)-Math.cos(0),R=Math.sin(O)-Math.sin(0),N=Math.sqrt(x*x/(C*C+R*R));T=Math.max(N,T)}k.r=T,T+=x}if(t.equidistant){for(var I=0,T=0,f=0;f<y.length;f++){var k=y[f],D=k.r-T;I=Math.max(I,D)}T=0;for(var f=0;f<y.length;f++){var k=y[f];0===f&&(T=k.r),k.r=T,T+=I}}for(var A={},f=0;f<y.length;f++)for(var k=y[f],O=k.dTheta,T=k.r,L=0;L<k.length;L++){var b=k[L],c=t.startAngle+(n?1:-1)*O*L,M={x:u.x+T*Math.cos(c),y:u.y+T*Math.sin(c)};A[b.node.id()]=M}return o.layoutPositions(this,t,function(){var e=this.id();return A[e]}),this},t.exports=r},{"../../math":79,"../../util":94}],48:[function(e,t,n){"use strict";function r(e){this.options=a.extend({},l,e),this.options.layout=this}var i,a=e("../../util"),o=e("../../math"),s=e("../../thread"),u=e("../../is"),l={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,componentSpacing:100,nodeRepulsion:function(e){return 4e5},nodeOverlap:10,idealEdgeLength:function(e){return 10},edgeElasticity:function(e){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};r.prototype.run=function(){var e=this.options,t=e.cy,n=this,r=this.thread;(!r||r.stopped())&&(r=this.thread=s({disabled:!e.useMultitasking})),n.stopped=!1,n.trigger({type:"layoutstart",layout:n}),i=!0===e.debug?!0:!1;var o=c(t,n,e);i&&d(o),p(o,t);var u=Date.now(),l=!1,h=function(n){n=n||{},l||!n.force&&Date.now()-u<e.animationThreshold||(l=!0,a.requestAnimationFrame(function(){v(o,t,e),!0===e.fit&&t.fit(e.padding),l=!1}))};r.on("message",function(e){var t=e.message;o.layoutNodes=t,h()}),r.pass({layoutInfo:o,options:{animate:e.animate,refresh:e.refresh,componentSpacing:e.componentSpacing,nodeOverlap:e.nodeOverlap,nestingFactor:e.nestingFactor,gravity:e.gravity,numIter:e.numIter,initialTemp:e.initialTemp,coolingFactor:e.coolingFactor,minTemp:e.minTemp}}).run(function(e){var t,n=e.layoutInfo,r=e.options,i=!1,a=function(e,t,n){o(e,t),c(e,t),h(e,t),f(e,t),d(e,t)},o=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,a=0;i>a;a++)for(var o=e.layoutNodes[e.idToIndex[r[a]]],u=a+1;i>u;u++){var l=e.layoutNodes[e.idToIndex[r[u]]];s(o,l,e,t)}},s=function(e,t,n,r){var i=e.cmptId,a=t.cmptId;if(i===a||n.isCompound){var o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(0!==o||0!==s){var c=u(e,t,o,s);if(c>0)var h=r.nodeOverlap*c,f=Math.sqrt(o*o+s*s),d=h*o/f,p=h*s/f;else var v=l(e,o,s),g=l(t,-1*o,-1*s),y=g.x-v.x,m=g.y-v.y,b=y*y+m*m,f=Math.sqrt(b),h=(e.nodeRepulsion+t.nodeRepulsion)/b,d=h*y/f,p=h*m/f;e.isLocked||(e.offsetX-=d,e.offsetY-=p),t.isLocked||(t.offsetX+=d,t.offsetY+=p)}}},u=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},l=function(e,t,n){var r=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=n/t,u=a/o,l={};do{if(0===t&&n>0){l.x=r,l.y=i+a/2;break}if(0===t&&0>n){l.x=r,l.y=i+a/2;break}if(t>0&&s>=-1*u&&u>=s){l.x=r+o/2,l.y=i+o*n/2/t;break}if(0>t&&s>=-1*u&&u>=s){l.x=r-o/2,l.y=i-o*n/2/t;break}if(n>0&&(-1*u>=s||s>=u)){l.x=r+a*t/2/n,l.y=i+a/2;break}if(0>n&&(-1*u>=s||s>=u)){l.x=r-a*t/2/n,l.y=i-a/2;break}}while(!1);return l},c=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],a=e.layoutNodes[i],o=e.idToIndex[r.targetId],s=e.layoutNodes[o],u=s.positionX-a.positionX,c=s.positionY-a.positionY;if(0===u&&0===c)return;var h=l(a,u,c),f=l(s,-1*u,-1*c),d=f.x-h.x,p=f.y-h.y,v=Math.sqrt(d*d+p*p),g=Math.pow(r.idealLength-v,2)/r.elasticity;if(0!==v)var y=g*d/v,m=g*p/v;else var y=0,m=0;a.isLocked||(a.offsetX+=y,a.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}},h=function(e,t){for(var n=1,r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],a=i.length;if(0===r)var o=e.clientHeight/2,s=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[u.parentId]],o=l.positionX,s=l.positionY;for(var c=0;a>c;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var f=o-h.positionX,d=s-h.positionY,p=Math.sqrt(f*f+d*d);if(p>n){var v=t.gravity*f/p,g=t.gravity*d/p;h.offsetX+=v,h.offsetY+=g}}}}},f=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;i>=r;){var a=n[r++],o=e.idToIndex[a],s=e.layoutNodes[o],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var f=e.layoutNodes[e.idToIndex[u[h]]];f.offsetX+=l,f.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},d=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=p(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,v(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},p=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},v=function(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?v(r,t):void 0}},g=function(e,t){for(var r=n.layoutNodes,i=[],a=0;a<r.length;a++){var o=r[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var h=0;h<c.length;h++){var f=c[h];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}i.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var d=0,p=0,v=0,g=0,y=Math.sqrt(l)*n.clientWidth/n.clientHeight,a=0;a<i.length;a++){for(var c=i[a],h=0;h<c.length;h++){var f=c[h];f.isLocked||(f.positionX+=d,f.positionY+=p)}d+=c.w+t.componentSpacing,v+=c.w+t.componentSpacing,g=Math.max(g,c.h),v>y&&(p+=g+t.componentSpacing,d=0,v=0,g=0)}},y=function(e){
return i?!1:(a(n,r,e),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp?!1:!0)},m=0;do{for(var b=0;b<r.refresh&&m<r.numIter;){var t=y(m);if(!t)break;b++,m++}r.animate&&broadcast(n.layoutNodes)}while(t&&m+1<r.numIter);return g(n,r),n}).then(function(e){o.layoutNodes=e.layoutNodes,r.stop(),f()});var f=function(){h({force:!0}),n.one("layoutstop",e.stop),n.trigger({type:"layoutstop",layout:n})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},c=0;c<s.length;c++)for(var f=s[c],d=0;d<f.length;d++){var p=f[d];l[p.id()]=c}for(var c=0;c<a.nodeSize;c++){var v=i[c],g=v.boundingBox(),y={};y.isLocked=v.locked(),y.id=v.data("id"),y.parentId=v.data("parent"),y.cmptId=l[v.id()],y.children=[],y.positionX=v.position("x"),y.positionY=v.position("y"),y.offsetX=0,y.offsetY=0,y.height=g.w,y.width=g.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(v.style("padding-left")),y.padRight=parseFloat(v.style("padding-right")),y.padTop=parseFloat(v.style("padding-top")),y.padBottom=parseFloat(v.style("padding-bottom")),y.nodeRepulsion=u.fn(n.nodeRepulsion)?n.nodeRepulsion.call(v,v):n.nodeRepulsion,a.layoutNodes.push(y),a.idToIndex[y.id]=c}for(var m=[],b=0,w=-1,x=[],c=0;c<a.nodeSize;c++){var v=a.layoutNodes[c],_=v.parentId;null!=_?a.layoutNodes[a.idToIndex[_]].children.push(v.id):(m[++w]=v.id,x.push(v.id))}for(a.graphSet.push(x);w>=b;){var E=m[b++],S=a.idToIndex[E],p=a.layoutNodes[S],T=p.children;if(T.length>0){a.graphSet.push(T);for(var c=0;c<T.length;c++)m[++w]=T[c]}}for(var c=0;c<a.graphSet.length;c++)for(var k=a.graphSet[c],d=0;d<k.length;d++){var P=a.idToIndex[k[d]];a.indexToGraph[P]=c}for(var c=0;c<a.edgeSize;c++){var O=r[c],C={};C.id=O.data("id"),C.sourceId=O.data("source"),C.targetId=O.data("target");var R=u.fn(n.idealEdgeLength)?n.idealEdgeLength.call(O,O):n.idealEdgeLength,N=u.fn(n.edgeElasticity)?n.edgeElasticity.call(O,O):n.edgeElasticity,I=a.idToIndex[C.sourceId],D=a.idToIndex[C.targetId],A=a.indexToGraph[I],L=a.indexToGraph[D];if(A!=L){for(var M=h(C.sourceId,C.targetId,a),B=a.graphSet[M],j=0,y=a.layoutNodes[I];-1===B.indexOf(y.id);)y=a.layoutNodes[a.idToIndex[y.parentId]],j++;for(y=a.layoutNodes[D];-1===B.indexOf(y.id);)y=a.layoutNodes[a.idToIndex[y.parentId]],j++;R*=j*n.nestingFactor}C.idealLength=R,C.elasticity=N,a.layoutEdges.push(C)}return a},h=function(e,t,n){var r=f(e,t,0,n);return 2>r.count?0:r.graph},f=function(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var a=0,o=0;o<i.length;o++){var s=i[o],u=r.idToIndex[s],l=r.layoutNodes[u].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],h=f(e,t,c,r);if(0!==h.count){if(1!==h.count)return h;if(a++,2===a)break}}}return{count:a,graph:n}},d=function(e){if(i){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],r="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var a=e.graphSet,t=0;t<a.length;t++)console.debug("Set : "+t+": "+a[t].toString());for(var r="IndexToGraph",t=0;t<e.indexToGraph.length;t++)r+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(r),r="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];r+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(r),r="nodeSize: "+e.nodeSize,r+="\nedgeSize: "+e.edgeSize,r+="\ntemperature: "+e.temperature,console.debug(r)}},p=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},v=function(e,t,n){var r=n.layout,i=n.eles.nodes(),a=e.boundingBox,o={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];o.x1=Math.min(o.x1,n.positionX),o.x2=Math.max(o.x2,n.positionX),o.y1=Math.min(o.y1,n.positionY),o.y2=Math.max(o.y2,n.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-o.x1)/o.w,u=(i.positionY-o.y1)/o.h;return{x:a.x1+s*a.w,y:a.y1+u*a.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))};t.exports=r},{"../../is":77,"../../math":79,"../../thread":92,"../../util":94}],49:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=e("../../util"),a=e("../../math"),o={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var o=a.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)i.layoutPositions(this,t,function(){return{x:o.x1,y:o.y1}});else{var s=i.size(),u=Math.sqrt(s*o.h/o.w),l=Math.round(u),c=Math.round(o.w/o.h*u),h=function(e){if(null==e)return Math.min(l,c);var t=Math.min(l,c);t==l?l=e:c=e},f=function(e){if(null==e)return Math.max(l,c);var t=Math.max(l,c);t==l?l=e:c=e},d=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=d&&null!=p)l=d,c=p;else if(null!=d&&null==p)l=d,c=Math.ceil(s/l);else if(null==d&&null!=p)c=p,l=Math.ceil(s/c);else if(c*l>s){var v=h(),g=f();(v-1)*g>=s?h(v-1):(g-1)*v>=s&&f(g-1)}else for(;s>c*l;){var v=h(),g=f();(g+1)*v>=s?f(g+1):h(v+1)}var y=o.w/c,m=o.h/l;if(t.condense&&(y=0,m=0),t.avoidOverlap)for(var b=0;b<i.length;b++){var w=i[b],x=w._private.position;(null==x.x||null==x.y)&&(x.x=0,x.y=0);var _=w.boundingBox(),E=t.avoidOverlapPadding,S=_.w+E,T=_.h+E;y=Math.max(y,S),m=Math.max(m,T)}for(var k={},P=function(e,t){return k["c-"+e+"-"+t]?!0:!1},O=function(e,t){k["c-"+e+"-"+t]=!0},C=0,R=0,N=function(){R++,R>=c&&(R=0,C++)},I={},b=0;b<i.length;b++){var w=i[b],D=t.position(w);if(D&&(void 0!==D.row||void 0!==D.col)){var x={row:D.row,col:D.col};if(void 0===x.col)for(x.col=0;P(x.row,x.col);)x.col++;else if(void 0===x.row)for(x.row=0;P(x.row,x.col);)x.row++;I[w.id()]=x,O(x.row,x.col)}}var A=function(e,t){var n,r;if(t.locked()||t.isFullAutoParent())return!1;var i=I[t.id()];if(i)n=i.col*y+y/2+o.x1,r=i.row*m+m/2+o.y1;else{for(;P(C,R);)N();n=R*y+y/2+o.x1,r=C*m+m/2+o.y1,O(C,R),N()}return{x:n,y:r}};i.layoutPositions(this,t,A)}return this},t.exports=r},{"../../math":79,"../../util":94}],50:[function(e,t,n){"use strict";t.exports=[{name:"breadthfirst",impl:e("./breadthfirst")},{name:"circle",impl:e("./circle")},{name:"concentric",impl:e("./concentric")},{name:"cose",impl:e("./cose")},{name:"grid",impl:e("./grid")},{name:"null",impl:e("./null")},{name:"preset",impl:e("./preset")},{name:"random",impl:e("./random")}]},{"./breadthfirst":45,"./circle":46,"./concentric":47,"./cose":48,"./grid":49,"./null":51,"./preset":52,"./random":53}],51:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=e("../../util"),a={ready:function(){},stop:function(){}};r.prototype.run=function(){var e=this.options,t=e.eles,n=this;e.cy;return n.trigger("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.trigger("layoutready"),n.one("layoutstop",e.stop),n.trigger("layoutstop"),this},r.prototype.stop=function(){return this},t.exports=r},{"../../util":94}],52:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=e("../../util"),a=e("../../is"),o={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){function e(e){if(null==t.positions)return null;if(i)return t.positions.apply(e,[e]);var n=t.positions[e._private.data.id];return null==n?null:n}var t=this.options,n=t.eles,r=n.nodes(),i=a.fn(t.positions);return r.layoutPositions(this,t,function(t,n){var r=e(n);return n.locked()||null==r?!1:r}),this},t.exports=r},{"../../is":77,"../../util":94}],53:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=e("../../util"),a=e("../../math"),o={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent"),i=a.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o=function(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,e,o),this},t.exports=r},{"../../math":79,"../../util":94}],54:[function(e,t,n){"use strict";var r=e("../../../math"),i=e("../../../is"),a=e("../../../util"),o={};o.arrowShapeHeight=.3,o.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,a){var o=i.x-n/2-a,s=i.x+n/2+a,u=i.y-n/2-a,l=i.y+n/2+a,c=e>=o&&s>=e&&t>=u&&l>=t;return c},o=function(e,t,n,r,i){var a=e*Math.cos(r)-t*Math.sin(r),o=e*Math.sin(r)+t*Math.cos(r),s=a*n,u=o*n,l=s+i.x,c=u+i.y;return{x:l,y:c}},s=function(e,t,n,r){for(var i=[],a=0;a<e.length;a+=2){var s=e[a],u=e[a+1];i.push(o(s,u,t,n,r))}return i},u=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},l=function(o,l){i.string(l)&&(l=e[l]),e[o]=a.extend({name:o,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,i,a,o){var l=u(s(this.points,n+2*o,i,a)),c=r.pointInsidePolygonPoints(e,t,l);return c},roughCollide:n,draw:function(e,n,r,i){var a=s(this.points,n,r,i);t.arrowShapeImpl("polygon")(e,a)},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.pfValue}},l)};l("none",{collide:a.falsify,roughCollide:a.falsify,draw:a.noop,spacing:a.zeroify,gap:a.zeroify}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,r,i){var a=s(this.points,n,r,i),u=this.controlPoint,l=o(u[0],u[1],n,r,i);t.arrowShapeImpl(this.name)(e,a,l)},gap:function(e){return e._private.style.width.pfValue}}),l("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,i,a,o){var l=u(s(this.points,n+2*o,i,a)),c=u(s(this.pointsTee,n+2*o,i,a)),h=r.pointInsidePolygonPoints(e,t,l)||r.pointInsidePolygonPoints(e,t,c);return h},draw:function(e,n,r,i){var a=s(this.points,n,r,i),o=s(this.pointsTee,n,r,i);t.arrowShapeImpl(this.name)(e,a,o)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return e._private.style.width.pfValue}}),l("half-triangle-overshot",{points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0}),l("circle",{radius:.15,collide:function(e,t,n,r,i,a){var o=i,s=Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((n+2*a)*this.radius,2);return s},draw:function(e,n,r,i){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e._private.style.width.pfValue)*this.radius}}),l("inhibitor",{points:[-.25,0,-.25,-.1,.25,-.1,.25,0],spacing:function(e){return 1},gap:function(e){return 1}}),l("tee","inhibitor"),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e._private.style.width.pfValue}})},t.exports=o},{"../../../is":77,"../../../math":79,"../../../util":94}],55:[function(e,t,n){"use strict";var r={},i=function(e){e.eleEache=null},a=function(e){return e.eleEache||(e.eleEache={nodes:e.cy.nodes(),edges:e.cy.edges()}),e.eleEache};r.getCachedElements=function(){return a(this)},r.getCachedNodes=function(){return a(this).nodes},r.getCachedEdges=function(){return a(this).edges},r.updateElementsCache=function(){var e=this;return i(e),a(e)},t.exports=r},{}],56:[function(e,t,n){"use strict";function r(e,t){var n=function(e,t,n,r){return i.qbezierAt(e,t,n,r)},r=e._private,a=r.rstyle.bezierPts;a.push({x:n(t[0],t[2],t[4],.05),y:n(t[1],t[3],t[5],.05)}),a.push({x:n(t[0],t[2],t[4],.25),y:n(t[1],t[3],t[5],.25)}),a.push({x:n(t[0],t[2],t[4],.4),y:n(t[1],t[3],t[5],.4)}),a.push({x:n(t[0],t[2],t[4],.5),y:n(t[1],t[3],t[5],.5)}),a.push({x:n(t[0],t[2],t[4],.6),y:n(t[1],t[3],t[5],.6)}),a.push({x:n(t[0],t[2],t[4],.75),y:n(t[1],t[3],t[5],.75)}),a.push({x:n(t[0],t[2],t[4],.95),y:n(t[1],t[3],t[5],.95)})}var i=e("../../../math"),a=e("../../../is"),o=e("../../../collection/zsort"),s={};s.projectIntoViewport=function(e,t){var n=this.findContainerClientCoords(),r=n[0],i=n[1],a=e-r,o=t-i;return a-=this.cy.pan().x,o-=this.cy.pan().y,a/=this.cy.zoom(),o/=this.cy.zoom(),[a,o]},s.findContainerClientCoords=function(){var e=this.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},s.invalidateContainerClientCoordsCache=function(){this.containerBB=null},s.findNearestElement=function(e,t,n,r){function a(r){var i=r._private;if("no"!==i.style.events.strValue){var a=r.outerWidth()+2*v,o=r.outerHeight()+2*v,s=a/2,c=o/2,f=i.position;if(f.x-s<=e&&e<=f.x+s&&f.y-c<=t&&t<=f.y+c){var d=!n||r.visible()&&!r.transparent();if(n&&!d)return;var p=l.nodeShapes[u.getNodeShape(r)];p.checkPoint(e,t,0,a,o,f.x,f.y)&&h.push(r)}}}function o(r){var o=r._private;if("no"!==o.style.events.strValue){var s,c,f=o.rscratch,v=o.style,g=v.width.pfValue/2+p,y=g*g,m=2*g,b=o.source,w=o.target,x=!1,_=function(){if(void 0!==c)return c;if(!n)return c=!0,!0;var e=r.visible()&&!r.transparent();return e?(c=!0,!0):(c=!1,!1)};if("segments"===f.edgeType||"straight"===f.edgeType||"haystack"===f.edgeType)for(var E=f.allpts,S=0;S+3<E.length;S+=2)(x=i.inLineVicinity(e,t,E[S],E[S+1],E[S+2],E[S+3],m))&&_()&&y>(s=i.sqDistanceToFiniteLine(e,t,E[S],E[S+1],E[S+2],E[S+3]))&&h.push(r);else if("bezier"===f.edgeType||"multibezier"===f.edgeType||"self"===f.edgeType||"compound"===f.edgeType)for(var E=f.allpts,S=0;S+5<f.allpts.length;S+=4)(x=i.inBezierVicinity(e,t,E[S],E[S+1],E[S+2],E[S+3],E[S+4],E[S+5],m))&&_()&&y>(s=i.sqDistanceToQuadraticBezier(e,t,E[S],E[S+1],E[S+2],E[S+3],E[S+4],E[S+5]))&&h.push(r);if(x&&_()&&0===h.length||h[h.length-1]!==r)for(var b=b||o.source,w=w||o.target,T=v.width.pfValue,k=u.getArrowWidth(T),P=[{name:"source",x:f.arrowStartX,y:f.arrowStartY,angle:f.srcArrowAngle},{name:"target",x:f.arrowEndX,y:f.arrowEndY,angle:f.tgtArrowAngle},{name:"mid-source",x:f.midX,y:f.midY,angle:f.midsrcArrowAngle},{name:"mid-target",x:f.midX,y:f.midY,angle:f.midtgtArrowAngle}],S=0;S<P.length;S++){var O=P[S],C=l.arrowShapes[v[O.name+"-arrow-shape"].value];if(C.roughCollide(e,t,k,O.angle,{x:O.x,y:O.y},p)&&C.collide(e,t,k,O.angle,{x:O.x,y:O.y},p)){h.push(r);break}}d&&h.length>0&&h[h.length-1]===r&&(a(b),a(w))}}function s(n){var r=n._private,a=g;if("no"!==r.style["text-events"].strValue)if("edges"===r.group&&"autorotate"===r.style["edge-text-rotation"].strValue){var o=r.rstyle,s=o.labelWidth+2*a,u=o.labelHeight+2*a,l=o.labelX,c=o.labelY,f=r.rscratch.labelAngle,d=Math.cos(f),p=Math.sin(f),v=function(e,t){return e-=l,t-=c,{x:e*d-t*p+l,y:e*p+t*d+c}},y=l-s/2,m=l+s/2,b=c-u/2,w=c+u/2,x=v(y,b),_=v(y,w),E=v(m,b),S=v(m,w),T=[x.x,x.y,E.x,E.y,S.x,S.y,_.x,_.y];i.pointInsidePolygonPoints(e,t,T)&&h.push(n)}else{var k=n.boundingBox({includeLabels:!0,includeNodes:!1,includeEdges:!1});k.x1-=a,k.y1-=a,k.x2+=a,k.y2+=a,k.w=k.x2-k.x1,k.h=k.y2-k.y1,i.inBoundingBox(k,e,t)&&h.push(n)}}for(var u=this,l=this,c=l.getCachedZSortedEles(),h=[],f=l.cy.zoom(),d=l.cy.hasCompoundNodes(),p=(r?24:8)/f,v=(r?8:2)/f,g=(r?8:2)/f,y=c.length-1;y>=0;y--){var m=c[y],b=m._private;if(h.length>0)break;"nodes"===b.group?a(m):o(m),s(m)}return h.length>0?h[h.length-1]:null},s.getAllInBox=function(e,t,n,r){var a=this.getCachedNodes(),o=this.getCachedEdges(),s=[],u=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),h=Math.max(t,r);e=u,n=l,t=c,r=h;for(var f=i.makeBoundingBox({x1:e,y1:t,x2:n,y2:r}),d=0;d<a.length;d++){var p=a[d],v=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(f,v)&&s.push(a[d])}for(var g=0;g<o.length;g++){var y=o[g],m=y._private,b=m.rscratch;if((null==b.startX||null==b.startY||i.inBoundingBox(f,b.startX,b.startY))&&(null==b.endX||null==b.endY||i.inBoundingBox(f,b.endX,b.endY)))if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var w=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,d=0;d<w.length;d++)if(!i.pointInBoundingBox(f,w[d])){x=!1;break}x&&s.push(y)}else("haystack"===b.edgeType||"straight"===b.edgeType)&&s.push(y)}return s},s.getNodeShape=function(e){var t=this,n=e._private.style,r=n.shape.value;if(e.isParent())return"rectangle"===r||"roundrectangle"===r?r:"rectangle";if("polygon"===r){var i=n["shape-polygon-points"].value;return t.nodeShapes.makePolygon(i).name}return r},s.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},s.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),a=[];if(!e&&t&&n&&t===r&&n===i)a=this.cachedZSortedEles;else{for(var s=0;s<r.length;s++){var u=r[s];(u.animated()||u.visible()&&!u.transparent())&&a.push(u)}for(var s=0;s<i.length;s++){var l=i[s];(l.animated()||l.visible()&&!l.transparent())&&a.push(l)}a.sort(o),this.cachedZSortedEles=a}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,a},s.projectLines=function(e){var t=e._private,n=t.rscratch,i=n.edgeType;if("multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var a=(t.rstyle.bezierPts=[],0);a+5<n.allpts.length;a+=4)r(e,n.allpts.slice(a,a+6));else if("segments"===i)for(var o=t.rstyle.linePts=[],a=0;a+1<n.allpts.length;a+=2)o.push({x:n.allpts[a],y:n.allpts[a+1]});else if("haystack"===i){var s=n.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}},s.projectBezier=s.projectLines,s.recalculateNodeLabelProjection=function(e){var t=e._private.style.label.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e.outerWidth(),a=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,u=e._private.style["text-valign"].strValue,l=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":n=o.x-i/2;break;case"right":n=o.x+i/2;break;default:n=o.x}switch(u){case"top":r=o.y-a/2;break;case"bottom":r=o.y+a/2;break;default:r=o.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(e)}},s.recalculateEdgeLabelProjection=function(e){var t=e._private.style.label.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e._private,a=i.rscratch,o=i.rstyle;n=a.midX,r=a.midY,a.labelX=n,a.labelY=r,o.labelX=n,o.labelY=r,this.applyLabelDimensions(e)}},s.applyLabelDimensions=function(e){var t=e._private.rscratch,n=e._private.rstyle,r=this.getLabelText(e),i=this.calculateLabelDimensions(e,r);n.labelWidth=i.width,t.labelWidth=i.width,n.labelHeight=i.height,t.labelHeight=i.height},s.getLabelText=function(e){var t=e._private.style,n=e._private.style.label.strValue,r=t["text-transform"].value,i=e._private.rscratch;if("none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),"wrap"===t["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var a=n.split("\n"),o=t["text-max-width"].pfValue,s=[],u=0;u<a.length;u++){var l=a[u],c=this.calculateLabelDimensions(e,l,"line="+l),h=c.width;if(h>o){for(var f=l.split(/\s+/),d="",p=0;p<f.length;p++){var v=f[p],g=0===d.length?v:d+" "+v,y=this.calculateLabelDimensions(e,g,"testLine="+g),m=y.width;o>=m?d+=v+" ":(s.push(d),d=v+" ")}d.match(/^\s+$/)||s.push(d)}else s.push(l)}i.labelWrapCachedLines=s,i.labelWrapCachedText=n=s.join("\n"),i.labelWrapKey=i.labelKey}return n},s.calculateLabelDimensions=function(e,t,n){var r=this,i=e._private.style,a=i["font-style"].strValue,o=i["font-size"].pfValue+"px",s=i["font-family"].strValue,u=i["font-weight"].strValue,l=e._private.labelKey;n&&(l+="$@$"+n);var c=r.labelDimCache||(r.labelDimCache={});if(c[l])return c[l];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var f=h.style;return f.fontFamily=s,f.fontStyle=a,f.fontSize=o,f.fontWeight=u,f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none",f.padding="0",f.lineHeight="1","wrap"===i["text-wrap"].value?f.whiteSpace="pre":f.whiteSpace="normal",h.textContent=t,c[l]={width:h.clientWidth,height:h.clientHeight},c[l]},s.recalculateRenderedStyle=function(e){for(var t=[],n=[],r={},i=0;i<e.length;i++){var a=e[i],o=a._private,s=o.style,u=o.rscratch,l=o.rstyle,c=o.data.id,h=null!=u.boundingBoxKey&&o.boundingBoxKey===u.boundingBoxKey,f=null!=u.labelKey&&o.labelKey===u.labelKey,d=h&&f;if("nodes"===o.group){var p=o.position,v=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY,g=null!=l.nodeW&&l.nodeW===s.width.pfValue,y=null!=l.nodeH&&l.nodeH===s.height.pfValue;v&&d&&g&&y||n.push(a),l.nodeX=p.x,l.nodeY=p.y,l.nodeW=s.width.pfValue,l.nodeH=s.height.pfValue}else{var m=o.source._private.position,b=o.target._private.position,w=null!=l.srcX&&null!=l.srcY&&m.x===l.srcX&&m.y===l.srcY,x=null!=l.tgtX&&null!=l.tgtY&&b.x===l.tgtX&&b.y===l.tgtY,_=w&&x;if(!_||!d)if("bezier"===u.edgeType||"straight"===u.edgeType||"self"===u.edgeType||"compound"===u.edgeType){if(!r[c]){t.push(a),r[c]=!0;for(var E=a.parallelEdges(),i=0;i<E.length;i++){var S=E[i],T=S._private.data.id;r[T]||(t.push(S),r[T]=!0)}}}else t.push(a);l.srcX=m.x,l.srcY=m.y,l.tgtX=b.x,l.tgtY=b.y}u.boundingBoxKey=o.boundingBoxKey,u.labelKey=o.labelKey}this.recalculateEdgeProjections(t),this.recalculateLabelProjections(n,t)},s.recalculateLabelProjections=function(e,t){for(var n=0;n<e.length;n++)this.recalculateNodeLabelProjection(e[n]);for(var n=0;n<t.length;n++)this.recalculateEdgeLabelProjection(t[n])},s.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},s.findEdgeControlPoints=function(e){if(e&&0!==e.length){for(var t,n=this,r=n.cy,o=r.hasCompoundNodes(),s={},u=[],l=[],c=[],h=0;h<e.length;h++){var f=e[h],d=f._private,p=d.data,v=d.style,g=v["curve-style"].value,y="unbundled-bezier"===g||"segments"===g;if("none"!==v.display.value)if("autorotate"===v["edge-text-rotation"].strValue&&c.push(f),"haystack"!==g){var m=p.source,b=p.target;t=m>b?b+"$-$"+m:m+"$-$"+b,y&&(t="unbundled$-$"+p.id),null==s[t]&&(s[t]=[],u.push(t)),s[t].push(f),y&&(s[t].hasUnbundled=!0)}else l.push(f)}for(var w,x,_,E,S,T,k,P,O,C,R,N,I,D,A=0;A<u.length;A++){t=u[A];var L=s[t];if(L.sort(function(e,t){return e._private.index-t._private.index}),w=L[0]._private.source,x=L[0]._private.target,_=w._private,E=x._private,_.data.id>E.data.id){var M=w;w=x,x=M}if(S=_.position,T=E.position,k=w.outerWidth(),P=w.outerHeight(),O=x.outerWidth(),C=x.outerHeight(),R=n.nodeShapes[this.getNodeShape(w)],N=n.nodeShapes[this.getNodeShape(x)],D=!1,L.length>1&&w!==x||L.hasUnbundled){var B=R.intersectLine(S.x,S.y,k,P,T.x,T.y,0),j=N.intersectLine(T.x,T.y,O,C,S.x,S.y,0),q={x1:B[0],x2:j[0],y1:B[1],y2:j[1]},z=j[1]-B[1],F=j[0]-B[0],V=Math.sqrt(F*F+z*z),U={x:F,y:z},Y={x:U.x/V,y:U.y/V};I={x:-Y.y,y:Y.x},(N.checkPoint(B[0],B[1],0,O,C,T.x,T.y)||R.checkPoint(j[0],j[1],0,k,P,S.x,S.y))&&(I={},D=!0)}for(var f,X,H,h=0;h<L.length;h++){f=L[h],X=f._private,H=X.rscratch;var $=H.lastEdgeIndex,W=h,G=H.lastNumEdges,K=L.length,Z=X.style,v=Z,g=Z["curve-style"].value,J=Z["control-point-distances"],Q=Z["control-point-weights"],ee=J&&Q?Math.min(J.value.length,Q.value.length):1,te=Z["control-point-step-size"].pfValue,ne=void 0!==J?J.pfValue[0]:void 0,re=Q.value[0],y="unbundled-bezier"===g||"segments"===g,ie=X.source!==w;ie&&y&&(ne*=-1);var ae=H.lastSrcCtlPtX,oe=S.x,se=H.lastSrcCtlPtY,ue=S.y,le=H.lastSrcCtlPtW,ce=w.outerWidth(),he=H.lastSrcCtlPtH,fe=w.outerHeight(),de=H.lastTgtCtlPtX,pe=T.x,ve=H.lastTgtCtlPtY,ge=T.y,ye=H.lastTgtCtlPtW,me=x.outerWidth(),be=H.lastTgtCtlPtH,we=x.outerHeight(),xe=H.lastW,_e=Z["control-point-step-size"].pfValue;if(D?H.badBezier=!0:H.badBezier=!1,ae!==oe||se!==ue||le!==ce||he!==fe||de!==pe||ve!==ge||ye!==me||be!==we||xe!==_e||!($===W&&G===K||y)){if(H.lastSrcCtlPtX=oe,H.lastSrcCtlPtY=ue,H.lastSrcCtlPtW=ce,H.lastSrcCtlPtH=fe,H.lastTgtCtlPtX=pe,H.lastTgtCtlPtY=ge,H.lastTgtCtlPtW=me,H.lastTgtCtlPtH=we,H.lastEdgeIndex=W,H.lastNumEdges=K,H.lastWidth=_e,w===x){H.edgeType="self";var Ee=h,Se=te;y&&(Ee=0,Se=ne),H.ctrlpts=[S.x,S.y-(1+Math.pow(P,1.12)/100)*Se*(Ee/3+1),S.x-(1+Math.pow(k,1.12)/100)*Se*(Ee/3+1),S.y]}else if(o&&(w.isParent()||w.isChild()||x.isParent()||x.isChild())&&(w.parents().anySame(x)||x.parents().anySame(w))){H.edgeType="compound",H.badBezier=!1;var Ee=h,Se=te;y&&(Ee=0,Se=ne);var Te=50,ke={x:S.x-k/2,y:S.y-P/2},Pe={x:T.x-O/2,y:T.y-C/2},Oe={x:Math.min(ke.x,Pe.x),y:Math.min(ke.y,Pe.y)},Ce=.5,Re=Math.max(Ce,Math.log(.01*k)),Ne=Math.max(Ce,Math.log(.01*O));H.ctrlpts=[Oe.x,Oe.y-(1+Math.pow(Te,1.12)/100)*Se*(Ee/3+1)*Re,Oe.x-(1+Math.pow(Te,1.12)/100)*Se*(Ee/3+1)*Ne,Oe.y]}else if("segments"===g){H.edgeType="segments",H.segpts=[];for(var Ie=Z["segment-weights"].pfValue,De=Z["segment-distances"].pfValue,Ae=Math.min(Ie.length,De.length),Le=0;Ae>Le;Le++){var Me=Ie[Le],Be=De[Le],je=1-Me,qe=Me,ze={x:q.x1*je+q.x2*qe,y:q.y1*je+q.y2*qe};H.segpts.push(ze.x+I.x*Be,ze.y+I.y*Be)}}else if(L.length%2!==1||h!==Math.floor(L.length/2)||y){var Fe=y;H.edgeType=Fe?"multibezier":"bezier",H.ctrlpts=[];for(var Ve=0;ee>Ve;Ve++){var Ue,Ye=(.5-L.length/2+h)*te,Xe=i.signum(Ye);Fe&&(ne=J?J.pfValue[Ve]:te,re=Q.value[Ve]),Ue=y?ne:void 0!==ne?Xe*ne:void 0;var He=void 0!==Ue?Ue:Ye,je=!ie||y?1-re:re,qe=!ie||y?re:1-re,ze={x:q.x1*je+q.x2*qe,y:q.y1*je+q.y2*qe};H.ctrlpts.push(ze.x+I.x*He,ze.y+I.y*He)}}else H.edgeType="straight";this.findEndpoints(f);var $e=!a.number(H.startX)||!a.number(H.startY),We=!a.number(H.arrowStartX)||!a.number(H.arrowStartY),Ge=!a.number(H.endX)||!a.number(H.endY),Ke=!a.number(H.arrowEndX)||!a.number(H.arrowEndY),Ze=3,Je=this.getArrowWidth(Z.width.pfValue)*this.arrowShapeHeight,Qe=Ze*Je;if("bezier"===H.edgeType){var et=i.distance({x:H.ctrlpts[0],y:H.ctrlpts[1]},{x:H.startX,y:H.startY}),tt=Qe>et,nt=i.distance({x:H.ctrlpts[0],y:H.ctrlpts[1]},{x:H.endX,y:H.endY}),rt=Qe>nt,it=!1;if($e||We||tt){it=!0;var at={x:H.ctrlpts[0]-S.x,y:H.ctrlpts[1]-S.y},ot=Math.sqrt(at.x*at.x+at.y*at.y),st={x:at.x/ot,y:at.y/ot},ut=Math.max(k,P),lt={x:H.ctrlpts[0]+2*st.x*ut,y:H.ctrlpts[1]+2*st.y*ut},ct=R.intersectLine(S.x,S.y,k,P,lt.x,lt.y,0);tt?(H.ctrlpts[0]=H.ctrlpts[0]+st.x*(Qe-et),H.ctrlpts[1]=H.ctrlpts[1]+st.y*(Qe-et)):(H.ctrlpts[0]=ct[0]+st.x*Qe,H.ctrlpts[1]=ct[1]+st.y*Qe)}if(Ge||Ke||rt){it=!0;var at={x:H.ctrlpts[0]-T.x,y:H.ctrlpts[1]-T.y},ot=Math.sqrt(at.x*at.x+at.y*at.y),st={x:at.x/ot,y:at.y/ot},ut=Math.max(k,P),lt={x:H.ctrlpts[0]+2*st.x*ut,y:H.ctrlpts[1]+2*st.y*ut},ht=N.intersectLine(T.x,T.y,O,C,lt.x,lt.y,0);rt?(H.ctrlpts[0]=H.ctrlpts[0]+st.x*(Qe-nt),H.ctrlpts[1]=H.ctrlpts[1]+st.y*(Qe-nt)):(H.ctrlpts[0]=ht[0]+st.x*Qe,H.ctrlpts[1]=ht[1]+st.y*Qe)}it&&this.findEndpoints(f)}if("multibezier"===H.edgeType||"bezier"===H.edgeType||"self"===H.edgeType||"compound"===H.edgeType){H.allpts=[],H.allpts.push(H.startX,H.startY);for(var Ve=0;Ve+1<H.ctrlpts.length;Ve+=2)H.allpts.push(H.ctrlpts[Ve],H.ctrlpts[Ve+1]),Ve+3<H.ctrlpts.length&&H.allpts.push((H.ctrlpts[Ve]+H.ctrlpts[Ve+2])/2,(H.ctrlpts[Ve+1]+H.ctrlpts[Ve+3])/2);H.allpts.push(H.endX,H.endY);var ft,dt;"bezier"===H.edgeType?(H.midX=i.qbezierAt(H.arrowStartX,H.ctrlpts[0],H.arrowEndX,.5),H.midY=i.qbezierAt(H.arrowStartY,H.ctrlpts[1],H.arrowEndY,.5)):H.ctrlpts.length/2%2===0?(ft=H.allpts.length/2-1,H.midX=H.allpts[ft],H.midY=H.allpts[ft+1]):(ft=H.allpts.length/2-3,dt=.5,H.midX=i.qbezierAt(H.allpts[ft],H.allpts[ft+2],H.allpts[ft+4],dt),H.midY=i.qbezierAt(H.allpts[ft+1],H.allpts[ft+3],H.allpts[ft+5],dt))}else if("straight"===H.edgeType)H.allpts=[H.startX,H.startY,H.endX,H.endY],H.midX=(H.arrowStartX+H.arrowEndX)/2,H.midY=(H.arrowStartY+H.arrowEndY)/2;else if("segments"===H.edgeType)if(H.allpts=[],H.allpts.push(H.startX,H.startY),H.allpts.push.apply(H.allpts,H.segpts),H.allpts.push(H.endX,H.endY),H.segpts.length%4===0){var pt=H.segpts.length/2,vt=pt-2;H.midX=(H.segpts[vt]+H.segpts[pt])/2,H.midY=(H.segpts[vt+1]+H.segpts[pt+1])/2}else{var vt=H.segpts.length/2-1;H.midX=H.segpts[vt],H.midY=H.segpts[vt+1]}this.projectLines(f),this.calculateArrowAngles(f),this.recalculateEdgeLabelProjection(f)}}}for(var h=0;h<l.length;h++){var f=l[h],d=f._private,v=d.style,gt=d.rscratch,H=gt;if(!gt.haystack){var yt=2*Math.random()*Math.PI;gt.source={x:Math.cos(yt),y:Math.sin(yt)};var yt=2*Math.random()*Math.PI;gt.target={x:Math.cos(yt),y:Math.sin(yt)}}var w=d.source,x=d.target,S=w._private.position,T=x._private.position,k=w.width(),O=x.width(),P=w.height(),C=x.height(),ut=v["haystack-radius"].value,mt=ut/2;H.haystackPts=H.allpts=[H.source.x*k*mt+S.x,H.source.y*P*mt+S.y,H.target.x*O*mt+T.x,H.target.y*C*mt+T.y],H.midX=(H.allpts[0]+H.allpts[2])/2,H.midY=(H.allpts[1]+H.allpts[3])/2,gt.edgeType="haystack",gt.haystack=!0,this.projectLines(f),this.calculateArrowAngles(f),this.recalculateEdgeLabelProjection(f)}for(var h=0;h<c.length;h++){var f=c[h],H=f._private.rscratch;H.labelAngle=Math.atan(H.midDispY/H.midDispX)}return s}};var u=function(e,t){return Math.atan2(t,e)-Math.PI/2};s.calculateArrowAngles=function(e){var t,n,r,a,o,s,l=e._private.rscratch,c="haystack"===l.edgeType,h="multibezier"===l.edgeType,f="segments"===l.edgeType,d="compound"===l.edgeType,p="self"===l.edgeType,v=e.source().position(),g=e.target().position();c?(r=l.haystackPts[0],a=l.haystackPts[1],o=l.haystackPts[2],s=l.haystackPts[3]):(r=l.arrowStartX,a=l.arrowStartY,o=l.arrowEndX,s=l.arrowEndY),t=v.x-r,n=v.y-a,l.srcArrowAngle=u(t,n);var y=l.midX,m=l.midY;if(c&&(y=(r+o)/2,m=(a+s)/2),t=o-r,n=s-a,p)t=-1,n=1;else if(f){var b=l.allpts;if(b.length/2%2===0){var w=b.length/2,x=w-2;t=b[w]-b[x],n=b[w+1]-b[x+1]}else{var w=b.length/2-1,x=w-2,_=w+2;t=b[w]-b[x],n=b[w+1]-b[x+1]}}else if(h||d){var E,S,T,k,b=l.allpts,P=l.ctrlpts;if(P.length/2%2===0){var O=b.length/2-1,C=O+2,R=C+2;E=i.qbezierAt(b[O],b[C],b[R],0),S=i.qbezierAt(b[O+1],b[C+1],b[R+1],0),T=i.qbezierAt(b[O],b[C],b[R],1e-4),k=i.qbezierAt(b[O+1],b[C+1],b[R+1],1e-4)}else{var C=b.length/2-1,O=C-2,R=C+2;E=i.qbezierAt(b[O],b[C],b[R],.4999),S=i.qbezierAt(b[O+1],b[C+1],b[R+1],.4999),T=i.qbezierAt(b[O],b[C],b[R],.5),k=i.qbezierAt(b[O+1],b[C+1],b[R+1],.5)}t=T-E,n=k-S}if(l.midtgtArrowAngle=u(t,n),l.midDispX=t,l.midDispY=n,t*=-1,n*=-1,f){var b=l.allpts;if(b.length/2%2===0);else{var w=b.length/2-1,_=w+2;t=-(b[_]-b[w]),n=-(b[_+1]-b[w+1])}}l.midsrcArrowAngle=u(t,n),t=g.x-o,n=g.y-s,l.tgtArrowAngle=u(t,n)},s.findEndpoints=function(e){var t,n,r,o=this,s=e.source()[0],u=e.target()[0],l=s._private,c=u._private,h=l.position,f=c.position,d=e._private.style["target-arrow-shape"].value,p=e._private.style["source-arrow-shape"].value,v=e._private.rscratch,g=v.edgeType,y="bezier"===g||"multibezier"===g||"self"===g||"compound"===g,m="bezier"!==g,b="straight"===g||"segments"===g,w="segments"===g;if(y){var x=[v.ctrlpts[0],v.ctrlpts[1]],_=m?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:x;n=_,r=x}else if(b){var E=w?v.segpts.slice(0,2):[f.x,f.y],S=w?v.segpts.slice(v.segpts.length-2):[h.x,h.y];
n=S,r=E}t=o.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),n[0],n[1],0);var T=i.shortenIntersection(t,n,o.arrowShapes[d].spacing(e)),k=i.shortenIntersection(t,n,o.arrowShapes[d].gap(e));v.endX=k[0],v.endY=k[1],v.arrowEndX=T[0],v.arrowEndY=T[1],t=o.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),r[0],r[1],0);var P=i.shortenIntersection(t,r,o.arrowShapes[p].spacing(e)),O=i.shortenIntersection(t,r,o.arrowShapes[p].gap(e));v.startX=O[0],v.startY=O[1],v.arrowStartX=P[0],v.arrowStartY=P[1],b&&(a.number(v.startX)&&a.number(v.startY)&&a.number(v.endX)&&a.number(v.endY)?v.badLine=!1:v.badLine=!0)},s.getArrowWidth=s.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[e];return n?n:(n=Math.max(Math.pow(13.37*e,.9),29),t[e]=n,n)},t.exports=s},{"../../../collection/zsort":29,"../../../is":77,"../../../math":79}],57:[function(e,t,n){"use strict";var r={};r.getCachedImage=function(e,t){var n=this,r=n.imageCache=n.imageCache||{};if(r[e]&&r[e].image)return r[e].image;var i=r[e]=r[e]||{},a=i.image=new Image;return a.addEventListener("load",t),a.src=e,a},t.exports=r},{}],58:[function(e,t,n){"use strict";var r=e("../../../is"),i=e("../../../util"),a=function(){},o=a,s=o.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(e){var t=this;t.options=e,t.cy=e.cy,t.container=e.cy.container(),t.selection=[void 0,void 0,void 0,void 0,0],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=e.pixelRatio,t.motionBlur=!0,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.registerNodeShapes(),t.registerArrowShapes(),t.load()},s.notify=function(e){var t,n=this;t=r.array(e.type)?e.type:[e.type];for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"destroy":return void n.destroy();case"add":case"remove":case"load":n.updateElementsCache();break;case"viewport":n.redrawHint("select",!0);break;case"style":n.updateCachedZSortedEles()}("load"===a||"resize"===a)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container))}n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()},s.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(r){}},[e("./arrow-shapes"),e("./cached-eles"),e("./coord-ele-math"),e("./images"),e("./load-listeners"),e("./node-shapes"),e("./redraw")].forEach(function(e){i.extend(s,e)}),t.exports=o},{"../../../is":77,"../../../util":94,"./arrow-shapes":54,"./cached-eles":55,"./coord-ele-math":56,"./images":57,"./load-listeners":59,"./node-shapes":60,"./redraw":61}],59:[function(e,t,n){"use strict";var r=e("../../../is"),i=e("../../../util"),a=e("../../../event"),o=e("../../../collection"),s={};s.registerBinding=function(e,t,n,r){this.bindings.push({target:e,event:t,handler:n,useCapture:r}),e.addEventListener(t,n,r)},s.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1},s.load=function(){var e=this,t=function(t,n,r,o){null==t&&(t=e.cy);for(var s=0;s<n.length;s++){var u=n[s],l=a(r,i.extend({type:u},o));t.trigger(l)}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},s=function(t){var n;if(t.addToList&&e.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var r=0;r<t.addToList.length;r++){var i=t.addToList[r];t.addToList.hasId[i.id()]=!0}}n=t.addToList.hasId}return n||{}},u=function(e,t){if(e._private.cy.hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList))for(var n=s(t),r=e.descendants(),i=0;i<r.size();i++){var a=r[i],o=a._private;t.inDragLayer&&(o.rscratch.inDragLayer=!0),t.addToList&&!n[a.id()]&&(t.addToList.push(a),n[a.id()]=!0,o.grabbed=!0);for(var u=o.edges,l=0;t.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},l=function(e,t){var n=e._private,r=s(t);t.inDragLayer&&(n.rscratch.inDragLayer=!0),t.addToList&&!r[e.id()]&&(t.addToList.push(e),r[e.id()]=!0,n.grabbed=!0);for(var i=n.edges,a=0;t.inDragLayer&&a<i.length;a++)i[a]._private.rscratch.inDragLayer=!0;u(e,t),h(e,{inDragLayer:t.inDragLayer})},c=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var r=n.edges,i=0;i<r.length;i++)r[i]._private.rscratch.inDragLayer=!1;h(e[t],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},h=function(e,t){if(null!=t.inDragLayer||null!=t.addToList){var n=e;if(e._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=e){for(var r=n.descendants().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges(),a=s(t),o=0;o<r.size();o++)void 0!==t.inDragLayer&&(r[o]._private.rscratch.inDragLayer=t.inDragLayer),t.addToList&&!a[r[o].id()]&&(t.addToList.push(r[o]),a[r[o].id()]=!0,r[o]._private.grabbed=!0);for(var u=0;void 0!==t.inDragLayer&&u<i.length;u++)i[u]._private.rscratch.inDragLayer=t.inDragLayer}}}};"undefined"!=typeof MutationObserver?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.removedNodes;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()}),e.registerBinding(window,"resize",i.debounce(function(t){e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redraw()},100));for(var f=function(t){e.registerBinding(t,"scroll",function(t){e.invalidateContainerClientCoordsCache()})},d=e.cy.container();f(d),d.parentNode;)d=d.parentNode;e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var p=function(){return 0!==e.selection[4]};e.registerBinding(e.container,"mousedown",function(n){n.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=n.which;var r=e.cy,i=e.projectIntoViewport(n.clientX,n.clientY),o=e.selection,s=e.findNearestElement(i[0],i[1],!0,!1),u=e.dragData.possibleDragElements;e.hoverData.mdownPos=i;var c=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.trigger(a(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}})):r.trigger(a(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}}))}},e.tapholdDuration)};if(3==n.which){e.hoverData.cxtStarted=!0;var h=a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}});s?(s.activate(),s.trigger(h),e.hoverData.down=s):r.trigger(h),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==n.which){if(s&&s.activate(),null!=s&&e.nodeIsDraggable(s)){var f=a(n,{type:"grab",cyPosition:{x:i[0],y:i[1]}});if(s.isNode()&&!s.selected())u=e.dragData.possibleDragElements=[],l(s,{addToList:u}),s.trigger(f);else if(s.isNode()&&s.selected()){u=e.dragData.possibleDragElements=[];for(var d=r.$(function(){return this.isNode()&&this.selected()}),p=0;p<d.length;p++)e.nodeIsDraggable(d[p])&&l(d[p],{addToList:u});s.trigger(f)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=s,e.hoverData.downTime=(new Date).getTime(),t(s,["mousedown","tapstart","vmousedown"],n,{cyPosition:{x:i[0],y:i[1]}}),null==s?(o[4]=1,e.data.bgActivePosistion={x:i[0],y:i[1]},e.redrawHint("select",!0),e.redraw()):s.isEdge()&&(o[4]=1),c()}o[0]=o[2]=i[0],o[1]=o[3]=i[1]},!1),e.registerBinding(window,"mousemove",i.throttle(function(i){var s=!1,u=e.hoverData.capture;if(!u){var c=e.findContainerClientCoords();if(!(i.clientX>c[0]&&i.clientX<c[0]+e.canvasWidth&&i.clientY>c[1]&&i.clientY<c[1]+e.canvasHeight))return;for(var h=e.container,f=i.target,d=f.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}if(!p)return}var v=e.cy,g=v.zoom(),y=e.projectIntoViewport(i.clientX,i.clientY),m=e.selection,b=null;e.hoverData.draggingEles||(b=e.findNearestElement(y[0],y[1],!0,!1));var w=e.hoverData.last,x=e.hoverData.down,_=[y[0]-m[2],y[1]-m[3]],E=e.dragData.possibleDragElements,S=m[2]-m[0],T=S*S,k=m[3]-m[1],P=k*k,O=T+P,C=O*g*g,R=n(i);e.hoverData.tapholdCancelled=!0;var N=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(_[0]),t.push(_[1])):(t[0]+=_[0],t[1]+=_[1])};if(s=!0,t(b,["mousemove","vmousemove","tapdrag"],i,{cyPosition:{x:y[0],y:y[1]}}),3===e.hoverData.which){var I=a(i,{type:"cxtdrag",cyPosition:{x:y[0],y:y[1]}});x?x.trigger(I):v.trigger(I),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&b===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.trigger(a(i,{type:"cxtdragout",cyPosition:{x:y[0],y:y[1]}})),e.hoverData.cxtOver=b,b&&b.trigger(a(i,{type:"cxtdragover",cyPosition:{x:y[0],y:y[1]}})))}else if(e.hoverData.dragging){if(s=!0,v.panningEnabled()&&v.userPanningEnabled()){var D;if(e.hoverData.justStartedPan){var A=e.hoverData.mdownPos;D={x:(y[0]-A[0])*g,y:(y[1]-A[1])*g},e.hoverData.justStartedPan=!1}else D={x:_[0]*g,y:_[1]*g};v.panBy(D),e.hoverData.dragged=!0}y=e.projectIntoViewport(i.clientX,i.clientY)}else if(1!=m[4]||null!=x&&!x.isEdge()){if(x&&x.isEdge()&&x.active()&&x.unactivate(),b!=w&&(w&&t(w,["mouseout","tapdragout"],i,{cyPosition:{x:y[0],y:y[1]}}),b&&t(b,["mouseover","tapdragover"],i,{cyPosition:{x:y[0],y:y[1]}}),e.hoverData.last=b),x&&x.isNode()&&e.nodeIsDraggable(x))if(C>=e.desktopTapThreshold2){var L=!e.dragData.didDrag;L&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;for(var M=[],B=0;B<E.length;B++){var j=E[B];if(e.hoverData.draggingEles||l(j,{inDragLayer:!0}),j.isNode()&&e.nodeIsDraggable(j)&&j.grabbed()){var q=j._private.position;if(M.push(j),r.number(_[0])&&r.number(_[1])){var z=!j.isParent();if(z&&(q.x+=_[0],q.y+=_[1]),L){var F=e.hoverData.dragDelta;z&&r.number(F[0])&&r.number(F[1])&&(q.x+=F[0],q.y+=F[1])}}}}e.hoverData.draggingEles=!0;var V=o(v,M);V.updateCompoundBounds(),V.trigger("position drag"),e.redrawHint("drag",!0),e.redraw()}else N();s=!0}else e.hoverData.dragging||!v.boxSelectionEnabled()||!R&&v.panningEnabled()&&v.userPanningEnabled()?!e.hoverData.selecting&&v.panningEnabled()&&v.userPanningEnabled()&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,m[4]=0,e.data.bgActivePosistion={x:y[0],y:y[1]},e.redrawHint("select",!0),e.redraw()):(e.data.bgActivePosistion=void 0,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()),x&&x.isEdge()&&x.active()&&x.unactivate();return m[2]=y[0],m[3]=y[1],s?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),e.registerBinding(window,"mouseup",function(r){var i=e.hoverData.capture;if(i){e.hoverData.capture=!1;var s=e.cy,u=e.projectIntoViewport(r.clientX,r.clientY),l=e.selection,h=e.findNearestElement(u[0],u[1],!0,!1),f=e.dragData.possibleDragElements,d=e.hoverData.down,p=n(r);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,d&&d.unactivate(),3===e.hoverData.which){var v=a(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});if(d?d.trigger(v):s.trigger(v),!e.hoverData.cxtDragged){var g=a(r,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}});d?d.trigger(g):s.trigger(g)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(null!=d||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(r)||(s.$(function(){return this.selected()}).unselect(),f.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=f=[]),t(h,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:u[0],y:u[1]}}),e.dragData.didDrag||e.hoverData.dragged||t(h,["click","tap","vclick"],r,{cyPosition:{x:u[0],y:u[1]}}),h!=d||e.dragData.didDrag||e.hoverData.selecting||null!=h&&h._private.selectable&&(e.hoverData.dragging||("additive"===s.selectionType()||p?h.selected()?h.unselect():h.select():p||(s.$(":selected").unmerge(h).unselect(),h.select())),e.redrawHint("eles",!0)),e.hoverData.selecting){var y=[],m=e.getAllInBox(l[0],l[1],l[2],l[3]);e.redrawHint("select",!0),m.length>0&&e.redrawHint("eles",!0);for(var b=0;b<m.length;b++)m[b]._private.selectable&&y.push(m[b]);var w=o(s,y);"additive"===s.selectionType()?w.select():(p||s.$(":selected").unmerge(w).unselect(),w.select()),e.redraw()}e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),l[4]||(e.redrawHint("drag",!0),e.redrawHint("eles",!0),c(f),d&&d.trigger("free"))}l[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[]}},!1);var v=function(t){if(!e.scrollingPage){var n=e.cy,r=e.projectIntoViewport(t.clientX,t.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||p())return void t.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var a=t.deltaY/-250||t.wheelDeltaY/1e3||t.wheelDelta/1e3;a*=e.wheelSensitivity;var o=1===t.deltaMode;o&&(a*=33),n.zoom({level:n.zoom()*Math.pow(10,a),renderedPosition:{x:i[0],y:i[1]}})}}};e.registerBinding(e.container,"wheel",v,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.trigger(a(t,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.trigger(a(t,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var g,y,m,b,w,x,_,E,S,T,k,P,O,C,R=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},N=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};e.registerBinding(e.container,"touchstart",C=function(n){n.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.getCachedNodes(),o=e.getCachedEdges(),s=e.touchData.now,u=e.touchData.earlier;if(n.touches[0]){var c=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(n.touches[1]){var c=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(n.touches[2]){var c=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);s[4]=c[0],s[5]=c[1]}if(n.touches[1]){var h=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};h(i),h(o);var f=e.findContainerClientCoords();S=f[0],T=f[1],k=f[2],P=f[3],g=n.touches[0].clientX-S,y=n.touches[0].clientY-T,m=n.touches[1].clientX-S,b=n.touches[1].clientY-T,O=g>=0&&k>=g&&m>=0&&k>=m&&y>=0&&P>=y&&b>=0&&P>=b;var d=r.pan(),p=r.zoom();w=R(g,y,m,b),x=N(g,y,m,b),_=[(g+m)/2,(y+b)/2],E=[(_[0]-d.x)/p,(_[1]-d.y)/p];var v=200,C=v*v;if(C>x&&!n.touches[2]){var I=e.findNearestElement(s[0],s[1],!0,!0),D=e.findNearestElement(s[2],s[3],!0,!0);return I&&I.isNode()?(I.activate().trigger(a(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=I):D&&D.isNode()?(D.activate().trigger(a(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=D):(r.trigger(a(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var A=e.findNearestElement(s[0],s[1],!0,!0);if(null!=A&&(A.activate(),e.touchData.start=A,A.isNode()&&e.nodeIsDraggable(A))){var L=e.dragData.touchDragEles=[];if(e.redrawHint("eles",!0),e.redrawHint("drag",!0),A.selected())for(var M=r.$(function(){return this.isNode()&&this.selected()}),B=0;B<M.length;B++){var j=M[B];e.nodeIsDraggable(j)&&l(j,{addToList:L})}else l(A,{addToList:L});A.trigger(a(n,{type:"grab",cyPosition:{x:s[0],y:s[1]}}))}t(A,["touchstart","tapstart","vmousedown"],n,{cyPosition:{x:s[0],y:s[1]}}),null==A&&(e.data.bgActivePosistion={x:c[0],y:c[1]},e.redrawHint("select",!0),e.redraw());for(var q=0;q<s.length;q++)u[q]=s[q],e.touchData.startPosition[q]=s[q];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||(t(e.touchData.start,["taphold"],n,{cyPosition:{x:s[0],y:s[1]}}),e.touchData.start||r.$(":selected").unselect())},e.tapholdDuration)}},!1);var I;e.registerBinding(window,"touchmove",I=i.throttle(function(n){var i=e.selection,s=e.touchData.capture;s&&n.preventDefault();var u=e.cy,c=e.touchData.now,h=e.touchData.earlier,f=u.zoom();if(n.touches[0]){var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(n.touches[1]){var d=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(n.touches[2]){var d=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=d[0],c[5]=d[1]}for(var p=[],v=0;v<c.length;v++)p[v]=c[v]-h[v];var _=e.touchData.startPosition,k=c[0]-_[0],P=k*k,C=c[1]-_[1],I=C*C,D=P+I,A=D*f*f;if(s&&e.touchData.cxt){var L=n.touches[0].clientX-S,M=n.touches[0].clientY-T,B=n.touches[1].clientX-S,j=n.touches[1].clientY-T,q=N(L,M,B,j),z=q/x,F=150,V=F*F,U=1.5,Y=U*U;if(z>=Y||q>=V){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var X=a(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}});e.touchData.start?e.touchData.start.trigger(X):u.trigger(X)}}if(s&&e.touchData.cxt){var X=a(n,{type:"cxtdrag",cyPosition:{x:c[0],y:c[1]}});e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.trigger(X):u.trigger(X),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var H=e.findNearestElement(c[0],c[1],!0,!0);e.touchData.cxtOver&&H===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.trigger(a(n,{type:"cxtdragout",cyPosition:{x:c[0],y:c[1]}})),e.touchData.cxtOver=H,H&&H.trigger(a(n,{type:"cxtdragover",cyPosition:{x:c[0],y:c[1]}})))}else if(s&&n.touches[2]&&u.boxSelectionEnabled())e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting=!0,e.redrawHint("select",!0),i&&0!==i.length&&void 0!==i[0]?(i[2]=(c[0]+c[2]+c[4])/3,i[3]=(c[1]+c[3]+c[5])/3):(i[0]=(c[0]+c[2]+c[4])/3,i[1]=(c[1]+c[3]+c[5])/3,i[2]=(c[0]+c[2]+c[4])/3+1,i[3]=(c[1]+c[3]+c[5])/3+1),i[4]=1,e.touchData.selecting=!0,e.redraw();else if(s&&n.touches[1]&&u.zoomingEnabled()&&u.panningEnabled()&&u.userZoomingEnabled()&&u.userPanningEnabled()){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var $=e.dragData.touchDragEles;if($){e.redrawHint("drag",!0);for(var W=0;W<$.length;W++)$[W]._private.grabbed=!1,$[W]._private.rscratch.inDragLayer=!1}var L=n.touches[0].clientX-S,M=n.touches[0].clientY-T,B=n.touches[1].clientX-S,j=n.touches[1].clientY-T,G=R(L,M,B,j),K=G/w;if(1!=K&&O){var Z=L-g,J=M-y,Q=B-m,ee=j-b,te=(Z+Q)/2,ne=(J+ee)/2,re=u.zoom(),ie=re*K,ae=u.pan(),oe=E[0]*re+ae.x,se=E[1]*re+ae.y,ue={x:-ie/re*(oe-ae.x-te)+oe,y:-ie/re*(se-ae.y-ne)+se};if(e.touchData.start){var $=e.dragData.touchDragEles;if($)for(var W=0;W<$.length;W++){var le=$[W]._private;le.grabbed=!1,le.rscratch.inDragLayer=!1}var ce=e.touchData.start._private;ce.active=!1,ce.grabbed=!1,ce.rscratch.inDragLayer=!1,e.redrawHint("drag",!0),e.touchData.start.trigger("free").trigger("unactivate")}u.viewport({zoom:ie,pan:ue,cancelOnFailedZoom:!0}),w=G,g=L,y=M,m=B,b=j,e.pinching=!0}if(n.touches[0]){var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(n.touches[1]){var d=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(n.touches[2]){var d=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=d[0],c[5]=d[1]}}else if(n.touches[0]){var he=e.touchData.start,fe=e.touchData.last,H=H||e.findNearestElement(c[0],c[1],!0,!0);if(null!=he&&"nodes"==he._private.group&&e.nodeIsDraggable(he))if(A>=e.touchTapThreshold2){for(var $=e.dragData.touchDragEles,de=!e.dragData.didDrag,pe=0;pe<$.length;pe++){var ve=$[pe];if(de&&l(ve,{inDragLayer:!0}),e.nodeIsDraggable(ve)&&ve.isNode()&&ve.grabbed()){e.dragData.didDrag=!0;var ge=ve._private.position,ye=!ve.isParent();if(ye&&r.number(p[0])&&r.number(p[1])&&(ge.x+=p[0],ge.y+=p[1]),de){e.redrawHint("eles",!0);var me=e.touchData.dragDelta;ye&&r.number(me[0])&&r.number(me[1])&&(ge.x+=me[0],ge.y+=me[1])}}}var be=o(u,$);be.updateCompoundBounds(),be.trigger("position drag"),e.hoverData.draggingEles=!0,e.redrawHint("drag",!0),e.touchData.startPosition[0]==h[0]&&e.touchData.startPosition[1]==h[1]&&e.redrawHint("eles",!0),e.redraw()}else{var me=e.touchData.dragDelta=e.touchData.dragDelta||[];0===me.length?(me.push(p[0]),me.push(p[1])):(me[0]+=p[0],me[1]+=p[1])}t(he||H,["touchmove","tapdrag","vmousemove"],n,{cyPosition:{x:c[0],y:c[1]}}),H!=fe&&(fe&&fe.trigger(a(n,{type:"tapdragout",cyPosition:{x:c[0],y:c[1]}})),H&&H.trigger(a(n,{type:"tapdragover",cyPosition:{x:c[0],y:c[1]}}))),e.touchData.last=H;for(var W=0;W<c.length;W++)c[W]&&e.touchData.startPosition[W]&&A>e.touchTapThreshold2&&(e.touchData.singleTouchMoved=!0);if(s&&(null==he||he.isEdge())&&u.panningEnabled()&&u.userPanningEnabled()&&A>e.touchTapThreshold2){e.swipePanning?u.panBy({x:p[0]*f,y:p[1]*f}):A>=e.touchTapThreshold2&&(e.swipePanning=!0,u.panBy({x:k*f,y:C*f})),he&&(he.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:c[0],y:c[1]}),e.redrawHint("select",!0),e.touchData.start=null);var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}}for(var v=0;v<c.length;v++)h[v]=c[v]},1e3/30,{trailing:!0}),!1);var D;e.registerBinding(window,"touchcancel",D=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()});var A;if(e.registerBinding(window,"touchend",A=function(n){var r=e.touchData.start,i=e.touchData.capture;if(i){e.touchData.capture=!1,n.preventDefault();var s=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var u=e.cy,l=u.zoom(),h=e.touchData.now,f=e.touchData.earlier;if(n.touches[0]){var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);h[0]=d[0],h[1]=d[1]}if(n.touches[1]){var d=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);h[2]=d[0],h[3]=d[1]}if(n.touches[2]){var d=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);h[4]=d[0],h[5]=d[1]}r&&r.unactivate();var p;if(e.touchData.cxt){if(p=a(n,{type:"cxttapend",cyPosition:{x:h[0],y:h[1]}}),r?r.trigger(p):u.trigger(p),!e.touchData.cxtDragged){var v=a(n,{type:"cxttap",cyPosition:{x:h[0],y:h[1]}});r?r.trigger(v):u.trigger(v)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&u.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var g=[],y=e.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,e.redrawHint("select",!0);for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=o(u,g);b.select(),b.length>0?e.redrawHint("eles",!0):e.redraw()}var w=!1;if(null!=r&&(r._private.active=!1,w=!0,r.unactivate()),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var x=e.dragData.touchDragEles;if(null!=r){var _=r._private.grabbed;c(x),e.redrawHint("drag",!0),e.redrawHint("eles",!0),_&&r.trigger("free"),t(r,["touchend","tapend","vmouseup"],n,{cyPosition:{x:h[0],y:h[1]}}),r.unactivate(),e.touchData.start=null}else{var E=e.findNearestElement(h[0],h[1],!0,!0);t(E,["touchend","tapend","vmouseup"],n,{cyPosition:{x:h[0],y:h[1]}})}var S=e.touchData.startPosition[0]-h[0],T=S*S,k=e.touchData.startPosition[1]-h[1],P=k*k,O=T+P,C=O*l*l;null!=r&&!e.dragData.didDrag&&r._private.selectable&&C<e.touchTapThreshold2&&!e.pinching&&("single"===u.selectionType()?(u.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),w=!0,e.redrawHint("eles",!0)),e.touchData.singleTouchMoved||t(r,["tap","vclick"],n,{cyPosition:{x:h[0],y:h[1]}}),e.touchData.singleTouchMoved=!0}for(var R=0;R<h.length;R++)f[R]=h[R];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[]),w&&r&&r.updateStyle(!1),n.touches.length<2&&(e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var L=[],M=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},B=function(e){return{event:e,touch:M(e)}},j=function(e){L.push(B(e))},q=function(e){for(var t=0;t<L.length;t++){var n=L[t];if(n.event.pointerId===e.pointerId)return void L.splice(t,1)}},z=function(e){var t=L.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=M(e)},F=function(e){e.touches=L.map(function(e){return e.touch})};e.registerBinding(e.container,"pointerdown",function(e){"mouse"!==e.pointerType&&(e.preventDefault(),j(e),F(e),C(e))}),e.registerBinding(e.container,"pointerup",function(e){"mouse"!==e.pointerType&&(q(e),F(e),A(e))}),e.registerBinding(e.container,"pointercancel",function(e){"mouse"!==e.pointerType&&(q(e),F(e),D(e))}),e.registerBinding(e.container,"pointermove",function(e){"mouse"!==e.pointerType&&(e.preventDefault(),z(e),F(e),I(e))})}},t.exports=s},{"../../../collection":23,"../../../event":42,"../../../is":77,"../../../util":94}],60:[function(e,t,n){"use strict";var r=e("../../../math"),i={};i.registerNodeShapes=function(){function e(e,i){return t[e]={name:e,points:i,draw:function(e,t,r,i,a){n.nodeShapeImpl("polygon")(e,t,r,i,a,this.points)},intersectLine:function(e,t,n,i,a,o,s){return r.polygonIntersectLine(a,o,this.points,e,t,n/2,i/2,s)},checkPoint:function(n,i,a,o,s,u,l){return r.pointInsidePolygon(n,i,t[e].points,u,l,o,s,[0,-1],a)}}}var t=this.nodeShapes={},n=this;t.ellipse={name:"ellipse",draw:function(e,t,r,i,a){n.nodeShapeImpl(this.name)(e,t,r,i,a)},intersectLine:function(e,t,n,i,a,o,s){return r.intersectLineEllipse(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,r,i,a,o){return e-=a,t-=o,e/=r/2+n,t/=i/2+n,1>=e*e+t*t}},e("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),e("square",r.generateUnitNgonPointsFitToSquare(4,0)),t.rectangle=t.square,t.roundrectangle={name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,i,a){n.nodeShapeImpl(this.name)(e,t,r,i,a)},intersectLine:function(e,t,n,i,a,o,s){return r.roundRectangleIntersectLine(a,o,e,t,n,i,s)},checkPoint:function(e,t,n,i,a,o,s){var u=r.getRoundRectangleRadius(i,a);if(r.pointInsidePolygon(e,t,this.points,o,s,i,a-2*u,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,o,s,i-2*u,a,[0,-1],n))return!0;var l=function(e,t,n,r,i,a,o){return e-=n,t-=r,e/=i/2+o,t/=a/2+o,1>=e*e+t*t};return l(e,t,o-i/2+u,s-a/2+u,2*u,2*u,n)?!0:l(e,t,o+i/2-u,s-a/2+u,2*u,2*u,n)?!0:l(e,t,o+i/2-u,s+a/2-u,2*u,2*u,n)?!0:l(e,t,o-i/2+u,s+a/2-u,2*u,2*u,n)?!0:!1}},e("diamond",[0,1,1,0,0,-1,-1,0]),e("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),e("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),e("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),e("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var i=new Array(20),a=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var u=0;u<o.length/2;u++)o[2*u]*=s,o[2*u+1]*=s;for(var u=0;5>u;u++)i[4*u]=a[2*u],i[4*u+1]=a[2*u+1],i[4*u+2]=o[2*u],i[4*u+3]=o[2*u+1];i=r.fitPolygonToSquare(i),e("star",i),e("vee",[-1,-1,0,-.333,1,-1,0,1]),e("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),t.makePolygon=function(n){var r,i=n.join("$"),a="polygon-"+i;return(r=t[a])?r:e(a,n)}},t.exports=i},{"../../../math":79}],61:[function(e,t,n){"use strict";var r=e("../../../util"),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};var a=1e3/60,o=1e3;i.redraw=function(e){e=e||r.staticEmptyObject();var t=this,n=e.forcedContext;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0);var i=t.lastRedrawTime;i=a>i?a:i,i=o>i?i:o,void 0===t.lastDrawTime&&(t.lastDrawTime=0);var s=Date.now(),u=s-t.lastDrawTime,l=u>=i;return n||l&&!t.currentlyDrawing?(t.requestedFrame=!0,t.currentlyDrawing=!0,void(t.renderOptions=e)):void(t.skipFrame=!0)},i.startRenderLoop=function(){var e=this,t=function(){if(!e.destroyed){if(e.requestedFrame&&!e.skipFrame){var n=r.performanceNow();e.render(e.renderOptions);var i=e.lastRedrawTime=r.performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=i-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var a=i-n;e.redrawTotalTime+=a,e.lastRedrawTime=a,e.averageRedrawTime=e.averageRedrawTime/2+a/2,e.requestedFrame=!1}e.skipFrame=!1,r.requestAnimationFrame(t)}};r.requestAnimationFrame(t)},t.exports=i},{"../../../util":94}],62:[function(e,t,n){"use strict";var r,i={};i.arrowShapeImpl=function(e){return(r||(r={polygon:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}},"triangle-backcurve":function(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i];0===i&&(r=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(e,t,n){for(var r=t,i=0;i<r.length;i++){var a=r[i];e.lineTo(a.x,a.y)}var o=n,s=n[0];e.moveTo(s.x,s.y);for(var i=0;i<o.length;i++){var a=o[i];e.lineTo(a.x,a.y)}},circle:function(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}}))[e]},t.exports=i},{}],63:[function(e,t,n){"use strict";var r={};r.drawEdge=function(e,t,n){var r=t._private.rscratch,i=this.usePaths();if(!(r.badBezier||r.badLine||isNaN(r.allpts[0]))){var a=t._private.style;if(!(a.width.pfValue<=0)){var o=a["overlay-padding"].pfValue,s=a["overlay-opacity"].value,u=a["overlay-color"].value;if(n){if(0===s)return;this.strokeStyle(e,u[0],u[1],u[2],s),e.lineCap="round","self"!=r.edgeType||i||(e.lineCap="butt")}else{var l=a["line-color"].value;this.strokeStyle(e,l[0],l[1],l[2],a.opacity.value),e.lineCap="butt"}var c=a.width.pfValue+(n?2*o:0),h=n?"solid":a["line-style"].value;e.lineWidth=c;var f=a["shadow-blur"].pfValue,d=a["shadow-opacity"].value,p=a["shadow-color"].value,v=a["shadow-offset-x"].pfValue,g=a["shadow-offset-y"].pfValue;this.shadowStyle(e,p,n?0:d,f,v,g),this.drawEdgePath(t,e,r.allpts,h,c),this.drawArrowheads(e,t,n),this.shadowStyle(e,"transparent",0)}}},r.drawEdgePath=function(e,t,n,r,i){
var a,o=e._private.rscratch,s=t,u=!1,l=this.usePaths();if(l){var c=n.join("$"),h=o.pathCacheKey&&o.pathCacheKey===c;h?(a=t=o.pathCache,u=!0):(a=t=new Path2D,o.pathCacheKey=c,o.pathCache=a)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}if(!u)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":if(!o.badBezier)for(var f=2;f+3<n.length;f+=4)t.quadraticCurveTo(n[f],n[f+1],n[f+2],n[f+3]);break;case"straight":case"segments":case"haystack":if(!o.badLine)for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1])}t=s,l?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])},r.drawArrowheads=function(e,t,n){if(!n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}},r.drawArrowhead=function(e,t,n,r,i,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var o=this,s=t._private.style,u=s[n+"-arrow-shape"].value;if("none"!==u){var l=e.globalCompositeOperation,c="hollow"===s[n+"-arrow-fill"].value?"both":"filled",h=s[n+"-arrow-fill"].value;"half-triangle-overshot"===u&&(h="hollow",c="hollow"),(1!==s.opacity.value||"hollow"===h)&&(e.globalCompositeOperation="destination-out",o.fillStyle(e,255,255,255,1),o.strokeStyle(e,255,255,255,1),o.drawArrowShape(t,n,e,c,s.width.pfValue,s[n+"-arrow-shape"].value,r,i,a),e.globalCompositeOperation=l);var f=s[n+"-arrow-color"].value;o.fillStyle(e,f[0],f[1],f[2],s.opacity.value),o.strokeStyle(e,f[0],f[1],f[2],s.opacity.value),o.drawArrowShape(t,n,e,h,s.width.pfValue,s[n+"-arrow-shape"].value,r,i,a)}}},r.drawArrowShape=function(e,t,n,r,i,a,o,s,u){var l,c=this,h=this.usePaths(),f=e._private.rscratch,d=!1,p=n,v={x:o,y:s},g=this.getArrowWidth(i),y=c.arrowShapes[a];if(h){var m=g+"$"+a+"$"+u+"$"+o+"$"+s;f.arrowPathCacheKey=f.arrowPathCacheKey||{},f.arrowPathCache=f.arrowPathCache||{};var b=f.arrowPathCacheKey[t]===m;b?(l=n=f.arrowPathCache[t],d=!0):(l=n=new Path2D,f.arrowPathCacheKey[t]=m,f.arrowPathCache[t]=l)}n.beginPath&&n.beginPath(),d||y.draw(n,g,u,v),!y.leavePathOpen&&n.closePath&&n.closePath(),n=p,("filled"===r||"both"===r)&&(h?n.fill(l):n.fill()),("hollow"===r||"both"===r)&&(n.lineWidth=y.matchEdgeWidth?i:1,n.lineJoin="miter",h?n.stroke(l):n.stroke())},t.exports=r},{}],64:[function(e,t,n){"use strict";var r={};r.safeDrawImage=function(e,t,n,r,i,a,o,s,u,l){var c=this;try{e.drawImage(t,n,r,i,a,o,s,u,l)}catch(h){c.data.canvasNeedsRedraw[c.NODE]=!0,c.data.canvasNeedsRedraw[c.DRAG]=!0,c.drawingImage=!0,c.redraw()}},r.drawInscribedImage=function(e,t,n){var r=this,i=n._private.position.x,a=n._private.position.y,o=n._private.style,s=o["background-fit"].value,u=o["background-position-x"],l=o["background-position-y"],c=o["background-repeat"].value,h=n.width(),f=n.height(),d=n._private.rscratch,p=o["background-clip"].value,v="node"===p,g=o["background-image-opacity"].value,y=t.width||t.cachedW,m=t.height||t.cachedH;(null==y||null==m)&&(document.body.appendChild(t),y=t.cachedW=t.width||t.offsetWidth,m=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var b=y,w=m,x=o["background-width"];"auto"!==x.value&&(b="%"===x.units?x.value/100*h:x.pfValue);var _=o["background-height"];if("auto"!==_.value&&(w="%"===_.units?_.value/100*f:_.pfValue),0!==b&&0!==w){if("contain"===s){var E=Math.min(h/b,f/w);b*=E,w*=E}else if("cover"===s){var E=Math.max(h/b,f/w);b*=E,w*=E}var S=i-h/2;S+="%"===u.units?(h-b)*u.value/100:u.pfValue;var T=a-f/2;T+="%"===l.units?(f-w)*l.value/100:l.pfValue,d.pathCache&&(S-=i,T-=a,i=0,a=0);var k=e.globalAlpha;if(e.globalAlpha=g,"no-repeat"===c)v&&(e.save(),d.pathCache?e.clip(d.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(e,i,a,h,f),e.clip())),r.safeDrawImage(e,t,0,0,y,m,S,T,b,w),v&&e.restore();else{var P=e.createPattern(t,c);e.fillStyle=P,r.nodeShapes[r.getNodeShape(n)].draw(e,i,a,h,f),e.translate(S,T),e.fill(),e.translate(-S,-T)}e.globalAlpha=k}},t.exports=r},{}],65:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){var a=a||5;e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill()}var i=e("../../../is"),a={};a.drawEdgeText=function(e,t){var n=t._private.style.label.strValue;if(n&&!n.match(/^\s+$/)&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=t._private.style["font-size"].pfValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pfValue;if(!(a>r)){e.textAlign="center",e.textBaseline="middle";var o=t._private.rscratch;if(i.number(o.labelX)&&i.number(o.labelY)){var s,u=t._private.style,l="autorotate"===u["edge-text-rotation"].strValue;l?(s=o.labelAngle,e.translate(o.labelX,o.labelY),e.rotate(s),this.drawText(e,t,0,0),e.rotate(-s),e.translate(-o.labelX,-o.labelY)):this.drawText(e,t,o.labelX,o.labelY)}}}},a.drawNodeText=function(e,t){var n=t._private.style.label.strValue;if(n&&!n.match(/^\s+$/)){var r=t._private.style["font-size"].pfValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pfValue;if(!(a>r)){var o=t._private.style["text-halign"].strValue,s=t._private.style["text-valign"].strValue,u=t._private.rscratch;if(i.number(u.labelX)&&i.number(u.labelY)){switch(o){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(s){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,u.labelX,u.labelY)}}}},a.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},a.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t._private.style,i=r["font-style"].strValue,a=r["font-size"].pfValue+"px",o=r["font-family"].strValue,s=r["font-weight"].strValue,u=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*u,c=r.color.value,h=r["text-outline-color"].value,f=r["text-shadow-blur"].pfValue,d=r["text-shadow-opacity"].value,p=r["text-shadow-color"].value,v=r["text-shadow-offset-x"].pfValue,g=r["text-shadow-offset-y"].pfValue,y=t._private.fontKey,m=this.getFontCache(e);m.key!==y&&(e.font=i+" "+s+" "+a+" "+o,m.key=y);var b=this.getLabelText(t);return e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],u),this.strokeStyle(e,h[0],h[1],h[2],l),this.shadowStyle(e,p,d,f,v,g),b},a.drawText=function(e,t,n,i){var a=t._private,o=a.style,s=a.rstyle,u=a.rscratch,l=t.effectiveOpacity();if(0!==l&&0!==o["text-opacity"].value){var c=this.setupTextStyle(e,t),h=o["text-halign"].value,f=o["text-valign"].value;if(t.isEdge()&&(h="center",f="center"),t.isNode()){var d=o["padding-left"].pfValue,p=o["padding-right"].pfValue,v=o["padding-top"].pfValue,g=o["padding-bottom"].pfValue;n+=d/2,n-=p/2,i+=v/2,i-=g/2}if(null!=c&&!isNaN(n)&&!isNaN(i)){var y=o["text-background-opacity"].value,m=o["text-border-opacity"].value,b=o["text-border-width"].pfValue;if(y>0||b>0&&m>0){var w=4+b/2;t.isNode()&&("top"===f?i-=w:"bottom"===f&&(i+=w),"left"===h?n-=w:"right"===h&&(n+=w));var x=s.labelWidth,_=s.labelHeight,E=n;h&&("center"==h?E-=x/2:"left"==h&&(E-=x));var S=i;if(t.isNode()?"top"==f?S-=_:"center"==f&&(S-=_/2):S-=_/2,"autorotate"===o["edge-text-rotation"].strValue?(i=0,x+=4,E=n-x/2,S=i-_/2):(E-=w,S-=w,_+=2*w,x+=2*w),y>0){var T=e.fillStyle,k=o["text-background-color"].value;e.fillStyle="rgba("+k[0]+","+k[1]+","+k[2]+","+y*l+")";var P=o["text-background-shape"].strValue;"roundrectangle"==P?r(e,E,S,x,_,2):e.fillRect(E,S,x,_),e.fillStyle=T}if(b>0&&m>0){var O=e.strokeStyle,C=e.lineWidth,R=o["text-border-color"].value,N=o["text-border-style"].value;if(e.strokeStyle="rgba("+R[0]+","+R[1]+","+R[2]+","+m*l+")",e.lineWidth=b,e.setLineDash)switch(N){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=b/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(E,S,x,_),"double"===N){var I=b/2;e.strokeRect(E+I,S+I,x-2*I,_-2*I)}e.setLineDash&&e.setLineDash([]),e.lineWidth=C,e.strokeStyle=O}}var D=2*o["text-outline-width"].pfValue;if(D>0&&(e.lineWidth=D),"wrap"===o["text-wrap"].value){var A=u.labelWrapCachedLines,L=s.labelHeight/A.length;switch(f){case"top":i-=(A.length-1)*L;break;case"bottom":break;default:case"center":i-=(A.length-1)*L/2}for(var M=0;M<A.length;M++)D>0&&e.strokeText(A[M],n,i),e.fillText(A[M],n,i),i+=L}else D>0&&e.strokeText(c,n,i),e.fillText(c,n,i);this.shadowStyle(e,"transparent",0)}}},t.exports=a},{"../../../is":77}],66:[function(e,t,n){"use strict";var r=e("../../../is"),i={};i.drawNode=function(e,t,n){var i,a,o=this,s=t._private.style,u=t._private.rscratch,l=t._private,c=l.position;if(r.number(c.x)&&r.number(c.y)){var h,f=this.usePaths(),d=e,p=!1,v=s["overlay-padding"].pfValue,g=s["overlay-opacity"].value,y=s["overlay-color"].value;if(!n||0!==g){var m=t.effectiveOpacity();if(0!==m)if(i=t.width()+s["padding-left"].pfValue+s["padding-right"].pfValue,a=t.height()+s["padding-top"].pfValue+s["padding-bottom"].pfValue,e.lineWidth=s["border-width"].pfValue,void 0!==n&&n)g>0&&(this.fillStyle(e,y[0],y[1],y[2],g),o.nodeShapes.roundrectangle.draw(e,t._private.position.x,t._private.position.y,i+2*v,a+2*v),e.fill());else{var b,w=s["background-image"].value[2]||s["background-image"].value[1];if(void 0!==w){b=this.getCachedImage(w,function(){o.data.canvasNeedsRedraw[o.NODE]=!0,o.data.canvasNeedsRedraw[o.DRAG]=!0,o.drawingImage=!0,o.redraw()});var x=l.backgrounding;l.backgrounding=!b.complete,x!==l.backgrounding&&t.updateStyle(!1)}var _=s["background-color"].value,E=s["border-color"].value,S=s["border-style"].value;this.fillStyle(e,_[0],_[1],_[2],s["background-opacity"].value*m),this.strokeStyle(e,E[0],E[1],E[2],s["border-opacity"].value*m);var T=s["shadow-blur"].pfValue,k=s["shadow-opacity"].value,P=s["shadow-color"].value,O=s["shadow-offset-x"].pfValue,C=s["shadow-offset-y"].pfValue;if(this.shadowStyle(e,P,k,T,O,C),e.lineJoin="miter",e.setLineDash)switch(S){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var R=s.shape.strValue;if(f){var N=R+"$"+i+"$"+a;e.translate(c.x,c.y),u.pathCacheKey===N?(h=e=u.pathCache,p=!0):(h=e=new Path2D,u.pathCacheKey=N,u.pathCache=h)}if(!p){var I=c;f&&(I={x:0,y:0}),o.nodeShapes[this.getNodeShape(t)].draw(e,I.x,I.y,i,a)}e=d,f?e.fill(h):e.fill(),this.shadowStyle(e,"transparent",0),void 0!==w&&b.complete&&this.drawInscribedImage(e,b,t);var D=s["background-blacken"].value,A=s["border-width"].pfValue;if(this.hasPie(t)&&(this.drawPie(e,t,m),(0!==D||0!==A)&&(f||o.nodeShapes[this.getNodeShape(t)].draw(e,c.x,c.y,i,a))),D>0?(this.fillStyle(e,0,0,0,D),f?e.fill(h):e.fill()):0>D&&(this.fillStyle(e,255,255,255,-D),f?e.fill(h):e.fill()),A>0&&(f?e.stroke(h):e.stroke(),"double"===S)){e.lineWidth=s["border-width"].pfValue/3;var L=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f?e.stroke(h):e.stroke(),e.globalCompositeOperation=L}f&&e.translate(-c.x,-c.y),e.setLineDash&&e.setLineDash([])}}}},i.hasPie=function(e){return e=e[0],e._private.hasPie},i.drawPie=function(e,t,n){t=t[0];var r=t._private,i=t.cy().style(),a=r.style,o=a["pie-size"],s=t.width(),u=t.height(),l=r.position.x,c=r.position.y,h=Math.min(s,u)/2,f=0,d=this.usePaths();d&&(l=0,c=0),"%"===o.units?h=h*o.value/100:void 0!==o.pfValue&&(h=o.pfValue/2);for(var p=1;p<=i.pieBackgroundN;p++){var v=a["pie-"+p+"-background-size"].value,g=a["pie-"+p+"-background-color"].value,y=a["pie-"+p+"-background-opacity"].value*n,m=v/100;m+f>1&&(m=1-f);var b=1.5*Math.PI+2*Math.PI*f,w=2*Math.PI*m,x=b+w;0===v||f>=1||f+m>1||(e.beginPath(),e.moveTo(l,c),e.arc(l,c,h,b,x),e.closePath(),this.fillStyle(e,g[0],g[1],g[2],y),e.fill(),f+=m)}},t.exports=i},{"../../../is":77}],67:[function(e,t,n){"use strict";var r={},i=e("../../../util"),a=e("../../../math"),o=100;r.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},r.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},r.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},r.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},r.shadowStyle=function(e,t,n,r,i,a){var o=this.cy.zoom(),s=this.paintCache(e);(0!==s.shadowOpacity||0!==n)&&(s.shadowOpacity=n,n>0?(e.shadowBlur=r*o,e.shadowColor="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")",e.shadowOffsetX=i*o,e.shadowOffsetY=a*o):(e.shadowBlur=0,e.shadowColor="transparent"))},r.matchCanvasSize=function(e){var t=this,n=t.data,r=e.clientWidth,i=e.clientHeight,a=t.getPixelRatio(),o=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(a=o);var s,u=r*a,l=i*a;if(u!==t.canvasWidth||l!==t.canvasHeight){t.fontCaches=null;var c=n.canvasContainer;c.style.width=r+"px",c.style.height=i+"px";for(var h=0;h<t.CANVAS_LAYERS;h++)s=n.canvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");for(var h=0;h<t.BUFFER_COUNT;h++)s=n.bufferCanvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");t.textureMult=1,1>=a&&(s=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,s.width=u*t.textureMult,s.height=l*t.textureMult),t.canvasWidth=u,t.canvasHeight=l}},r.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(e){function t(e,t,n,r,i){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",f.fillStyle(e,255,255,255,f.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=a}function n(e,n){var r,i,a,o;f.clearingMotionBlur||e!==v.bufferContexts[f.MOTIONBLUR_BUFFER_NODE]&&e!==v.bufferContexts[f.MOTIONBLUR_BUFFER_DRAG]?(r=C,i=P,a=f.canvasWidth,o=f.canvasHeight):(r={x:O.x*b,y:O.y*b},i=k*b,a=f.canvasWidth*b,o=f.canvasHeight*b),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?t(e,0,0,a,o):s||void 0!==n&&!n||e.clearRect(0,0,a,o),u||(e.translate(r.x,r.y),e.scale(i,i)),h&&e.translate(h.x,h.y),c&&e.scale(c,c)}function r(e,t){for(var n=e.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(f.drawNode(t,i),V||f.drawNodeText(t,i),f.drawNode(t,i,!0)):F||(f.drawEdge(t,i),V||f.drawEdgeText(t,i),f.drawEdge(t,i,!0))}}e=e||i.staticEmptyObject();var s=e.forcedContext,u=e.drawAllLayers,l=e.drawOnlyNodeLayer,c=e.forcedZoom,h=e.forcedPan,f=this,d=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,p=f.cy,v=f.data,g=v.canvasNeedsRedraw,y=f.textureOnViewport&&!s&&(f.pinching||f.hoverData.dragging||f.swipePanning||f.data.wheelZooming),m=void 0!==e.motionBlur?e.motionBlur:f.motionBlur,b=f.motionBlurPxRatio,w=p.hasCompoundNodes(),x=f.hoverData.draggingEles,_=f.hoverData.selecting||f.touchData.selecting?!0:!1;m=m&&!s&&f.motionBlurEnabled&&!_;var E=m;!s&&f.motionBlurTimeout&&clearTimeout(f.motionBlurTimeout),m&&(null==f.mbFrames&&(f.mbFrames=0),f.drawingImage||f.mbFrames++,f.mbFrames<3&&(E=!1),f.mbFrames>f.minMbLowQualFrames&&(f.motionBlurPxRatio=f.mbPxRBlurry)),f.clearingMotionBlur&&(f.motionBlurPxRatio=1),f.textureDrawLastFrame&&!y&&(g[f.NODE]=!0,g[f.SELECT_BOX]=!0);var S=f.getCachedEdges(),T=p.style()._private.coreStyle,k=p.zoom(),P=void 0!==c?c:k,O=p.pan(),C={x:O.x,y:O.y},R={zoom:k,pan:{x:O.x,y:O.y}},N=f.prevViewport,I=void 0===N||R.zoom!==N.zoom||R.pan.x!==N.pan.x||R.pan.y!==N.pan.y;I||x&&!w||(f.motionBlurPxRatio=1),h&&(C=h),P*=d,C.x*=d,C.y*=d;var D={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(y||(f.textureDrawLastFrame=!1),y){f.textureDrawLastFrame=!0;var A;if(!f.textureCache){f.textureCache={},A=f.textureCache.bb=p.elements().boundingBox(),f.textureCache.texture=f.data.bufferCanvases[f.TEXTURE_BUFFER];var L=f.data.bufferContexts[f.TEXTURE_BUFFER];L.setTransform(1,0,0,1,0,0),L.clearRect(0,0,f.canvasWidth*f.textureMult,f.canvasHeight*f.textureMult),f.render({forcedContext:L,drawOnlyNodeLayer:!0,forcedPxRatio:d*f.textureMult});var R=f.textureCache.viewport={zoom:p.zoom(),pan:p.pan(),width:f.canvasWidth,height:f.canvasHeight};R.mpan={x:(0-R.pan.x)/R.zoom,y:(0-R.pan.y)/R.zoom}}g[f.DRAG]=!1,g[f.NODE]=!1;var M=v.contexts[f.NODE],B=f.textureCache.texture,R=f.textureCache.viewport;A=f.textureCache.bb,M.setTransform(1,0,0,1,0,0),m?t(M,0,0,R.width,R.height):M.clearRect(0,0,R.width,R.height);var j=T["outside-texture-bg-color"].value,q=T["outside-texture-bg-opacity"].value;f.fillStyle(M,j[0],j[1],j[2],q),M.fillRect(0,0,R.width,R.height);var k=p.zoom();n(M,!1),M.clearRect(R.mpan.x,R.mpan.y,R.width/R.zoom/d,R.height/R.zoom/d),M.drawImage(B,R.mpan.x,R.mpan.y,R.width/R.zoom/d,R.height/R.zoom/d)}else f.textureOnViewport&&!s&&(f.textureCache=null);var z=f.pinching||f.hoverData.dragging||f.swipePanning||f.data.wheelZooming||f.hoverData.draggingEles,F=f.hideEdgesOnViewport&&z,V=f.hideLabelsOnViewport&&z;if(g[f.DRAG]||g[f.NODE]||u||l){F||f.findEdgeControlPoints(S);for(var U=f.getCachedZSortedEles(),Y=p.extent(),X=0;X<U.length;X++){var H,$=U[X],A=s?null:$.boundingBox(),W=s?!0:a.boundingBoxesIntersect(Y,A);W&&(H=$._private.rscratch.inDragLayer?D.drag:D.nondrag,H.eles.push($))}}var G=[];if(G[f.NODE]=!g[f.NODE]&&m&&!f.clearedForMotionBlur[f.NODE]||f.clearingMotionBlur,G[f.NODE]&&(f.clearedForMotionBlur[f.NODE]=!0),G[f.DRAG]=!g[f.DRAG]&&m&&!f.clearedForMotionBlur[f.DRAG]||f.clearingMotionBlur,G[f.DRAG]&&(f.clearedForMotionBlur[f.DRAG]=!0),g[f.NODE]||u||l||G[f.NODE]){var K=m&&!G[f.NODE]&&1!==b,M=s||(K?f.data.bufferContexts[f.MOTIONBLUR_BUFFER_NODE]:v.contexts[f.NODE]),Z=m&&!K?"motionBlur":void 0;n(M,Z),r(D.nondrag,M),u||m||(g[f.NODE]=!1)}if(!l&&(g[f.DRAG]||u||G[f.DRAG])){var K=m&&!G[f.DRAG]&&1!==b,M=s||(K?f.data.bufferContexts[f.MOTIONBLUR_BUFFER_DRAG]:v.contexts[f.DRAG]);n(M,m&&!K?"motionBlur":void 0),r(D.drag,M),u||m||(g[f.DRAG]=!1)}if(f.showFps||!l&&g[f.SELECT_BOX]&&!u){var M=s||v.contexts[f.SELECT_BOX];if(n(M),1==f.selection[4]&&(f.hoverData.selecting||f.touchData.selecting)){var k=f.cy.zoom(),J=T["selection-box-border-width"].value/k;M.lineWidth=J,M.fillStyle="rgba("+T["selection-box-color"].value[0]+","+T["selection-box-color"].value[1]+","+T["selection-box-color"].value[2]+","+T["selection-box-opacity"].value+")",M.fillRect(f.selection[0],f.selection[1],f.selection[2]-f.selection[0],f.selection[3]-f.selection[1]),J>0&&(M.strokeStyle="rgba("+T["selection-box-border-color"].value[0]+","+T["selection-box-border-color"].value[1]+","+T["selection-box-border-color"].value[2]+","+T["selection-box-opacity"].value+")",M.strokeRect(f.selection[0],f.selection[1],f.selection[2]-f.selection[0],f.selection[3]-f.selection[1]))}if(v.bgActivePosistion&&!f.hoverData.selecting){var k=f.cy.zoom(),Q=v.bgActivePosistion;M.fillStyle="rgba("+T["active-bg-color"].value[0]+","+T["active-bg-color"].value[1]+","+T["active-bg-color"].value[2]+","+T["active-bg-opacity"].value+")",M.beginPath(),M.arc(Q.x,Q.y,T["active-bg-size"].pfValue/k,0,2*Math.PI),M.fill()}var ee=f.lastRedrawTime;if(f.showFps&&ee){ee=Math.round(ee);var te=Math.round(1e3/ee);M.setTransform(1,0,0,1,0,0),M.fillStyle="rgba(255, 0, 0, 0.75)",M.strokeStyle="rgba(255, 0, 0, 0.75)",M.lineWidth=1,M.fillText("1 frame = "+ee+" ms = "+te+" fps",0,20);var ne=60;M.strokeRect(0,30,250,20),M.fillRect(0,30,250*Math.min(te/ne,1),20)}u||(g[f.SELECT_BOX]=!1)}if(m&&1!==b){var re=v.contexts[f.NODE],ie=f.data.bufferCanvases[f.MOTIONBLUR_BUFFER_NODE],ae=v.contexts[f.DRAG],oe=f.data.bufferCanvases[f.MOTIONBLUR_BUFFER_DRAG],se=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!E?e.clearRect(0,0,f.canvasWidth,f.canvasHeight):t(e,0,0,f.canvasWidth,f.canvasHeight);var i=b;e.drawImage(n,0,0,f.canvasWidth*i,f.canvasHeight*i,0,0,f.canvasWidth,f.canvasHeight)};(g[f.NODE]||G[f.NODE])&&(se(re,ie,G[f.NODE]),g[f.NODE]=!1),(g[f.DRAG]||G[f.DRAG])&&(se(ae,oe,G[f.DRAG]),g[f.DRAG]=!1)}f.currentlyDrawing=!1,f.prevViewport=R,f.clearingMotionBlur&&(f.clearingMotionBlur=!1,f.motionBlurCleared=!0,f.motionBlur=!0),m&&(f.motionBlurTimeout=setTimeout(function(){f.motionBlurTimeout=null,f.clearedForMotionBlur[f.NODE]=!1,f.clearedForMotionBlur[f.DRAG]=!1,f.motionBlur=!1,f.clearingMotionBlur=!y,f.mbFrames=0,g[f.NODE]=!0,g[f.DRAG]=!0,f.redraw()},o)),f.drawingImage=!1,s||f.initrender||(f.initrender=!0,p.trigger("initrender")),s||p.triggerOnRender()},t.exports=r},{"../../../math":79,"../../../util":94}],68:[function(e,t,n){"use strict";var r=e("../../../math"),i={};i.drawPolygonPath=function(e,t,n,r,i,a){var o=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],n+s*a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(t+o*a[2*u],n+s*a[2*u+1]);e.closePath()},i.drawRoundRectanglePath=function(e,t,n,i,a,o){var s=i/2,u=a/2,l=r.getRoundRectangleRadius(i,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-u),e.arcTo(t+s,n-u,t+s,n,l),e.arcTo(t+s,n+u,t,n+u,l),e.arcTo(t-s,n+u,t-s,n,l),e.arcTo(t-s,n-u,t,n-u,l),e.lineTo(t,n-u),e.closePath()};for(var a=Math.sin(0),o=Math.cos(0),s={},u={},l=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var c,h,f=r/2,d=i/2,p=0*Math.PI;p<2*Math.PI;p+=l)c=t-f*s[p]*a+f*u[p]*o,h=n+d*u[p]*a+d*s[p]*o,0===p?e.moveTo(c,h):e.lineTo(c,h);e.closePath()},t.exports=i},{"../../../math":79}],69:[function(e,t,n){"use strict";var r=e("../../../is"),i={};i.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},i.bufferCanvasImage=function(e){var t=this.cy,n=t.elements().boundingBox(),i=e.full?Math.ceil(n.w):this.container.clientWidth,a=e.full?Math.ceil(n.h):this.container.clientHeight,o=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,o=e.scale;else if(r.number(e.maxWidth)||r.number(e.maxHeight)){var s=1/0,u=1/0;r.number(e.maxWidth)&&(s=o*e.maxWidth/i),r.number(e.maxHeight)&&(u=o*e.maxHeight/a),o=Math.min(s,u),i*=o,a*=o}var l=document.createElement("canvas");l.width=i,l.height=a,l.style.width=i+"px",l.style.height=a+"px";var c=l.getContext("2d");if(i>0&&a>0)if(c.clearRect(0,0,i,a),e.bg&&(c.fillStyle=e.bg,c.rect(0,0,i,a),c.fill()),c.globalCompositeOperation="source-over",e.full)this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-n.x1*o,y:-n.y1*o},forcedPxRatio:1});else{var h=t.pan(),f={x:h.x*o,y:h.y*o},d=t.zoom()*o;this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:d,forcedPan:f,forcedPxRatio:1})}return l},i.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")},i.jpg=function(e){return this.bufferCanvasImage(e).toDataURL("image/jpeg")},t.exports=i},{"../../../is":77}],70:[function(e,t,n){"use strict";function r(e){var t=this;t.data={canvases:new Array(o.CANVAS_LAYERS),contexts:new Array(o.CANVAS_LAYERS),canvasNeedsRedraw:new Array(o.CANVAS_LAYERS),bufferCanvases:new Array(o.BUFFER_COUNT),bufferContexts:new Array(o.CANVAS_LAYERS)},t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;n.position="absolute",n.zIndex="0",n.overflow="hidden",e.cy.container().appendChild(t.data.canvasContainer);for(var r=0;r<o.CANVAS_LAYERS;r++){var i=t.data.canvases[r]=document.createElement("canvas");t.data.contexts[r]=i.getContext("2d"),i.setAttribute("style","-ms-touch-action: none; touch-action: none;"),i.style.position="absolute",i.setAttribute("data-id","layer"+r),i.style.zIndex=String(o.CANVAS_LAYERS-r),t.data.canvasContainer.appendChild(i),t.data.canvasNeedsRedraw[r]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[o.NODE].setAttribute("data-id","layer"+o.NODE+"-node"),t.data.canvases[o.SELECT_BOX].setAttribute("data-id","layer"+o.SELECT_BOX+"-selectbox"),t.data.canvases[o.DRAG].setAttribute("data-id","layer"+o.DRAG+"-drag");for(var r=0;r<o.BUFFER_COUNT;r++)t.data.bufferCanvases[r]=document.createElement("canvas"),t.data.bufferContexts[r]=t.data.bufferCanvases[r].getContext("2d"),t.data.bufferCanvases[r].style.position="absolute",t.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),t.data.bufferCanvases[r].style.zIndex=String(-r-1),t.data.bufferCanvases[r].style.visibility="hidden";t.pathsEnabled=!0}var i=e("../../../util"),a=r,o=r.prototype;o.CANVAS_LAYERS=3,o.SELECT_BOX=0,o.DRAG=1,o.NODE=2,o.BUFFER_COUNT=3,o.TEXTURE_BUFFER=0,o.MOTIONBLUR_BUFFER_NODE=1,o.MOTIONBLUR_BUFFER_DRAG=2,o.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[o.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[o.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[o.SELECT_BOX]=t}};var s="undefined"!=typeof Path2D;o.path2dEnabled=function(e){return void 0===e?this.pathsEnabled:void(this.pathsEnabled=e?!0:!1)},o.usePaths=function(){return s&&this.pathsEnabled},[e("./arrow-shapes"),e("./drawing-edges"),e("./drawing-images"),e("./drawing-label-text"),e("./drawing-nodes"),e("./drawing-redraw"),e("./drawing-shapes"),e("./export-image"),e("./node-shapes")].forEach(function(e){i.extend(o,e)}),t.exports=a},{"../../../util":94,"./arrow-shapes":62,"./drawing-edges":63,"./drawing-images":64,"./drawing-label-text":65,"./drawing-nodes":66,"./drawing-redraw":67,"./drawing-shapes":68,"./export-image":69,"./node-shapes":71}],71:[function(e,t,n){"use strict";var r,i={};i.nodeShapeImpl=function(e){var t=this;return(r||(r={ellipse:function(e,n,r,i,a){t.drawEllipsePath(e,n,r,i,a)},polygon:function(e,n,r,i,a,o){t.drawPolygonPath(e,n,r,i,a,o)},roundrectangle:function(e,n,r,i,a){t.drawRoundRectanglePath(e,n,r,i,a,10)}}))[e]},t.exports=i},{}],72:[function(e,t,n){"use strict";t.exports=[{name:"null",impl:e("./null")},{name:"base",impl:e("./base")},{name:"canvas",impl:e("./canvas")}]},{"./base":58,"./canvas":70,"./null":73}],73:[function(e,t,n){"use strict";function r(e){this.options=e,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},t.exports=r},{}],74:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),a=e("./thread"),o=e("./promise"),s=e("./define"),u=function(t){if(!(this instanceof u))return new u(t);this._private={pass:[]};var n=4;if(r.number(t),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)t=navigator.hardwareConcurrency;else try{t=e("os").cpus().length}catch(i){t=n}for(var o=0;t>o;o++)this[o]=new a;this.length=t},l=u.prototype;i.extend(l,{instanceString:function(){return"fabric"},require:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.require(e,t)}return this},random:function(){var e=Math.round((this.length-1)*Math.random()),t=this[e];return t},run:function(e){var t=this._private.pass.shift();return this.random().pass(t).run(e)},message:function(e){return this.random().message(e)},broadcast:function(e){for(var t=0;t<this.length;t++){var n=this[t];n.message(e)}return this},stop:function(){for(var e=0;e<this.length;e++){var t=this[e];t.stop()}return this},pass:function(e){var t=this._private.pass;if(!r.array(e))throw"Only arrays may be used with fabric.pass()";return t.push(e),this},spreadSize:function(){var e=Math.ceil(this._private.pass[0].length/this.length);return e=Math.max(1,e)},spread:function(e){for(var t=this,n=t._private,r=t.spreadSize(),i=n.pass.shift().concat([]),a=[],s=0;s<this.length;s++){var u=this[s],l=i.splice(0,r),c=u.pass(l).run(e);a.push(c);var h=0===i.length;if(h)break}return o.all(a).then(function(e){for(var t=[],n=0,r=0;r<e.length;r++)for(var i=e[r],a=0;a<i.length;a++){var o=i[a];t[n++]=o}return t})},map:function(e){var t=this;return t.require(e,"_$_$_fabmap"),t.spread(function(e){var t=[],n=resolve;resolve=function(e){t.push(e)};for(var r=0;r<e.length;r++){var i=t.length,a=_$_$_fabmap(e[r]),o=i===t.length;o&&t.push(a)}return resolve=n,t})},filter:function(e){var t=this._private,n=t.pass[0];return this.map(e).then(function(e){for(var t=[],r=0;r<n.length;r++){var i=n[r],a=e[r];a&&t.push(i)}return t})},sort:function(e){var t=this,n=this._private.pass[0].length,r=this.spreadSize();return e=e||function(e,t){return t>e?-1:e>t?1:0},t.require(e,"_$_$_cmp"),t.spread(function(e){var t=e.sort(_$_$_cmp);resolve(t)}).then(function(t){for(var i=function(r,i,a){i=Math.min(i,n),a=Math.min(a,n);for(var o=r,s=i,u=[],l=o;a>l;l++){var c=t[r],h=t[i];s>r&&(i>=a||e(c,h)<=0)?(u.push(c),r++):(u.push(h),i++)}for(var l=0;l<u.length;l++){var f=o+l;t[f]=u[l]}},a=r;n>a;a*=2)for(var o=0;n>o;o+=2*a)i(o,o+a,o+2*a);return t})}});var c=function(e){return e=e||{},function(t,n){var r=this._private.pass.shift();return this.random().pass(r)[e.threadFn](t,n)}};i.extend(l,{randomMap:c({threadFn:"map"}),reduce:c({threadFn:"reduce"}),reduceRight:c({threadFn:"reduceRight"})});var h=l;h.promise=h.run,h.terminate=h.halt=h.stop,h.include=h.require,i.extend(l,{on:s.on(),one:s.on({unbindSelfOnTrigger:!0}),off:s.off(),trigger:s.trigger()}),s.eventAliasesOn(l),t.exports=u},{"./define":41,"./is":77,"./promise":80,"./thread":92,"./util":94,os:void 0}],75:[function(e,t,n){"use strict";(function(){var e,r,i,a,o,s,u,l,c,h,f,d,p,v,g;i=Math.floor,h=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,a,o){var s;if(null==n&&(n=0),null==o&&(o=r),0>n)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);a>n;)s=i((n+a)/2),o(t,e[s])<0?a=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),v(e,0,e.length-1,n)},o=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,g(e,0,t)):i=n,i},l=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,g(e,0,n),i},u=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],g(e,0,n)),t},a=function(e,t){var n,a,o,s,u,l;for(null==t&&(t=r),s=function(){l=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],a=0,o=s.length;o>a;a++)n=s[a],u.push(g(e,n,t));return u},p=function(e,t,n){var i;return null==n&&(n=r),i=e.indexOf(t),-1!==i?(v(e,0,i,n),g(e,i,n)):void 0},f=function(e,t,n){var i,o,s,l,c;if(null==n&&(n=r),o=e.slice(0,t),!o.length)return o;for(a(o,n),c=e.slice(t),s=0,l=c.length;l>s;s++)i=c[s],u(o,i,n);return o.sort(n).reverse()},d=function(e,t,n){var i,s,u,l,f,d,p,v,g,y;if(null==n&&(n=r),10*t<=e.length){if(l=e.slice(0,t).sort(n),!l.length)return l;for(u=l[l.length-1],v=e.slice(t),f=0,p=v.length;p>f;f++)i=v[f],n(i,u)<0&&(c(l,i,0,null,n),l.pop(),u=l[l.length-1]);return l}for(a(e,n),y=[],s=d=0,g=h(t,e.length);g>=0?g>d:d>g;s=g>=0?++d:--d)y.push(o(e,n));return y},v=function(e,t,n,i){var a,o,s;for(null==i&&(i=r),a=e[n];n>t&&(s=n-1>>1,o=e[s],i(a,o)<0);)e[n]=o,n=s;return e[n]=a},g=function(e,t,n){var i,a,o,s,u;for(null==n&&(n=r),a=e.length,u=t,o=e[t],i=2*t+1;a>i;)s=i+1,a>s&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=o,v(e,u,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=o,e.replace=l,e.pushpop=u,e.heapify=a,e.updateItem=p,e.nlargest=f,e.nsmallest=d,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){
return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],76:[function(e,t,n){"use strict";var r=e("./window"),i=e("./is"),a=e("./core"),o=e("./extension"),s=e("./jquery-plugin"),u=e("./stylesheet"),l=e("./thread"),c=e("./fabric"),h=function(e){return void 0===e&&(e={}),i.plainObject(e)?new a(e):i.string(e)?o.apply(o,arguments):void 0};h.version="2.5.0",r&&r.jQuery&&s(r.jQuery,h),h.registerJquery=function(e){s(e,h)},h.stylesheet=h.Stylesheet=u,h.thread=h.Thread=l,h.fabric=h.Fabric=c,t.exports=h},{"./core":34,"./extension":43,"./fabric":74,"./is":77,"./jquery-plugin":78,"./stylesheet":91,"./thread":92,"./window":100}],77:[function(e,t,n){"use strict";var r=e("./window"),i=r?r.navigator:null,a="string",o=typeof{},s="function",u=typeof HTMLElement,l=function(e){return e&&e.instanceString&&c.fn(e.instanceString)?e.instanceString():null},c={defined:function(e){return null!=e},string:function(e){return null!=e&&typeof e==a},fn:function(e){return null!=e&&typeof e===s},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(e){return null!=e&&typeof e===o&&!c.array(e)&&e.constructor===Object},object:function(e){return null!=e&&typeof e===o},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(e){return c.number(e)&&Math.floor(e)===e},bool:function(e){return null!=e&&typeof e==typeof!0},htmlElement:function(e){return"undefined"===u?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection:function(e){return c.element(e)||c.collection(e)},element:function(e){return"collection"===l(e)&&e._private.single},collection:function(e){return"collection"===l(e)&&!e._private.single},core:function(e){return"core"===l(e)},style:function(e){return"style"===l(e)},stylesheet:function(e){return"stylesheet"===l(e)},event:function(e){return"event"===l(e)},thread:function(e){return"thread"===l(e)},fabric:function(e){return"fabric"===l(e)},emptyString:function(e){return e?c.string(e)&&(""===e||e.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(e){return e&&c.string(e)&&""!==e&&!e.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(e){return c.plainObject(e)&&c.number(e.x1)&&c.number(e.x2)&&c.number(e.y1)&&c.number(e.y2)},promise:function(e){return c.object(e)&&c.fn(e.then)},touch:function(){return r&&("ontouchstart"in r||r.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return i&&i.vendor.match(/kde/i)},khtmlEtc:function(){return c.khtml()||c.webkit()||c.chromium()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return i&&i.appVersion.match(/Win/i)},mac:function(){return i&&i.appVersion.match(/Mac/i)},linux:function(){return i&&i.appVersion.match(/Linux/i)},unix:function(){return i&&i.appVersion.match(/X11/i)}};t.exports=c},{"./window":100}],78:[function(e,t,n){"use strict";var r=e("./is"),i=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t},a=function(e,t){e&&(e.fn.cytoscape||(e.fn.cytoscape=function(n){var a=e(this);if("get"===n)return i(a).cy;if(r.fn(n)){var o=n,s=i(a).cy;if(s&&s.isReady())s.trigger("ready",[],o);else{var u=i(a),l=u.readies=u.readies||[];l.push(o)}}else if(r.plainObject(n))return a.each(function(){var r=e.extend({},n,{container:e(this)[0]});t(r)})},e.cytoscape=t,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape)))};t.exports=a},{"./is":77}],79:[function(e,t,n){"use strict";var r={};r.signum=function(e){return e>0?1:0>e?-1:0},r.distance=function(e,t){return Math.sqrt(r.sqDistance(e,t))},r.sqDistance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},r.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},r.qbezierPtAt=function(e,t,n,i){return{x:r.qbezierAt(e.x,t.x,n.x,i),y:r.qbezierAt(e.y,t.y,n.y,i)}},r.makeBoundingBox=function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},r.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0},r.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},r.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},r.roundRectangleIntersectLine=function(e,t,n,r,i,a,o){var s,u=this.getRoundRectangleRadius(i,a),l=i/2,c=a/2,h=n-l+u-o,f=r-c-o,d=n+l-u+o,p=f;if(s=this.finiteLinesIntersect(e,t,n,r,h,f,d,p,!1),s.length>0)return s;var v=n+l+o,g=r-c+u-o,y=v,m=r+c-u+o;if(s=this.finiteLinesIntersect(e,t,n,r,v,g,y,m,!1),s.length>0)return s;var b=n-l+u-o,w=r+c+o,x=n+l-u+o,_=w;if(s=this.finiteLinesIntersect(e,t,n,r,b,w,x,_,!1),s.length>0)return s;var E=n-l-o,S=r-c+u-o,T=E,k=r+c-u+o;if(s=this.finiteLinesIntersect(e,t,n,r,E,S,T,k,!1),s.length>0)return s;var P,O=n-l+u,C=r-c+u;if(P=this.intersectLineCircle(e,t,n,r,O,C,u+o),P.length>0&&P[0]<=O&&P[1]<=C)return[P[0],P[1]];var R=n+l-u,N=r-c+u;if(P=this.intersectLineCircle(e,t,n,r,R,N,u+o),P.length>0&&P[0]>=R&&P[1]<=N)return[P[0],P[1]];var I=n+l-u,D=r+c-u;if(P=this.intersectLineCircle(e,t,n,r,I,D,u+o),P.length>0&&P[0]>=I&&P[1]>=D)return[P[0],P[1]];var A=n-l+u,L=r+c-u;return P=this.intersectLineCircle(e,t,n,r,A,L,u+o),P.length>0&&P[0]<=A&&P[1]>=L?[P[0],P[1]]:[]},r.inLineVicinity=function(e,t,n,r,i,a,o){var s=o,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,a),h=Math.max(r,a);return e>=u-s&&l+s>=e&&t>=c-s&&h+s>=t},r.inBezierVicinity=function(e,t,n,r,i,a,o,s,u){var l={x1:Math.min(n,o,i)-u,x2:Math.max(n,o,i)+u,y1:Math.min(r,s,a)-u,y2:Math.max(r,s,a)+u};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0},r.solveCubic=function(e,t,n,r,i){t/=e,n/=e,r/=e;var a,o,s,u,l,c,h,f;return o=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*(t*t)),s/=54,a=o*o*o+s*s,i[1]=0,h=t/3,a>0?(l=s+Math.sqrt(a),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(a),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===a?(f=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*f,void(i[4]=i[2]=-(f+h))):(o=-o,u=o*o*o,u=Math.acos(s/Math.sqrt(u)),f=2*Math.sqrt(o),i[0]=-h+f*Math.cos(u/3),i[2]=-h+f*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+f*Math.cos((u+4*Math.PI)/3))))},r.sqDistanceToQuadraticBezier=function(e,t,n,r,i,a,o,s){var u=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,l=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,c=3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,h=1*n*i-n*n+n*e-i*e+r*a-r*r+r*t-a*t,f=[];this.solveCubic(u,l,c,h,f);for(var d=1e-7,p=[],v=0;6>v;v+=2)Math.abs(f[v+1])<d&&f[v]>=0&&f[v]<=1&&p.push(f[v]);p.push(1),p.push(0);for(var g,y,m,b,w=-1,x=0;x<p.length;x++)y=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*o,m=Math.pow(1-p[x],2)*r+2*(1-p[x])*p[x]*a+p[x]*p[x]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),w>=0?w>b&&(w=b,g=p[x]):(w=b,g=p[x]);return w},r.sqDistanceToFiniteLine=function(e,t,n,r,i,a){var o=[e-n,t-r],s=[i-n,a-r],u=s[0]*s[0]+s[1]*s[1],l=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],h=c*c/u;return 0>c?l:h>u?(e-i)*(e-i)+(t-a)*(t-a):l-h},r.pointInsidePolygonPoints=function(e,t,n){for(var r,i,a,o,s,u=0,l=0,c=0;c<n.length/2;c++)if(r=n[2*c],i=n[2*c+1],c+1<n.length/2?(a=n[2*(c+1)],o=n[2*(c+1)+1]):(a=n[2*(c+1-n.length/2)],o=n[2*(c+1-n.length/2)+1]),r==e&&a==e);else{if(!(r>=e&&e>=a||e>=r&&a>=e))continue;s=(e-r)/(a-r)*(o-i)+i,s>t&&u++,t>s&&l++}return u%2===0?!1:!0},r.pointInsidePolygon=function(e,t,n,i,a,o,s,u,l){var c,h=new Array(n.length);null!=u[0]?(c=Math.atan(u[1]/u[0]),u[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=u;for(var f=Math.cos(-c),d=Math.sin(-c),p=0;p<h.length/2;p++)h[2*p]=o/2*(n[2*p]*f-n[2*p+1]*d),h[2*p+1]=s/2*(n[2*p+1]*f+n[2*p]*d),h[2*p]+=i,h[2*p+1]+=a;var v;if(l>0){var g=this.expandPolygon(h,-l);v=this.joinLines(g)}else v=h;return r.pointInsidePolygonPoints(e,t,v)},r.joinLines=function(e){for(var t,n,r,i,a,o,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],u=e[3]);var h=this.finiteLinesIntersect(t,n,r,i,a,o,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},r.expandPolygon=function(e,t){for(var n,r,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var u=a-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,f=l/c;o[4*s]=n+h*t,o[4*s+1]=r+f*t,o[4*s+2]=i+h*t,o[4*s+3]=a+f*t}return o},r.intersectLineEllipse=function(e,t,n,r,i,a){var o=n-e,s=r-t;o/=i,s/=a;var u=Math.sqrt(o*o+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},r.intersectLineCircle=function(e,t,n,r,i,a,o){var s=[n-e,r-t],u=[i,a],l=[e-i,t-a],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-o*o,f=h*h-4*c*u;if(0>f)return[];var d=(-h+Math.sqrt(f))/(2*c),p=(-h-Math.sqrt(f))/(2*c),v=Math.min(d,p),g=Math.max(d,p),y=[];if(v>=0&&1>=v&&y.push(v),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var w=y[1]*s[0]+e,x=y[1]*s[1]+t;return[m,b,w,x]}return[m,b]},r.findCircleNearPoint=function(e,t,n,r,i){var a=r-e,o=i-t,s=Math.sqrt(a*a+o*o),u=a/s,l=o/s;return[e+u*n,t+l*n]},r.findMaxSqDistanceToOrigin=function(e){for(var t,n=1e-6,r=0;r<e.length/2;r++)t=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],t>n&&(n=t);return n},r.finiteLinesIntersect=function(e,t,n,r,i,a,o,s,u){var l=(o-i)*(t-a)-(s-a)*(e-i),c=(n-e)*(t-a)-(r-t)*(e-i),h=(s-a)*(n-e)-(o-i)*(r-t);if(0!==h){var f=l/h,d=c/h;return f>=0&&1>=f&&d>=0&&1>=d?[e+f*(n-e),t+f*(r-t)]:u?[e+f*(n-e),t+f*(r-t)]:[]}return 0===l||0===c?[e,n,o].sort()[1]===o?[o,s]:[e,n,i].sort()[1]===i?[i,a]:[i,o,n].sort()[1]===n?[n,r]:[]:[]},r.polygonIntersectLine=function(e,t,n,i,a,o,s,u){for(var l,c=[],h=new Array(n.length),f=0;f<h.length/2;f++)h[2*f]=n[2*f]*o+i,h[2*f+1]=n[2*f+1]*s+a;var d;if(u>0){var p=r.expandPolygon(h,-u);d=r.joinLines(p)}else d=h;for(var v,g,y,m,f=0;f<d.length/2;f++)v=d[2*f],g=d[2*f+1],f<d.length/2-1?(y=d[2*(f+1)],m=d[2*(f+1)+1]):(y=d[0],m=d[1]),l=this.finiteLinesIntersect(e,t,i,a,v,g,y,m),0!==l.length&&c.push(l[0],l[1]);return c},r.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return 0>a&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},r.generateUnitNgonPointsFitToSquare=function(e,t){var n=r.generateUnitNgonPoints(e,t);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(e){for(var t,n,r=e.length/2,i=1/0,a=1/0,o=-(1/0),s=-(1/0),u=0;r>u;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);for(var l=2/(o-i),c=2/(s-a),u=0;r>u;u++)t=e[2*u]=e[2*u]*l,n=e[2*u+1]=e[2*u+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);if(-1>a)for(var u=0;r>u;u++)n=e[2*u+1]=e[2*u+1]+(-1-a);return e},r.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,a,o,s=new Array(2*e),u=0;e>u;u++)i=u*n+r,a=s[2*u]=Math.cos(i),o=s[2*u+1]=Math.sin(-i);return s},r.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},t.exports=r},{}],80:[function(e,t,n){"use strict";var r=0,i=1,a=2,o=function(e){return this instanceof o?(this.id="Thenable/1.0.7",this.state=r,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new o(e)};o.prototype={fulfill:function(e){return s(this,i,"fulfillValue",e)},reject:function(e){return s(this,a,"rejectReason",e)},then:function(e,t){var n=this,r=new o;return n.onFulfilled.push(c(e,r,"fulfill")),n.onRejected.push(c(t,r,"reject")),u(n),r.proxy}};var s=function(e,t,n,i){return e.state===r&&(e.state=t,e[n]=i,u(e)),e},u=function(e){e.state===i?l(e,"onFulfilled",e.fulfillValue):e.state===a&&l(e,"onRejected",e.rejectReason)},l=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},c=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(a){return void t.reject(a)}h(t,i)}}},h=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):h(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(r){i||e.reject(r)}}},f="undefined"==typeof f?o:f;f.all=f.all||function(e){return new f(function(t,n){for(var r=new Array(e.length),i=0,a=function(n,a){r[n]=a,i++,i===e.length&&t(r)},o=0;o<e.length;o++)!function(t){var r=e[t],i=null!=r.then;if(i)r.then(function(e){a(t,e)},function(e){n(e)});else{var o=r;a(t,o)}}(o)})},t.exports=f},{}],81:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),a=function(e,t){if(!(this instanceof a))return new a(e,t);void 0===t&&void 0!==e&&(t=e,e=void 0);var n=this;if(n._private={selectorText:null,invalid:!0},!t||r.string(t)&&t.match(/^\s*$/))null==e?n.length=0:(n[0]=u(),n[0].group=e,n.length=1);else if(r.elementOrCollection(t)){var o=t.collection();n[0]=u(),n[0].collection=o,n.length=1}else if(r.fn(t))n[0]=u(),n[0].filter=t,n.length=1;else{if(!r.string(t))return void i.error("A selector must be created from a string; found "+t);var s=null,u=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},l={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:i.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};l.variable="(?:[\\w-]|(?:\\\\"+l.metaChar+"))+",l.value=l.string+"|"+l.number,l.className=l.variable,l.id=l.variable;for(var c=function(e){return e.replace(new RegExp("\\\\("+l.metaChar+")","g"),function(e,t,n,r){return t})},h=l.comparatorOp.split("|"),f=0;f<h.length;f++){var d=h[f];l.comparatorOp+="|@"+d}for(var h=l.comparatorOp.split("|"),f=0;f<h.length;f++){var d=h[f];d.indexOf("!")>=0||"="!==d&&(l.comparatorOp+="|\\!"+d)}var p=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(e){this.colonSelectors.push(e)}},{name:"id",query:!0,regex:"\\#("+l.id+")",populate:function(e){this.ids.push(c(e))}},{name:"className",query:!0,regex:"\\.("+l.className+")",populate:function(e){this.classes.push(c(e))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+l.variable+")\\s*\\]",populate:function(e){this.data.push({field:c(e)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+l.variable+")\\s*("+l.comparatorOp+")\\s*("+l.value+")\\s*\\]",populate:function(e,t,n){var r=null!=new RegExp("^"+l.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:c(e),operator:t,value:n})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+l.boolOp+")\\s*("+l.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:c(t),operator:e})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+l.meta+")\\s*("+l.comparatorOp+")\\s*("+l.number+")\\s*\\]\\]",populate:function(e,t,n){this.meta.push({field:c(e),operator:t,value:parseFloat(n)})}},{name:"nextQuery",separator:!0,regex:l.separator,populate:function(){n[++f]=u(),s=null}},{name:"child",separator:!0,regex:l.child,populate:function(){var e=u();e.parent=this,e.subject=s,n[f]=e}},{name:"descendant",separator:!0,regex:l.descendant,populate:function(){var e=u();e.ancestor=this,e.subject=s,n[f]=e}},{name:"subject",modifier:!0,regex:l.subject,populate:function(){return null!=s&&this.subject!=this?(i.error("Redefinition of subject in selector `"+t+"`"),!1):(s=this,void(this.subject=this))}}];n._private.selectorText=t;var v=t,f=0,g=function(e){for(var t,n,i,a=0;a<p.length;a++){var o=p[a],s=o.name;if(!r.fn(e)||e(s,o)){var u=v.match(new RegExp("^"+o.regex));if(null!=u){n=u,t=o,i=s;var l=u[0];v=v.substring(l.length);break}}}return{expr:t,match:n,name:i}},y=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};for(n[0]=u(),y();;){var m=g();if(null==m.expr)return void i.error("The selector `"+t+"`is invalid");for(var b=[],w=1;w<m.match.length;w++)b.push(m.match[w]);var x=m.expr.populate.apply(n[f],b);if(x===!1)return;if(v.match(/^\s*$/))break}n.length=f+1;for(var w=0;w<n.length;w++){var _=n[w];if(null!=_.subject){for(;_.subject!=_;)if(null!=_.parent){var E=_.parent,S=_;S.parent=null,E.child=S,_=E}else{if(null==_.ancestor){i.error("When adjusting references for the selector `"+_+"`, neither parent nor ancestor was found");break}var T=_.ancestor,k=_;k.ancestor=null,T.descendant=k,_=T}n[w]=_.subject}}if(null!=e)for(var w=0;w<n.length;w++){if(null!=n[w].group&&n[w].group!=e)return void i.error("Group `"+n[w].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");n[w].group=e}}n._private.invalid=!1},o=a.prototype;o.size=function(){return this.length},o.eq=function(e){return this[e]};var s=function(e,t){if(null!=e.group&&"*"!=e.group&&e.group!=t._private.group)return!1;for(var n=t.cy(),i=!0,a=0;a<e.colonSelectors.length;a++){var o=e.colonSelectors[a];switch(o){case":selected":i=t.selected();break;case":unselected":i=!t.selected();break;case":selectable":i=t.selectable();break;case":unselectable":i=!t.selectable();break;case":locked":i=t.locked();break;case":unlocked":i=!t.locked();break;case":visible":i=t.visible();break;case":hidden":i=!t.visible();break;case":transparent":i=t.transparent();break;case":grabbed":i=t.grabbed();break;case":free":i=!t.grabbed();break;case":removed":i=t.removed();break;case":inside":i=!t.removed();break;case":grabbable":i=t.grabbable();break;case":ungrabbable":i=!t.grabbable();break;case":animated":i=t.animated();break;case":unanimated":i=!t.animated();break;case":parent":i=t.isNode()&&t.children().nonempty();break;case":child":case":nonorphan":i=t.isNode()&&t.parent().nonempty();break;case":orphan":i=t.isNode()&&t.parent().empty();break;case":loop":i=t.isEdge()&&t.data("source")===t.data("target");break;case":simple":i=t.isEdge()&&t.data("source")!==t.data("target");break;case":active":i=t.active();break;case":inactive":i=!t.active();break;case":touch":i=r.touch();break;case":backgrounding":i=t.backgrounding();break;case":nonbackgrounding":i=!t.backgrounding()}if(!i)break}if(!i)return!1;for(var u=!0,a=0;a<e.ids.length;a++){var l=e.ids[a],c=t._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var h=!0,a=0;a<e.classes.length;a++){var f=e.classes[a];if(h=h&&t.hasClass(f),!h)break}if(!h)return!1;var d=function(t){for(var n=!0,i=0;i<e[t.name].length;i++){var a,o=e[t.name][i],s=o.operator,u=o.value,l=o.field;if(null!=s&&null!=u){var c=t.fieldValue(l),h=r.string(c)||r.number(c)?""+c:"",f=""+u,d=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),f=f.toLowerCase(),s=s.replace("@",""),d=!0);var p=!1,v=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),p=!0),d&&(u=f.toLowerCase(),c=h.toLowerCase()),s){case"*=":a=h.search(f)>=0;break;case"$=":a=null!=new RegExp(f+"$").exec(h);break;case"^=":a=null!=new RegExp("^"+f).exec(h);break;case"=":a=c===u;break;case"!=":a=c!==u;break;case">":a=p?u>=c:c>u,v=!0;break;case">=":a=p?u>c:c>=u,v=!0;break;case"<":a=p?c>=u:u>c,v=!0;break;case"<=":a=p?c>u:u>=c,v=!0;break;default:a=!1}}else if(null!=s)switch(s){case"?":a=t.fieldTruthy(l);break;case"!":a=!t.fieldTruthy(l);break;case"^":a=t.fieldUndefined(l)}else a=!t.fieldUndefined(l);if(p&&!v&&(a=!a,v=!0),!a){n=!1;break}}return n},p=d({name:"data",fieldValue:function(e){return t._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===t._private.data[e]},fieldTruthy:function(e){return t._private.data[e]?!0:!1}});if(!p)return!1;var v=d({name:"meta",fieldValue:function(e){return t[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==t[e]()},fieldTruthy:function(e){return t[e]()?!0:!1}});if(!v)return!1;if(null!=e.collection){var g=null!=e.collection._private.ids[t.id()];if(!g)return!1}if(null!=e.filter&&0===t.collection().filter(e.filter).size())return!1;var y=function(e,t){if(null!=e){var r=!1;if(!n.hasCompoundNodes())return!1;t=t();for(var i=0;i<t.length;i++)if(s(e,t[i])){r=!0;break}return r}return!0};return y(e.parent,function(){return t.parent()})&&y(e.ancestor,function(){return t.parents()})&&y(e.child,function(){return t.children()})&&y(e.descendant,function(){return t.descendants()})?!0:!1};o.filter=function(e){var t=this,n=e.cy();if(t._private.invalid)return n.collection();var r=function(e,n){for(var r=0;r<t.length;r++){var i=t[r];if(s(i,n))return!0}return!1};null==t._private.selectorText&&(r=function(){return!0});var i=e.filter(r);return i},o.matches=function(e){var t=this;if(t._private.invalid)return!1;for(var n=0;n<t.length;n++){var r=t[n];if(s(r,e))return!0}return!1},o.toString=o.selector=function(){for(var e="",t=function(e,t){return r.string(e)?t?'"'+e+'"':e:""},n=function(e){var r="";e.subject===e&&(r+="$");var a=t(e.group);r+=a.substring(0,a.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];r+=s.value?"["+s.field+t(s.operator)+t(s.value,!0)+"]":"["+t(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var u=e.meta[o];r+="[["+u.field+t(u.operator)+t(u.value,!0)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var l=e.colonSelectors[i];r+=l}for(var o=0;o<e.ids.length;o++){var l="#"+e.ids[i];r+=l}for(var o=0;o<e.classes.length;o++){var l="."+e.classes[o];r+=l}return null!=e.parent&&(r=n(e.parent)+" > "+r),null!=e.ancestor&&(r=n(e.ancestor)+" "+r),null!=e.child&&(r+=" > "+n(e.child)),null!=e.descendant&&(r+=" "+n(e.descendant)),r},i=0;i<this.length;i++){var a=this[i];e+=n(a),this.length>1&&i<this.length-1&&(e+=", ")}return e},t.exports=a},{"./is":77,"./util":94}],82:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a={};a.apply=function(e){var t=this;t._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<e.length;n++){var r=e[n],i=t.getContextMeta(r),a=t.getContextStyle(i),o=t.applyContextStyle(i,a,r);t.updateTransitions(r,o.diffProps),t.updateStyleHints(r)}t._private.newStyle=!1},a.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,a=r[i];if(a)return a;for(var o=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===e[u],h="t"===t[u],f=c!==h,d=l.mappedProperties.length>0;if(f||d){var p;f&&d?p=l.properties:f?p=l.properties:d&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var w=n[b],x="t"===t[b];if(x&&(m=null!=w.properties[g.name]))break}s[y]||m||(s[y]=!0,o.push(y))}}}return r[i]=o,o},a.getContextMeta=function(e){var t,n=this,r="",i=e._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var a=0;a<n.length;a++){var o=n[a],s=o.selector&&o.selector.matches(e);r+=s?"t":"f"}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t}},a.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},a=0;a<n.length;a++){var o=n[a],s="t"===t[a];if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u],c=i[l.name]=l;c.context=o}}return r[t]=i,i},a.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,a={},o=0;o<i.length;o++){var s=i[o],u=t[s],l=n._private.style[s];if(u&&l!==u){var c=a[s]={prev:l};r.applyParsedProperty(n,u),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:a}},a.updateStyleHints=function(e){var t=e._private,n=this,r=t.style;if(!e.removed()){var i=!1;if("nodes"===t.group&&n._private.hasPie)for(var a=1;a<=n.pieBackgroundN;a++){var o=t.style["pie-"+a+"-background-size"].value;if(o>0){i=!0;break}}t.hasPie=i;var s=r["text-transform"].strValue,u=r.label.strValue,l=r["font-style"].strValue,o=r["font-size"].pfValue+"px",c=r["font-family"].strValue,h=r["font-weight"].strValue,f=r["text-valign"].strValue,d=r["text-valign"].strValue,p=r["text-outline-width"].pfValue,v=r["text-wrap"].strValue,g=r["text-max-width"].pfValue;t.labelKey=l+"$"+o+"$"+c+"$"+h+"$"+u+"$"+s+"$"+f+"$"+d+"$"+p+"$"+v+"$"+g,t.fontKey=l+"$"+h+"$"+o+"$"+c;var y=r.width.pfValue,m=r.height.pfValue,b=r["border-width"].pfValue;if(t.boundingBoxKey=y+"$"+m+"$"+b,"edges"===e._private.group){var w=r["control-point-step-size"].pfValue,x=r["control-point-distances"]?r["control-point-distances"].pfValue.join("_"):void 0,_=r["control-point-weights"].value.join("_"),E=r["curve-style"].strValue;t.boundingBoxKey+="$"+w+"$"+x+"$"+_+"$"+E}t.styleKey=Date.now()}},a.applyParsedProperty=function(e,t){var n,a,o=this,s=t,u=e._private.style,l=o.types,c=o.properties[s.name].type,h=s.bypass,f=u[s.name],d=f&&f.bypass,p=e._private;if(("height"===t.name||"width"===t.name)&&e.isNode()){if("auto"===t.value&&!e.isParent())return!1;"auto"!==t.value&&e.isParent()&&(s=t=this.parse(t.name,"auto",h))}if(h&&s.deleteBypass){var v=u[s.name];return v?v.bypass&&v.bypassed?(u[s.name]=v.bypassed,!0):!1:!0}var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+s.name+"` with data field `"+s.field+"`); try a `["+s.field+"]` selector to limit scope to elements with `"+s.field+"` defined")};switch(s.mapped){case l.mapData:case l.mapLayoutData:case l.mapScratch:var n,y=s.mapped===l.mapLayoutData,m=s.mapped===l.mapScratch,b=s.field.split(".");n=m||y?p.scratch:p.data;for(var w=0;w<b.length&&n;w++){var x=b[w];n=n[x]}var _;if(_=i.number(n)?(n-s.fieldMin)/(s.fieldMax-s.fieldMin):0,0>_?_=0:_>1&&(_=1),c.color){var E=s.valueMin[0],S=s.valueMax[0],T=s.valueMin[1],k=s.valueMax[1],P=s.valueMin[2],O=s.valueMax[2],C=null==s.valueMin[3]?1:s.valueMin[3],R=null==s.valueMax[3]?1:s.valueMax[3],N=[Math.round(E+(S-E)*_),Math.round(T+(k-T)*_),Math.round(P+(O-P)*_),Math.round(C+(R-C)*_)];a={bypass:s.bypass,name:s.name,value:N,strValue:"rgb("+N[0]+", "+N[1]+", "+N[2]+")"}}else{if(!c.number)return!1;var I=s.valueMin+(s.valueMax-s.valueMin)*_;a=this.parse(s.name,I,s.bypass,!0)}a||(a=this.parse(s.name,f.strValue,s.bypass,!0)),a||g(),a.mapping=s,s=a;break;case l.data:case l.layoutData:case l.scratch:var n,y=s.mapped===l.layoutData,m=s.mapped===l.scratch,b=s.field.split(".");if(n=m||y?p.scratch:p.data)for(var w=0;w<b.length;w++){var x=b[w];n=n[x]}if(a=this.parse(s.name,n,s.bypass,!0),!a){var D=f?f.strValue:"";a=this.parse(s.name,D,s.bypass,!0)}a||g(),a.mapping=s,s=a;break;case l.fn:var A=s.value,L=A(e);a=this.parse(s.name,L,s.bypass,!0),a.mapping=s,s=a;break;case void 0:break;default:return!1}return h?(d?s.bypassed=f.bypassed:s.bypassed=f,u[s.name]=s):d?f.bypassed=s:u[s.name]=s,!0},a.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},a.updateMappers=function(e){for(var t=this,n=0;n<e.length;n++){for(var r=e[n],i=r._private.style,a=0;a<t.properties.length;a++){var o=t.properties[a],s=i[o.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},a.updateTransitions=function(e,t,n){var r=this,a=e._private,o=a.style,s=o["transition-property"].value,u=o["transition-duration"].pfValue,l=o["transition-delay"].pfValue,c={};if(s.length>0&&u>0){for(var h=!1,f=0;f<s.length;f++){var d=s[f],p=o[d],v=t[d];if(v){var g,y=v.prev,m=y,b=null!=v.next?v.next:p,w=!1,x=1e-6;m&&(i.number(m.pfValue)&&i.number(b.pfValue)?(w=b.pfValue-m.pfValue,g=m.pfValue+x*w):i.number(m.value)&&i.number(b.value)?(w=b.value-m.value,g=m.value+x*w):i.array(m.value)&&i.array(b.value)&&(w=m.value[0]!==b.value[0]||m.value[1]!==b.value[1]||m.value[2]!==b.value[2],g=m.strValue),w&&(c[d]=b.strValue,this.applyBypass(e,d,g),h=!0))}}if(!h)return;a.transitioning=!0,e.stop(),l>0&&e.delay(l),e.animate({css:c},{duration:u,easing:o["transition-timing-function"].value,queue:!1,complete:function(){n||r.removeBypasses(e,s),a.transitioning=!1}})}else a.transitioning&&(e.stop(),this.removeBypasses(e,s),a.transitioning=!1)},t.exports=a},{"../is":77,"../util":94}],83:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),a={};a.applyBypass=function(e,t,n,a){var o=this,s=[],u=!0;if("*"===t||"**"===t){if(void 0!==n)for(var l=0;l<o.properties.length;l++){var c=o.properties[l],t=c.name,h=this.parse(t,n,!0);h&&s.push(h)}}else if(r.string(t)){var h=this.parse(t,n,!0);h&&s.push(h)}else{if(!r.plainObject(t))return!1;var f=t;a=n;for(var l=0;l<o.properties.length;l++){var c=o.properties[l],t=c.name,n=f[t];if(void 0===n&&(n=f[i.dash2camel(t)]),void 0!==n){var h=this.parse(t,n,!0);h&&s.push(h)}}}if(0===s.length)return!1;for(var d=!1,l=0;l<e.length;l++){for(var p,v=e[l],g=v._private.style,y={},m=0;m<s.length;m++){var c=s[m];if(a){var b=g[c.name];p=y[c.name]={prev:b}}d=this.applyParsedProperty(v,c)||d,a&&(p.next=g[c.name])}d&&this.updateStyleHints(v),a&&this.updateTransitions(v,y,u)}return d},a.overrideBypass=function(e,t,n){t=i.camel2dash(t);for(var r=0;r<e.length;r++){var a=e[r],o=a._private.style[t],s=this.properties[t].type,u=s.color,l=s.mutiple;o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),u?o.strValue="rgb("+n.join(",")+")":l?o.strValue=n.join(" "):o.strValue=""+n):this.applyBypass(a,t,n)}},a.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},a.removeBypasses=function(e,t,n){for(var r=!0,i=0;i<e.length;i++){for(var a=e[i],o={},s=a._private.style,u=0;u<t.length;u++){var l=t[u],c=this.properties[l],h="",f=this.parse(l,h,!0),d=s[c.name],p=o[c.name]={prev:d};this.applyParsedProperty(a,f),p.next=s[c.name]}this.updateStyleHints(a),n&&this.updateTransitions(a,o,r)}},t.exports=a},{"../is":77,"../util":94}],84:[function(e,t,n){"use strict";var r=e("../window"),i={};i.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},i.containerCss=function(e){var t=this._private.cy,n=t.container();return r&&n&&r.getComputedStyle?r.getComputedStyle(n).getPropertyValue(e):void 0},t.exports=i},{"../window":100}],85:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a={};a.getRenderedStyle=function(e){var t=this,e=e[0];if(e){for(var n={},i=e._private.style,a=this._private.cy,o=a.zoom(),s=0;s<t.properties.length;s++){var u=t.properties[s],l=i[u.name];if(l){var c=l.unitless?l.strValue:l.pfValue*o+"px";n[u.name]=c,n[r.dash2camel(u.name)]=c}}return n}},a.getRawStyle=function(e){var t=this,e=e[0];if(e){for(var n={},i=e._private.style,a=0;a<t.properties.length;a++){var o=t.properties[a],s=i[o.name];s&&(n[o.name]=s.strValue,
n[r.dash2camel(o.name)]=s.strValue)}return n}},a.getValueStyle=function(e){var t,n=this,a={},o=i.element(e);if(t=o?e._private.style:e)for(var s=0;s<n.properties.length;s++){var u=n.properties[s],l=t[u.name]||t[r.dash2camel(u.name)];void 0!==l&&(l=i.plainObject(l)?this.parse(u.name,l.strValue):this.parse(u.name,l)),l&&(a[u.name]=l,a[r.dash2camel(u.name)]=l)}return a},a.getPropsList=function(e){var t=this,n=[],i=e,a=t.properties;if(i)for(var o in i){var s=i[o],u=a[o]||a[r.camel2dash(o)],l=this.parse(u.name,s);n.push(l)}return n},t.exports=a},{"../is":77,"../util":94}],86:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),a=e("../selector"),o=function(e){return this instanceof o?r.core(e)?(this._private={cy:e,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void i.error("A style must have a core reference"):new o(e)},s=o.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(e){var t="core"===e?null:new a(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},s.css=function(){var e=this,t=arguments;switch(t.length){case 1:for(var n=t[0],r=0;r<e.properties.length;r++){var a=e.properties[r],o=n[a.name];void 0===o&&(o=n[i.dash2camel(a.name)]),void 0!==o&&this.cssRule(a.name,o)}break;case 2:this.cssRule(t[0],t[1])}return this},s.style=s.css,s.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this},o.fromJson=function(e,t){var n=new o(e);return n.fromJson(t),n},o.fromString=function(e,t){return new o(e).fromString(t)},[e("./apply"),e("./bypass"),e("./container"),e("./get-for-ele"),e("./json"),e("./string-sheet"),e("./properties"),e("./parse")].forEach(function(e){i.extend(s,e)}),o.types=s.types,o.properties=s.properties,t.exports=o},{"../is":77,"../selector":81,"../util":94,"./apply":82,"./bypass":83,"./container":84,"./get-for-ele":85,"./json":87,"./parse":88,"./properties":89,"./string-sheet":90}],87:[function(e,t,n){"use strict";var r={};r.applyFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,a=r.style||r.css;t.selector(i);for(var o in a){var s=a[o];t.css(o,s)}}return t},r.fromJson=function(e){var t=this;return t.resetToDefault(),t.applyFromJson(e),t},r.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:a})}return e},t.exports=r},{}],88:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),a={};a.parse=function(e,t,n,i){var a,s=[e,t,n,i].join("$"),u=this.propCache=this.propCache||{},l=o.bind(this);return(a=u[s])||(a=u[s]=l(e,t,n,i)),a=r.copy(a),a&&(a.value=r.copy(a.value)),a};var o=function(e,t,n,a){var o=this;e=r.camel2dash(e);var s=o.properties[e],u=t,l=o.types;if(!s)return null;if(void 0===t||null===t)return null;s.alias&&(s=s.pointsTo,e=s.name);var c=i.string(t);c&&(t=t.trim());var h=s.type;if(!h)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(i.fn(t))return{name:e,value:t,strValue:"fn",mapped:l.fn,bypass:n};var f,d,p,v,g,y;if(!c||a);else{if((f=new RegExp(l.data.regex).exec(t))||(p=new RegExp(l.layoutData.regex).exec(t))||(g=new RegExp(l.scratch.regex).exec(t))){if(n)return!1;var m;return m=f?l.data:p?l.layoutData:l.scratch,f=f||p||g,{name:e,value:f,strValue:""+t,mapped:m,field:f[1],bypass:n}}if((d=new RegExp(l.mapData.regex).exec(t))||(v=new RegExp(l.mapLayoutData.regex).exec(t))||(y=new RegExp(l.mapScratch.regex).exec(t))){if(n)return!1;if(h.multiple)return!1;var m;if(m=d?l.mapData:v?l.mapLayoutData:l.mapScratch,d=d||v||y,!h.color&&!h.number)return!1;var b=this.parse(e,d[4]);if(!b||b.mapped)return!1;var w=this.parse(e,d[5]);if(!w||w.mapped)return!1;if(b.value===w.value)return!1;if(h.color){var x=b.value,_=w.value,E=!(x[0]!==_[0]||x[1]!==_[1]||x[2]!==_[2]||x[3]!==_[3]&&(null!=x[3]&&1!==x[3]||null!=_[3]&&1!==_[3]));if(E)return!1}return{name:e,value:d,strValue:""+t,mapped:m,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:b.value,valueMax:w.value,bypass:n}}}if(h.multiple&&!a){var S;if(S=c?t.split(/\s+/):i.array(t)?t:[t],h.evenMultiple&&S.length%2!==0)return null;var T=S.map(function(t){var r=o.parse(e,t,n,!0);return null!=r.pfValue?r.pfValue:r.value});return{name:e,value:T,pfValue:T,strValue:T.join(" "),bypass:n,units:h.number&&!h.unitless?h.implicitUnits||"px":void 0}}var k=function(){for(var r=0;r<h.enums.length;r++){var i=h.enums[r];if(i===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(h.number){var P,O="px";if(h.units&&(P=h.units),h.implicitUnits&&(O=h.implicitUnits),!h.unitless)if(c){var C="px|em"+(h.allowPercent?"|\\%":"");P&&(C=P);var R=t.match("^("+r.regex.number+")("+C+")?$");R&&(t=R[1],P=R[2]||O)}else(!P||h.implicitUnits)&&(P=O);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=u,k();if(h.integer&&!i.integer(t))return null;if(void 0!==h.min&&t<h.min||void 0!==h.max&&t>h.max)return null;var N={name:e,value:t,strValue:""+t+(P?P:""),units:P,bypass:n};return h.unitless||"px"!==P&&"em"!==P||(N.pfValue="px"!==P&&P?this.getEmSizeInPixels()*t:t),("ms"===P||"s"===P)&&(N.pfValue="ms"===P?t:1e3*t),("deg"===P||"rad"===P)&&(N.pfValue="rad"===P?t:t*Math.PI/180),N}if(h.propList){var I=[],D=""+t;if("none"===D);else{for(var A=D.split(","),L=0;L<A.length;L++){var M=A[L].trim();o.properties[M]&&I.push(M)}if(0===I.length)return null}return{name:e,value:I,strValue:0===I.length?"none":I.join(", "),bypass:n}}if(h.color){var B=r.color2tuple(t);return B?{name:e,value:B,strValue:""+t,bypass:n,roundValue:!0}:null}if(h.regex||h.regexes){if(h.enums){var j=k();if(j)return j}for(var q=h.regexes?h.regexes:[h.regex],L=0;L<q.length;L++){var z=new RegExp(q[L]),F=z.exec(t);if(F)return{name:e,value:F,strValue:""+t,bypass:n}}return null}return h.string?{name:e,value:t,strValue:""+t,bypass:n}:h.enums?k():null};t.exports=a},{"../is":77,"../util":94}],89:[function(e,t,n){"use strict";var r=e("../util"),i={};!function(){var e=r.regex.number,t=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,a=r.regex.hex3,o=r.regex.hex6,s=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},u=function(r){var i=e+"|\\w+|"+t+"|"+n+"|"+a+"|"+o;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"};i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["auto","label"]},number:{number:!0},numbers:{number:!0,multiple:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:u("mapData")},mapLayoutData:{mapping:!0,regex:u("mapLayoutData")},mapScratch:{mapping:!0,regex:u("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var l=i.types,c=i.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"label",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size},{name:"text-border-style",type:l.borderStyle},{name:"text-background-shape",type:l.textBackgroundShape},{name:"text-transform",type:l.textTransform},{name:"text-wrap",type:l.textWrap},{name:"text-max-width",type:l.size},{name:"text-events",type:l.bool},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"edge-text-rotation",type:l.textRotation},{name:"events",type:l.bool},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"shadow-blur",type:l.size},{name:"shadow-color",type:l.color},{name:"shadow-opacity",type:l.zeroOneNumber},{name:"shadow-offset-x",type:l.number},{name:"shadow-offset-y",type:l.number},{name:"text-shadow-blur",type:l.size},{name:"text-shadow-color",type:l.color},{name:"text-shadow-opacity",type:l.zeroOneNumber},{name:"text-shadow-offset-x",type:l.number},{name:"text-shadow-offset-y",type:l.number},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing},{name:"height",type:l.nodeSize},{name:"width",type:l.nodeSize},{name:"shape",type:l.nodeShape},{name:"shape-polygon-points",type:l.polygonPointList},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"position",type:l.position},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"control-point-step-size",type:l.size},{name:"control-point-distances",type:l.numbers},{name:"control-point-weights",type:l.numbers},{name:"segment-distances",type:l.numbers},{name:"segment-weights",type:l.numbers},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],h=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"}];i.pieBackgroundN=16,c.push({name:"pie-size",type:l.bgSize});for(var f=1;f<=i.pieBackgroundN;f++)c.push({name:"pie-"+f+"-background-color",type:l.color}),c.push({name:"pie-"+f+"-background-size",type:l.percent}),c.push({name:"pie-"+f+"-background-opacity",type:l.zeroOneNumber});var d=i.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(e){d.forEach(function(t){var n=t+"-"+e.name,r=e.type;c.push({name:n,type:r})})},{}),i.propertyNames=c.map(function(e){return e.name});for(var f=0;f<c.length;f++){var p=c[f];c[p.name]=p}for(var f=0;f<h.length;f++){var v=h[f],g=c[v.pointsTo],y={name:v.name,alias:!0,pointsTo:g};c.push(y),c[v.name]=y}}(),i.addDefaultStylesheet=function(){this.selector("node, edge").css(r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=i.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),a=t.value;e[r]=a}return e},{}),{"line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.25,"segment-distances":20,"curve-style":"bezier","haystack-radius":.8},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#ddd"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return i.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{}))).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.exports=i},{"../util":94}],90:[function(e,t,n){"use strict";var r=e("../util"),i=e("../selector"),a={};a.applyFromString=function(e){function t(){c=c.length>a.length?c.substr(a.length):""}function n(){o=o.length>s.length?o.substr(s.length):""}var a,o,s,u=this,l=this,c=""+e;for(c=c.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var h=c.match(/^\s*$/);if(h)break;var f=c.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+c);break}a=f[0];var d=f[1];if("core"!==d){var p=new i(d);if(p._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),t();continue}}var v=f[2],g=!1;o=v;for(var y=[];;){var h=o.match(/^\s*$/);if(h)break;var m=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!m){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),g=!0;break}s=m[0];var b=m[1],w=m[2],x=u.properties[b];if(x){var _=l.parse(b,w);_?(y.push({name:b,val:w}),n()):(r.error("Skipping property: Invalid property definition in: "+s),n())}else r.error("Skipping property: Invalid property name in: "+s),n()}if(g){t();break}l.selector(d);for(var E=0;E<y.length;E++){var x=y[E];l.css(x.name,x.val)}t()}return l},a.fromString=function(e){var t=this;return t.resetToDefault(),t.applyFromString(e),t},t.exports=a},{"../selector":81,"../util":94}],91:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),a=e("./style"),o=function(){return this instanceof o?void(this.length=0):new o},s=o.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},s.css=function(e,t){var n=this.length-1;if(r.string(e))this[n].properties.push({name:e,value:t});else if(r.plainObject(e))for(var o=e,s=0;s<a.properties.length;s++){var u=a.properties[s],l=o[u.name];if(void 0===l&&(l=o[i.dash2camel(u.name)]),void 0!==l){var e=u.name,t=l;this[n].properties.push({name:e,value:t})}}return this},s.style=s.css,s.generateStyle=function(e){for(var t=new a(e),n=0;n<this.length;n++){var r=this[n],i=r.selector,o=r.properties;t.selector(i);for(var s=0;s<o.length;s++){var u=o[s];t.css(u.name,u.value)}}return t},t.exports=o},{"./is":77,"./style":86,"./util":94}],92:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(e){if(!(this instanceof Thread))return new Thread(e);var t=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(e)&&null!=e.disabled&&(t.disabled=!!e.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(e){var t=is.fn(e)?e.toString():'JSON.parse("'+JSON.stringify(e)+'")';return t},fnAsRequire=function(e){var t,n;is.object(e)&&e.fn?(t=fnAs(e.fn,e.name),n=e.name,e=e.fn):is.fn(e)?(t=e.toString(),n=e.name):is.string(e)?t=e:is.object(e)&&(t=e.proto?"":e.name+" = {};",n=e.name,e=e.obj),t+="\n";var r=function(e,n){if(e.prototype){var r=!1;for(var i in e.prototype){r=!0;break}r&&(t+=fnAsRequire({name:n,obj:e,proto:!0},e))}};if(e.prototype&&null!=n)for(var i in e.prototype){var a="",o=e.prototype[i],s=stringifyFieldVal(o),u=n+".prototype."+i;a+=u+" = "+s+";\n",a&&(t+=a),r(o,u)}if(!is.string(e))for(var i in e){var l="";if(e.hasOwnProperty(i)){var o=e[i],s=stringifyFieldVal(o),u=n+'["'+i+'"]';l+=u+" = "+s+";\n"}l&&(t+=l),r(o,u)}return t},isPathStr=function(e){return is.string(e)&&e.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(e,t){var n=this._private.requires;if(isPathStr(e))return this._private.files.push(e),this;if(t)e=is.fn(e)?{name:t,fn:e}:{name:t,obj:e};else if(is.fn(e)){if(!e.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';e={name:e.name,fn:e}}return n.push(e),this},pass:function(e){return this._private.pass.push(e),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(e){return fnAsRequire(e)}).concat(_p.files.map(function(e){if(useWW){var t=function(e){return e.match(/^\.\//)||e.match(/^\.\./)?window.location.origin+window.location.pathname+e:e.match(/^\//)?window.location.origin+"/"+e:e};return'importScripts("'+t(e)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+e+'", { encoding: "utf8" }) );';throw"External file `"+e+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(e){var t=is.object(e)&&is.object(e.data);t&&"$$resolve"in e.data?(ww.removeEventListener("message",cb),resolve(e.data.$$resolve)):t&&"$$reject"in e.data?(ww.removeEventListener("message",cb),reject(e.data.$$reject)):self.trigger(new Event(e,{type:"message",message:e.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(e){is.object(e)&&"$$resolve"in e?(child.removeListener("message",cb),resolve(e.$$resolve)):is.object(e)&&"$$reject"in e?(child.removeListener("message",cb),reject(e.$$reject)):self.trigger(new Event({},{type:"message",message:e}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(e){for(var t=timer.listeners,n=0;n<t.length;n++){var r=t[n];r(e)}}};timer.exec()}}).then(function(e){return _p.running=!1,_p.ran=!0,self.trigger("ran"),e});return null==_p.queue&&(_p.queue=runP),runP},message:function(e){var t=this._private;return t.webworker&&t.webworker.postMessage(e),t.child&&t.child.send(e),t.timer&&t.timer.message(e),this},stop:function(){var e=this._private;return e.webworker&&e.webworker.terminate(),e.child&&e.child.kill(),e.timer,e.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(e,t){var n=e.toString();return n=n.replace(/function\s*\S*\s*\(/,"function "+t+"(")},defineFnal=function(e){return e=e||{},function(t,n){var r=fnAs(t,"_$_$_"+e.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+e.name+"( _$_$_"+e.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":41,"./event":42,"./is":77,"./promise":80,"./util":94,"./window":100,child_process:void 0,path:void 0}],93:[function(e,t,n){"use strict";var r=e("../is");t.exports={hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=4===e.length,a=16;return i?(t=parseInt(e[1]+e[1],a),n=parseInt(e[2]+e[2],a),r=parseInt(e[3]+e[3],a)):(t=parseInt(e[1]+e[2],a),n=parseInt(e[3]+e[4],a),r=parseInt(e[5]+e[6],a)),[t,n,r]}},hsl2tuple:function(e){function t(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var n,r,i,a,o,s,u,l,c=new RegExp("^"+this.regex.hsla+"$").exec(e);if(c){if(r=parseInt(c[1]),0>r?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,i=parseFloat(c[2]),0>i||i>100)return;if(i/=100,a=parseFloat(c[3]),0>a||a>100)return;if(a/=100,o=c[4],void 0!==o&&(o=parseFloat(o),0>o||o>1))return;if(0===i)s=u=l=Math.round(255*a);else{var h=.5>a?a*(1+i):a+i-a*i,f=2*a-h;s=Math.round(255*t(f,h,r+1/3)),u=Math.round(255*t(f,h,r)),l=Math.round(255*t(f,h,r-1/3))}n=[s,u,l,o]}return n},rgb2tuple:function(e){var t,n=new RegExp("^"+this.regex.rgba+"$").exec(e);if(n){t=[];for(var r=[],i=1;3>=i;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),0>a||a>255)return;t.push(Math.floor(a))}var o=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(o&&!s)return;var u=n[4];if(void 0!==u){if(u=parseFloat(u),0>u||u>1)return;t.push(u)}}return t},colorname2tuple:function(e){return this.colors[e.toLowerCase()]},color2tuple:function(e){return(r.array(e)?e:null)||this.colorname2tuple(e)||this.hex2tuple(e)||this.rgb2tuple(e)||this.hsl2tuple(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":77}],94:[function(e,t,n){"use strict";var r=e("../is"),i=e("../math"),a={falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(e){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(e){return this.extend({},e);
},copy:function(e){return null==e?e:r.array(e)?e.slice():r.plainObject(e)?this.clone(e):e}};a.makeBoundingBox=i.makeBoundingBox.bind(i),a._staticEmptyObject={},a.staticEmptyObject=function(){return a._staticEmptyObject},a.extend=null!=Object.assign?Object.assign:function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];for(var i in r)e[i]=r[i]}return e},[e("./colors"),e("./maps"),{memoize:e("./memoize")},e("./regex"),e("./strings"),e("./timing")].forEach(function(e){a.extend(a,e)}),t.exports=a},{"../is":77,"../math":79,"./colors":93,"./maps":95,"./memoize":96,"./regex":97,"./strings":98,"./timing":99}],95:[function(e,t,n){"use strict";var r=e("../is");t.exports={mapEmpty:function(e){var t=!0;if(null!=e)for(var n in e){t=!1;break}return t},pushMap:function(e){var t=this.getMap(e);null==t?this.setMap(this.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t,n=e.map,i=e.keys,a=i.length,o=0;a>o;o++){var t=i[o];r.plainObject(t)&&this.error("Tried to set map with object key"),o<i.length-1?(null==n[t]&&(n[t]={}),n=n[t]):n[t]=e.value}},getMap:function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;i>a;a++){var o=n[a];if(r.plainObject(o)&&this.error("Tried to get map with object key"),t=t[o],null==t)return t}return t},deleteMap:function(e){for(var t=e.map,n=e.keys,i=n.length,a=e.keepChildren,o=0;i>o;o++){var s=n[o];r.plainObject(s)&&this.error("Tried to delete map with object key");var u=o===e.keys.length-1;if(u)if(a)for(var l in t)a[l]||(t[l]=void 0);else t[s]=void 0;else t=t[s]}}}},{"../is":77}],96:[function(e,t,n){"use strict";t.exports=function(e,t){var n=this,r={};return t||(t=function(){if(1===arguments.length)return arguments[0];for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")}),function(){var i,a=arguments,o=t.apply(n,a);return(i=r[o])||(i=r[o]=e.apply(n,a)),i}}},{}],97:[function(e,t,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i="rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",a="rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",o="hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",s="hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",u="\\#[0-9a-fA-F]{3}",l="\\#[0-9a-fA-F]{6}";t.exports={regex:{number:r,rgba:i,rgbaNoBackRefs:a,hsla:o,hslaNoBackRefs:s,hex3:u,hex6:l}}},{}],98:[function(e,t,n){"use strict";var r=e("./memoize"),i=e("../is");t.exports={camel2dash:r(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel:r(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),capitalize:function(e){return i.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}}},{"../is":77,"./memoize":96}],99:[function(e,t,n){"use strict";var r=e("../window"),i=e("../is"),a=r?r.performance:null,o={},s=r?r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame:null;s=s||function(e){e&&setTimeout(function(){e(u())},1e3/60)},o.requestAnimationFrame=function(e){s(e)};var u=a&&a.now?function(){return a.now()}:function(){return Date.now()};o.performanceNow=u,o.throttle=function(e,t,n){var r=!0,a=!0;return n===!1?r=!1:i.plainObject(n)&&(r="leading"in n?n.leading:r,a="trailing"in n?n.trailing:a),n=n||{},n.leading=r,n.maxWait=t,n.trailing=a,o.debounce(e,t,n)},o.now=function(){return Date.now()},o.debounce=function(e,t,n){var r,a,o,s,u,l,c,h=this,f=0,d=!1,p=!0;if(i.fn(e)){if(t=Math.max(0,t)||0,n===!0){var v=!0;p=!1}else i.plainObject(n)&&(v=n.leading,d="maxWait"in n&&(Math.max(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var g=function(){var n=t-(h.now()-s);if(0>=n){a&&clearTimeout(a);var i=c;a=l=c=void 0,i&&(f=h.now(),o=e.apply(u,r),l||a||(r=u=null))}else l=setTimeout(g,n)},y=function(){l&&clearTimeout(l),a=l=c=void 0,(p||d!==t)&&(f=h.now(),o=e.apply(u,r),l||a||(r=u=null))};return function(){if(r=arguments,s=h.now(),u=this,c=p&&(l||!v),d===!1)var n=v&&!l;else{a||v||(f=s);var i=d-(s-f),m=0>=i;m?(a&&(a=clearTimeout(a)),f=s,o=e.apply(u,r)):a||(a=setTimeout(y,i))}return m&&l?l=clearTimeout(l):l||t===d||(l=setTimeout(g,t)),n&&(m=!0,o=e.apply(u,r)),!m||l||a||(r=u=null),o}}},t.exports=o},{"../is":77,"../window":100}],100:[function(e,t,n){t.exports="undefined"==typeof window?null:window},{}]},{},[76])(76)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/node_modules/cytoscape/dist")},{}],55:[function(e,t,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],56:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y,m,b,w;a=e("url"),r=e("JSONStream"),d=e("http"),t=e("./constants").ACCEPT_HEADER,u=e("./version").VERSION,w=b=e("./util"),h=w.error,c=w.defer,v=w.merge,p=w.invoke,s="node-http/imjs-"+u,i=/,\s*$/,o="application/x-www-form-urlencoded",n.supports=function(){return!0},m=function(e,t,n){return function(e){var i,a;return null==e.pipe?n(new Error("response is not a stream")):(e.on("error",n),null!=e.statusCode&&200!==e.statusCode?(i=r.parse("error"),i.pause(),e.pipe(i),n([e.statusCode,i])):(a=r.parse("results.*"),a.pause(),e.pipe(a),t(a)))}},f=function(e,t,n,r){var i,a;return i=e.type,a=e.url,"Could not parse response to "+i+" "+a+': "'+t+'" ('+r+": "+n+")"},l=function(e,t,n){return function(r){var i;return i="",r.on("data",function(e){return i+=e}),r.on("error",n),r.on("end",function(){var a,o,s,u,l,c,h;if(null!=(null!=r?r.headers:void 0)&&(a=r.headers["content-type"]),"application/json"!==a&&!/json/.test(e.dataType)&&!/json/.test(e.data.format))return(l=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(l[2])):(u=200<=(h=r.statusCode)&&400>h?t:n)(i);if(""===i&&200===r.statusCode)return t();try{return c=JSON.parse(i),(s=c.error)?n(new Error(s)):t(c)}catch(d){return o=d,n(r.statusCode>=400?new Error(r.statusCode):new Error(f(e,i,o,r.statusCode)))}})}},n.iterReq=function(e,t,n){return function(r,i,a,o,s){var u,l,c,f,d;return null==i&&(i={}),null==a&&(a=function(){}),null==o&&(o=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(d=[{},i,a,o],i=d[0],a=d[1],o=d[2],s=d[3]),f=v({format:n},i,{query:r.toXML()}),u=function(e){return e.on("data",a),e.on("error",o),e.on("end",s),setTimeout(function(){return null!=e.resume?e.resume():void 0},3),e},c=function(e){var t,n;return n=e[0],t=e[1],t.on("data",o),t.on("error",o),t.on("end",s),null!=t.resume&&t.resume(),h(n)},l=this.makeRequest(e,t,f,null,!0),l.then(u,c),l}},y=function(e,t,n){var r;return r=setTimeout(function(){return t("Request timed out.")},e),n.then(function(){return cancelTimeout(r)})},g=function(e){var n,r,i,u,l,c,h,f;if(!e.url)throw new Error("No url provided in "+JSON.stringify(e));if("string"==typeof e.data){if(i=e.data,"GET"===(c=e.type)||"DELETE"===c)throw new Error("Invalid request. "+e.type+" requests must not have bodies")}else i=b.querystring(e.data);if(r=a.parse(e.url,!0),r.withCredentials=!1,r.method=e.type||"GET",null!=e.port&&(r.port=e.port),r.headers={"User-Agent":s,Accept:t[e.dataType]},("GET"===(h=r.method)||"DELETE"===h)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(e.contentType||o)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=e.headers){f=e.headers;for(n in f)l=f[n],r.headers[n]=l}return null!=e.auth&&(r.auth=e.auth),[r,i]},n.doReq=function(e,t){var n,r,i,a,o,s,u,h,f,p,v;p=c(),a=p.promise,u=p.resolve,o=p.reject,a.then(null,e.error);try{v=g(e),f=v[0],i=v[1],r=(t?m:l)(e,u,o),s=d.request(f,r),s.on("error",function(t){return o(new Error("Error: "+f.method+" "+e.url+": "+t))}),null!=i&&s.write(i),s.end(),h=e.timeout,h>0&&y(h,o,a)}catch(b){n=b,o(n)}return a}}).call(this)},{"./constants":55,"./util":67,"./version":68,JSONStream:70,http:42,url:52}],57:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){return function(){return e.apply(t,arguments)}};c=e("./util"),d=n,p=c.uniqBy,u=c.difference,s=c.defer,v=c.withCB,f=c.id,h=c.get,l=c.fold,o=c.concatMap,a=6e4,t=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t;return e.prototype.getStats=function(e){return null!=e?this.stats[e]:this.stats},t=o(h("matches")),e.prototype.getMatches=function(e){var n;return"MATCH"===e?this.matches[e]:null!=(n=t(this.matches[e]))?n:[]},e.prototype.getMatchIds=function(e){return null!=e?this.getMatches(e).map(h("id")):this.allMatchIds()},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){var e;return(e=l(function(e){return function(t,n){return t.concat(e.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},e}(),i=function(){function e(e){var t,n;for(t in e)g.call(e,t)&&(n=e[t],this[t]=n)}var t,n,r,i;return i=p(f),t=o(f),n=function(e){var n,r;return t(function(){var t,i;t=e.identifiers,i=[];for(n in t)r=t[n],i.push(r);return i}())},r=function(e,t){return null==t||y.call(n(e),t)>=0},e.prototype.getStats=function(e){switch(e){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},e.prototype.getIdentifierStats=function(){var e,n,r,a,o,s;return s=function(e){var n,r;return i(t(function(){var t,i,a;for(a=[],t=0,i=e.length;i>t;t++)r=e[t],a.push(function(){var e;e=[];for(n in null!=r?r.identifiers:void 0)e.push(n);return e}());return a}()))},a=s(this.getMatches("MATCH")),n=s(this.getMatches()),o=a.length,e=n.length,r=u(n,a).length,{matches:o,all:e,issues:r}},e.prototype.getObjectStats=function(){var e,t,r,i;return i=this.goodMatchIds().length,e=this.allMatchIds().length,t=function(){var e;e=[];for(f in this)g.call(this,f)&&(r=this[f],y.call(n(r),"MATCH")<0&&e.push(f));return e}.call(this).length,{matches:i,all:e,issues:t}},e.prototype.getMatches=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(t));return n},e.prototype.getMatchIds=function(e){var t,n;n=[];for(f in this)g.call(this,f)&&(t=this[f],r(t,e)&&n.push(f));return n},e.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},e.prototype.allMatchIds=function(){return this.getMatchIds()},e}(),r=function(){function e(e,t){this.uid=e,this.service=t,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return e.prototype.fetchStatus=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("status")))},e.prototype.fetchErrorMessage=function(e){return v(e,this.service.get("ids/"+this.uid+"/status").then(h("message")))},e.prototype.fetchResults=function(e){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(h("results")),r=this.service.fetchVersion(),r.then(function(e){return n.then(function(n){return e>=16?new t(n):new i(n)})})},e.prototype.del=function(e){return v(e,this.service.makeRequest("DELETE","ids/"+this.uid))},e.prototype.decay=50,e.prototype.poll=function(e,t,n){var r,i,o,u,l,c,h;return h=s(),o=h.promise,l=h.resolve,u=h.reject,o.then(e,t),i=null!=n?n:function(){},c=this.fetchStatus(),c.then(null,u),r=this.decay,this.decay=Math.min(a,1.25*r),c.then(function(e){return function(t){switch(i(t),t){case"SUCCESS":return e.fetchResults().then(l,u);case"ERROR":return e.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return e.poll(l,u,i)},r)}}}(this)),o},e}(),r.prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},d.IDResolutionJob=r,d.CategoryResults=t,d.IdResults=i}).call(this)},{"./util":67}],58:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y=function(e,t){return function(){return e.apply(t,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};v=e("./util"),c=n,d=v.merge,g=v.withCB,u=v.get,h=v.invoke,i=v.REQUIRES_VERSION,p=v.set,s=v.dejoin,o="list/tags",a="lists/shares",t="lists/invitations",f=function(e){return"__folder__"===e.substr(0,e.indexOf(":"))},l=function(e){return e.substr(e.indexOf(":")+1)},r=function(){function e(e,t){var n,r;this.service=t,this._updateTags=y(this._updateTags,this),this.hasTag=y(this.hasTag,this);for(n in e)m.call(e,n)&&(r=e[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(f).map(l)}var n;return e.prototype.hasTag=function(e){return b.call(this.tags,e)>=0},e.prototype.query=function(e){return null==e&&(e=["*"]),this.service.query({select:e,from:this.type,where:[[this.type,"IN",this.name]]})},e.prototype.del=function(e){return this.service.makeRequest("DELETE","lists",{name:this.name},e)},n=function(e){var t;return t=e.tags},e.prototype._updateTags=function(e,t){return null==e?(this.tags=t.slice(),this.folders=this.tags.filter(f).map(l)):void 0},e.prototype.fetchTags=function(e){return g(this._updateTags,e,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},e.prototype.addTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("POST","list/tags",r).then(n))},e.prototype.removeTags=function(e,t){var r;return r={name:this.name,tags:e},g(this._updateTags,t,this.service.makeRequest("DELETE","list/tags",r).then(n))},e.prototype.contents=function(e){return g(e,this.query().then(s).then(h("records")))},e.prototype.rename=function(e,t){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:e}).then(u("listName")).then(function(e){return function(t){return e.name=t}}(this)).then(this.service.fetchList),g(t,n)},e.prototype.copy=function(e,t){var n,r,i,a,o,s,l;return null==e&&(e={}),null==t&&(t=function(){}),1===arguments.length&&v.isFunction(e)&&(o=[{},e],e=o[0],t=o[1]),"string"==typeof e&&(e={name:e}),r=n=null!=(s=e.name)?s:""+this.name+"_copy",a=this.tags.concat(null!=(l=e.tags)?l:[]),i=this.query(["id"]),g(t,this.service.fetchLists().then(h("map",u("name"))).then(function(e){return function(t){var o;for(o=1;b.call(t,r)>=0;)r=""+n+"-"+o++;return i.then(h("saveAsList",{name:r,tags:a,description:e.description}))}}(this)))},e.prototype.enrichment=function(e,t){return this.service.enrichment(d({list:this.name},e),t)},e.prototype.shareWithUser=function(e,t){return g(t,this.service.post(a,{list:this.name,"with":e}))},e.prototype.inviteUserToShare=function(e,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),g(r,this.service.post(t,{list:this.name,to:e,notify:!!n}))},e}(),c.List=r}).call(this)},{"./util":67}],59:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f=function(e,t){return function(){return e.apply(t,arguments)}},d=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};a=e("./table").Table,i=e("./path").PathInfo,h=e("./util"),u=h.flatten,s=h.find,o=h.error,c=h.omap,l=n,t=new a({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function e(e){var n,r;this.name=e.name,n=e.classes,this.findCommonType=f(this.findCommonType,this),this.findSharedAncestor=f(this.findSharedAncestor,this),this.getAncestorsOf=f(this.getAncestorsOf,this),this.getSubclassesOf=f(this.getSubclassesOf,this),this.getPathInfo=f(this.getPathInfo,this),r=c(function(e){return function(t,n){return[t,new a(n,e)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=t}return e.prototype.getPathInfo=function(e,t){return i.parse(this,e,t)},e.prototype.getSubclassesOf=function(e){var t,n,r,i,a,o;if(n=e&&e.name?e:this.classes[e],null==n)throw new Error(""+e+" is not a table");r=[n.name],a=this.classes;for(i in a)t=a[i],o=n.name,d.call(t.parents(),o)>=0&&(r=r.concat(this.getSubclassesOf(t)));return r},e.prototype.getAncestorsOf=function(e){var t,n;if(t=e&&e.name?e:this.classes[e],null==t)throw new Error(""+e+" is not a table");return n=t.parents(),n.filter(function(e){return function(t){return e.classes[t]}}(this)).reduce(function(e){return function(t,n){return t.concat(e.getAncestorsOf(n))}}(this),n)},e.prototype.findSharedAncestor=function(e,t){var n,r,i;return null===t||null===e?null:e===t?e:(n=this.getAncestorsOf(e),d.call(n,t)>=0?t:(r=this.getAncestorsOf(t),d.call(r,e)>=0?e:i=s(n,function(e){return d.call(r,e)>=0})))},e.prototype.findCommonType=function(e){return null==e&&(e=[]),e.reduce(this.findSharedAncestor)},e}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(e){var t;try{return new r(e)}catch(n){throw t=n,new Error("Error loading model: "+t)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],l.Model=r}).call(this)},{"./path":60,"./table":65,"./util":67}],60:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g=function(e,t){return function(){return e.apply(t,arguments)}},y=[].slice,m=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};c=n,p=e("./util"),v=p.withCB,o=p.concatMap,l=p.get,a=p.any,f=p.set,s=p.copy,d=p.success,u=p.error,t={},r={},h=function(e,t,n){var r,i,a;return""+(null!=e?e.name:void 0)+"|"+(null!=e&&null!=(a=e.service)?a.root:void 0)+"|"+t+":"+function(){var e;e=[];for(r in n)i=n[r],e.push(""+r+"="+i);return e}()},i=function(){function e(e){var t,n;this.root=e.root,this.model=e.model,this.descriptors=e.descriptors,this.subclasses=e.subclasses,this.displayName=e.displayName,this.ident=e.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?y.call(n,0,t=n.length-1):(t=0,[]),this.end=n[t++],null==this.ident&&(this.ident=h(this.model,this,this.subclasses))}return e.prototype.isRoot=function(){return 0===this.descriptors.length},e.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},e.prototype.isClass=function(){return this.isRoot()||this.isReference()},e.prototype.isReference=function(){var e;return null!=(null!=(e=this.end)?e.referencedType:void 0)},e.prototype.isReverseReference=function(){var e,t,n,r,i;return this.isReference()&&this.mid.length>0?(i=this.end,r=i.reverseReference,n=i.referencedType,t=this.getParent(),e=t.getParent(),null!=n&&e.isa(n)&&t.end.name===r):!1},e.prototype.isCollection=function(){var e,t;return null!=(e=null!=(t=this.end)?t.isCollection:void 0)?e:!1},e.prototype.containsCollection=function(){return a(this.descriptors,function(e){return e.isCollection})},e.prototype.getEndClass=function(){var e;return this.model.classes[this.subclasses[this.toString()]||(null!=(e=this.end)?e.referencedType:void 0)]||this.root},e.prototype.getParent=function(){var t;if(this.isRoot())throw new Error("Root paths do not have parents");return t={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new e(t)},e.prototype.append=function(t){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof t?this.getType().fields[t]:t,null==r)throw new Error(""+t+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new e(n)},e.prototype.isa=function(e){var t,n;return null==e?!1:this.isAttribute()?this.getType()===e:(t=e.name?e.name:""+e,n=this.getType(),t===n.name||m.call(this.model.getAncestorsOf(n),t)>=0)},e.prototype.getDisplayName=function(e){var n,r,i,a;return(r=this.displayName)?d(r):(null==this.namePromise&&(this.namePromise=(n=t[this.ident])?d(n):this.isRoot()&&this.root.displayName?d(this.root.displayName):null==this.model.service?u("No service"):(a="model"+o(function(e){return"/"+e.name})(this.allDescriptors()),i=f({format:"json"})(s(this.subclasses)),this.model.service.get(a,i).then(l("display")).then(function(e){return function(n){var r;return null!=t[r=e.ident]?t[r]:t[r]=n}}(this)))),v(e,this.namePromise))},e.prototype.getChildNodes=function(){var e,t,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(t in r)e=r[t],i.push(this.append(e));return i},e.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},e.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},e.prototype.equals=function(e){return this===e||this.ident&&(null!=e?e.ident:void 0)===this.ident},e.prototype.getType=function(){var e,t;return(null!=(e=this.end)&&null!=(t=e.type)?t.replace(/java\.lang\./,""):void 0)||this.getEndClass()},e}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(e,t,n){var a,o,s,u,l,c,f,d,p;return null==n&&(n={}),l=h(e,t,n),(a=r[l])?a:(d=(t+"").split("."),p=o=e.classes[d.shift()],c=p.name,s=function(){var r,i,a,s;for(s=[],r=0,i=d.length;i>r;r++){if(f=d[r],u=(null!=o?o.fields[f]:void 0)||(null!=(a=o=e.classes[n[c]])?a.fields[f]:void 0),!u)throw new Error("Could not find "+f+" in "+o+" when parsing "+t);c+="."+f,o=e.classes[u.type||u.referencedType],s.push(u)}return s}(),r[l]=new i({root:p,model:e,descriptors:s,subclasses:n,ident:l}))},i.flushCache=function(){return r={},t={}},c.PathInfo=i}).call(this)},{"./util":67}],61:[function(e,t,n){(function(){var n;n=e("es6-promise").Promise,t.exports=n}).call(this)},{"es6-promise":75}],62:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,_,E,S,T,k,P,O,C,R,N,I,D,A,L,M,B,j,q,z,F,V,U,Y,X,H,$,W,G,K,Z,J,Q=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},ee=function(e,t){return function(){return e.apply(t,arguments)}},te=[].slice,ne={}.hasOwnProperty;i=e("backbone-events-standalone"),P=n,P.xml=e("./xml"),Y=e("./util"),s=Y.REQUIRES_VERSION,X=Y.withCB,N=Y.merge,w=Y.filter,M=Y.partition,x=Y.fold,v=Y.concatMap,T=Y.id,_=Y.get,R=Y.invoke,F=Y.querystring,E=function(e){var t;if(t=null!=(null!=e?e.toLowerCase:void 0)?o.OP_DICT[e.toLowerCase()]:null,!t)throw new Error("Illegal constraint operator: "+e);return t},t=["path","op","code"],l=t.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],a=function(e){return Y.compose(e.fetchList,_("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],y=function(e){return null==e&&(e=""),e.substr(e.indexOf("."))},p=function(e){return null!=e?"<value>"+Y.escape(e)+"</value>":"<nullValue/>"},h=function(e,t){var n,r;return function(){var i;i=[];for(n in e)r=e[n],Q.call(t,n)>=0&&i.push(""+n+'="'+Y.escape(r)+'" ');return i}().join("")},L=function(e){return"<constraint "+h(e,t)+"/>"},V=function(e){return"<constraint "+h(e,["path","type"])+"/>"},j=function(e){return"<constraint "+h(e,l)+"/>"},D=function(e){return"<constraint "+h(e,t)+">"+v(p)(e.values)+"</constraint>"},k=function(e){return"<constraint "+h(e,t)+'ids="'+e.ids.join(",")+'"/>'},f=function(e){var t;return null!=e.values?D(e):null!=e.ids?k(e):null==e.op?V(e):(t=e.op,Q.call(o.NULL_OPS,t)>=0?L(e):j(e))},S=function(e){return e.replace(/^[^\.]+\./,"")},g=function(e){var t,n,r,i,a,o,s,u,l,c,h;return o=e.path,l=e.type,a=e.op,c=e.value,h=e.values,r=e.extraValue,i=e.ids,t=e.code,n=e.editable,u=e.switched,s=e.switchable,i=null!=i?i.slice():void 0,h=null!=h?h.slice():void 0,A({path:o,type:l,op:a,value:c,values:h,extraValue:r,ids:i,code:t,editable:n,switched:u,switchable:s})},d=function(e){var t;return t=g(e),t.path=S(t.path),t},A=function(e){var t,n;for(t in e)n=e[t],null==n&&delete e[t];return e},m=function(e,t){return"Did not remove a single constraint. original = "+e+", reduced = "+t},C=function(e,t){var n,r,i,a,s,u,l;if(n={path:e},null===t)n.op="IS NULL";else if(Y.isArray(t))n.op="ONE OF",n.values=t;else if("string"==(u=typeof t)||"number"===u||"boolean"===u)l="function"==typeof t.toUpperCase?t.toUpperCase():void 0,Q.call(o.NULL_OPS,l)>=0?n.op=t:(n.op="=",n.value=t);else if(i=function(){var e;e=[];for(r in t)s=t[r],e.push(r);return e}(),Q.call(i,"isa")>=0)Y.isArray(t.isa)?(n.op=r,n.values=t.isa):n.type=t.isa;else{Q.call(i,"extraValue")>=0&&(n.extraValue=t.extraValue);for(r in t)a=t[r],"extraValue"!==r&&(n.op=r,Y.isArray(a)?n.values=a:n.value=a)}return n},O=function(e){var t,n,r,i;return e=e.slice(),n={path:e.shift()},1===e.length?(t=e[0],i="function"==typeof t.toUpperCase?t.toUpperCase():void 0,Q.call(o.NULL_OPS,i)>=0?n.op=t:n.type=t):e.length>=2&&(n.op=e[0],r=e[1],Y.isArray(r)?n.values=r:n.value=r,3===e.length&&(n.extraValue=e[2])),n},z=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(""+t.path+" "+t.direction);return i}().join(" ")},q=function(e){var t,n,r,i,a,o,s;if(null==e)return[];for(n=e.split(/\s+/),r=function(){var e,t,r;for(r=[],i=e=0,t=n.length/2;t>=0?t>e:e>t;i=t>=0?++e:--e)r.push(2*i);return r}(),s=[],a=0,o=r.length;o>a;a++)t=r[a],s.push([n[t],n[t+1]]);return s},B=function(){var e,t;return t=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],this.isRelevant(e.path)&&i.push(e);return i}.call(this),t.length!==this.sortOrder.length?this.trigger("change:sortorder change:orderby",this.sortOrder.slice()):void 0},o=function(){function e(e,t,n){var r,i,a,o,s,u,l,c,h,f,d,p,v,g,y,m;for(u=null!=n?n:{},r=u.model,a=u.summaryFields,this.addConstraint=ee(this.addConstraint,this),this.expandStar=ee(this.expandStar,this),this.adjustPath=ee(this.adjustPath,this),this.select=ee(this.select,this),null==e&&(e={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=Y.copy(null!=(l=null!=(h=e.displayNames)?h:e.aliases)?l:{}),f=["name","title","comment","description","type"],o=0,s=f.length;s>o;o++)i=f[o],null!=e[i]&&(this[i]=e[i]);this.service=null!=t?t:{},this.model=null!=(d=null!=r?r:e.model)?d:{},this.summaryFields=null!=(p=null!=a?a:e.summaryFields)?p:{},this.root=null!=(v=e.root)?v:e.from,this.maxRows=null!=(g=null!=(y=e.size)?y:e.limit)?g:e.maxRows,this.start=null!=(m=null!=(c=e.start)?c:e.offset)?m:0,this.select(e.views||e.view||e.select||[]),this.addConstraints(e.constraints||e.where||[]),this.addJoins(e.joins||e.join||[]),this.orderBy(e.sortOrder||e.orderBy||[]),null!=e.constraintLogic&&(this.constraintLogic=e.constraintLogic),this.on("change:views",B,this)}var t,n,i,o,u,l,c,p,b;return e.JOIN_STYLES=["INNER","OUTER"],e.BIO_FORMATS=["gff3","fasta","bed"],e.NULL_OPS=["IS NULL","IS NOT NULL"],e.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],e.MULTIVALUE_OPS=["ONE OF","NONE OF"],e.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],e.TERNARY_OPS=["LOOKUP"],e.LOOP_OPS=["=","!="],e.LIST_OPS=["IN","NOT IN"],e.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],c=function(e,t){var n,r,i,a;for(a=[],r=0,i=t.length;i>r;r++)n=t[r],e.hasAttribute(n)&&a.push([n,e.getAttribute(n)]);return a},i=function(e,t){var n,r,i,a,o;for(a=e.getElementsByTagName(t),o=[],r=0,i=a.length;i>r;r++)n=a[r],o.push(n);return o},b=function(e){return function(t){return t.getAttribute(e)}},e.fromXML=function(e){var t,r,a,o,s,l,h;if(r=P.xml.parse(e),l=i(r,"query")[0]||i(r,"template")[0],!l)throw new Error("no query in xml");return o=b("path"),h=b("style"),s=Y.pairsToObj(c(l,u)),s.view=s.view.split(/\s+/),s.sortOrder=q(s.sortOrder),s.joins=function(){var e,t,n,r;for(n=i(l,"join"),r=[],e=0,t=n.length;t>e;e++)a=n[e],"OUTER"===h(a)&&r.push(o(a));return r}(),s.constraints=function(){var e,r,a,o;for(a=i(l,"constraint"),o=[],e=0,r=a.length;r>e;e++)t=a[e],o.push(function(e){var t,r,a,o,s;return t=Y.pairsToObj(c(e,n)),null!=t.ids&&(t.ids=function(){var e,n,r,i;for(r=t.ids.split(","),i=[],e=0,n=r.length;n>e;e++)s=r[e],i.push(parseInt(s,10));return i}()),o=i(e,"value"),o.length&&(t.values=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)a=o[e],n.push(function(){var e,t,n,i;for(n=a.childNodes,i=[],e=0,t=n.length;t>e;e++)r=n[e],i.push(r.data);return i}().join(""));return n}()),t}(t));return o}(),s},e.prototype.constraints=[],e.prototype.views=[],e.prototype.joins={},e.prototype.constraintLogic="",e.prototype.sortOrder="",e.prototype.name=null,e.prototype.title=null,e.prototype.comment=null,e.prototype.description=null,e.prototype.removeFromSelect=function(e){var t,n,r,i;return null==e&&(e=[]),e=Y.stringList(e),t=Y.compose(this.expandStar,this.adjustPath),e=Y.flatten(function(){var n,i,a;for(a=[],n=0,i=e.length;i>n;n++)r=e[n],a.push(t(r));return a}()),this.sortOrder=function(){var t,r,i,a,o;for(i=this.sortOrder,o=[],t=0,r=i.length;r>t;t++)n=i[t],a=n.path,Q.call(e,a)>=0||o.push(n);return o}.call(this),this.views=function(){var t,n,r,a;for(r=this.views,a=[],t=0,n=r.length;n>t;t++)i=r[t],Q.call(e,i)>=0||a.push(i);return a}.call(this),this.trigger("remove:view",e),this.trigger("change:views",this.views),this.trigger("change",this.views)},e.prototype.removeConstraint=function(e,t){var n,r,i,a;if(null==t&&(t=!1),i=this.constraints,r="string"==typeof e?function(t){return t.code===e}:function(t){var n,r;return t.path===e.path&&t.op===e.op&&t.value===e.value&&t.extraValue===e.extraValue&&e.type===t.type&&(null!=(n=t.values)?n.join("%%"):void 0)===(null!=(r=e.values)?r.join("%%"):void 0)},a=function(){var e,t,a;for(a=[],e=0,t=i.length;t>e;e++)n=i[e],r(n)||a.push(n);return a}(),a.length!==i.length-1)throw new Error(m(i,a));return this.constraints=a,t?void 0:(this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",Y.find(i,r)))},e.prototype.addToSelect=function(e,t){var n,r,i,a,o,s,u,l;if(null==e&&(e=[]),null==t&&(t={}),e=Y.stringList(e),r=Y.compose(this.expandStar,this.adjustPath),a=Y.flatten(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)o=e[t],i.push(r(o));return i}()),n=function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)i=a[e],Q.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");
if(n=function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)i=a[e],function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)s=a[e],s===i&&n.push(s);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,a),t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",a),this.trigger("change")),this},e.prototype.select=function(e,t){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(e,t)}catch(i){n=i,this.views=r,Y.error(n)}return this},e.prototype.adjustPath=function(e){return e=e&&e.name?e.name:""+e,null!=this.root?e.match("^"+this.root)||(e=this.root+"."+e):this.root=e.split(".")[0],e},e.prototype.getPossiblePaths=function(e,t,n){var r,i,a,o,s;return null==e&&(e=3),null==t&&(t=!0),null==n&&(n=null),o="string"==typeof n?function(e){return e[n]()}:n,r=function(e){return function(n,i){var a,o,s,u,l,c;return l=e.getPathInfo(n),!t&&l.isReverseReference()?[]:l.isAttribute()?[l]:(a=l.getType(),c=v(function(e){return r(""+n+"."+e.name,i-1)}),u=a&&i>0?c(function(){var e,t;e=a.fields,t=[];for(s in e)o=e[s],t.push(o);return t}()):[],[l].concat(u))}}(this),i=""+e+"-"+t,null==this._possiblePaths&&(this._possiblePaths={}),a=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=r(this.root,e)).slice(),null!=o?a.filter(o):a},e.prototype.getPathInfo=function(e){var t,n,r;return t=this.adjustPath(e),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(t,this.getSubclasses()):void 0,n&&t in this.displayNames&&(n.displayName=this.displayNames[t]),n},e.prototype.makePath=e.prototype.getPathInfo,p=function(e){return[e.path,e.type]},l=Y.compose(Y.pairsToObj,Y.map(p),w(_("type"))),e.prototype.getSubclasses=function(){return l(this.constraints)},e.prototype.getType=function(e){return this.getPathInfo(e).getType()},e.prototype.getViewNodes=function(){var e,t;return t=function(e){return function(t){return e.getPathInfo(t).getParent()}}(this),Y.uniqBy(String,function(){var n,r,i,a;for(i=this.views,a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(t(e));return a}.call(this))},e.prototype.isInView=function(e){var t,n,r;if(t=this.getPathInfo(e),!t)throw new Error("Invalid path: "+e);return t.isAttribute()?(r=t.toString(),Q.call(this.views,r)>=0):(n=t.toString(),Y.any(this.getViewNodes(),function(e){return e.toString()===n}))},e.prototype.isConstrained=function(e,t){var n,r;if(null==t&&(t=!1),n=this.getPathInfo(e),!n)throw new Error("Invalid path: "+e);return r=function(e){return null!=e.op&&e.path===n.toString()},!n.isAttribute()&&t&&(r=function(e){return function(t){return null!=t.op&&(t.path===n.toString()||n.equals(e.getPathInfo(t.path).getParent()))}}(this)),Y.any(this.constraints,r)},e.prototype.canHaveMultipleValues=function(e){return this.getPathInfo(e).containsCollection()},e.prototype.getQueryNodes=function(){var e,t,n,r;return r=this.getViewNodes(),t=function(){var t,r,i,a;for(i=this.constraints,a=[],t=0,r=i.length;r>t;t++)e=i[t],null==e.type&&(n=this.getPathInfo(e.path),n.isAttribute()?a.push(n.getParent()):a.push(n));return a}.call(this),Y.uniqBy(String,r.concat(t))},e.prototype.isInQuery=function(e){var t,n,r,i,a,o;if(n=this.getPathInfo(e)){for(r=n.toPathString(),o=this.views.concat(function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;n>e;e++)t=r[e],null==t.type&&i.push(t.path);return i}.call(this)),i=0,a=o.length;a>i;i++)if(e=o[i],0===e.indexOf(r))return!0;return!1}return!0},e.prototype.isRelevant=function(e){var t,n,r;return n=this.getPathInfo(e),n.isAttribute()&&(n=n.getParent()),r=n.toString(),t=this.getViewNodes(),Y.any(t,function(e){return e.toPathString()===r})},e.prototype.expandStar=function(e){var t,n,r,i,a,o,s,u;if(/\*$/.test(e))if(s=e.substr(0,e.lastIndexOf(".")),r=function(e){return s+e},n=this.getType(s),/\.\*$/.test(e)){if(n&&this.summaryFields[n.name])return i=Y.compose(r,y),function(){var e,t,r,o;for(r=this.summaryFields[n.name],o=[],e=0,t=r.length;t>e;e++)a=r[e],this.hasView(a)||o.push(i(a));return o}.call(this)}else if(/\.\*\*$/.test(e))return u=this.expandStar(s+".*"),t=function(){var e;e=[];for(o in n.attributes)e.push(r("."+o));return e}(),Y.uniqBy(T,u.concat(t));return e},e.prototype.isOuterJoin=function(e){return"OUTER"===this.joins[this.adjustPath(e)]},e.prototype.hasView=function(e){var t;return this.views&&(t=this.adjustPath(e),Q.call(this.views,t)>=0)},e.prototype.count=function(e){if(this.service.count)return this.service.count(this,e);throw new Error("This query has no service with count functionality attached.")},e.prototype.appendToList=function(e,t){var n,r,i,o,s;return(null!=e?e.name:void 0)?(n=e.name,s=function(t,n){return null==t?e.size=n.size:void 0}):(n=String(e),s=null),o=this.makeListQuery(),i={listName:n,query:o.toXML()},r=a(this.service),X(s,t,this.service.post("query/append/tolist",i).then(r))},e.prototype.selectPreservingImpliedConstraints=function(e){var t,n,r,i,a;for(null==e&&(e=[]),n=this.clone(),n.select(e),a=this.getViewNodes(),r=0,i=a.length;i>r;r++)t=a[r],this.isOuterJoined(t)||n.isInView(t||n.isConstrained(t))||null==t.getEndClass().fields.id||n.addConstraint([t.append("id"),"IS NOT NULL"]);return n},e.prototype.makeListQuery=function(){var e,t;return e=this.views.slice(),1===e.length&&(null!=(t=e[0])?t.match(/\.id$/):void 0)||(e=["id"]),this.selectPreservingImpliedConstraints(e)},e.prototype.saveAsList=function(e,t){var n,r;return r=this.makeListQuery(),n=Y.copy(e),n.listName=n.listName||n.name,n.query=r.toXML(),e.tags&&(n.tags=e.tags.join(";")),X(t,this.service.post("query/tolist",n).then(a(this.service)))},e.prototype.summarise=function(e,t,n){return this.filterSummary(e,"",t,n)},e.prototype.summarize=function(){var e;return e=1<=arguments.length?te.call(arguments,0):[],this.summarise.apply(this,e)},o=function(e){var t,n,r,i,a,o,s;for(t=null!=(null!=(o=e.results[0])?o.max:void 0),s=e.results,i=0,a=s.length;a>i;i++)n=s[i],n.count=parseInt(n.count,10);return r={uniqueValues:e.uniqueValues,filteredCount:e.filteredCount},t&&(r=N(r,e.results[0])),e.stats=r,e},e.prototype.filterSummary=function(e,t,n,r){var i,a,s;return null==r&&(r=function(){}),Y.isFunction(n)&&(s=[n,null],r=s[0],n=s[1]),e=this.adjustPath(e),a=this.clone(),Q.call(a.views,e)<0&&a.views.push(e),i={query:a.toXML(),summaryPath:e,format:"jsonrows"},n&&(i.size=n),t&&(i.filterTerm=t),X(r,this.service.post("query/results",i).then(o))},e.prototype.clone=function(t){var n,r,i,a;if(n=new e(this,this.service),null==n._callbacks&&(n._callbacks={}),t){a=this._callbacks;for(r in a)ne.call(a,r)&&(i=a[r],n._callbacks[r]=i);n.off("change:views",B,this)}return n},e.prototype.next=function(){var e;return e=this.clone(),this.maxRows&&(e.start=this.start+this.maxRows),e},e.prototype.previous=function(){var e;return e=this.clone(),this.maxRows?e.start=this.start-this.maxRows:e.start=0,e},e.prototype.getSortDirection=function(e){var t,n;if(t=this.adjustPath(e),!this.isInQuery(t)&&!this.isRelevant(t))throw new Error(""+e+" is not in the query");return n=Y.find(this.sortOrder,function(e){var n;return n=e.path,t===n}),null!=n?n.direction:void 0},e.prototype.isOuterJoined=function(e){var t,n,r;e=this.adjustPath(e),r=this.joins;for(n in r)if(t=r[n],"OUTER"===t&&0===e.indexOf(n))return!0;return!1},e.prototype.getOuterJoin=function(e){var t,n;return e=this.adjustPath(e),t=function(){var e;e=[];for(n in this.joins)e.push(n);return e}.call(this).sort(function(e,t){return t.length-e.length}),Y.find(t,function(t){return function(n){return"OUTER"===t.joins[n]&&0===e.indexOf(n)}}(this))},e.prototype._parse_sort_order=function(e){var t,n,r,i,a,o;if(null==e)throw new Error("No input");if("string"==typeof e)i={path:e,direction:"ASC"};else if(Y.isArray(e))r=e[0],t=e[1],i={path:r,direction:t};else if(null==e.path){for(n in e)a=e[n],o=[n,a],r=o[0],t=o[1];i={path:r,direction:t}}else r=e.path,t=e.direction,i={path:r,direction:t};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},e.prototype.addOrSetSortOrder=function(e){var t,n;return e=this._parse_sort_order(e),t=this.getSortDirection(e.path),null==t?this.addSortOrder(e):t!==e.direction&&(n=Y.find(this.sortOrder,function(t){var n;return n=t.path,n===e.path}),n.direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},e.prototype.addSortOrder=function(e,t){var n;return n=(null!=t?t:{}).silent,this.sortOrder.push(this._parse_sort_order(e)),n?void 0:(this.trigger("add:sortorder",e),this.trigger("change:sortorder",this.sortOrder),this.trigger("change"))},e.prototype.orderBy=function(e,t){var n,r,i,a,o,s,u,l;for(null==t&&(t={}),a=this.sortOrder.slice(),this.sortOrder=[],s=0,u=e.length;u>s;s++)i=e[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var e,t,n,i,a;for(n=this.sortOrder,a=[],e=0,t=n.length;t>e;e++)i=n[e],o=i.path,r=i.direction,a.push({path:o,direction:r});return a}.call(this),this.trigger("set:sortorder",n),z(a)!==this.getSorting()&&(t.silent?t.events=(null!=(l=t.events)?l:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},e.prototype.addJoins=function(e){var t,n,r,i,a,o,s;if(Y.isArray(e)){for(o=[],i=0,a=e.length;a>i;i++)t=e[i],o.push(this.addJoin(t));return o}s=[];for(n in e)r=e[n],s.push(this.addJoin({path:n,style:r}));return s},e.prototype.addJoin=function(e){return"string"==typeof e&&(e={path:e,style:"OUTER"}),this.setJoinStyle(e.path,e.style)},e.prototype.setJoinStyle=function(t,n){if(null==n&&(n="OUTER"),t=this.adjustPath(t),n=n.toUpperCase(),Q.call(e.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[t]!==n&&(this.joins[t]=n,this.trigger("change:joins",{path:t,style:n}),this.trigger("change")),this},e.prototype.addConstraints=function(e,t){var n,r,i,a,o,s,u;if(null==t&&(t="and"),this.__silent__=!0,i=this.constraintLogic,Y.isArray(e))for(s=0,u=e.length;u>s;s++)n=e[s],this.addConstraint(n,t);else{o=function(e){return function(n,r){return e.addConstraint(C(n,r),t)}}(this);for(a in e)r=e[a],o(a,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},e.prototype.addConstraint=function(e,t){var n,i,a,o,s,u,l;if(null==t&&(t="and"),"and"!==t&&"or"!==t)throw new Error("Unknown logical conjunction: "+t);return e=Y.isArray(e)?O(e):g(e),"OFF"===e.switched?this:(e.path=this.adjustPath(e.path),null==e.type&&(e.op=E(e.op)),this.constraints.push(e),a="or"===t||(null!=(l=this.constraintLogic)?l.length:void 0)>0,o=this.constraints.length,u=this.constraintLogic,a&&(s=2===o?""+r[0]+" "+t+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var e,t,i;for(i=[],n=e=0,t=o-2;t>=0?t>=e:e>=t;n=t>=0?++e:--e)i.push(r[n]);return i}().join(" and ")),"("+i+") "+t+" "+r[o-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",e),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},e.prototype.getSorting=function(){return z(this.sortOrder)},e.prototype.getConstraintXML=function(){var e,t;return t=function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;n>t;t++)e=r[t],(null==e.type||this.isInQuery(e.path))&&i.push(e);return i}.call(this),t.length?v(f)(v(T)(M(function(e){return null!=e.type})(t))):""},e.prototype.getJoinXML=function(){var e,t,n;return n=function(){var n,r;n=this.joins,r=[];for(e in n)t=n[e],this.isInQuery(e)&&"OUTER"===t&&r.push('<join path="'+e+'" style="OUTER"/>');return r}.call(this),n.join("")},e.prototype.toXML=function(){var e,t,n,r;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),t=function(){var t;t=[];for(n in e)r=e[n],r&&t.push(n+'="'+r+'"');return t}().join(" "),"<query "+t+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},e.prototype.toJSON=function(){var e,t,n,r,i;return A({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var e,t,n,r;for(n=this.views,r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(S(i));return r}.call(this),orderBy:function(){var e,r,i,a,o;for(i=this.sortOrder,o=[],e=0,r=i.length;r>e;e++)a=i[e],n=a.path,t=a.direction,o.push({path:S(n),direction:t});return o}.call(this),joins:function(){var e,t;e=this.joins,t=[];for(n in e)r=e[n],"OUTER"===r&&t.push(S(n));return t}.call(this),where:function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(d(e));return i}.call(this)})},e.prototype.fetchCode=function(e,t){var n;return n={query:this.toXML(),lang:e},X(t,this.service.post("query/code",n).then(this.service.VERIFIER).then(_("code")))},e.prototype.setName=function(e){this.name=e},e.prototype.save=function(e,t){return s(this.service,16,function(n){return function(){var r,i;return Y.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},X(t,n.service.authorise(r)).then(function(e){return n.service.doReq(e)}).then(function(e){return e.queries})}}(this))},e.prototype.store=function(e,t){return s(this.service,16,function(n){return function(){var r,i,a,o;return Y.isFunction(e)&&(o=[null,e],e=o[0],t=o[1]),null!=e&&n.setName(e),a=function(e,t){return null==e?n.setName(t):void 0},r=Y.compose(_(n.name),_("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},X(t,a,n.service.authorise(i)).then(function(e){return n.service.doReq(e)}).then(r)}}(this))},e.prototype.saveAsTemplate=function(e,t){return s(this.service,16,function(n){return function(){var r,i;if(Y.isFunction(e)&&(i=[null,e],e=i[0],t=i[1]),null!=e&&n.setName(e),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+h(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},X(t,n.service.authorise(r).then(function(e){return n.service.doReq(e)}))}}(this))},e.prototype.getCodeURI=function(e){var t,n;return t={query:this.toXML(),lang:e,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(t.token=this.service.token),""+this.service.root+"query/code?"+F(t)},e.prototype.getExportURI=function(t,n){var r,i;return null==t&&(t="tab"),null==n&&(n={}),Q.call(e.BIO_FORMATS,t)>=0?this["get"+t.toUpperCase()+"URI"](n):(r=N(n,{query:this.toXML(),format:t}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+F(r))},e.prototype.needsAuthentication=function(){return Y.any(this.constraints,function(e){var t;return"NOT IN"===(t=e.op)||"IN"===t})},e.prototype.fetchQID=function(e){return X(e,this.service.post("queries",{query:this.toXML()}).then(_("id")))},t=function(e){return e.append("primaryIdentifier").toString()},e.prototype.__bio_req=function(e,n){var r,i;return i=this.makeListQuery(),r=function(t){return Y.any(e,function(e){return t.isa(e)})},i.views=Y.take(n)(function(){var e,i,a,o;for(a=this.getViewNodes(),o=[],e=0,i=a.length;i>e;e++)n=a[e],r(n)&&o.push(t(n));return o}.call(this)),{query:i.toXML(),format:"text"}},e.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},e.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},e.prototype._bed_req=e.prototype._gff3_req,e}(),U=x(function(e,t){return e.concat(t)}),o.prototype.toString=o.prototype.toXML,o.ATTRIBUTE_OPS=U([o.ATTRIBUTE_VALUE_OPS,o.MULTIVALUE_OPS,o.NULL_OPS]),o.REFERENCE_OPS=U([o.TERNARY_OPS,o.LOOP_OPS,o.LIST_OPS]),c=function(e,t){return function(n,r){var i,a,o,s,u;return null==n&&(n={}),null==r&&(r=function(){}),Y.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(e){return function(t){var n;return n=e.getPathInfo(t),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var e,t,r,i;for(r=n.view,i=[],e=0,t=r.length;t>e;e++)s=r[e],i.push(this.getPathInfo(s).toString());return i}.call(this)),a=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,o=N(a[e](),n),t.call(a,o,r)}},J=o.BIO_FORMATS,H=function(e){var t,n,r;return n="_"+e+"_req",t="get"+e.toUpperCase(),r=t+"URI",o.prototype[t]=c(n,function(t,n){return X(n,this.service.post("query/results/"+e,t))}),o.prototype[r]=c(n,function(t,n){return null!=this.service.token&&(t.token=this.service.token),""+this.service.root+"query/results/"+e+"?"+F(t)})};for(W=0,K=J.length;K>W;W++)b=J[W],H(b);for($=function(e){return function(){var t,n,r,i;if(n=arguments[0],t=2<=arguments.length?te.call(arguments,1):[],this.service[e])return null==n?n={}:Y.isFunction(n)&&(n={},t=function(){var e,t,n;for(n=[],e=0,t=arguments.length;t>e;e++)r=arguments[e],n.push(r);return n}.apply(this,arguments)),n=A(N({start:this.start,size:this.maxRows},n)),(i=this.service)[e].apply(i,[this,n].concat(te.call(t)));throw new Error("Service does not provide '"+e+"'.")}},G=0,Z=u.length;Z>G;G++)I=u[G],o.prototype[I]=$(I);i.mixin(o.prototype),o.prototype.emit=o.prototype.trigger,o.prototype.bind=o.prototype.on,P.Query=o}).call(this)},{"./util":67,"./xml":69,"backbone-events-standalone":74}],63:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,_,E,S,T,k,P,O,C,R,N,I,D,A,L,M,B,j,q,z,F,V,U,Y,X,H,$,W,G,K,Z,J,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,fe,de,pe=function(e,t){return function(){return e.apply(t,arguments)}},ve={}.hasOwnProperty,ge=[].slice;for(E=e("./promise"),m=e("./model").Model,k=e("./query").Query,v=e("./lists").List,q=e("./user").User,c=e("./id-resolution-job").IDResolutionJob,ae=e("./version"),ie=e("./util"),K=e("./http"),re=ie.querystring,oe=ie.withCB,J=ie.map,Q=ie.merge,W=ie.get,te=ie.set,Z=ie.invoke,ne=ie.success,$=ie.error,C=ie.REQUIRES_VERSION,H=ie.dejoin,z={},r={},P={},g={},D={},U={},o="http://",F="version",M="templates",O="version/release",i="classkeys",f="lists",y="model",I="summaryfields",S="query/results",T="search",Y="widgets",s="list/enrichment",X="listswithobject",d={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},R="lists/subtract",V="user/whoami",L=S+"/tablerows",_="user/preferences",x="path/values",j="user/tokens",h="ids",w={},fe=[F,O,i,Y,y,I,T,x],ue=0,ce=fe.length;ce>ue;ue++)ee=fe[ue],w[ee]=!0;for(t={},de=[V,_,d,R,X,s,M,j],le=0,he=de.length;he>le;le++)ee=de[le],t[ee]=!0;b=function(e,n){return w[e]?!1:t[e]?!0:(null!=n?n.needsAuthentication:void 0)?n.needsAuthentication():!0},u=/^https?:\/\//i,l=/service\/?$/i,N="/service/",a=function(e){var t,n;return(t=null!=(n=console.error)?n:console.log)(e)},se=function(e,t,n,r,i){var a,o,s,u,l;return s=this.root,u=this.useCache,o=null!=this[e]?this[e]:this[e]=u&&(l=t[s])?ne(l):(a={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(Q(a,{url:this.root+n})).then(function(e){return t[s]=e[r]})),oe(i,o)},G=function(e){return function(t){return new E(function(n,r){var i;return(i=ie.find(t,function(t){return t.name===e}))?n(i):r('List "'+e+'" not found among: '+t.map(W("name")))})}},p=function(e,t){return null==t&&(t="listName"),ie.compose(e.fetchList,W(t))},B=function(e){var t,n,r,i,a,o;for(null==e&&(e=[]),i=ie.isArray(e)?e:[e],o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(null!=(a=t.name)?a:t);return o},A=function(){function e(e){var t;if(this.root=e.root,this.token=e.token,this.errorHandler=e.errorHandler,this.DEBUG=e.DEBUG,this.help=e.help,t=e.noCache,this.headers=e.headers,this.connectAs=pe(this.connectAs,this),this.createList=pe(this.createList,this),this.resolveIds=pe(this.resolveIds,this),this.templateQuery=pe(this.templateQuery,this),this.savedQuery=pe(this.savedQuery,this),this.query=pe(this.query,this),this.fetchRelease=pe(this.fetchRelease,this),this.fetchClassKeys=pe(this.fetchClassKeys,this),this.fetchVersion=pe(this.fetchVersion,this),this.fetchSummaryFields=pe(this.fetchSummaryFields,this),this.fetchModel=pe(this.fetchModel,this),this.fetchWidgetMap=pe(this.fetchWidgetMap,this),this.fetchWidgets=pe(this.fetchWidgets,this),this.complement=pe(this.complement,this),this.fetchListsContaining=pe(this.fetchListsContaining,this),this.fetchList=pe(this.fetchList,this),this.findLists=pe(this.findLists,this),this.fetchLists=pe(this.fetchLists,this),this.fetchTemplates=pe(this.fetchTemplates,this),this.tableRows=pe(this.tableRows,this),this.values=pe(this.values,this),this.rows=pe(this.rows,this),this.records=pe(this.records,this),this.table=pe(this.table,this),this.pathValues=pe(this.pathValues,this),this.fetchUser=pe(this.fetchUser,this),this.whoami=pe(this.whoami,this),this.findById=pe(this.findById,this),this.count=pe(this.count,this),this.enrichment=pe(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=o+this.root),l.test(this.root)||(this.root=this.root+N),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=a),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!t,this.getFormat=function(e){return function(e){return null==e&&(e="json"),e}}(this)}var t,n,w,E,A,j;return e.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),K.doReq.apply(this,arguments)},e.prototype.post=function(e,t){return this.makeRequest("POST",e,t)},e.prototype.get=function(e,t){return this.makeRequest("GET",e,t)},e.prototype.makeRequest=function(e,t,n,r,i){var a,o,s,u,l,c,h;return null==e&&(e="GET"),null==t&&(t=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),ie.isArray(r)&&(l=r,r=l[0],o=l[1]),ie.isArray(n)&&(n=ie.pairsToObj(n)),null==o&&(o=this.errorHandler),n=ie.copy(n),a=this.getFormat(n.format),K.supports(e)||(c=[e,K.getMethod(e)],n.method=c[0],e=c[1]),s={data:n,dataType:a,success:r,error:o,path:t,type:e},null!=n.auth&&(s.auth=n.auth,delete s.data.auth),null!=n.headers&&(s.headers=ie.copy(n.headers),delete s.data.headers),(u=null!=(h=n.timeout)?h:this.timeout)&&(s.timeout=u,delete n.timeout),this.authorise(s).then(function(e){return function(t){return e.doReq(t,i)}}(this))},e.prototype.authorise=function(e){return this.fetchVersion().then(function(t){return function(n){var r,i,a;return r=ie.copy(e),null==r.headers&&(r.headers={}),r.url=t.root+r.path,i=[],14>n&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=t.token&&b(e.path,null!=(a=r.data)?a.query:void 0)&&(n>=14?r.headers.Authorization="Token "+t.token:"string"==typeof r.data?i.push(["token",t.token]):r.data.token=t.token),i.length&&(r.url+="?"+re(i)),r}}(this))},e.prototype.attachCustomHeaders=function(e){var t;return null!=this.headers?(t=ie.copy(e),t.headers=ie.merge(t.headers,this.headers),t):e},e.prototype.enrichment=function(e,t){return C(this,8,function(n){return function(){var r;return r=Q({maxp:.05,correction:"Holm-Bonferroni"},e),oe(t,n.get(s,r).then(W("results")))}}(this))},e.prototype.search=function(e,t){return null==e&&(e={}),null==t&&(t=function(){}),C(this,9,function(n){return function(){var r,i,a,o;if(ie.isFunction(e)&&(o=[e,{}],t=o[0],e=o[1]),"string"==typeof e)i={q:e};else{i={q:e.q};for(r in e)ve.call(e,r)&&(a=e[r],"q"!==r&&(i["facet_"+r]=a))}return oe(t,n.post(T,i))}}(this))},e.prototype.makePath=function(e,t,n){return null==t&&(t={}),null==n&&(n=function(){}),oe(n,this.fetchModel().then(function(n){return n.makePath(e,t)}))},e.prototype.count=function(e,t){var n,r;return null==t&&(t=function(){}),n=e?null!=e.toPathString?(ee=e.isClass()?e.append("id"):e,this.pathValues(ee,"count")):null!=e.toXML?(r={query:e,format:"jsoncount"},this.post(S,r).then(W("count"))):"string"==typeof e?this.fetchModel().then(function(t){return function(n){var r;try{return t.count(n.makePath(e))}catch(i){return r=i,t.query({select:[e]}).then(t.count)}}}(this)):this.query(e).then(this.count):$("Not enough arguments"),oe(t,n)},e.prototype.findById=function(e,t,n,r){var i,a;return null==n&&(n=["**"]),null==r&&(r=function(){}),ie.isFunction(n)&&(a=[["**"],n],n=a[0],r=a[1]),i=this.query({from:e,select:n,where:{id:t}}).then(H).then(Z("records")).then(W(0)),oe(r,i)},e.prototype.lookup=function(e,t,n,r){var i,a;return ie.isFunction(n)&&(a=[null,n],n=a[0],r=a[1]),i=this.query({from:e,select:["**"],where:[[e,"LOOKUP",t,n]]}).then(H).then(Z("records")),oe(r,i)},e.prototype.find=function(e,t,n,r){var i;return ie.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),oe(r,this.lookup(e,t,n).then(function(e){return null==e||0===e.length?$("Nothing found"):e.length>1?$("Multiple items found: "+e.slice(0,3)+"..."):ne(e[0])}))},e.prototype.whoami=function(e){return C(this,9,function(t){return function(){return oe(e,t.get(V).then(W("user")).then(function(e){return new q(t,e)}))}}(this))},e.prototype.fetchUser=function(){var e;return e=1<=arguments.length?ge.call(arguments,0):[],this.whoami.apply(this,e)},A=function(e,t){return{format:e,path:String(t),typeConstraints:JSON.stringify(t.subclasses)}},e.prototype.pathValues=function(e,t,n){return null==t&&(t={}),C(this,6,function(r){return function(){var i,a,o,s,u;return"string"==typeof t&&(s=t,t={}),ie.isFunction(t)&&(u=[n,t],t=u[0],n=u[1]),"count"!==s&&(s="results"),a="count"===s?"jsoncount":"json",o=function(){var n;try{return this.fetchModel().then(Z("makePath",e,null!=(n=e.subclasses)?n:t)).then(function(e){return A(a,e)}).then(function(e){return function(t){return e.post(x,t)}}(this)).then(W(s))}catch(r){return i=r,$(i)}}.call(r),oe(n,o)}}(this))},e.prototype.doPagedRequest=function(e,t,n,r,i){var a,o;return null==n&&(n={}),null==i&&(i=function(){}),null!=e.toXML?(ie.isFunction(n)&&(o=[n,{}],i=o[0],n=o[1]),a=Q(n,{query:e,format:r}),oe(i,this.post(t,a).then(W("results")))):this.query(e).then(function(e){return function(a){return e.doPagedRequest(a,t,n,r,i)}}(this))},e.prototype.table=function(e,t,n){return this.doPagedRequest(e,S,t,"jsontable",n)},e.prototype.records=function(e,t,n){return this.doPagedRequest(e,S,t,"jsonobjects",n)},e.prototype.rows=function(e,t,n){return this.doPagedRequest(e,S,t,"json",n)},e.prototype.values=function(e,t,n){var r,i;return ie.isFunction(t)&&(i=[t,n],n=i[0],t=i[1]),r=null==e?$("No query term supplied"):null!=e.descriptors||"string"==typeof e?this.pathValues(e,t).then(J(W("value"))):null!=e.toXML?1!==e.views.length?$("Expected one column, got "+e.views.length):this.rows(e,t).then(J(W(0))):this.query(e).then(function(e){return function(n){return e.values(n,t)}}(this)),oe(n,r)},e.prototype.tableRows=function(e,t,n){return this.doPagedRequest(e,L,t,"json",n)},e.prototype.fetchTemplates=function(e){return oe(e,this.get(M).then(W("templates")))},e.prototype.fetchLists=function(e){return this.findLists("",e)},e.prototype.findLists=function(e,t){return null==e&&(e=""),null==t&&(t=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return oe(t,e&&13>r?$("Finding lists by name on the server requires version 13. This is only "+r):(i=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;i>r;r++)t=e[r],a.push(new v(t,n));return a},n.get(f,{name:e}).then(W("lists")).then(i)))}}(this))},e.prototype.fetchList=function(e,t){return this.fetchVersion().then(function(n){return function(r){return oe(t,13>r?n.findLists().then(G(e)):n.findLists(e).then(W(0)))}}(this))},e.prototype.fetchListsContaining=function(e,t){var n;return n=function(e){return function(t){var n,r,i,a;for(a=[],r=0,i=t.length;i>r;r++)n=t[r],a.push(new v(n,e));return a}}(this),oe(t,this.get(X,e).then(W("lists")).then(n))},e.prototype.combineLists=function(e,t,n){var r,i,a,o,s,u;return u=Q({lists:[],tags:[]},t),a=u.name,i=u.lists,s=u.tags,r=u.description,o={name:a,description:r},null==o.description&&(o.description=""+e+" of "+i.join(", ")),o.tags=s.join(";"),o.lists=i.join(";"),oe(n,this.get(d[e],o).then(p(this)))},e.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(ge.call(arguments)))},e.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(ge.call(arguments)))},e.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(ge.call(arguments)))},e.prototype.complement=function(e,t){var n,r,i,a,o,s,u,l,c;return null==e&&(e={}),null==t&&(t=function(){}),a=e.from,i=e.exclude,s=e.name,r=e.description,c=e.tags,n=function(){return"Relative complement of "+o.join(" and ")+" in "+u.join(" and ")},u=B(a),o=B(i),null==s&&(s=n()),null==r&&(r=n()),null==c&&(c=[]),l={name:s,description:r,tags:c,lists:o,references:u},oe(t,this.post(R,l).then(p(this)))},e.prototype.fetchWidgets=function(e){return C(this,8,function(t){return function(){return se.call(t,"widgets",U,Y,"widgets",e)}}(this))},j=ie.omap(function(e){return[e.name,e]}),e.prototype.fetchWidgetMap=function(e){return C(this,8,function(t){return function(){return oe(e,null!=t.__wmap__?t.__wmap__:t.__wmap__=t.fetchWidgets().then(j))}}(this))},e.prototype.fetchModel=function(e){var t;return t=se.call(this,"model",g,y,"model").then(m.load).then(te({service:this})),oe(e,t)},e.prototype.fetchSummaryFields=function(e){return se.call(this,"summaryFields",D,I,"classes",e)},e.prototype.fetchVersion=function(e){return se.call(this,"version",z,F,"version",e)},e.prototype.fetchClassKeys=function(e){return se.call(this,"classkeys",r,i,"classes",e)},e.prototype.fetchRelease=function(e){return se.call(this,"release",P,O,"version",e)},e.prototype.query=function(e,t){var n;return n=function(t){return function(n){var r,i;return r=n[0],i=n[1],new k(e,t,{model:r,summaryFields:i})}}(this),oe(t,ie.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},E=function(e,t){return function(n){return n?e.query(n):$("No query found called "+t)}},n=function(e){return e?"string"==typeof e?ne():$("Name must be a string"):$("Name not provided")},e.prototype.savedQuery=function(e,t){return C(this,16,function(r){return function(){return n(e).then(function(){return oe(t,r.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(E(r,e)))})}}(this))},e.prototype.templateQuery=function(e,t){return n(e).then(function(n){return function(){return oe(t,n.fetchTemplates().then(W(e)).then(te("type","TEMPLATE")).then(E(n,e)))}}(this))},e.prototype.manageUserPreferences=function(e,t,n){return C(this,11,function(r){return function(){return oe(n,r.makeRequest(e,_,t).then(W("preferences")))}}(this))},e.prototype.resolveIds=function(e,t){return C(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+h,contentType:"application/json",data:JSON.stringify(e),dataType:"json"},oe(t,n.doReq(r).then(W("uid")).then(c.create(n)))}}(this))},e.prototype.resolutionJob=function(e){return c.create(this)(e)},e.prototype.createList=function(e,t,n){var r,i;return null==e&&(e={}),null==t&&(t=""),null==n&&(n=function(){}),r=function(t){return function(n){return Q(n,{token:t.token,tags:e.tags||[]})}}(this),i={data:ie.isArray(t)?t.map(function(e){return'"'+e+'"'}).join("\n"):t,dataType:"json",url:""+this.root+"lists?"+re(r(e)),type:"POST",contentType:"text/plain"},oe(n,this.doReq(i).then(p(this)))},w=function(e){return e.user.temporaryToken},e.prototype.connectAs=function(t){return e.connect(Q(this,{token:t,noCache:!this.useCache}))},e.prototype.register=function(e,t,n){return C(this,9,function(r){return function(){return oe(n,r.post("users",{name:e,password:t}).then(w).then(r.connectAs))}}(this))},t=300,e.prototype.getDeregistrationToken=function(e,n){return null==e&&(e=t),C(this,16,function(t){return function(){var r;return r=null!=t.token?t.post("user/deregistration",{validity:e}).then(W("token")):$("Not registered"),oe(n,r)}}(this))},e.prototype.deregister=function(e,t){return C(this,16,function(n){return function(){return oe(t,n.makeRequest("DELETE","user",{deregistrationToken:e,format:"xml"}))}}(this))},e.prototype.login=function(e,t,n){return C(this,9,function(r){return function(){var i;return i=""+e+":"+t,
oe(n,r.logout().then(function(e){return e.get("user/token",{auth:i})})).then(W("token")).then(r.connectAs)}}(this))},e.prototype.logout=function(e){return oe(e,ne(this.connectAs()))},e}(),A.prototype.rowByRow=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=K.iterReq("POST",S,"json"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.rowByRow.apply(t,[n].concat(ge.call(e)))}}(this))},A.prototype.eachRow=A.prototype.rowByRow,A.prototype.recordByRecord=function(){var e,t,n;return n=arguments[0],e=2<=arguments.length?ge.call(arguments,1):[],t=K.iterReq("POST",S,"jsonobjects"),null!=n.toXML?t.apply(this,arguments):this.query(n).then(function(t){return function(n){return t.recordByRecord.apply(t,[n].concat(ge.call(e)))}}(this))},A.prototype.eachRecord=A.prototype.recordByRecord,A.prototype.union=A.prototype.merge,A.prototype.difference=A.prototype.diff,A.prototype.symmetricDifference=A.prototype.diff,A.prototype.relativeComplement=A.prototype.complement,A.prototype.subtract=A.prototype.complement,A.flushCaches=function(){return g={},z={},P={},r={},D={},U={}},A.connect=function(e){if(null==(null!=e?e.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(e));return new A(e)},n.Service=A,n.Model=m,n.Query=k,n.utils=ie,n.VERSION=ae.VERSION,n.imjs=ae}).call(this)},{"./http":56,"./id-resolution-job":57,"./lists":58,"./model":59,"./promise":61,"./query":62,"./user":66,"./util":67,"./version":68}],64:[function(e,t,n){(function(e){(function(){var t;n.DOMParser=null!=e.DOMParser?e.DOMParser:t=function(){function e(){throw new Error("DOMParser is not available")}return e}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(e,t,n){(function(){var t,r,i,a=function(e,t){return function(){return e.apply(t,arguments)}};r=function(e,t){var n,r,i;i=[];for(n in e)r=e[n],i.push(t[n]=r);return i},t=e("./promise"),i=["attributes","references","collections"],n.Table=function(){function e(e,t){var n,o,s,u,l,c,h;for(this.model=t,this.getDisplayName=a(this.getDisplayName,this),this.name=e.name,this.tags=e.tags,this.displayName=e.displayName,this.attributes=e.attributes,this.references=e.references,this.collections=e.collections,this.fields={},this.__parents__=null!=(c=e["extends"])?c:[],u=0,l=i.length;l>u;u++){if(o=i[u],null==this[o])throw new Error("Bad model data: missing "+o);r(this[o],this.fields)}h=this.collections;for(s in h)n=h[s],n.isCollection=!0}return e.prototype.toString=function(){var e,t;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(e in n)t=n[e],r.push(e);return r}.call(this)+"]]"},e.prototype.parents=function(){var e;return(null!=(e=this.__parents__)?e:[]).slice()},e.prototype.getDisplayName=function(){return new t(function(e){return function(t,n){return null!=e.model?t(e.model.makePath(e.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},e}()}).call(this)},{"./promise":61}],66:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l=function(e,t){return function(){return e.apply(t,arguments)}};u=e("./util"),s=u.withCB,a=u.get,o=u.isFunction,t=u.any,i=u.error,r=function(e,t,n,r){return e.service.manageUserPreferences(n,t,r).then(function(t){return e.preferences=t})},n.User=function(){function e(e,t){this.service=e,this.username=t.username,this.preferences=t.preferences,this.refresh=l(this.refresh,this),this.clearPreferences=l(this.clearPreferences,this),this.clearPreference=l(this.clearPreference,this),this.setPreferences=l(this.setPreferences,this),this.setPreference=l(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return e.prototype.setPreference=function(e,t,n){var r,a;if(o(t)&&(a=[null,t],t=a[0],n=a[1]),"string"==typeof e)r={},r[e]=t;else{if(null!=t)return s(n,i("Incorrect arguments to setPreference"));r=e}return this.setPreferences(r,n)},e.prototype.setPreferences=function(e,t){return r(this,e,"POST",t)},e.prototype.clearPreference=function(e,t){return r(this,{key:e},"DELETE",t)},e.prototype.clearPreferences=function(e){return r(this,{},"DELETE",e)},e.prototype.refresh=function(e){return r(this,{},"GET",e)},e.prototype.createToken=function(e,n,r){var i,u;return null==e&&(e="day"),null==r&&t([e,n],o)&&(o(e)?(i=[null,null,e],e=i[0],n=i[1],r=i[2]):o(n)&&(u=[null,n],n=u[0],r=u[1])),s(r,this.service.post("user/tokens",{type:e,message:n}).then(a("token")))},e.prototype.fetchCurrentTokens=function(e){return s(e,this.service.get("user/tokens").then(a("tokens")))},e.prototype.revokeAllTokens=function(e){return s(e,this.service.makeRequest("DELETE","user/tokens"))},e.prototype.revokeToken=function(e,t){return s(t,this.service.makeRequest("DELETE","user/tokens/"+e))},e}()}).call(this)},{"./util":67}],67:[function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,h,f,d,p,v,g,y,m,b,w,x,_=[].slice,E=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},S={}.hasOwnProperty;t=e("./promise"),m=n,m.defer=function(){var e;return e={},e.promise=new t(function(t,n){return e.resolve=t,e.reject=n}),e},o=function(e){return encodeURIComponent(String(e))},y=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(t.map(o).join("="));return i}().join("&")},m.querystring=function(e){var t,n,r,i,a,o;if(!e)return"";if(p(e))r=e.slice();else{r=[];for(t in e)o=e[t],p(o)?(i=function(){var e,n,r;for(r=[],e=0,n=o.length;n>e;e++)a=o[e],r.push([t,a]);return r}(),r=r.concat(i)):r.push([t,o])}return y(function(){var e,t,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],null!=n[1]&&i.push(n);return i}())},m.curry=a=function(){var e,t;return t=arguments[0],e=2<=arguments.length?_.call(arguments,1):[],function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],t.apply(null,e.concat(n))}},m.error=u=function(e){return new t(function(t,n){return n(new Error(e))})},m.success=b=function(e){return new t(function(t,n){return t(e)})},m.parallel=function(){var e;return e=1<=arguments.length?_.call(arguments,0):[],1===e.length&&!e[0].then&&e[0].length?t.all(e[0]):t.all(e)},m.withCB=function(){var e,t,n,r,i,o,s,u;for(t=2<=arguments.length?_.call(arguments,0,o=arguments.length-1):(o=0,[]),i=arguments[o++],s=0,u=t.length;u>s;s++)e=t[s],null!=e&&(r=a(e,null),n=e,i.then(r,n));return i},m.fold=c=function(e){return function(t,n){var r,i,a;if(1===arguments.length&&(n=(null!=t?t.slice():void 0)||t,t=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(e,t);i=t;for(r in n)a=n[r],i=null!=i?e(i,r,a):{k:a};return i}},m.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},m.filter=function(e){return function(t){var n,r,i,a;for(a=[],r=0,i=t.length;i>r;r++)n=t[r],e(n)&&a.push(n);return a}},m.uniqBy=function(e,t){var n,r,i,o,s,u;if(1===arguments.length)return a(m.uniqBy,e);if(r=[],i=[],null==t)return i;for(s=0,u=t.length;u>s;s++)o=t[s],n=e(o),E.call(r,n)<0&&(r.push(n),i.push(o));return i},m.find=function(e,t){var n,r,i;if(1===arguments.length)return t=e,function(e){return m.find(e,t)};for(r=0,i=e.length;i>r;r++)if(n=e[r],t(n))return n;return null},p=null!=(x=Array.isArray)?x:function(e){return null!=(null!=e?e.splice:void 0)&&null!=(null!=e?e.push:void 0)&&null!=(null!=e?e.pop:void 0)&&null!=(null!=e?e.slice:void 0)},m.isArray=p,m.isFunction="function"!=typeof/./?function(e){return"function"==typeof e}:function(e){return null!=e&&null!=e.call&&null!=e.apply&&"[object Function]"===e.toString()},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(e){var t,n,r,i,a,o;if(null==e)return"";for(i=String(e).replace(/[&<>"']/g,function(e){return s[e]}),r=[],n=a=0,o=i.length;o>=0?o>=a:a>=o;n=o>=0?++a:--a)t=i.charCodeAt(n),t>256?r.push("&#"+t+";"):r.push(i.charAt(n));return r.join("")},m.omap=function(e){var t;return t=c(function(t,n,r){var i,a,o;return o=e(n,r),i=o[0],a=o[1],p(a)&&(a=a.slice()),t[i]=a,t}),function(e){return t({},e)}},m.copy=m.omap(function(e,t){return[e,t]}),m.partition=function(e){return function(t){var n;return(n=c(function(t,n){var r,i;return i=t[0],r=t[1],e(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],t)}},m.merge=function(e,t){return extend(extend({},e),t)},m.extend=function(e,t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},m.id=h=function(e){return e},m.concatMap=function(e){return function(t){var n,r,i,a,o;for(r=void 0,a=0,o=t.length;o>a;a++)i=t[a],n=e(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):v(r,n);return r}},m.map=function(e){return f("map",e)},i=c(function(e,t){return function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],e(t.apply(null,n))}}),m.compose=function(){var e;return e=1<=arguments.length?_.call(arguments,0):[],i(e)},m.flatMap=m.concatMap,m.difference=function(e,t){var n,r,i,a;for(a=[],r=0,i=e.length;i>r;r++)n=e[r],E.call(t,n)<0&&a.push(n);return a},m.stringList=function(e){return"string"==typeof e?[e]:e},m.flatten=l=function(){var e,t,n,r,i,a,o,s,u;for(n=1<=arguments.length?_.call(arguments,0):[],e=[],i=0,o=n.length;o>i;i++)if(t=n[i],p(t))for(u=l.apply(null,t),a=0,s=u.length;s>a;a++)r=u[a],e.push(r);else e.push(t);return e},m.sum=m.concatMap(h),m.merge=v=function(){var e,t,n,r,i,a,o;for(r=1<=arguments.length?_.call(arguments,0):[],t={},a=0,o=r.length;o>a;a++){n=r[a];for(e in n)S.call(n,e)&&(i=n[e],t[e]=i)}return t},m.any=function(e,t){var n,r,i;for(null==t&&(t=h),r=0,i=e.length;i>r;r++)if(n=e[r],t(n))return!0;return!1},m.invoke=f=function(){var e,t;return t=arguments[0],e=2<=arguments.length?_.call(arguments,1):[],d(t,e)},m.invokeWith=d=function(e,t,n){return null==t&&(t=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+e+'" of null');if(r[e])return r[e].apply(n||r,t);throw new Error('Cannot call undefined method "'+e+" of "+r)}},m.get=function(e){return function(t){return t[e]}},m.set=function(e,t){return function(n){var r,i;if(2===arguments.length)n[e]=t;else for(r in e)S.call(e,r)&&(i=e[r],n[r]=i);return n}},r=function(e,t){return"This service requires a service at version "+e+" or above. This one is at "+t},m.REQUIRES_VERSION=function(e,t,n){return e.fetchVersion().then(function(e){return e>=t?n():u(r(t,e))})},m.dejoin=function(e){var t,n,r,i,a;for(a=e.views,r=0,i=a.length;i>r;r++)n=a[r],t=n.split("."),t.length>2&&e.addJoin(t.slice(1,-1).join("."));return e},w=c(function(e,t){return e.then(t)}),m.sequence=function(){var e;return e=1<=arguments.length?_.call(arguments,0):[],w(b(),e)},g=c(function(e,t){var n,r;if(n=t[0],r=t[1],null!=e[n])throw new Error("Duplicate key: "+n);return e[n]=r,e}),m.pairsToObj=function(e){return g({},e)}}).call(this)},{"./promise":61}],68:[function(e,t,n){(function(){n.VERSION="3.15.0"}).call(this)},{}],69:[function(e,t,n){(function(){var t,r;t=e("xmldom").DOMParser,r=function(e){return e=e.replace(/^\s*/g,""),e=e.replace(/\s$/g,""),0===e.length?e:">"!==e[e.length-1]?e+">":e},n.parse=function(e){var n,i;if("string"!=typeof e)throw new Error("Expected a string - got "+e);if(e=r(e),!e)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new t,i.parseFromString(e,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}}).call(this)},{xmldom:64}],70:[function(e,t,n){(function(r,i){function a(e,t){return"string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e?e:"function"==typeof e?e(t):!1}var o=e("jsonparse"),s=e("through");n.parse=function(e,t){var n=new o,r=s(function(e){"string"==typeof e&&(e=new i(e)),n.write(e)},function(e){e&&r.write(e),r.queue(null)});"string"==typeof e&&(e=e.split(".").map(function(e){return"*"===e?!0:""===e?{recurse:!0}:e}));var u=0;return e&&e.length||(e=null),n.onValue=function(n){if(this.root||(r.root=n),e){for(var i=0,o=0;i<e.length;){var s,l=e[i];if(o++,l&&!l.recurse){if(s=o===this.stack.length?this:this.stack[o],!s)return;if(!a(l,s.key))return;i++}else{i++;var c=e[i];if(!c)return;for(;;){if(s=o===this.stack.length?this:this.stack[o],!s)return;if(a(c,s.key)){i++;break}o++}}}if(o===this.stack.length){u++;var h=this.stack.slice(1).map(function(e){return e.key}).concat([this.key]),f=this.value[this.key];null!=f&&null!=(f=t?t(f,h):f)&&r.queue(f),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(t,i){n._onToken(t,i),0===this.stack.length&&r.root&&(e||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(e){r.emit("error",e)},r},n.stringify=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="[\n",t="\n,\n",n="\n]\n");var i,a=!0,o=!1;return i=s(function(n){o=!0;var s=JSON.stringify(n,null,r);a?(a=!1,i.queue(e+s)):i.queue(t+s)},function(t){o||i.queue(e),i.queue(n),i.queue(null)})},n.stringifyObject=function(e,t,n,r){r=r||0,e===!1?(e="",t="\n",n=""):null==e&&(e="{\n",t="\n,\n",n="\n}\n");var i=!0,a=!1;return stream=s(function(n){a=!0;var o=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(e+o)):this.queue(t+o)},function(t){a||this.queue(e),this.queue(n),this.queue(null)}),stream},t.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,e("_process"),e("buffer").Buffer)},{_process:23,buffer:15,jsonparse:71,through:72}],71:[function(e,t,n){(function(e){function n(e){for(var t=Object.keys(i),n=0,r=t.length;r>n;n++){var a=t[n];if(i[a]===e)return a}return e&&"0x"+e.toString(16)}function r(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=F,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new e(2),3:new e(3),4:new e(4)}}var i={},a=i.LEFT_BRACE=1,o=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,l=i.COLON=5,c=i.COMMA=6,h=i.TRUE=7,f=i.FALSE=8,d=i.NULL=9,p=i.STRING=10,v=i.NUMBER=11,g=i.START=17,y=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,x=i.FALSE2=50,_=i.FALSE3=51,E=i.FALSE4=52,S=i.NULL1=65,T=i.NULL3=66,k=i.NULL2=67,P=i.NUMBER1=81,O=i.NUMBER2=82,C=i.NUMBER3=83,R=i.NUMBER4=84,N=i.NUMBER5=85,I=i.NUMBER6=86,D=i.NUMBER7=87,A=i.NUMBER8=88,L=i.STRING1=97,M=i.STRING2=98,B=i.STRING3=99,j=i.STRING4=100,q=i.STRING5=101,z=i.STRING6=102,F=i.VALUE=113,V=i.KEY=114,U=i.OBJECT=129,Y=i.ARRAY=130,X=r.prototype;X.charError=function(e,t){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+n(this.tState)))},X.onError=function(e){throw e},X.write=function(t){"string"==typeof t&&(t=new e(t));for(var n,r=0,i=t.length;i>r;r++)if(this.tState===g)n=t[r],123===n?this.onToken(a,"{"):125===n?this.onToken(o,"}"):91===n?this.onToken(s,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(l,":"):44===n?this.onToken(c,","):116===n?this.tState=y:102===n?this.tState=w:110===n?this.tState=S:34===n?(this.string="",this.tState=L):45===n?(this.negative=!0,this.tState=P):48===n?(this.magnatude=0,this.tState=O):n>48&&64>n?(this.magnatude=n-48,this.tState=C):32===n||9===n||10===n||13===n||this.charError(t,r);else if(this.tState===L)if(n=t[r],this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=t[F];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+F-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&223>=n&&(this.bytes_in_sequence=2),n>=224&&239>=n&&(this.bytes_in_sequence=3),n>=240&&244>=n&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var V=0;V<=t.length-1-r;V++)this.temp_buffs[this.bytes_in_sequence][V]=t[r+V];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.string+=t.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=g,this.onToken(p,this.string),this.string=void 0):92===n?this.tState=M:n>=32?this.string+=String.fromCharCode(n):this.charError(t,r);else this.tState===M?(n=t[r],34===n?(this.string+='"',this.tState=L):92===n?(this.string+="\\",this.tState=L):47===n?(this.string+="/",this.tState=L):98===n?(this.string+="\b",this.tState=L):102===n?(this.string+="\f",this.tState=L):110===n?(this.string+="\n",this.tState=L):114===n?(this.string+="\r",this.tState=L):116===n?(this.string+="	",this.tState=L):117===n?(this.unicode="",this.tState=B):this.charError(t,r)):this.tState===B||this.tState===j||this.tState===q||this.tState===z?(n=t[r],n>=48&&64>n||n>64&&70>=n||n>96&&102>=n?(this.unicode+=String.fromCharCode(n),this.tState++===z&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=L)):this.charError(t,r)):this.tState===P?(n=t[r],48===n?(this.magnatude=0,this.tState=O):n>48&&64>n?(this.magnatude=n-48,this.tState=C):this.charError(t,r)):this.tState===O?(n=t[r],46===n?(this.position=.1,this.tState=R):101===n||69===n?(this.exponent=0,this.tState=I):(this.tState=g,this.onToken(v,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===C?(n=t[r],46===n?(this.position=.1,this.tState=R):101===n||69===n?(this.exponent=0,this.tState=I):n>=48&&64>n?this.magnatude=10*this.magnatude+n-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===R?(n=t[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=N):this.charError(t,r)):this.tState===N?(n=t[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=I):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(v,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===I?(n=t[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=D):n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=A):this.charError(t,r)):this.tState===D?(n=t[r],n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=A):this.charError(t,r)):this.tState===A?(n=t[r],n>=48&&64>n?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(v,this.magnatude),this.magnatude=void 0,r--)):this.tState===y?114===t[r]?this.tState=m:this.charError(t,r):this.tState===m?117===t[r]?this.tState=b:this.charError(t,r):this.tState===b?101===t[r]?(this.tState=g,this.onToken(h,!0)):this.charError(t,r):this.tState===w?97===t[r]?this.tState=x:this.charError(t,r):this.tState===x?108===t[r]?this.tState=_:this.charError(t,r):this.tState===_?115===t[r]?this.tState=E:this.charError(t,r):this.tState===E?101===t[r]?(this.tState=g,this.onToken(f,!1)):this.charError(t,r):this.tState===S?117===t[r]?this.tState=T:this.charError(t,r):this.tState===T?108===t[r]?this.tState=k:this.charError(t,r):this.tState===k&&(108===t[r]?(this.tState=g,this.onToken(d,null)):this.charError(t,r))},X.onToken=function(e,t){},X.parseError=function(e,t){this.onError(new Error("Unexpected "+n(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+n(this.state)))},X.onError=function(e){throw e},X.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},X.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=F)},X.emit=function(e){this.mode&&(this.state=c),this.onValue(e)},X.onValue=function(e){},X.onToken=function(e,t){this.state===F?e===p||e===v||e===h||e===f||e===d?(this.value&&(this.value[this.key]=t),this.emit(t)):e===a?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=V,this.mode=U):e===s?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=Y,this.state=F):e===o?this.mode===U?this.pop():this.parseError(e,t):e===u&&this.mode===Y?this.pop():this.parseError(e,t):this.state===V?e===p?(this.key=t,this.state=l):e===o?this.pop():this.parseError(e,t):this.state===l?e===l?this.state=F:this.parseError(e,t):this.state===c?e===c?this.mode===Y?(this.key++,this.state=F):this.mode===U&&(this.state=V):e===u&&this.mode===Y||e===o&&this.mode===U?this.pop():this.parseError(e,t):this.parseError(e,t)},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:15}],72:[function(e,t,n){(function(r){function i(e,t,n){function i(){for(;l.length&&!h.paused;){var e=l.shift();if(null===e)return h.emit("end");h.emit("data",e)}}function o(){h.writable=!1,t.call(h),!h.readable&&h.autoDestroy&&h.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,u=!1,l=[],c=!1,h=new a;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&n.autoDestroy===!1),h.write=function(t){return e.call(this,t),!h.paused},h.queue=h.push=function(e){return c?h:(null===e&&(c=!0),l.push(e),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(e){return s?void 0:(s=!0,arguments.length&&h.write(e),o(),h)},h.destroy=function(){return u?void 0:(u=!0,s=!0,l.length=0,h.writable=h.readable=!1,h.emit("close"),h)},h.pause=function(){return h.paused?void 0:(h.paused=!0,h)},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var a=e("stream");n=t.exports=i,i.through=i}).call(this,e("_process"))},{_process:23,stream:41}],73:[function(e,t,n){!function(){function e(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++u+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;i>r;r++)t.call(n,e[r],r,e);else for(var o in e)this.has(e,o)&&t.call(n,e[o],o,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var r,i=this,a=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u=0,l=e();r={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!h(this,"once",e,[t,n])||!t)return this;var r=this,i=l.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,a,o,s,u,c,f;if(!this._events||!h(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:l.keys(this._events),s=0,u=o.length;u>s;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=r=[],t||n)for(c=0,f=a.length;f>c;c++)i=a[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&f(n,t),r&&f(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var a in r)r[a].off(t,n,this),i&&delete this._listeners[a];return this}};var c=/\s+/,h=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var a=n.split(c),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(r));return!1}return!0},f=function(e,t){var n,r=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};l.each(d,function(e,t){r[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=l.uniqueId("l"));return i[a]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):i.BackboneEvents=r}(this)},{}],74:[function(e,t,n){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":73}],75:[function(e,t,n){(function(n,r){(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){X=e}function u(e){G=e}function l(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(p)}}function c(){return function(){Y(p)}}function h(){var e=0,t=new J(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function f(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(p,1)}}function p(){for(var e=0;W>e;e+=2){var t=te[e],n=te[e+1];t(n),te[e]=void 0,te[e+1]=void 0}W=0}function v(){try{var t=e,n=t("vertx");return Y=n.runOnLoop||n.runOnContext,c()}catch(r){return d()}}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ae.error=t,ae}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function x(e,t,n){G(function(e){var r=!1,i=w(n,t,function(n){r||(r=!0,t!==n?S(e,n):k(e,n))},function(t){r||(r=!0,P(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,P(e,i))},e)}function _(e,t){t._state===re?k(e,t._result):t._state===ie?P(e,t._result):O(t,void 0,function(t){S(e,t)},function(t){P(e,t)})}function E(e,t){if(t.constructor===e.constructor)_(e,t);else{var n=b(t);n===ae?P(e,ae.error):void 0===n?k(e,t):a(n)?x(e,t,n):k(e,t)}}function S(e,t){e===t?P(e,y()):i(t)?E(e,t):k(e,t)}function T(e){e._onerror&&e._onerror(e._result),C(e)}function k(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&G(C,e))}function P(e,t){e._state===ne&&(e._state=ie,e._result=t,G(T,e))}function O(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+re]=n,i[a+ie]=r,0===a&&e._state&&G(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?I(n,r,i,a):i(a);e._subscribers.length=0}}function R(){this.error=null}function N(e,t){try{return e(t)}catch(n){return oe.error=n,oe}}function I(e,t,n,r){var i,o,s,u,l=a(n);if(l){if(i=N(n,r),i===oe?(u=!0,o=i.error,i=null):s=!0,t===i)return void P(t,m())}else i=r,s=!0;t._state!==ne||(l&&s?S(t,i):u?P(t,o):e===re?k(t,i):e===ie&&P(t,i))}function D(e,t){try{t(function(t){S(e,t)},function(t){P(e,t)})}catch(n){P(e,n)}}function A(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(g),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?k(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&k(n.promise,n._result))):P(n.promise,n._validationError())}function L(e){return new se(this,e).promise}function M(e){function t(e){S(i,e)}function n(e){P(i,e)}var r=this,i=new r(g);if(!$(e))return P(i,new TypeError("You must pass an array to race.")),i;for(var a=e.length,o=0;i._state===ne&&a>o;o++)O(r.resolve(e[o]),void 0,t,n);return i}function B(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return S(n,e),n}function j(e){var t=this,n=new t(g);return P(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this._id=fe++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==e&&(a(e)||q(),this instanceof F||z(),D(this,e))}function V(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=de)}var U;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,X,H,$=U,W=0,G=({}.toString,function(e,t){te[W]=e,te[W+1]=t,W+=2,2===W&&(X?X(p):H())}),K="undefined"!=typeof window?window:void 0,Z=K||{},J=Z.MutationObserver||Z.WebKitMutationObserver,Q="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);H=Q?l():J?h():ee?f():void 0===K&&"function"==typeof e?v():d();var ne=void 0,re=1,ie=2,ae=new R,oe=new R;A.prototype._validateInput=function(e){return $(e)},A.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},A.prototype._init=function(){this._result=new Array(this.length)};var se=A;A.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===ne&&t>i;i++)e._eachEntry(r[i],i)},A.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;o(e)?e.constructor===r&&e._state!==ne?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},A.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===ne&&(r._remaining--,e===ie?P(i,n):r._result[t]=n),0===r._remaining&&k(i,r._result)},A.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){n._settledAt(re,t,e)},function(e){n._settledAt(ie,t,e)})};var ue=L,le=M,ce=B,he=j,fe=0,de=F;F.all=ue,F.race=le,F.resolve=ce,F.reject=he,F._setScheduler=s,F._setAsap=u,F._asap=G,F.prototype={constructor:F,then:function(e,t){var n=this,r=n._state;if(r===re&&!e||r===ie&&!t)return this;var i=new this.constructor(g),a=n._result;if(r){var o=arguments[r-1];G(function(){I(r,i,o,a)})}else O(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var pe=V,ve={Promise:de,polyfill:pe};"function"==typeof define&&define.amd?define(function(){return ve}):"undefined"!=typeof t&&t.exports?t.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),pe()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:23}],76:[function(e,t,n){(function(){function e(e){function t(t,n,r,i,a,o){for(;a>=0&&o>a;a+=e){var s=i?i[a]:a;r=n(r,t[s],s,t)}return r}return function(n,r,i,a){r=x(r,a,4);var o=!O(n)&&w.keys(n),s=(o||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[o?o[u]:u],u+=e),t(n,r,i,o,u,s)}}function r(e){return function(t,n,r){n=_(n,r);for(var i=P(t),a=e>0?0:i-1;a>=0&&i>a;a+=e)if(n(t[a],a,t))return a;return-1}}function i(e,t,n){return function(r,i,a){var o=0,s=P(r);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(r,i),r[a]===i?a:-1;
if(i!==i)return a=t(f.call(r,o,s),w.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&s>a;a+=e)if(r[a]===i)return a;return-1}}function a(e,t){var n=D.length,r=e.constructor,i=w.isFunction(r)&&r.prototype||l,a="constructor";for(w.has(e,a)&&!w.contains(t,a)&&t.push(a);n--;)a=D[n],a in e&&e[a]!==i[a]&&!w.contains(t,a)&&t.push(a)}var o=this,s=o._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,f=u.slice,d=l.toString,p=l.hasOwnProperty,v=Array.isArray,g=Object.keys,y=c.bind,m=Object.create,b=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=w),n._=w):o._=w,w.VERSION="1.8.3";var x=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return null==e?w.identity:w.isFunction(e)?x(e,t,n):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return _(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;s>u;u++){var l=o[u];t&&void 0!==n[l]||(n[l]=a[l])}return n}},S=function(e){if(!w.isObject(e))return{};if(m)return m(e);b.prototype=e;var t=new b;return b.prototype=null,t},T=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,P=T("length"),O=function(e){var t=P(e);return"number"==typeof t&&t>=0&&k>=t};w.each=w.forEach=function(e,t,n){t=x(t,n);var r,i;if(O(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var a=w.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},w.map=w.collect=function(e,t,n){t=_(t,n);for(var r=!O(e)&&w.keys(e),i=(r||e).length,a=Array(i),o=0;i>o;o++){var s=r?r[o]:o;a[o]=t(e[s],s,e)}return a},w.reduce=w.foldl=w.inject=e(1),w.reduceRight=w.foldr=e(-1),w.find=w.detect=function(e,t,n){var r;return r=O(e)?w.findIndex(e,t,n):w.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},w.filter=w.select=function(e,t,n){var r=[];return t=_(t,n),w.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},w.reject=function(e,t,n){return w.filter(e,w.negate(_(t)),n)},w.every=w.all=function(e,t,n){t=_(t,n);for(var r=!O(e)&&w.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(!t(e[o],o,e))return!1}return!0},w.some=w.any=function(e,t,n){t=_(t,n);for(var r=!O(e)&&w.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(t(e[o],o,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,n,r){return O(e)||(e=w.values(e)),("number"!=typeof n||r)&&(n=0),w.indexOf(e,t,n)>=0},w.invoke=function(e,t){var n=f.call(arguments,2),r=w.isFunction(t);return w.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,n){var r,i,a=-(1/0),o=-(1/0);if(null==t&&null!=e){e=O(e)?e:w.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>a&&(a=r)}else t=_(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-(1/0)&&a===-(1/0))&&(a=e,o=i)});return a},w.min=function(e,t,n){var r,i,a=1/0,o=1/0;if(null==t&&null!=e){e=O(e)?e:w.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],a>r&&(a=r)}else t=_(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(o>i||i===1/0&&a===1/0)&&(a=e,o=i)});return a},w.shuffle=function(e){for(var t,n=O(e)?e:w.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=w.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},w.sample=function(e,t,n){return null==t||n?(O(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,n){return t=_(t,n),w.pluck(w.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,r){var i={};return n=_(n,r),w.each(t,function(r,a){var o=n(r,a,t);e(i,r,o)}),i}};w.groupBy=C(function(e,t,n){w.has(e,n)?e[n].push(t):e[n]=[t]}),w.indexBy=C(function(e,t,n){e[n]=t}),w.countBy=C(function(e,t,n){w.has(e,n)?e[n]++:e[n]=1}),w.toArray=function(e){return e?w.isArray(e)?f.call(e):O(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:O(e)?e.length:w.keys(e).length},w.partition=function(e,t,n){t=_(t,n);var r=[],i=[];return w.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},w.first=w.head=w.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,n){return f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},w.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var R=function(e,t,n,r){for(var i=[],a=0,o=r||0,s=P(e);s>o;o++){var u=e[o];if(O(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=R(u,t,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[a++]=u[l++]}else n||(i[a++]=u)}return i};w.flatten=function(e,t){return R(e,t,!1)},w.without=function(e){return w.difference(e,f.call(arguments,1))},w.uniq=w.unique=function(e,t,n,r){w.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=_(n,r));for(var i=[],a=[],o=0,s=P(e);s>o;o++){var u=e[o],l=n?n(u,o,e):u;t?(o&&a===l||i.push(u),a=l):n?w.contains(a,l)||(a.push(l),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(R(arguments,!0,!0))},w.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=P(e);i>r;r++){var a=e[r];if(!w.contains(t,a)){for(var o=1;n>o&&w.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},w.difference=function(e){var t=R(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,P).length||0,n=Array(t),r=0;t>r;r++)n[r]=w.pluck(e,r);return n},w.object=function(e,t){for(var n={},r=0,i=P(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(e,t,n,r){n=_(n,r,1);for(var i=n(t),a=0,o=P(e);o>a;){var s=Math.floor((a+o)/2);n(e[s])<i?a=s+1:o=s}return a},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var N=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=S(e.prototype),o=e.apply(a,i);return w.isObject(o)?o:a};w.bind=function(e,t){if(y&&e.bind===y)return y.apply(e,f.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),r=function(){return N(e,r,t,this,n.concat(f.call(arguments)))};return r},w.partial=function(e){var t=f.call(arguments,1),n=function(){for(var r=0,i=t.length,a=Array(i),o=0;i>o;o++)a[o]=t[o]===w?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return N(e,n,this,this,a)};return n},w.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=w.bind(e[n],e);return e},w.memoize=function(e,t){var n=function(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return w.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},w.delay=function(e,t){var n=f.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:w.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var l=w.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c||c>t?(o&&(clearTimeout(o),o=null),s=l,a=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,c)),a}},w.debounce=function(e,t,n){var r,i,a,o,s,u=function(){var l=w.now()-o;t>l&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=w.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},w.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},w.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},w.once=w.partial(w.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)w.has(e,n)&&t.push(n);return I&&a(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&a(e,t),t},w.values=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},w.mapObject=function(e,t,n){t=_(t,n);for(var r,i=w.keys(e),a=i.length,o={},s=0;a>s;s++)r=i[s],o[r]=t(e[r],r,e);return o},w.pairs=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},w.invert=function(e){for(var t={},n=w.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=E(w.allKeys),w.extendOwn=w.assign=E(w.keys),w.findKey=function(e,t,n){t=_(t,n);for(var r,i=w.keys(e),a=0,o=i.length;o>a;a++)if(r=i[a],t(e[r],r,e))return r},w.pick=function(e,t,n){var r,i,a={},o=e;if(null==o)return a;w.isFunction(t)?(i=w.allKeys(o),r=x(t,n)):(i=R(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=o[l];r(c,l,o)&&(a[l]=c)}return a},w.omit=function(e,t,n){if(w.isFunction(t))t=w.negate(t);else{var r=w.map(R(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(r,t)}}return w.pick(e,t,n)},w.defaults=E(w.allKeys,!0),w.create=function(e,t){var n=S(e);return t&&w.extendOwn(n,t),n},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var n=w.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;r>a;a++){var o=n[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var A=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!A(e[u],t[u],n,r))return!1}else{var l,c=w.keys(e);if(u=c.length,w.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(t,l)||!A(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(e,t){return A(e,t)},w.isEmpty=function(e){return null==e?!0:O(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=v||function(e){return"[object Array]"===d.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&p.call(e,t)},w.noConflict=function(){return o._=s,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=T,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,n){var r=Array(Math.max(0,e));t=x(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=w.invert(L),B=function(e){var t=function(t){return e[t]},n="(?:"+w.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};w.escape=B(L),w.unescape=B(M),w.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),w.isFunction(r)?r.call(e):r};var j=0;w.uniqueId=function(e){var t=++j+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,V=function(e){return"\\"+z[e]};w.template=function(e,t,n){!t&&n&&(t=n),t=w.defaults({},t,w.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,s){return a+=e.slice(i,s).replace(F,V),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,w)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},w.chain=function(e){var t=w(e);return t._chain=!0,t};var U=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),U(this,n.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],U(this,n)}}),w.each(["concat","join","slice"],function(e){var t=u[e];w.prototype[e]=function(){return U(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}],77:[function(e,t,n){t.exports='<body>\n  <div class="graph">\n    <div class="cy">\n      <div class="status loader"></div>\n    </div>\n    <div class="controls">\n      <div class="interactionFilter">\n        <div>Show the following interaction types:</div>\n        <div>\n          <button class="genetic">Genetic</button><button class="default selected">All</button><button class="physical">Physical</button>\n        </div>\n      </div>\n      <div class="secondaryControls">\n        <div class="reset">Reset&nbsp;view</div>\n        <div class="showTable">Show in table format</div>\n        <div class="export">Export&nbsp;graph\n          <div class="exportValues">\n            <select>\n              <option value="png">PNG</option>\n              <option value="jpg">JPG</option>\n              <option value="tsv">TSV</option>\n              <option value="csv" selected>CSV</option>\n            </select>\n            <button>Go!</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="nodeDetails">\n    <h2 class="nodeTitle"></h2>\n    <dl class="nodeInfo intro">\n      <dt class="intro">Click on a gene to get more info about it.</dt>\n    </dl>\n  </div>\n  <div class="tableView firstRun disabled"></div>\n</body>\n'},{}],78:[function(e,t,n){t.exports='<dl class="child">\n  <dt>Type</dt>\n  <dd class="cym-type">{{=type}}</dd>\n  <dt>Roles</dt>\n  <dd class="roles">\n    <dl>\n      <dt>{{=roles[0]}}</dt>\n      <dd>{{=role1}}</dd>\n      <dt>{{=roles[1]}}</dt>\n      <dd>{{=role2}}</dd>\n    </dl>\n  </dd>\n  <dt>Data set</dt>\n  <dd class="dataSets child">{{=dataSets.name}}</dd>\n</dl>\n'},{}]},{},[6])(6)});