<!doctype html>
<html>
  <head>
    <title>Cytoscape Intermine</title>
    <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    +  To show the export table button, ensure that imtables is available in
    +  the DOM before this script is loaded. The 'show in table' button
    +  will automatically appear.
    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
    <script src="http://cdn.intermine.org/js/intermine/im-tables/2.0.0-beta/imtables.js" charset="UTF-8"></script>
    <link rel="stylesheet" href="http://cdn.intermine.org/js/intermine/im-tables/2.0.0-beta/main.sandboxed.css">
    <link href="dist/style.css" rel="stylesheet" type="text/css">
    <script src="dist/bundle.js"></script>
  </head>
  <body>
    <!-- This form is for demo purposes only, and not required to run the script -->
    <form id="searchForm" name="searchForm">
        <input type="text" id="searchOn" name="searchOn" placeholder="Search for another gene"></input>
        <button>Search!</button>
    </form>
    <!-- End demo form -->

    <div id="myAwesomeElement"></div> <!--this is where the graph will display. -->
    <div id="cymine"></div>           <!--this is where the graph would display if we didn't specify that myAwesomeElement is the parentElem -->

  <script>
  cymine({
    //optional. Will default to '#cymine' if not specified:
    parentElem : document.getElementById('myAwesomeElement'),
    //required. can't query without this! :) must be a valid
    //intermine API URL
    service : {root : 'http://beta.flymine.org/beta/service/'},
    //required. needs value : "whatever", optionally extraValue : "whatever".
    queryOn : {
      "value": "lolal",
      "extraValue": "D. melanogaster"
    }
  });

  //EVERYTHING BELOW THIS LINE IS COMPLETELY OPTIONAL. IT JUST CREATES THE
  //GENE SEARCH BOX, FOR DEMO PURPOSES:
  var search = document.getElementById('searchForm');
  search.addEventListener('submit', function(e) {
    e.preventDefault(); //don't be silly, we don't need to reload the page
    var searchOn = e.target.searchOn.value;
    //remove any crazy stuff from the input before we send it
    searchOn = searchOn.replace(/[^\w_]/g,"");

    cymine({
      parentElem : document.getElementById('myAwesomeElement'),
      service : {root : 'http://beta.flymine.org/beta/service/'},
      queryOn : {
        "value": searchOn,
        "extraValue": "D. melanogaster"
      }
    });
  });
  </script>

  <style>
    #searchForm {
      text-align:center;
      padding:1em;
    }
    #searchOn, #searchForm button {
      border-radius:4px;
      padding:0.5em;
      border:solid 1px #ccc;
    }

    #myAwesomeElement {
      min-height:470px;
      box-sizing:border-box;
    }

  </style>

</body>
</html>
